/* [@grammarly-license] license information can be found in https://denali-static.grammarly.com/licenses.txt */(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"++u8":function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){let t;!function(e){e.collapseButtonClick="collapseButtonClick"}(t=e.Type||(e.Type={}))}(n||(n={}))},"+5S2":function(e,t,a){"use strict";var n={};a.r(n),a.d(n,"getNormalizedPosition",(function(){return g})),a.d(n,"getPositionInViewport",(function(){return f})),a.d(n,"isAboveViewportTop",(function(){return b})),a.d(n,"willFitViewport",(function(){return y})),a.d(n,"getCardPadding",(function(){return C})),a.d(n,"ContentOffset",(function(){return v})),a.d(n,"InfinityScrollGetter",(function(){return S})),a.d(n,"Mover",(function(){return w}));var i={};a.r(i),a.d(i,"CARDS_BEYOND_VIEWPORT",(function(){return T})),a.d(i,"CARDS_AROUND_ACTIVE",(function(){return x})),a.d(i,"CARD_VISIBILITY_DEFAULT_SETTING",(function(){return I})),a.d(i,"manageCardsVisibility",(function(){return M})),a.d(i,"freezeActiveCardOnCardsListUpdate",(function(){return j}));var r={};a.r(r),a.d(r,"getScrollObserver",(function(){return N})),a.d(r,"getPlaceholderState",(function(){return P})),a.d(r,"getAssistantHeight",(function(){return F})),a.d(r,"getCardsViewportState",(function(){return D})),a.d(r,"getCardsRect",(function(){return R}));var s=a("OA+g"),o=a("I7vG"),l=a("lrqh"),c=a("6fbX"),d=a("zR/0"),p=a("BeBM"),u=a("NW9S"),m=a("NbEL"),h=a("EjiM");const g=(e,t)=>a=>{const n=u.a.FromViewportTop.ISO.unwrap(e),i=u.a.FromViewportTop.ISO.unwrap(a),r=n-i;return u.a.FromViewportTop.ISO.wrap(r<-t.top?n+t.top:r>t.bottom?n-t.bottom:i)},f=(e,t,a)=>n=>{const i=Object(h.b)({cardTop:n,cardHeight:e.positionState.height,viewportHeight:a.height,padding:t});return u.a.FromViewportTop.ISO.modify(u.a.concatC(-i))(n)},b=e=>t=>u.b.FromWindowTop.ISO.modify(u.a.concatC(e.scrollTop.get()+e.paddingTop.get()))(t)<e.viewport.get().top,y=(e,t)=>(a,n)=>{const i=new m.b.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return Object(o.pipe)(e.currentLens.items,e=>Object(o.pipe)(e.get(a),l.g.map(({value:e})=>0===Object(h.b)({cardTop:i.converters.windowToViewport(n),cardHeight:e.positionState.height,viewportHeight:i.viewport.height,padding:{before:0,after:0}}))),l.g.unsafeGet)},C=(e,t)=>Object(o.pipe)(t.get(e),l.g.map(({index:e})=>({before:Object(o.pipe)(t.getAt(e-1),l.g.map(e=>e.positionState.height),l.g.getOrElse(()=>0)),after:Object(o.pipe)(t.getAt(e+1),l.g.map(e=>e.positionState.height),l.g.getOrElse(()=>0))})),l.g.getOrElse(()=>({before:0,after:0})));var v,S,E,w;!function(e){e.CARD_CONTENT_OFFSET_REM=3.4,e.WITH_LABEL_CARD_CONTENT_OFFSET_REM=e.CARD_CONTENT_OFFSET_REM+1,e.contentOffsetGetter=(t=e.CARD_CONTENT_OFFSET_REM,a=e.WITH_LABEL_CARD_CONTENT_OFFSET_REM)=>(e,n)=>Math.round((e?a:t)*n)}(v||(v={})),(E=S||(S={})).cardPositionGetter=(e,t)=>(a,n)=>{const i=new m.b.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return l.b.tryCatchError(()=>Object(o.pipe)(e.view(p.e.getLens).get(),l.g.chain(({items:e})=>Object(o.pipe)(e.get(a),l.g.map(({value:e})=>Object(o.pipe)(n,l.g.fold(()=>Object(s.flow)(u.a.AbsTop.ISO.wrap,i.converters.absTopToViewportTop,i.converters.viewportToWindow)(e.positionState.absTop),s.identity))))),l.g.unsafeGet))},E.cardPositionInViewportGetter=(e,t)=>(a,n)=>{const i=new m.b.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return Object(o.pipe)(e.view(p.e.getLens).get(),l.b.fromOption(()=>new Error("Current lens is not WithItemsLensState")),l.b.chain(({items:e,id:t})=>Object(o.pipe)(e.get(a),l.b.fromOption(()=>new Error(`The item with id: ${a} does not exist in lens ${t}`)),l.b.chain(({value:t})=>Object(o.pipe)(n,l.g.map(i.converters.windowToViewport),l.g.alt(()=>l.g.some(Object(s.flow)(u.a.AbsTop.ISO.wrap,i.converters.absTopToViewportTop)(t.positionState.absTop))),l.g.map(f(t,C(a,e),i.viewport)),l.g.map(i.converters.viewportToWindow),l.b.fromOption(()=>new Error("Cannot get card position in viewport")))))))},function(e){const t=(e,t,a,n)=>{const i=n.viewport.get(),r=n.scrollTop.get(),s=u.a.converters(r,u.b.FromWindowTop.ISO.unwrap(i.top),n.paddingTop.get());return l.b.tryCatchError(()=>Object(o.pipe)(p.e.getLens(a),l.g.chain(t=>t.items.get(e)),l.g.map(e=>u.a.AbsTop.ISO.wrap(e.value.positionState.absTop)),l.g.map(e=>s.absTopToViewportTop(e)),l.g.fold(()=>{throw new c.b("Cannot get offset for unknown card")},e=>{const a=s.windowToViewport(t);return u.a.FromViewportTop.ISO.unwrap(e)-u.a.FromViewportTop.ISO.unwrap(a)})))};e.moveCardToPositionSyncGetter=(e,a)=>n=>Object(o.pipe)(t(n.id,n.position,e.get(),a),l.b.chain(e=>a.moveCardsBy(e,"moveCardToPositionAnimated"))),e.moveCardToPositionAnimatedGetter=(e,a)=>n=>Object(o.pipe)(t(n.id,n.position,e.get(),a),l.b.fold(e=>d.a.throwError(e),e=>a.moveCardsByAnimated(e,"moveCardToPositionAnimated")))}(w||(w={}));var k=a("GUi3"),_=a("+w1e"),O=a("TC4P"),A=a("gy42");const T=5,x=100,I={cardsBeyondViewport:T,cardsAroundActive:x},M=(e,t,a,n,i=I,r=A.b.Scheduler.rafScheduler)=>{const s=e=>!e.positionState.visible&&O.a.isAnimatable(e)&&e.visualState.incomplete?(n.next({type:_.a.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId}),a.completeTransition(e.visualState.transitionId)(e)):e,o=e.pipe(d.a.map(p.e.mapper(({currentLens:e,alertSource:t})=>l.g.some({currentLens:e,alertSource:t})))),c=Object(h.f)(a)(o,t.viewport,t.scrollTop,t.paddingTop,r).pipe(d.a.map(({viewport:e,scrollTop:t,paddingTop:a})=>({viewport:e,scrollTop:t,paddingTop:a,completeTransition:s})),d.a.map(Object(h.e)({cardsBeyondViewport:i.cardsBeyondViewport,cardsAroundActive:i.cardsAroundActive,changePosition:a})));return{id:"manageCardsVisibility",when:k.a.isWithAlertsId,what:p.e.Effect.Applicator.create(c)}},j=(e,t,a)=>{const n=Object(o.pipe)(e,d.a.map(p.e.mapper(({currentLens:e,alertSource:t})=>l.g.some({currentLens:e,alertSource:t}))),Object(h.a)(a),d.a.switchMap(A.b.Scheduler.rafScheduler),d.a.filter(e=>0!==e),d.a.tap(e=>t.moveCardsBy(e,"freezeActiveCardOnCardsListUpdate")));return{id:"freezeActiveCardOnCardsListUpdate",when:k.a.isWithAlertsId,what:p.e.Effect.Applicator.create(d.a.mergeStatic(d.a.mergeStatic(n).pipe(d.a.switchMapTo(d.a.NEVER))))}};var L=a("D9EC");const N=e=>A.b.toBooleanWithDebounce(e.scrollTop.pipe(d.a.skip(1)),100,!0).pipe(d.a.startWith(!1),d.a.shareReplay({bufferSize:1,refCount:!0})),P=(e,t)=>{const a=N(t),n=e.view(p.e.mapper(({currentLens:e,alertSource:t})=>l.g.some({currentLens:e,alertSource:t})));return d.a.combineLatestStatic(d.a.combineLatestStatic(a,n.pipe(d.a.map(l.g.forAll(({currentLens:e})=>Object(o.pipe)(p.j.getActiveItem(e),l.g.forAll(e=>!O.a.isAnimatable(e)||!e.visualState.incomplete&&!e.positionState.animationInProgress))))),L.a).pipe(d.a.distinctUntilChanged()),n.pipe(d.a.filter(l.g.forAll(e=>e.currentLens.isCardsHeightValid)),d.a.map(l.g.map(({currentLens:e})=>{const t=e.cardsHeight;return Object(o.pipe)(p.j.getActiveItem(e),l.g.map(({positionState:e})=>[{top:0,height:e.absTop},{top:e.absTop+e.height,height:t-(e.absTop+e.height)}]),l.g.getOrElse(()=>[{top:0,height:t},{top:0,height:0}]))})),d.a.distinctUntilChanged(l.g.getEq(m.c.eqDimensionsTuple).equals)),(e,t)=>e?t:l.g.none).pipe(d.a.startWith(l.g.none),d.a.shareReplay({bufferSize:1,refCount:!0}))},F=(e,t,a)=>{return Object(h.d)(a)(e.view(p.e.mapper(({currentLens:e,alertSource:t})=>l.g.some({currentLens:e,alertSource:t})))).pipe(d.b.compact,d.a.map(({currentLens:e})=>e.cardsHeight),d.a.startWith(0),d.a.combineLatest(t.paddingTop,t.viewport,(e,t,a)=>e+t+u.b.FromWindowTop.ISO.unwrap(a.top)))},D=(e,t,a)=>{return Object(h.d)(a)(e.view(p.e.mapper(({currentLens:e,alertSource:t})=>l.g.some({currentLens:e,alertSource:t})))).pipe(d.a.switchMap(l.g.fold(()=>d.a.of(m.a.hidden),e=>e.currentLens.items.size>0?d.a.combineLatestStatic(t.scrollTop,t.viewport,t.paddingTop).pipe(d.a.map(([t,a,n])=>{const i=u.a.converters(t,u.b.FromWindowTop.ISO.unwrap(a.top),n),r=e.currentLens.items,c=Object(o.pipe)(r.getAt(0),l.g.map(e=>Object(o.pipe)(e.positionState.absTop,Object(s.flow)(u.a.AbsTop.ISO.wrap,i.absTopToViewportTop))),l.g.unsafeGet),d=l.g.unsafeGet(r.getAt(r.size-1)),p=u.a.AbsTop.ISO.wrap(d.positionState.absTop),h=d.positionState.height,g=i.absTopToViewportTop(p);return u.a.FromViewportTop.ISO.unwrap(g)+h<0?m.a.above:u.a.FromViewportTop.ISO.unwrap(c)>a.height?m.a.below:m.a.hidden})):d.a.of(m.a.hidden))),d.a.distinctUntilChanged(),d.a.debounce(e=>e===m.a.hidden?d.a.EMPTY:d.a.timer(300)),d.a.shareReplay({bufferSize:1,refCount:!0}))},R=(e,t)=>{const a=new m.b.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return Object(o.pipe)(e.view(p.e.getLens).get(),l.g.chain(({items:e,cardsHeight:t})=>Object(o.pipe)(e.getAt(0),l.g.map(e=>{const n=Object(s.flow)(u.a.AbsTop.ISO.wrap,a.converters.absTopToViewportTop,a.converters.viewportToWindow)(e.positionState.absTop);return{top:n,bottom:u.b.FromWindowTop.ISO.modify(u.a.concatC(t))(n)}}))))};a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return i}))},"+LKT":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("ERkP"),r=a("vOOZ"),s=a("1w6p"),o=a("8uad"),l=a("0A/6"),c=a("zR/0");!function(e){e.Card=e=>s.b.Node.make(({view:t})=>{const a=t("view");return i.createElement(r.a.Fragment,null,a.pipe(c.a.distinctUntilChanged((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type),c.a.map(n=>i.createElement(l.a.Card,{miniCard:i.createElement(o.a.Mini,{card:a,actions:e}),fullCard:i.createElement(o.a.Full,{card:a,actions:e}),successCard:i.createElement(o.a.Success,{isLastCard:t("isLastCard"),actions:e}),feedbackForm:i.createElement(o.a.FeedbackForm,{cardData:n,actions:e}),actions:e,card:n,mutedCard:i.createElement(o.a.MutedAlert,{cardData:n,actions:e})}))))})}(n||(n={}))},"+Zgs":function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"c",(function(){return h})),a.d(t,"b",(function(){return g}));var n=a("93Qa"),i=a("OA+g"),r=a("I7vG"),s=a("lrqh"),o=a("hoSD"),l=a("1w6p"),c=a("UEGg"),d=a("C7EH"),p=a("gy42"),u=a("zR/0");const m=(e,t)=>l.a.composeKnot({title:S(e),root:v(e,t),suggestions:C(e,t),controls:f(e,t)}),h=(e,t)=>l.a.composeKnot({root:l.a.fromSideEffect(e=>{t.next(e)},void 0),title:S(e)}),g=e=>l.a.animatingFlow(()=>p.b.toObservable(Object(r.pipe)(e,s.g.fromPredicate(c.a.isBulkApplied),s.g.map(i.constVoid))),(e,t)=>Object(r.pipe)(t,s.g.fold(()=>s.g.some(s.m.left("invisible")),()=>Object(r.pipe)(e,s.g.chain(i.identity),s.g.fold(()=>s.g.some(s.m.right("visible")),()=>s.g.none))))),f=(e,t)=>l.a.composeKnot({apply:b(e,t),dismiss:y(e,t)}),b=(e,t)=>l.a.composeKnot({root:l.a.fromSideEffect(e=>{t.next(e)},e),content:E(l.a.fromSideEffect(i.constVoid,e.pipe(u.a.map(s.g.some))))}),y=(e,t)=>l.a.fromSideEffect(e=>{t.next(e.action)},e),C=(e,t)=>l.a.fromSideEffect(e=>{t.next(e.action)},e.pipe(u.a.map(o.e.pick("alerts")))),v=(e,t)=>l.a.fromSideEffect(e=>{t.next(e)},e),S=e=>E(l.a.fromSideEffect(i.constVoid,e.pipe(u.a.map(s.g.some)))),E=e=>l.a.animatingFlow(e,(e,t)=>Object(r.pipe)(Object(i.tuple)(Object(r.pipe)(e,s.g.chain(i.identity)),t),Object(i.tupled)(n.sequenceT(s.g.option)),s.g.filter(([e,t])=>d.a.isInAppliedState(e)!==d.a.isInAppliedState(t)),s.g.map(()=>s.m.both("fadeOut","fadeIn"))))},"+dDf":function(e,t,a){"use strict";var n,i=a("GRZr"),r=a("u/VI"),s=a("OA+g"),o=a("I7vG"),l=a("+LKT"),c=a("RNks"),d=a("Q4mH"),p=a("ERkP"),u=a("vOOZ"),m=a("1w6p"),h=a("+Zgs"),g=a("MD/T"),f=a("0A/6"),b=a("zR/0");(n||(n={})).Card=e=>m.b.Node.make(({view:t})=>{const a=t("view"),n=Object(h.c)(a,e),i=Object(h.a)(a,e);return p.createElement(u.a.Fragment,null,a.pipe(b.a.distinctUntilChanged((e,t)=>e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type),b.a.map(t=>p.createElement(f.a.Card,{miniCard:m.b.mount(g.b,n),fullCard:m.b.mount(g.a,i),actions:e,card:t}))))});var y,C=a("D9EC"),v=a("6gXa"),S=a("AK7F"),E=a("3hQ2"),w=a("97ZK");!function(e){e.Toggle=m.b.Node.make(({view:e,notify:t})=>p.createElement(u.a.Fragment,null,e("view").pipe(b.a.map(e=>{const n=S.a.isCollapsed(e);return p.createElement(p.Fragment,null,!S.a.isHidden(e)&&p.createElement("div",{className:a.moreBtnContainer},p.createElement(w.b,{collapsed:n,onClick:t({kind:E.a.Event.Kind.toggleNonPriorityCards,nextState:n?E.a.Event.ToggleNonPriorityCards.NextState.expanded:E.a.Event.ToggleNonPriorityCards.NextState.collapsed})})))})))),e.Hint=m.b.Node.make(({view:e})=>p.createElement(u.a.Fragment,null,e("view").pipe(b.a.map(S.b.isVisible),b.a.map(Object(C.c)(p.createElement(w.a,null),null)))));const t={display:"flex",height:v.a.rem(3),alignItems:"center",justifyContent:"center"},a=v.a.stylesheet({moreBtnContainer:[t]})}(y||(y={}));var k=a("YfIO"),_=a("iEw6"),O=a("+w1e"),A=a("IdhR"),T=a("yZqL"),x=a("HUX/"),I=a("lrqh"),M=a("rk+4"),j=a("nnns"),L=a("tZ26"),N=a("BugA"),P=a("aIes"),F=a("xdtP"),D=a("uO+M"),R=a("WIwS"),B=a("ps/9");const H={display:"block",color:D.Color.CoreNeutral90,fontWeight:"bold"},W={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},$={display:"block",color:D.Color.CoreBlue50,fontWeight:"normal"},V={color:R.m},U={color:R.m},G={color:D.Color.CoreCyan50,fontWeight:"bold",fontSize:v.a.rem(.9375)},z={marginTop:v.a.rem(.3),color:D.Color.CoreNeutral90},q={position:"relative",marginLeft:v.a.rem(-.5)},Y={position:"absolute",top:0,left:0,display:"flex",margin:`${v.a.rem(.5625)} 0 0 ${v.a.rem(.4375)}`,color:R.m,pointerEvents:"none"},X={display:"block",padding:`${v.a.rem(1.4375)} 0 0 ${v.a.rem(.4375)}`,borderRadius:v.a.rem(B.s),backgroundColor:R.h,transitionDuration:v.a.seconds(0),$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:R.i}}},K={display:"flex",color:D.Color.CoreBlue50,pointerEvents:"all",alignItems:"center"},Z={minWidth:v.a.rem(1),minHeight:v.a.rem(1),stroke:D.Color.CoreBlue50},Q={width:v.a.percent(100),pointerEvents:"all"},J={color:D.Color.CoreBlue50,textDecoration:"none"},ee={position:"absolute",right:0,bottom:0,marginLeft:v.a.rem(.5)},te={$nest:{"& i":{color:R.l}}},ae=v.a.stylesheet({plagiarismTitle:[H],plagiarismTitleContent:[W],titleUrl:[W,$],titleBy:[V],plagiarismP2:[U],percent:[G],textToCopy:[W,z],referenceWrapper:[q],referenceData:[Y],copyableReference:[X],citationStyleSelect:[K],citationStyleIcon:[Z],citationStyleDdlButton:[Q],descriptionLink:[J],expandBtn:[ee],more:[te]}),ne=e=>P.d.setInnerHTML(e,{allowedTags:["b","i","br"]}),ie=({card:e})=>{const t=p.useContext(M.a.Context);return p.createElement(N.Base,{className:ae.plagiarismP2},t.plagiarism.percentileDescription(p.createElement("span",{className:ae.percent},e.meta.percentile,"%")))},re=({title:e,url:t})=>p.createElement(N.Paper,{className:ae.plagiarismTitle},p.createElement("div",Object.assign({className:ae.plagiarismTitleContent},ne(e))),Object(o.pipe)(t,I.g.map(e=>p.createElement(j.a,{name:"url-button",href:e,target:"_blank",rel:"noopener noreferrer",styleType:N.Typography.Type.Base,className:ae.titleUrl},e)),I.g.toNullable)),se=({title:e,authors:t})=>p.createElement(N.Paper,{className:ae.plagiarismTitle},p.createElement("div",Object.assign({className:ae.plagiarismTitleContent},ne(e))),Object(o.pipe)(t,I.g.map(e=>p.createElement(N.Base,{className:ae.plagiarismTitleContent}," ",p.createElement("span",{className:ae.titleBy},"by")," ",p.createElement("span",Object.assign({},ne(e))))),I.g.toNullable)),oe=({alert:e})=>"publication"===e.plagiarismType.source?p.createElement(se,{title:e.title,authors:e.plagiarismType.authors}):p.createElement(re,{title:e.title,url:e.plagiarismType.url}),le=()=>{const e=p.useContext(M.a.Context);return p.createElement(N.Base,null,e.plagiarism.cardDescription(Object(F.a)(ae.descriptionLink)))},ce=({card:e,dismissActions:t})=>{const a=p.useContext(M.a.Context),n=e.alerts.map(e=>e.id);return p.createElement(j.a.Ghost,{name:"ignore",title:a.dismiss,onClick:P.d.callOnce(()=>t.next({type:O.c.Kind.dismissBatch,alerts:n}))},p.createElement(L.d.Ignore,null))},de=({visualState:e})=>p.createElement(A.b,{visualState:e,className:ae.more},p.createElement(le,null));var pe=a("0PmZ");const ue=({card:e,actions:t})=>p.createElement(pe.a,{onLeftClick:()=>t.next({type:O.b.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:e},direction:"left"}),onRightClick:()=>t.next({type:O.b.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:e},direction:"right"}),currentMatch:e.activeAlertIndex,totalMatch:e.alerts.length,style:{}});var me=a("LNSM"),he=a("hoSD"),ge=a("eihE"),fe=a("dgw0");const be=({textToCopy:e,children:t})=>p.createElement(ge.a.Context.Consumer,null,a=>p.createElement(j.a.Flat,{key:"copy_title",name:"copy_title",title:"Click to copy",className:ae.copyableReference,onClick:()=>a(e,"referenceCopied")},t,p.createElement("div",Object.assign({className:ae.textToCopy},(e=>P.d.setInnerHTML(e,{allowedTags:["b","i","br"]}))(e))))),ye={mla:"MLA",apa:"APA",chicago:"Chicago"},Ce=he.e.keys(ye);class ve extends p.Component{static _renderPublication(e){const t=me.a.create("mla");return p.createElement(u.a.div,{key:"publication",className:ae.referenceWrapper},t.view(a=>p.createElement(p.Fragment,null,p.createElement(be,{key:"rf1"+a,textToCopy:e.citationStyle[a]}),p.createElement(N.Small,{className:ae.referenceData},p.createElement(M.a.Context.Consumer,null,({plagiarism:e})=>e.publicationReferenceDescription(p.createElement(fe.a,{vAlign:"top",name:"plagiarism",label:p.createElement(j.a,{name:"citation-style-select",active:!1,className:ae.citationStyleSelect},ye[a])},Ce.map(e=>p.createElement(j.a.Flat,{className:ae.citationStyleDdlButton,key:e,name:`citation-button-${e}`,active:t.view(t=>t===e),onClick:()=>t.set(e)},ye[e])))))))))}static _renderWeb(e,t){return p.createElement("div",{key:"web",className:ae.referenceWrapper},p.createElement(be,{textToCopy:e+Object(o.pipe)(t.url,I.g.fold(()=>"",e=>". "+e))},p.createElement(M.a.Context.Consumer,null,({plagiarism:e})=>p.createElement(N.Small,{className:ae.referenceData},e.webReferenceDescription))))}render(){const e=this.props.alert;return"publication"===e.plagiarismType.source?ve._renderPublication(e.plagiarismType):ve._renderWeb(e.title,e.plagiarismType)}}const Se=({card:e,actions:t})=>p.createElement(T.a,{visualState:e.visualState,onFocus:()=>t.next({type:O.b.Type.alertCardShow,cardType:O.b.CardType.defaultCard,alertId:e.activeAlert.id}),theme:Object(x.a)(e.renderOptions.layoutDensity),body:p.createElement(p.Fragment,null,p.createElement(ie,{card:e}),p.createElement(oe,{alert:e.activeAlert}),p.createElement(ve,{alert:e.activeAlert})),mainActions:p.createElement(ce,{card:e,dismissActions:t}),footer:p.createElement(de,{visualState:e.visualState}),navigation:p.createElement(ue,{actions:t,card:e}),subActions:p.createElement(A.a,{actions:t,card:e,mode:"mini"})});var Ee,we=a("9NHN"),ke=a("XxrX");!function(e){e.Card=({card:e,actions:n})=>ke.a.Density.matchL(()=>p.createElement(t,{card:e,actions:n}),()=>p.createElement(a,{card:e,actions:n}),()=>p.createElement(a,{card:e,actions:n}))(e.renderOptions.layoutDensity);const t=({card:e,actions:t})=>{const a=e.alerts[0];return p.createElement(f.a.Mini,Object.assign({cardId:e.id,getActiveAlert:()=>a},Object(we.c)(Fe.wrapper,Fe.dot,Fe.dotOutcomesPlagiarism),{actions:t}),p.createElement("div",{className:Fe.miniContainer},p.createElement("span",Object.assign({key:"title"},Object(we.c)(Fe.text,"publication"===a.plagiarismType.source&&Fe.fullText)),a.title),"web"===a.plagiarismType.source?Object(o.pipe)(a.plagiarismType.url,I.g.map(he.f.urlToDomain),I.g.filter(C.n),I.g.map(e=>p.createElement("span",{key:"url",className:Fe.domain}," — ",e)),I.g.toNullable):Object(o.pipe)(a.plagiarismType.authors,I.g.map(e=>p.createElement("span",{key:"publication",className:Fe.publication}," — ",e)),I.g.toNullable)))},a=({card:e,actions:t})=>{const a=e.alerts[0],n="web"===a.plagiarismType.source?Object(o.pipe)(a.plagiarismType.url,I.g.map(he.f.urlToDomain),I.g.filter(C.n)):a.plagiarismType.authors;return p.createElement(f.a.Mini,Object.assign({cardId:e.id,getActiveAlert:()=>a},Object(we.c)(xe.wrapper,Fe.dotOutcomesPlagiarism,Object(o.pipe)(n,I.g.fold(()=>xe.dotInTheMiddle,()=>xe.dot))),{actions:t}),p.createElement("div",{className:xe.miniContainer},Object(o.pipe)(n,I.g.map(e=>p.createElement("span",{className:xe.subTitle},e)),I.g.toNullable),p.createElement("span",Object.assign({key:"title"},Object(we.c)(xe.text)),a.title)))}}(Ee||(Ee={}));const _e={overflow:"hidden",color:D.Color.CoreNeutral90,textOverflow:"ellipsis"},Oe={height:v.a.rem(3.5)},Ae={overflow:"hidden",marginBottom:v.a.rem(-.25),textOverflow:"ellipsis",fontSize:v.a.rem(.75)},Te={$nest:{"&:before":{top:v.a.rem(.85),bottom:0}}},xe=v.a.stylesheet({text:[_e],wrapper:[Oe],miniContainer:[{display:"flex",flexDirection:"column"}],dotInTheMiddle:[{top:0,bottom:0,left:0}],subTitle:[Ae],dot:[Te]}),Ie={overflow:"hidden",color:D.Color.CoreNeutral90,textOverflow:"ellipsis"},Me={maxWidth:v.a.percent(100),flexShrink:0},je={height:v.a.rem(3)},Le={overflow:"hidden",maxWidth:v.a.percent(100),textOverflow:"ellipsis",flexShrink:0},Ne={$nest:{"&:before":{top:v.a.px(1),bottom:0}}},Pe={$nest:{"&:before":{backgroundColor:D.Color.CoreCyan50}}},Fe=v.a.stylesheet({text:[Ie],fullText:[Me],wrapper:[je],miniContainer:[{display:"flex"}],domain:[Le],publication:[{overflow:"hidden",textOverflow:"ellipsis"}],dot:[Ne],dotOutcomesPlagiarism:[Pe]});var De,Re,Be=a("1gzW"),He=a("6fbX");!function(e){function t(e){return{mini:()=>e,full:()=>e,hidden:()=>e}}function a(e){switch(e){case"added":case"rendered":return"mini";case"focused":case"expanded":return"full";case"hidden":case"removed":return"hidden";case"presuccess":case"success":case"feedback_form":case"muted":throw new Error(`${e} is not supported for PlagiarismCard`);default:Object(He.d)(e)}}e.flow=function(e){return m.a.composeUnion(t(e),()=>e.pipe(b.a.map(e=>({plagiarismCardKind:a(e.visualState.transition.type)}))))},e.shadeFlow=function(e){return m.a.composeUnion(t(e),()=>e.pipe(b.a.map(e=>({plagiarismCardKind:Object(s.pipe)(e.visualState.from,I.g.fold(()=>"hidden",a))}))))}}(De||(De={})),function(e){function t(e){return m.b.Node.make(({state:t})=>p.createElement(u.a.Fragment,null,t.pipe(b.a.map(t=>p.createElement(Ee.Card,{card:t,actions:e})))))}function a(e){return m.b.Node.make(({state:t})=>p.createElement(u.a.Fragment,null,t.pipe(b.a.map(t=>p.createElement(Se,{card:t,actions:e})))))}e.Card=m.b.Node.make(({view:e,notify:n})=>{const i=e("view"),r=new b.a.Subject;return Be.a.useSubscriptionTo(r.pipe(b.a.tap(e=>n(e)()))),m.b.mount(k.a.make(function(e){return m.b.Union.make("plagiarismCardKind",{mini:t(e),full:a(e),hidden:m.b.Node.empty})}(r)),Object(s.pipe)(_.a.flow(i,De.flow(i),De.shadeFlow(i),e=>e.activeAlert.id),_.a.extend(e=>r.next(e))))})}(Re||(Re={}));var We,$e,Ve=a("4GD7"),Ue=a("UEGg"),Ge=a("uqkn"),ze=a("IVzZ"),qe=a("YJiV"),Ye=a("+5S2"),Xe=a("W39u"),Ke=a("TC4P"),Ze=a("E0zP"),Qe=a("C7EH"),Je=a("BeBM"),et=a("bFfh"),tt=a("OOrw"),at=a("amLG"),nt=a("ot6E"),it=a("dS2Y"),rt=a("TeUQ");(We||(We={})).DraftAI=m.b.Node.make(({view:e,notify:t})=>{const a=e("view"),n=p.useRef(null),i=p.useContext(nt.a.Context).draftAI.cardTitle;return p.createElement(u.a.div,{forwardRef:n,mount:e=>t({kind:it.b.Event.Kind.draftAIMiniCardMount,node:at.O.fromNullable(e)})()},a.pipe(b.a.distinctUntilChanged(it.a.eq.equals),b.a.mapTo(p.createElement(rt.a,{title:i,onClick:t({kind:it.b.Event.Kind.draftAIMiniCardClick,cardPosition:{top:n.current?n.current.getBoundingClientRect().top:0}})}))))}),a.d(t,"a",(function(){return $e})),function(e){function t(e,t,a,n,i,r,s){return Je.e.Items.mapper(e=>e.kind,{[Ge.a.Kind]:e,[ze.a.Kind]:t,[tt.a.Kind]:a,[S.a.Kind]:n,[S.b.Kind]:i,[Qe.a.Kind]:r,[it.a.Kind]:s})}function a(e){return e.kind===Ge.a.Kind}function p(e){return e.kind===ze.a.Kind}function u(e){return e.kind===tt.a.Kind}function h(e){return e.kind===Qe.a.Kind}function g(e){return e.kind===it.a.Kind}function f(){return Object(c.a)(e.disposable,e=>t=>{switch(t.kind){case Ge.a.Kind:return{view:t,isLastCard:e,kind:"alertCard"};case ze.a.Kind:return{view:t,isLastCard:e,kind:"alertsBundle"};case tt.a.Kind:return{view:t,kind:"plagiarismCard"};case S.a.Kind:return{view:t,kind:"priorityToggle"};case S.b.Kind:return{view:t,kind:"priorityToggleHint"};case Qe.a.Kind:return{view:t,kind:"bulkAccept"};case it.a.Kind:return{view:t,kind:"draftAI"};default:return Object(He.d)(t)}})}e.isSelectableWithAlertItem=Object(C.p)(a,p,u),e.getActiveItemWithAlert=Je.j.getActiveItemOfType(e.isSelectableWithAlertItem),e.getActiveAlignableItem=Je.j.getActiveItemOfType(Object(C.p)(a,p,u,h)),e.getActiveFocusableItem=Je.j.getActiveItemOfType(Object(C.p)(a,p,u,Object(C.b)(h,e=>e.hasMarkFocusable))),e.checksFeedItemsMapper=t,e.isAlertCard=a,e.isAlertsBundle=p,e.isPlagiarismCard=u,e.isBulkAcceptItem=h,e.isPriorityToggle=function(e){return e.kind===S.a.Kind},e.isDraftAIItem=g,e.defaultOrd=Object(i.fold)(I.h.getMonoid())([Object(o.pipe)(I.h.ordBoolean,I.h.contramap(a)),Ge.a.ord]),e.bundlesOrd=Object(i.fold)(I.h.getMonoid())([Object(o.pipe)(I.h.ordBoolean,I.h.contramap(a)),ze.a.ord]),e.item=e=>m.b.Union.make("kind",{alertCard:l.a.Card(e),alertsBundle:d.a.Card(e),plagiarismCard:Re.Card,priorityToggle:y.Toggle,priorityToggleHint:y.Hint,bulkAccept:n.Card(e),draftAI:We.DraftAI}),e.viewState=f,e.createCardListFlow=(e,t,a)=>Object(c.c)(n=>{switch(n.key){case"draftAI":Object(o.pipe)(a,I.g.tap(e=>{e.next(n.action)}));break;case"priorityToggle":t.next(n.action);break;case"plagiarismCard":e.actionEvents.next(n.action);break;default:Object(He.e)(n)}}),e.listItemOrd=e=>Object(r.contramap)(e=>e.cell.item.view)(e).compare;const v={equals:(e,t)=>e.kind===t.kind&&Xe.a.eqById.equals(e,t)},E=(e,t,a,n,i,r,s)=>({equals:(o,l)=>{const c={[Ge.a.Kind]:e,[ze.a.Kind]:t,[tt.a.Kind]:a,[S.a.Kind]:n,[S.b.Kind]:i,[Qe.a.Kind]:r,[it.a.Kind]:s};return v.equals(o,l)&&function(e,t){return(a,n)=>t[e(a)].equals(a,n)}(e=>e.kind,c)(o,l)}}),w=Object(i.fold)(I.c.getMonoid())([Ke.a.eq,Xe.a.verticalPositionEq,v]);function k(e){const a=Ge.a.Capabilities.getChangePosition(e),n=tt.a.Capabilities.getChangePosition();return{changePosition:e=>t(a.changePosition(e),ze.a.changePosition(e),n.changePosition(e),t=>S.a.changePosition(t,e),t=>S.b.changePosition(t,e),t=>Qe.a.changePosition(t)(e),t=>it.a.changePosition(t)(e))}}function _(){return{updateUserInput:e=>t(Ge.a.updateUserInput(e),ze.a.changeUserInput(e),s.identity,s.identity,s.identity,s.identity,s.identity)}}function O(e){const a=Ge.a.Capabilities.getTransitionTo(e),n=tt.a.Capabilities.getTransitionTo();return{transitionTo:e=>t(a.transitionTo(e),ze.a.transitionTo(e),n.transitionTo(e),s.identity,s.identity,t=>Qe.a.transitionTo(t,e),s.identity)}}function A(e){const a=Ge.a.Capabilities.getCompleteTransition(e),n=tt.a.Capabilities.getCompleteTransition();return{completeTransition:e=>t(a.completeTransition(e),ze.a.completeTransition(e),n.completeTransition(e),s.identity,s.identity,t=>Qe.a.completeTransition(t,e),s.identity)}}function T(e,a,n,i){const r=ze.a.getCardHydrator(i),o=ze.a.getSelect(a,n,r),l=ze.a.getSelectByAlert(a,n,r),c=Ge.a.Capabilities.getSelect(e),d=tt.a.Capabilities.getSelect(a,n);return{select:(e,a)=>t(c.select(e,a),o(e,a),d.select(e,a),s.identity,s.identity,t=>Qe.a.select(t,e),s.identity),selectByAlert:(e,a,n)=>t(c.selectByAlert(e,a,n),l(a,e,n),d.selectByAlert(e,a,n),s.identity,s.identity,t=>Qe.a.select(t,e),s.identity),unselect:(e,a)=>t(c.unselect(e,a),ze.a.unselect(e,a),d.unselect(e,a),s.identity,s.identity,t=>Qe.a.unselect(t,e),s.identity)}}function x(e,n,i,r){return{removeAlertFromItem:(o,l)=>t(t=>Ge.a.Capabilities.getRemoveAlerts(e,l.itemsOrd)(o,Je.j.getActiveItemOfType(a)(l))(t),e=>ze.a.getRemoveAlertsCapability(n,i,r,l.itemsOrd)(o,Je.j.getActiveItemOfType(p)(l))(e),tt.a.Capabilities.getRemoveAlert(Je.j.getActiveItem,l.itemsOrd).removeAlertFromItem(o,l),s.identity,s.identity,s.identity,s.identity)}}function M(e,a){const n=Ge.a.Capabilities.getRemove(e);return{remove:(e,i)=>t(n.remove(e,i),t=>e(t)?ze.a.getRemove(a)([t.activeAlert],i(t))(t):t,t=>e(t)?tt.a.Capabilities.remove([t.activeAlert],i(t))(t):t,s.identity,s.identity,s.identity,s.identity)}}function j(e,a,n){const i=Ge.a.Capabilities.getUpdateWithAlert(e),r=ze.a.getUpdatableWithAlertsCapability(a),o=tt.a.Capabilities.getUpdateWithAlert(n);return{updateWithAlerts:e=>t(i.updateWithAlerts(e),r(e),o.updateWithAlerts(e),s.identity,s.identity,s.identity,s.identity)}}e.equatable={structEq:E(Ge.a.eq,ze.a.eq,tt.a.eq,S.c,S.c,Qe.a.eq,it.a.eq),idEq:E(v,v,v,v,v,v,v),visualStateEq:E(w,w,w,S.c,S.c,Qe.a.visualStateEq,it.a.eq)},e.changePosition=k,e.hasUserInput=_,e.disposable={isScheduledToDispose:t(e=>Ze.a.willBeDisposed(e,e.removedAlertsIds),e=>Ze.a.willBeDisposed(e,e.removedAlertsIds),e=>Ze.a.willBeDisposed(e,e.removedAlertsIds),s.constFalse,s.constFalse,s.constFalse,s.constFalse)},e.hidable={isHidden:t(Ke.a.isHidden,Ke.a.isHidden,Ke.a.isHidden,e=>"hidden"===e.visibilityState,e=>"hidden"===e.visibilityState,Ke.a.isHidden,e=>"hidden"===e.visibilityState)},e.transitionTo=O,e.completeTransition=A,e.queries={isSelectableByAlert:e=>t(Ze.a.hasAlert(e.alert.id),Ze.a.hasAlert(e.alert.id),Ze.a.hasAlert(e.alert.id),s.constFalse,s.constFalse,s.constFalse,s.constFalse),hasAlert:e=>t(Ze.a.hasAlert(e),Ze.a.hasAlert(e),Ze.a.hasAlert(e),s.constFalse,s.constFalse,Qe.a.hasAlert(e),s.constFalse),useReferenceHeightOnRemove:s.constFalse,hasActiveAlert:t(e=>I.g.some(e.activeAlert),e=>I.g.some(e.activeAlert),e=>I.g.some(e.activeAlert),I.g.empty,I.g.empty,I.g.empty,I.g.empty)},e.select=T,e.removeAlert=x,e.remove=M,e.updateWithAlert=j,e.releaseAlert=(t,a,n,i)=>et.a.Capabilities.getAlertReleaser(Object.assign(Object.assign({},x(t,a,n,i)),e.disposable)),e.unselectable=(e,t,a,n)=>et.a.Capabilities.getUnselectable(Je.j.getActiveItem,T(e,t,a,n)),e.selectableByAlert=(t,a,n,i)=>et.a.Capabilities.getSelectableByAlert(Je.j.getActiveItem,Object.assign(Object.assign({},e.queries),T(t,a,n,i))),e.selectableById=(e,t,a,n)=>et.a.Capabilities.getSelectableById(Je.j.getActiveItem,T(e,t,a,n)),e.updateMeta=e=>({updateMeta:t=>Object(i.fold)(Object(i.getEndomorphismMonoid)())([et.a.Plagiarism.updateCardsWithLensMeta(e),et.a.Capabilities.getMetaUpdatable().updateMeta(t)])}),e.animatable=(t,a,n,i)=>et.a.Capabilities.getAnimatable(t,Object.assign(Object.assign({},x(t,a,n,i)),e.queries)),e.hasPriorityToggle=t=>et.a.WithPriority.getHasPriorityToggle(Object.assign(Object.assign(Object.assign({},O(t)),e.queries),e.disposable));const L=t=>["focused","expanded"].includes(t.visualState.transition.type)&&!e.disposable.isScheduledToDispose(t);function N(e){const a=qe.a.getCardSelections(e);return{nextAlert:t(a.nextAlert,a.nextAlert,a.nextAlert,()=>I.g.none,()=>I.g.none,()=>I.g.none,()=>I.g.none),prevAlert:t(a.prevAlert,a.prevAlert,a.prevAlert,()=>I.g.none,()=>I.g.none,()=>I.g.none,()=>I.g.none)}}e.alignable={isValidToAlign:t(L,L,L,s.constFalse,s.constFalse,L,s.constFalse)},e.alertIterator=N,e.itemReleaser=()=>et.a.Capabilities.getItemReleaser(),e.hasAlerts=et.a.Capabilities.getHasAlerts,e.getDefaultNextAlertItemFilter=t=>Object(C.b)(e.isSelectableWithAlertItem,a=>!e.disposable.isScheduledToDispose(a)&&Object(o.pipe)(a,e.queries.hasActiveAlert,I.g.map(e=>t.isRegistered(e.id)),I.g.getOrElse(s.constFalse))),e.priorityTest=Object(C.b)(e.isAlertCard,e=>Ue.a.isPriority(e.activeAlert)),e.draftAITest=Object(C.p)(e.priorityTest,g),e.isInSuccess=et.a.WithPriority.isInSuccess(e.priorityTest,e.disposable),e.isInSuccessWithDraftAI=et.a.WithPriority.isInSuccess(e.draftAITest,e.disposable),e.isInGlobalSuccess=et.a.WithPriority.isInGlobalSuccess(e.priorityTest,e.disposable),e.verifiable=()=>et.a.Capabilities.getVerifiable(e.disposable),e.alignMarkToGetter=(e,a,n)=>{const i=Ve.a.alignMarkToItem(e,a),r=Qe.a.alignMarkToBulkItem(e,a),s=Ye.a.ContentOffset.contentOffsetGetter();return e=>t(i(e),i(e),i(e),()=>b.a.EMPTY,()=>b.a.EMPTY,I.g.isSome(e.suggestedPosition)?r({suggestedPosition:I.g.unsafeGet(e.suggestedPosition)}):Qe.a.moveToViewportTop(a,s(!1,n.get())),()=>b.a.EMPTY)},e.alignItemToMarkGetter=(e,a)=>{const n=Ve.a.alignItemToMark(e,a);return e=>t(n(e),n(e),n(e),()=>b.a.EMPTY,()=>b.a.EMPTY,()=>b.a.EMPTY,()=>b.a.EMPTY)},e.getCapabilities=function(t,a,n,i,r,s=qe.b.Default){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},f()),e.disposable),e.hidable),e.equatable),_()),k(t)),O(t)),A(t)),T(t,i,s,r)),M(t,s)),x(t,i,s,r)),j(t,a,s)),e.queries),e.alignable),e.releaseAlert(t,i,s,r)),e.unselectable(t,i,s,r)),e.selectableByAlert(t,i,s,r)),e.selectableById(t,i,s,r)),e.updateMeta(n)),e.animatable(t,i,s,r)),e.hasPriorityToggle(t)),e.itemReleaser()),e.verifiable()),e.hasAlerts(N(i),e.queries,()=>e.getDefaultNextAlertItemFilter(i)))}}($e||($e={}))},"+w1e":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return s}));var n,i,r,s,o=a("D9EC"),l=a("6fbX"),c=a("UEGg"),d=a("++u8");!function(e){let t,a;function n(t){return t.type===e.Type.takeawayCorrectlyDetected||t.type===e.Type.takeawayIncorrectlyDetected}function i(t){return n(t)||t.type===e.Type.takeawayDismiss||t.type===e.Type.takeawayResolve}function r(t){return t.type===e.Type.bulkApply}function s(t){return t.type===e.Type.bulkDismiss}function l(t){return t.type===e.Type.bulkIgnore}function p(t){return t.type===e.Type.bulkHighlight}function u(t){return t.type===e.Type.bulkUndo}function m(t){return t.type===e.Type.bulkIndividualUndo}function h(t){return t.type===e.Type.bulkLooksGood}!function(e){e.switchToNext="switchToNext",e.switchToClosestByViewport="switchToClosestByViewport",e.alertMinicardButtonClick="alertMinicardButtonClick",e.cardMatchesNavigationButtonClick="cardMatchesNavigationButtonClick",e.openSetGoals="setGoals",e.alertCardShow="alertCardShow",e.moreAlertsButtonShow="moreAlertsButtonShow",e.alternativeReplacementRadioButtonClick="alternativeReplacementRadioButtonClick",e.alertApply="alertApply",e.alertFeedback="alertFeedback",e.hover="hover",e.onboardingClose="onboardingClose",e.muteAlertCategory="muteAlertCategory",e.undoMuteAlertCategory="undoMuteAlertCategory",e.premiumTrialFooterCtaClick="premiumTrialFooterCtaClick",e.toSignIn="toSignIn",e.moreActionsButtonToggle="moreActionsButtonToggle",e.openPreferences="preferences",e.dismissMuteQuotedAdvice="dismissMuteQuotedAdvice",e.fullSentenceHighlightChangesToggle="fullSentenceHighlightChangesToggle",e.muteQuotedAdviceShow="muteQuotedAdviceShow",e.alertIgnore="alertIgnore",e.alertResolve="alertResolve",e.alertIgnoreFormSubmit="alertIgnoreFormSubmit",e.alertIgnoreFeedbackFormShow="alertIgnoreFeedbackFormShow",e.takeawayCorrectlyDetected="takeawayCorrectlyDetected",e.takeawayIncorrectlyDetected="takeawayIncorrectlyDetected",e.takeawayCorrectlyDetectedAndDone="takeawayCorrectlyDetectedAndDone",e.takeawayDismiss="takeawayDismiss",e.takeawayResolve="takeawayResolve",e.requestShortenItReplacements="requestShortenItReplacements",e.smartPhrasesShowMiniCard="smartPhrasesShowMiniCard",e.smartPhrasesShowFullCard="smartPhrasesShowFullCard",e.smartPhrasesShowMoreIdeas="smartPhrasesShowMoreIdeas",e.smartPhrasesFeedback="smartPhrasesFeedback",e.smartPhrasesApply="smartPhrasesApply",e.smartPhrasesDone="smartPhrasesDone",e.smartPhrasesUpdateState="smartPhrasesUpdateState",e.smartPhrasesDismiss="smartPhrasesDismiss",e.smartPhrasesOpenFeedbackForm="smartPhrasesOpenFeedbackForm",e.changeUserInput="changeUserInput",e.focusUserInput="focusUserInput",e.miniItemClick="miniItemClick",e.bulkApply="bulkApply",e.bulkDismiss="bulkDismiss",e.bulkIgnore="bulkIgnore",e.bulkHighlight="bulkHighlight",e.bulkIndividualUndo="bulkIndividualUndo",e.bulkUndo="bulkUndo",e.bulkAcceptItemShow="bulkAcceptItemShow",e.bulkLooksGood="bulkLooksGood",e.mutedAlertSuccessShow="mutedAlertSuccessShow",e.mutedAlertSuccessDismissed="mutedAlertSuccessDismissed",e.mutedAlertSuggestionManagementClick="mutedAlertSuggestionManagementClick",e.sentenceLevelBrandTonesFeedback="sentenceLevelBrandTonesFeedback"}(t=e.Type||(e.Type={})),function(e){e.defaultCard="defaultCard",e.superCard="superCard"}(a=e.CardType||(e.CardType={})),e.getCardType=function(e){switch(e.activeAlert.type){case c.a.Type.super:return a.superCard;case c.a.Type.default:default:return a.defaultCard}},e.isAlertApplyAction=function(t){return t.type===e.Type.alertApply},e.isAlertFeedbackAction=function(t){return t.type===e.Type.alertFeedback},e.isTakeawayCorrectlyDetectedAction=function(t){return t.type===e.Type.takeawayCorrectlyDetected},e.isTakeawayIncorrectlyDetectedAction=function(t){return t.type===e.Type.takeawayIncorrectlyDetected},e.isTakeawayDoneAction=function(t){return t.type===e.Type.takeawayCorrectlyDetectedAndDone},e.isTakeawayDismissAction=function(t){return t.type===e.Type.takeawayDismiss},e.isTakeawayResolveAction=function(t){return t.type===e.Type.takeawayResolve},e.isTakeawayDetectionFeedbackAction=n,e.isTakeawayDetectionFeedbackOrDoneAction=function(t){return n(t)||t.type===e.Type.takeawayCorrectlyDetectedAndDone},e.isTakeawayFeedbackAction=i,e.isTakeawayAction=function(t){return i(t)||t.type===e.Type.takeawayCorrectlyDetectedAndDone},e.isRequestShortenItReplacementsAction=function(t){return t.type===e.Type.requestShortenItReplacements},e.isSmartPhrasesShowMiniCardAction=function(t){return t.type===e.Type.smartPhrasesShowMiniCard},e.isSmartPhrasesShowFullCardAction=function(t){return t.type===e.Type.smartPhrasesShowFullCard},e.isSmartPhrasesShowMoreIdeasAction=function(t){return t.type===e.Type.smartPhrasesShowMoreIdeas},e.isSmartPhrasesFeedbackAction=function(t){return t.type===e.Type.smartPhrasesFeedback},e.isSmartPhrasesApplyAction=function(t){return t.type===e.Type.smartPhrasesApply},e.isSmartPhrasesDoneAction=function(t){return t.type===e.Type.smartPhrasesDone},e.isSmartPhrasesUpdateStateAction=function(t){return t.type===e.Type.smartPhrasesUpdateState},e.isSmartPhrasesDismissAction=function(t){return t.type===e.Type.smartPhrasesDismiss},e.isSmartPhrasesOpenFeedbackFormAction=function(t){return t.type===e.Type.smartPhrasesOpenFeedbackForm},e.isSentenceLevelBrandTonesFeedbackAction=function(t){return t.type===e.Type.sentenceLevelBrandTonesFeedback},e.isAlertIgnoreAction=function(t){return t.type===e.Type.alertIgnore},e.isAlertResolveAction=function(t){return t.type===e.Type.alertResolve},e.isAlertIgnoreFeedbackFormSubmit=function(t){return t.type===e.Type.alertIgnoreFormSubmit},e.isMuteCategoryAction=function(t){return t.type===e.Type.muteAlertCategory},e.isUndoMuteCategoryAction=function(t){return t.type===e.Type.undoMuteAlertCategory},e.isMutedAlertCardDismissedAction=function(t){return t.type===e.Type.mutedAlertSuccessDismissed},e.isHoverAction=function(t){return t.type===e.Type.hover},e.isAlertCardShow=function(t){return t.type===e.Type.alertCardShow},e.isBulkAcceptItemShow=function(t){return t.type===e.Type.bulkAcceptItemShow},e.isSwitchToClosestByViewport=function(t){return t.type===e.Type.switchToClosestByViewport},e.isAlertMinicardButtonClick=function(t){return t.type===e.Type.alertMinicardButtonClick},e.isMiniItemClick=function(t){return t.type===e.Type.miniItemClick},e.isChecklistItemCollapseButtonClick=function(e){return e.type===d.a.Type.collapseButtonClick},e.isOnboardingClose=function(t){return t.type===e.Type.onboardingClose},e.isNavigation=function(t){return t.type===e.Type.openSetGoals||t.type===e.Type.openPreferences},e.isDismissMuteQuotedAdvice=function(t){return t.type===e.Type.dismissMuteQuotedAdvice},e.isMuteQuotedAdviceShow=function(t){return t.type===e.Type.muteQuotedAdviceShow},e.isChangeUserInput=function(t){return t.type===e.Type.changeUserInput},e.isFocusUserInput=function(t){return t.type===e.Type.focusUserInput},e.isBulkApply=r,e.isBulkDismiss=s,e.isBulkIgnore=l,e.isBulkHighlight=p,e.isBulkUndo=u,e.isBulkIndividualUndo=m,e.isBulkLooksGood=h,e.isBulkAction=Object(o.p)(r,s,l,p,m,h,u),e.isMutedAlertSuggestionsManagementClick=function(t){return t.type===e.Type.mutedAlertSuggestionManagementClick}}(n||(n={})),function(e){let t;!function(e){e.drilldown="synfonyDrilldownSelect",e.back="synfonyDrilldownBack"}(t=e.Kind||(e.Kind={})),e.isDrilldown=function(e){return e.type===t.drilldown},e.isBack=function(e){return e.type===t.back}}(i||(i={})),function(e){let t;function a(e){return e.type===t.startTransitionTo}!function(e){e.startTransitionTo="startTransitionTo",e.completeTransitionTo="completeTransitionTo"}(t=e.Kind||(e.Kind={})),e.isStartTransitionTo=a,e.isCardExpand=function(e){return a(e)&&"expanded"===e.transition.type},e.isCompleteTransitionTo=function(e){return e.type===t.completeTransitionTo}}(r||(r={})),function(e){let t;!function(e){e.dismissBatch="dismissBatch"}(t=e.Kind||(e.Kind={})),e.isDismissAlertsBatchAction=function(e){return e.type===t.dismissBatch}}(s||(s={})),Object(l.e)(void 0)},"+wa7":function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a("ERkP"),i=a("LNSM"),r=a("vOOZ"),s=a("BugA"),o=a("hoSD"),l=a("u/Xi"),c=a("KvFL"),d=a("47ib");const p=["Conjunctions","Determiners","Fluency","Modifiers","Nouns","Numerals","Prepositions","Pronouns","Punctuation","Syntax","Spelling","Verbs","Word Order","Conciseness","References","Voice","Formality","Sensitivity","Variety","Vocabulary","Conventions"],u=({onTransitionEnd:e})=>{const t=i.a.create(!1);return requestAnimationFrame(()=>requestAnimationFrame(()=>t.set(!0))),n.createElement("span",null,n.createElement(r.a.span,{className:c.dot,style:{opacity:t.view(Number)}},"."),n.createElement(r.a.span,{className:c.dot,style:{opacity:t.view(Number)}},"."),n.createElement(r.a.span,{className:c.dot,style:{opacity:t.view(Number)},onTransitionEnd:e},"."))},m=5;class h extends n.Component{constructor(){super(...arguments),this._lensesArray=i.a.create([...Array.from({length:m}).map((e,t)=>({id:t+"empty",title:""})),...o.a.shuffle(p.map(e=>({id:e,title:e})))]),this._updateLensArray=()=>{this._lensesArray.modify(e=>{const t=e.slice(0),a=t.shift();return a&&""!==a.title&&t.push(a),t})}}render(){return n.createElement("div",{className:c.wrapper},n.createElement(r.a.div,{className:c.checkingWrapper},this._lensesArray.view(e=>e.map(({id:e,title:t},a)=>n.createElement(l.a,{key:e,offset:`${100*a}%`,theme:d},n.createElement(s.Base,{className:c.item},t,a===m&&n.createElement(u,{onTransitionEnd:this._updateLensArray})))))))}}},"/Yt+":function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return o}));var n=a("ERkP"),i=a("ot6E"),r=a("HeG+");const s=({activeWord:e})=>{const t=n.useContext(i.a.Context);return n.createElement("div",{className:r.emptyResultWrapper},t.synonyms.empty(n.createElement("span",{className:r.activeWord},e)))},o=({activeWord:e})=>{const t=n.useContext(i.a.Context);return n.createElement("div",{className:r.emptyResultWrapper},t.synonyms.symfony.empty(n.createElement("span",{className:r.activeWord},e)))}},"/by5":function(e,t,a){"use strict";a.d(t,"a",(function(){return S})),a.d(t,"c",(function(){return E})),a.d(t,"b",(function(){return k}));var n=a("ERkP"),i=a("OA+g"),r=a("I7vG"),s=a("9NHN"),o=a("vOOZ"),l=a("LNSM"),c=a("rk+4"),d=a("nnns"),p=a("2qsX"),u=a("tZ26"),m=a("BugA"),h=a("GUi3"),g=a("dE97"),f=a("Z0Em"),b=a("6fbX"),y=a("lrqh"),C=a("XaD9"),v=a("TYHi");const S=({name:e,title:t,tooltip:a,tooltipAlignment:i,isActive:r,isDisabled:o,className:l,onClick:c,children:p})=>n.createElement(d.a,Object.assign({name:e,styleType:m.Typography.Type.Base,active:r,title:"string"==typeof a?n.createElement("div",{className:v.tooltip},a):a,titleAlign:i,disabled:o,onClick:c},Object(s.c)(v.outcomeBtn,l)),t,p);const E=({lens:e,activeLensId:t,tooltipAlignment:a,isDisabled:i,onClick:c})=>n.createElement(d.a,Object.assign({name:`lens-${e.id}`,styleType:m.Typography.Type.Base,active:t.view(t=>t===e.id),title:e.description&&n.createElement("div",{className:v.tooltip},e.description),titleAlign:a,disabled:i,onClick:c},Object(s.c)(t.view(t=>t!==e.id&&!h.a.isMainLens(t)&&t!==h.a.SpecialId.Premium).view(e=>e&&v.inactive),function(e){switch(e){case h.a.SpecialId.Correctness:case h.a.SpecialId.CorrectnessPriority:return v.correctness;case h.a.SpecialId.Clarity:case h.a.SpecialId.ClarityPriority:return v.clarity;case h.a.SpecialId.Engagement:case h.a.SpecialId.EngagementPriority:return v.engagement;case h.a.SpecialId.Delivery:case h.a.SpecialId.DeliveryPriority:return v.delivery;case h.a.SpecialId.Vox:case h.a.SpecialId.VoxPriority:return v.vox;case h.a.SpecialId.Plagiarism:return v.plagiarism;default:return Object(b.d)(e)}}(e.id))),e.title,e.status&&n.createElement(m.Small,{className:v.outcomeStatus},e.status),n.createElement("div",{className:v.progressBarBg},n.createElement(o.a.div,{className:v.progressBar,style:e.progress.view(e=>e?{transform:`translateX(${e}%)`}:{})})),Object(r.pipe)(e.logo,y.g.map(e=>n.createElement(w,{key:"logo",src:e})),y.g.getOrElse(()=>n.createElement(o.a.Fragment,null,l.a.combine(e.progress.view(f.a.isMax),e.isUnavailable,(e,t)=>e?n.createElement(u.d.CheckmarkOutcomes,{key:"checkmark",className:v.checkmarkIcon}):t&&n.createElement(u.d.Info,{key:"info",width:11,className:v.infoIcon})))))),w=({src:e})=>n.createElement("img",{className:v.voxLogo,src:e}),k=({navigationVM:e})=>{const{gnarSpec:t,pageId:a}=n.useContext(C.a.Context),r=n.useContext(c.a.Context);return n.createElement(o.a.Fragment,null,e.premiumButtonData.view(Object(i.flow)(y.g.map(i=>n.createElement(S,{key:i.id,name:"lens-premium",title:i.title,isActive:e.activeLensId.view(e=>e===h.a.SpecialId.Premium),onClick:()=>{e.events.next({type:"switchToLens",id:i.id,focusFirst:!0,actionSource:g.b.sidebar}),t.advancedIssuesButtonClick(a,"wiritingAssistant")}},n.createElement(o.a.Fragment,null,i.alerts.view(e=>n.createElement(p.a.OutcomeCounter,{theme:v,count:e}))),n.createElement(m.Small,{className:v.outcomeStatus},r.sidebar.advancedAlerts))),y.g.toNullable)))}},"/i6n":function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var n=a("ERkP"),i=a("9NHN"),r=a("6fbX"),s=a("hoSD"),o=a("uO+M"),l=a("6gXa"),c=a("WIwS"),d=a("eTAx"),p=a("tZ26");const u=32,m=2*Math.PI*u,h=u+4,g=2*h,f=94,b=(e,t,a)=>e<t?t:e>a?a:e,y=e=>{switch(e){case E.ColorType.eggBlue:return{type:"gradient",value:{coordinates:{x1:"0%",y1:"50%",x2:"50%",y2:"50%"},start:"#0bc7c3",end:"#0fd5bf"},background:"#f1f2fa",outline:"#fff"};case E.ColorType.dandelion:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"35%",y2:"100%"},start:"#ffde66",end:"#ffc148"},background:"#f1f2fa",outline:"#fff"};case E.ColorType.radicalRed:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"50%",x2:"40%",y2:"100%"},start:"#ff4562",end:"#ff153e"},background:"#f1f2fa",outline:"#fff"};case E.ColorType.lightVisteria:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"50%",y2:"100%"},start:"#e191e2",end:"#c770c8"},background:"#f1f2fa",outline:"#fff"};case E.ColorType.royalBlue:return{type:"gradient",value:{coordinates:{x1:"17%",y1:"15%",x2:"50%",y2:"100%"},start:"#2a42ef",end:"#6391ff"},background:"#f1f2fa",outline:"#fff"};case E.ColorType.logan:return{type:"plain",value:"#a6adc9",background:"#f1f2fa",outline:"#fff"};case E.ColorType.electricViolet:return{type:"plain",value:"#913dcc",background:"#eed6ff"};case E.ColorType.crimson:return{type:"plain",value:"#ea1537",background:"#ffccd5"};case E.ColorType.blueRibbon:return{type:"plain",value:"#1a57ff",background:"#cdf"};case E.ColorType.green:return{type:"plain",value:"#15c39a",background:"#dcf6f6"};case E.ColorType.lightBlue:return{type:"plain",value:"#00bbcc",background:"#ccfbff"};case E.ColorType.orange:return{type:"plain",value:"#ffa600",background:"#fee8b4"};case E.ColorType.neoBlue:return{type:"plain",value:"#4A6EE0",background:"#DBEBFF"};case E.ColorType.white:return{type:"plain",value:"#fff",background:"#fff",backgroundOpacity:.2};default:return Object(r.d)(e)}},C=e=>{switch(e){case E.FontSize.normal:return 32;case E.FontSize.small:return 24;default:return Object(r.d)(e)}},v=e=>{switch(e){case E.IconSize.pdf:case E.IconSize.normal:case E.IconSize.outcome:return 5;case E.IconSize.small:return 3;case E.IconSize.extraSmall:return 10;default:return Object(r.d)(e)}},S=e=>{switch(e){case E.IconSize.pdf:return 110;case E.IconSize.normal:return 52;case E.IconSize.outcome:return 32;case E.IconSize.small:return 24;case E.IconSize.extraSmall:return 16;default:return Object(r.d)(e)}};class E extends n.Component{render(){const{percentage:e,aimValue:t=100,colorType:a=E.ColorType.logan,fontSize:r=E.FontSize.normal,iconSize:o=E.IconSize.normal,description:l,theme:c=O}=this.props,w=[n.createElement("circle",{key:"circle",id:"circle",cx:h,cy:h,r:u,fill:"none"})],k=C(r),_=v(o),A=b(e,0,100),T=b(t,A,100),x=A*m/100,I=T*m/100,M=360*_/m,j=A?m-x-2*_:m;let L,N,P,F,D;const R=y(a);if("plain"===R.type)L=R.value,N=L,P=R.outline,F=R.background,D=void 0===R.backgroundOpacity?1:R.backgroundOpacity;else{const e=R.value;this._gradientId=this._gradientId||`pb-gradient-${E._nextGradientId++}`,w.push(n.createElement("linearGradient",Object.assign({id:this._gradientId,key:this._gradientId,gradientUnits:"userSpaceOnUse"},e.coordinates),n.createElement("stop",{stopColor:e.start,offset:"0%"}),n.createElement("stop",{stopColor:e.end,offset:"100%"}))),L=`url(#${this._gradientId})`,N="#2b2d38",P=R.outline,F=R.background,D=void 0===R.backgroundOpacity?1:R.backgroundOpacity}return n.createElement(d.a.Context.Consumer,null,e=>n.createElement(p.e,Object.assign({},Object(i.c)(O.iconWrapper,c.radialProgressBar),{width:S(o),viewBox:`0 0 ${g} ${g}`}),n.createElement("defs",null,w),n.createElement("g",null,n.createElement("use",{className:O.valueCircle,stroke:A>=f&&P?P:F,strokeOpacity:D,strokeWidth:_,strokeDasharray:m,strokeDashoffset:m-I,transform:`rotate(-90 ${h} ${h})`,strokeLinecap:"round",xlinkHref:"#circle"}),P&&n.createElement("use",{className:O.valueCircle,stroke:P,strokeWidth:_,strokeDasharray:m,strokeDashoffset:j,transform:`rotate(${-90-M} ${h} ${h})`,strokeLinecap:"round",xlinkHref:"#circle"}),n.createElement("use",{className:O.valueCircle,stroke:L,strokeDasharray:m,strokeDashoffset:m-x,strokeLinecap:"round",transform:`rotate(-90 ${h} ${h})`,strokeWidth:_,xlinkHref:"#circle"}),n.createElement("text",Object.assign({className:c.radialProgressText,y:"38",x:"36",fill:N,fontSize:k,fontStyle:"normal",textAnchor:"middle"},s.c.svgVerticalAlignment(e.has(d.a.Flag.supportsSVGDominantBaseline))),A),l&&n.createElement("text",{className:c.radialProgressDescription,fill:N,x:"50%",y:"80%",fontStyle:"normal",textAnchor:"middle"},l))))}}E._nextGradientId=0,function(e){let t,a,n;!function(e){e.eggBlue="eggBlue",e.dandelion="dandelion",e.radicalRed="radicalRed",e.lightVisteria="lightVisteria",e.royalBlue="royalBlue",e.logan="logan",e.electricViolet="electricViolet",e.crimson="crimson",e.blueRibbon="blueRibbon",e.green="green",e.lightBlue="lightBlue",e.orange="orange",e.white="white",e.neoBlue="neoBlue"}(t=e.ColorType||(e.ColorType={})),function(e){e.normal="normal",e.small="small"}(a=e.FontSize||(e.FontSize={})),function(e){e.normal="normal",e.small="small",e.extraSmall="extraSmall",e.outcome="outcome",e.pdf="pdf"}(n=e.IconSize||(e.IconSize={}))}(E||(E={}));const w={width:l.a.percent(100),height:l.a.percent(100),fontWeight:"bold",fill:o.Color.CoreNeutral90},k={fontSize:l.a.rem(2),fill:o.Color.CoreNeutral90},_={fontWeight:"normal",fontSize:l.a.px(11),fill:c.l},O=l.a.stylesheet({radialProgressBar:[w],radialProgressText:[k],radialProgressDescription:[_],valueCircle:[{transition:"stroke-dashoffset .5s"}],iconWrapper:[{stroke:"none",fill:"none",$nest:{"&[data-hovered='true']":{stroke:"none",fill:"none"}}}]})},"/kIX":function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return c}));var n=a("I7vG"),i=a("kMag"),r=a("0Hf4"),s=a("wbpH"),o=a("Ars8");function l(e,t,a){return Object(n.pipe)(e,d,p(t),u(a,t.length+1),h,e=>e.innerHTML)}const c=()=>r.a.getStyles()+`\n.${s.b.markBulkApplied&&s.b.markBulkApplied.split(/\s/)[0]} { border-bottom-style: hidden !important }`+`\n.${s.b.markSelected&&s.b.markSelected.split(/\s/)[0]} { background-color: transparent !important }`,d=e=>{const t=document.createElement("div");return t.innerHTML=e,t},p=e=>t=>(e.reduce(function(e){return(t,a,n)=>(a.getHighlightRanges().filter(i.b.isMainView).forEach(a=>{const i=e.querySelectorAll(`[${g.MARK_ID}="${a.meta.id}"]`);if(i.length>0){const e=i[i.length-1],a=function(e,t){const a=document.createElement("span");return a.className=o.a.superscriptContainer,a.innerHTML=`<span class="${e} ${o.a.superscript}" data-superscript>${t+1}</span>`,a}(e.classList.value,n);e.appendChild(a),t.push(a)}}),t)}(t),[]).forEach(b),Array.from(t.querySelectorAll("span."+o.b)).forEach(f),t),u=(e,t=0)=>a=>(e.forEach((e,n)=>e.getHighlightRanges().filter(i.b.isMainView).forEach(e=>{const i=a.querySelectorAll(`[${g.MARK_ID}="${e.meta.id}"]`),r=(t+n).toString();i.forEach(e=>e.setAttribute(g.VERTICAL_UNDERLINE,r)),i[0]&&(i[0].setAttribute(g.VERTICAL_START,""),m(i[0],r),i[i.length-1].setAttribute(g.VERTICAL_END,""))})),a),m=(e,t)=>e.insertAdjacentHTML("afterbegin",`<span ${g.VERTICAL_INDEX}>${t}</span><span ${g.VERTICAL_BODY}><br /></span>`),h=e=>{return e.querySelectorAll(`[${g.VERTICAL_INDEX}]`).forEach(t=>{const a=t.textContent;e.querySelectorAll(`[${g.VERTICAL_UNDERLINE}="${a}"] [${g.VERTICAL_END}]`).forEach(e=>{e.removeAttribute(g.VERTICAL_END)})}),e};var g;function f(e,t,a){var n,i;a.length>t+1&&(n=e,i=a[t+1],n.textContent.length-function(e,t){const a=document.createRange();return a.setStartAfter(e),a.setEndBefore(t),a.toString().length}(n,i)>=0)&&function(e){e.style.width="auto",e.parentElement.insertAdjacentElement("afterend",e)}(e)}function b(e){if(e.children.length>0&&e.previousSibling){const t=Array.from(e.children);e.innerHTML="",function e(t){let a=[];if(!(t instanceof Element))return a;t.matches(`[${g.MARK_ID}]`)&&t.lastElementChild&&t.lastElementChild.classList.contains(o.b)&&(a=Array.from(t.lastElementChild.children),t.lastElementChild.remove());return t.lastElementChild?a.concat(e(t.lastElementChild)):a}(e.previousSibling).concat(t).sort((e,t)=>Number(e.textContent)-Number(t.textContent)).forEach(t=>e.appendChild(t))}}!function(e){e.MARK_ID="data-mark-id",e.VERTICAL_UNDERLINE="data-vertical-underline",e.VERTICAL_START="data-vertical-underline-start",e.VERTICAL_BODY="data-vertical-underline-body",e.VERTICAL_END="data-vertical-underline-end",e.VERTICAL_INDEX="data-vertical-underline-index"}(g||(g={}))},"0A/6":function(e,t,a){"use strict";var n=a("ERkP"),i=a("OA+g"),r=a("I7vG"),s=a("vOOZ"),o=a("LNSM"),l=a("lrqh"),c=a("Urso"),d=a("+w1e"),p=a("D/5U"),u=a("sWLkM"),m=a("rq0W");const h=({children:e})=>n.createElement(s.a.div,{role:"animation-wrapper",className:p.a.animationWrapper},e),g=e=>Object(r.pipe)(l.g.fromNullable(e.activeAlert),l.g.fold(()=>e.id,e=>e.id));class f extends n.Component{constructor(){super(...arguments),this._elementState=c.a.emptyWithName("card")}_stateToElement(e){switch(e){case"added":case"rendered":return this.props.miniCard;case"focused":case"expanded":case"presuccess":return this.props.fullCard;case"success":return this.props.successCard;case"feedback_form":return this.props.feedbackForm;case"removed":return this.props.removedCard;case"muted":return this.props.mutedCard;default:return null}}componentWillUnmount(){const{card:e,actions:t}=this.props;t.next({type:d.a.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId})}render(){const{actions:e,card:t,transitionClassMapper:a}=this.props;if(!t.visualState.incomplete)return n.createElement(h,null,n.createElement(s.a.div,{key:t.visualState.transition.type},this._stateToElement(t.visualState.transition.type)));const f=a||m.c,{main:b,shade:y}=f(t.visualState),C=o.a.create(void 0===y?l.g.none:Object(r.pipe)(t.visualState.from,l.g.map(e=>({state:e,className:y}))));return!b&&l.g.isNone(C.get())&&requestAnimationFrame(()=>e.next({type:d.a.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId})),n.createElement(c.a.Context.Provider,{value:this._elementState},n.createElement(h,null,C.view(Object(i.flow)(l.g.map(({state:a,className:i})=>n.createElement(s.a.div,{className:i,key:"shade"+a+g(t),onAnimationEnd:a=>{u.b.get(a.animationName)!==i&&p.b.get(a.animationName)!==i||(e.next({type:d.a.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}),requestAnimationFrame(()=>C.set(l.g.none)))}},this._stateToElement(a))),l.g.toUndefined)),n.createElement(s.a.div,{className:b,key:"expanded"===t.visualState.transition.type?"focused":t.visualState.transition.type,onAnimationEnd:()=>e.next({type:d.a.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}),onTransitionEnd:()=>{"presuccess"===t.visualState.transition.type&&e.next({type:d.a.Kind.startTransitionTo,id:t.id,transition:{type:"success",clockwise:t.visualState.transition.clockwise}})}},this._stateToElement(t.visualState.transition.type))))}}var b=a("9NHN"),y=a("uO+M"),C=a("6gXa"),v=a("WIwS"),S=a("ps/9"),E=a("tZ26"),w=a("BugA");class k extends n.Component{constructor(){super(...arguments),this._createCardToggler=e=>()=>this.props.actions.next({type:d.b.Type.hover,kind:e,id:this.props.cardId})}componentWillUnmount(){this._createCardToggler("unhover")()}render(){const{getActiveAlert:e,cardId:t,actions:a,children:i,counter:r,className:o,hideActivateButton:l,hideDot:c}=this.props;return n.createElement(s.a.div,Object.assign({"data-aid":t,onClick:t=>{const n=e();a.next({type:d.b.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:n},clickPoint:{x:t.clientX,y:t.clientY}})},onMouseEnter:this._createCardToggler("hover"),onMouseLeave:this._createCardToggler("unhover")},Object(b.c)(o,P.wrapper,c?null:P.miniCard)),n.createElement(w.Base,Object.assign({},Object(b.c)(P.contentWrapper,c?P.contentWrapperWithoutDot:P.contentWrapperWithDot)),i),n.createElement("div",{className:P.iconContainer},r&&n.createElement("div",{className:_},r),l?null:n.createElement("div",{className:O},n.createElement(E.d.Arrow,{className:P.activeTopIcon}),n.createElement(E.d.Arrow,{className:P.activeBottomIcon}))))}}const _=C.a.joinClasses(["baseMiniCounterContainer",C.a.style({position:"absolute",height:C.a.percent(100),top:0,right:0,zIndex:S.i,margin:"auto 0",background:y.Color.CoreNeutral0,opacity:1})]),O=C.a.joinClasses(["baseMiniActivateBtnSelector",C.a.style({position:"absolute",top:0,right:0,height:C.a.percent(100),zIndex:S.i,display:"flex",flexDirection:"column",margin:"auto 0",background:y.Color.CoreNeutral0,opacity:0,justifyContent:"center"})]),A={position:"relative",display:"flex",overflow:"hidden",borderRadius:C.a.rem(S.s),background:y.Color.CoreNeutral0,boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",cursor:"pointer",alignItems:"center",$nest:{"&:hover":{background:y.Color.CoreNeutral0,boxShadow:"0 1px 12px 0 rgba(129, 137, 169, .2)",transitionDuration:C.a.seconds(.2)},"&:hover .baseMiniActivateBtnSelector":{opacity:1},"&:hover .baseMiniCounterContainer":{opacity:0}}},T={overflow:"hidden",color:v.l,textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:C.a.rem(1.5)},x={margin:`0 ${C.a.rem(3)} 0 ${C.a.rem(2)}`},I={paddingLeft:C.a.rem(.5)},M={position:"absolute",top:0,right:C.a.rem(.5),bottom:0,display:"flex"},j={display:"flex",margin:`${C.a.rem(.1)} 0 ${C.a.rem(-1.25)}`,transform:"rotate(180deg)"},L={$nest:{"&:before":{position:"absolute",width:C.a.px(10),height:C.a.px(10),borderRadius:C.a.percent(50),content:"''",transform:"scale(.5)"}}},N={$nest:{"&:before":{margin:`auto 0 auto ${C.a.rem(.75)}`}}},P=C.a.stylesheet({wrapper:[A],contentWrapper:[T],contentWrapperWithDot:[x],contentWrapperWithoutDot:[I],iconContainer:[M],activeTopIcon:[j],activeBottomIcon:[{display:"flex",height:"auto"}],dotBase:[L],miniCard:[L,N]});var F,D=a("D9EC"),R=a("rk+4"),B=a("nnns"),H=a("zR/0"),W=a("3bJT");!function(e){e[e.stage0=0]="stage0",e[e.stage1=1]="stage1",e[e.stage2=2]="stage2"}(F||(F={}));const $=({actions:e,isLastCard:t})=>{const a=n.useContext(R.a.Context).successLens.fixedText.titles,i=o.a.create(F.stage0),r=()=>e.next({type:d.b.Type.switchToNext});return n.createElement(s.a.div,{className:K.successWrapper},n.createElement(w.P1,{className:K.successText,onAnimationEnd:()=>{i.set(F.stage1)}},a[Object(D.q)(a.length)]),n.createElement(s.a.span,null,i.view(e=>e>=F.stage1&&n.createElement("span",{onAnimationEnd:()=>i.set(F.stage2)},n.createElement(E.d.CheckmarkAnimated,{className:K.successCheckMark})))),n.createElement(s.a.span,{className:K.successBtnHolder},t.pipe(H.a.combineLatest(i,(e,t)=>t<F.stage2?null:e?n.createElement(B.a.Caps,{className:K.doneBtn,name:"done",key:"done-btn",onClick:r},"Done"):n.createElement(B.a.Caps,{className:K.successBtn,name:"next",key:"next-card",onClick:r},"Next")))))},V=C.a.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),U={fontWeight:"bold",lineHeight:C.a.rem(2),animation:`${V} ${C.a.seconds(.2)} linear forwards`},G={position:"relative",borderRadius:C.a.rem(S.r),background:y.Color.CoreNeutral0,boxShadow:`0 ${C.a.rem(.625)} ${C.a.rem(S.a)} 0 rgba(198, 203, 222, .45)`},z={display:"flex",padding:`${C.a.rem(1.5)} ${C.a.rem(2)}`,alignItems:"center"},q={marginLeft:C.a.rem(1),minWidth:0,minHeight:0,width:C.a.rem(1.325),height:C.a.rem(1.325),animation:`${V} ${C.a.seconds(.2)} linear forwards`},Y={float:"right",width:C.a.rem(4),textAlign:"center",animation:`${V} ${C.a.seconds(.2)} linear forwards`},X={backgroundColor:y.Color.CoreGreen50,color:y.Color.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:v.a}}},K=Object.assign(Object.assign({},C.a.stylesheet({successText:[U],successCheckMark:[q],successBtnHolder:[{marginLeft:"auto",fontWeight:"bold"}],successBtn:[Y],doneBtn:[Y,X]})),{fullCard:C.a.joinClasses([W.b.fullCardSelector,C.a.style(G)]),successWrapper:C.a.joinClasses([W.b.successWrapperSelector,C.a.style(G,z)])});var Z,Q;a.d(t,"a",(function(){return Z})),(Q=Z||(Z={})).Mini=k,Q.Card=f,Q.Success=$},"0Hf4":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("lyoF");const i=Object(n.a)()},"0PmZ":function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("ERkP"),i=a("9NHN"),r=a("6gXa"),s=a("rk+4"),o=a("nnns"),l=a("tZ26"),c=a("BugA");const d=({onLeftClick:e,onRightClick:t,currentMatch:a,totalMatch:r,replaceOneMatch:d=!0,disableOnEnd:p=!0,style:u})=>{const h=n.useContext(s.a.Context).card.matchesNavigation;return 0===r?null:1===r&&d?n.createElement("div",Object.assign({},Object(i.c)(m.matchesRow,u.matchesRow||!1)),n.createElement(c.Lawyer,Object.assign({},Object(i.c)(m.matchesCount,u.matchesCount||!1)),h.numberOfMatches(r))):n.createElement("div",Object.assign({},Object(i.c)(m.matchesRow,u.matchesRow||!1)),n.createElement(o.a.Ghost,{disabled:p&&0===a,name:"left",title:h.prev,onClick:e},n.createElement(l.d.Arrow,Object.assign({},Object(i.c)(m.leftButtonIcon,u.leftButtonIcon||!1)))),n.createElement(c.Lawyer,Object.assign({},Object(i.c)(m.matchesCount,u.matchesCount||!1)),h.currentMatchPosition(a+1,r)),n.createElement(o.a.Ghost,{disabled:p&&a===r-1,name:"right",title:h.next,onClick:t},n.createElement(l.d.Arrow,Object.assign({},Object(i.c)(m.rightButtonIcon,u.rightButtonIcon||!1)))))},p={display:"inline-block",verticalAlign:"middle",$nest:{"& > * + *":{marginLeft:r.a.rem(.25)}}},u={textTransform:"uppercase",letterSpacing:r.a.px(.8),lineHeight:r.a.rem(2)},m=r.a.stylesheet({matchesRow:[p],leftButtonIcon:[{transform:"rotate(90deg)"}],rightButtonIcon:[{transform:"rotate(270deg)"}],matchesCount:[u]})},"0Qd1":function(e,t,a){"use strict";var n=a("ERkP"),i=a("nnns"),r=a("BugA"),s=a("9NHN"),o=a("tZ26"),l=a("maHj");const c=({className:e})=>n.createElement("div",Object.assign({},Object(s.c)(l.base,e)),n.createElement(o.d.Grammarly,{className:l.icon}),n.createElement("svg",{width:"99",height:"18",viewBox:"0 0 99 18"},n.createElement("g",{fill:"#4C4C4C",fillRule:"evenodd"},n.createElement("path",{d:"M2 17.16c-.5-.2-.84-.6-.84-1.16 0-.67.55-1.23 1.22-1.23.2 0 .36.04.5.1.86.4 1.8.63 2.92.63 2.05 0 3.02-.98 3.02-2.88v-.5c-.9 1.05-1.86 1.7-3.46 1.7-2.47 0-4.7-1.8-4.7-4.93v-.05c0-3.16 2.27-4.93 4.7-4.93 1.64 0 2.6.7 3.42 1.58v-.02c0-.8.67-1.48 1.5-1.48s1.5.67 1.5 1.5v6.8c0 1.9-.46 3.28-1.35 4.17-.98 1-2.5 1.42-4.55 1.42-1.4 0-2.63-.25-3.87-.74zM8.83 8.9v-.05c0-1.44-1.13-2.45-2.6-2.45-1.45 0-2.56 1-2.56 2.45v.04c0 1.45 1.1 2.44 2.57 2.44 1.46 0 2.6-1 2.6-2.45zM13.47 5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v.47C16.9 4.94 17.62 4 18.5 4c.94 0 1.47.6 1.47 1.46 0 .8-.52 1.26-1.13 1.4-1.52.35-2.37 1.52-2.37 3.65v2.8c0 .84-.67 1.5-1.5 1.5s-1.5-.66-1.5-1.5V5.5M19.6 11.65v-.03c0-2.3 1.77-3.38 4.28-3.38 1.06 0 1.83.18 2.58.43V8.5c0-1.25-.77-1.94-2.27-1.94-.84 0-1.5.12-2.08.3-.18.06-.3.08-.43.08-.7 0-1.26-.54-1.26-1.23 0-.52.34-.97.8-1.15.96-.36 1.98-.55 3.4-.55 1.62 0 2.8.43 3.56 1.18.8.8 1.14 1.96 1.14 3.38v4.8c0 .82-.65 1.45-1.46 1.45-.87 0-1.44-.6-1.44-1.23v-.02c-.73.8-1.73 1.34-3.2 1.34-2 0-3.63-1.15-3.63-3.25zm6.9-.7v-.52c-.5-.24-1.18-.4-1.9-.4-1.3 0-2.1.52-2.1 1.47v.04c0 .8.7 1.28 1.65 1.28 1.4 0 2.35-.77 2.35-1.86zM30.94 5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v.12c.7-.9 1.6-1.7 3.12-1.7 1.38 0 2.43.6 2.98 1.68.93-1.1 2.03-1.68 3.47-1.68 2.25 0 3.6 1.34 3.6 3.9v5.5c0 .82-.68 1.5-1.5 1.5-.84 0-1.5-.68-1.5-1.5V8.78c0-1.43-.64-2.16-1.77-2.16-1.12 0-1.8.73-1.8 2.15v4.5c0 .84-.7 1.5-1.52 1.5-.8 0-1.5-.66-1.5-1.5V8.8c0-1.43-.62-2.16-1.74-2.16-1.13 0-1.82.73-1.82 2.15v4.5c0 .84-.67 1.5-1.5 1.5s-1.5-.66-1.5-1.5V5.5M48.7 5.5c0-.83.68-1.5 1.5-1.5.84 0 1.5.67 1.5 1.5v.12c.7-.9 1.6-1.7 3.13-1.7 1.38 0 2.42.6 2.98 1.68.93-1.1 2.04-1.68 3.48-1.68 2.23 0 3.57 1.34 3.57 3.9v5.5c0 .82-.67 1.5-1.5 1.5s-1.5-.68-1.5-1.5V8.78c0-1.43-.63-2.16-1.75-2.16-1.13 0-1.82.73-1.82 2.15v4.5c0 .84-.67 1.5-1.5 1.5s-1.5-.66-1.5-1.5V8.8c0-1.43-.63-2.16-1.76-2.16-1.12 0-1.8.73-1.8 2.15v4.5c0 .84-.68 1.5-1.5 1.5-.84 0-1.5-.66-1.5-1.5V5.5M65.84 11.65v-.03c0-2.3 1.76-3.38 4.26-3.38 1.07 0 1.84.18 2.6.43V8.5c0-1.25-.78-1.94-2.28-1.94-.83 0-1.5.12-2.07.3-.18.06-.3.08-.44.08-.68 0-1.23-.54-1.23-1.23 0-.52.33-.97.8-1.15.96-.36 1.98-.55 3.38-.55 1.64 0 2.83.43 3.58 1.18.8.8 1.14 1.96 1.14 3.38v4.8c0 .82-.65 1.45-1.46 1.45-.86 0-1.43-.6-1.43-1.23v-.02c-.73.8-1.74 1.34-3.2 1.34-2 0-3.63-1.15-3.63-3.25zm6.9-.7v-.52c-.52-.24-1.2-.4-1.93-.4-1.27 0-2.06.52-2.06 1.47v.04c0 .8.67 1.28 1.64 1.28 1.4 0 2.35-.77 2.35-1.86zM77.17 5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v.47C80.6 4.94 81.3 4 82.2 4c.93 0 1.46.6 1.46 1.46 0 .8-.5 1.26-1.12 1.4-1.52.35-2.37 1.52-2.37 3.65v2.8c0 .84-.67 1.5-1.5 1.5s-1.5-.66-1.5-1.5V5.5M84.57 1.67c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V13.3c0 .84-.67 1.5-1.5 1.5s-1.5-.66-1.5-1.5V1.68M89.96 17.63c-.43-.15-.95-.5-.95-1.24s.58-1.23 1.2-1.23c.23 0 .37.04.5.08.25.08.4.12.62.12.53 0 .8-.1 1.07-.64l.1-.23-3.63-8.37c-.07-.2-.15-.5-.15-.7 0-.84.65-1.43 1.48-1.43.75 0 1.18.4 1.44 1.12l2.3 6.16 2.2-6.14C96.37 4.5 96.8 4 97.58 4c.77 0 1.42.6 1.42 1.38 0 .24-.08.57-.14.7l-3.7 8.87c-.88 2.15-1.77 2.96-3.56 2.96-.67 0-1.15-.1-1.64-.27"}))));var d=a("6gXa"),p=a("uO+M");const u=d.a.style({display:"flex",flexDirection:"column",width:"100vw",height:"100vh",background:p.Color.CoreNeutral1,justifyContent:"center",alignItems:"center"}),m=d.a.style({position:"absolute",top:d.a.rem(1.875),left:d.a.rem(2.5)}),h=d.a.style({marginTop:d.a.rem(4.25),letterSpacing:"-.8px",fontSize:d.a.rem(2.625),lineHeight:d.a.rem(3.5)}),g=d.a.style({textAlign:"center",marginTop:d.a.rem(1),color:p.Color.CoreNeutral50}),f=d.a.style({$nest:{"&[data-textpos='everywhere']":{marginTop:d.a.rem(2.25),padding:`0 ${d.a.rem(2.5)}`,textTransform:"initial",letterSpacing:0,fontSize:d.a.rem(1),lineHeight:d.a.rem(3.125)}}}),b=d.a.style({marginTop:d.a.rem(1)});a.d(t,"a",(function(){return y}));const y=({name:e,logo:t,title:a,description:s,primaryButton:o,secondaryButton:l})=>n.createElement("div",{"data-name":e,className:u},n.createElement(c,{className:m}),t,n.createElement(r.H1,{className:h},a),n.createElement(r.Paper,{className:g},s),n.createElement(i.a.Primary,{name:"primary-button",className:f,onClick:o.onClick},o.title),l&&n.createElement(i.a.Ghost,{className:b,name:"secondary-button",onClick:l.onClick},l.title))},"0Z6w":function(e,t,a){"use strict";var n=a("ERkP"),i=a("I7vG"),r=a("lrqh"),s=a("6gXa"),o=a("rk+4"),l=a("dE97"),c=a("+w1e"),d=a("XxrX"),p=a("nnns"),u=a("aIes"),m=a("IdhR"),h=a("yZqL"),g=a("H9T+"),f=a("HUX/"),b=a("OA+g"),y=a("uqkn"),C=a("tZ26");const v=({card:e,actions:t,hasHeader:a})=>{const s=n.useContext(o.a.Context),c=r.g.isNone(e.activeAlert.takeawayFeedback)?s.card.takeaway.defaultTitle:e.activeAlert.title,p=r.g.fromNullable(e.activeAlert.highlightTexts[0]),u=Object(i.pipe)(e.activeAlert,r.g.fromPredicate(e=>!e.takeawayIsLikelyToBeRead&&(r.g.contains(l.q.correctlyDetected)(e.takeawayFeedback)||r.g.contains(l.q.correctlyDetectedAndDone)(e.takeawayFeedback))),r.g.map(()=>e.meta.explanation));return n.createElement(n.Fragment,null,!a&&Object(i.pipe)(e.renderOptions.layoutDensity,d.a.Density.matchOrDefault(d.a.Density.minimal)(()=>n.createElement(g.k,{alert:e.activeAlert,options:e.renderOptions},n.createElement(g.u,{text:y.a.miniTitle(e,s)})),()=>n.createElement(n.Fragment,null,n.createElement(g.k,{alert:e.activeAlert,options:e.renderOptions}),n.createElement(g.t,{text:c})))),Object(i.pipe)(p,r.g.fold(b.constNull,t=>n.createElement(g.j,{text:t,layoutDensity:e.renderOptions.layoutDensity}))),Object(i.pipe)(u,r.g.fold(b.constNull,a=>n.createElement(g.g,{description:a,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))},S=({card:e,feedbackActions:t})=>n.createElement(n.Fragment,null,n.createElement(p.a.Ghost,{name:"takeaway-like",onClick:u.d.callOnce(()=>{var a;return t.next({type:c.b.Type.takeawayCorrectlyDetected,id:e.id,alertId:e.activeAlert.id,takeawayText:null!==(a=e.activeAlert.highlightTexts[0])&&void 0!==a?a:""})})},n.createElement(C.d.YesCircle,null)," Yes"),n.createElement(p.a.Ghost,{name:"takeaway-dislike",onClick:u.d.callOnce(()=>t.next({type:c.b.Type.takeawayIncorrectlyDetected,id:e.id,alertId:e.activeAlert.id}))},n.createElement(C.d.NoCircle,null)," No")),E=({card:e,feedbackActions:t})=>{const a=n.useContext(o.a.Context);return n.createElement(n.Fragment,null,n.createElement(p.a.Ghost,{name:"resolve",title:a.resolve,onClick:u.d.callOnce(()=>t.next({type:c.b.Type.takeawayResolve,id:e.id,alertId:e.activeAlert.id,isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead}))},n.createElement(C.d.YesCircle,null)),n.createElement(p.a.Ghost,{name:"ignore",title:a.dismiss,onClick:u.d.callOnce(()=>t.next({type:c.b.Type.takeawayDismiss,id:e.id,alertId:e.activeAlert.id,isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead}))},n.createElement(C.d.Ignore,null)))};function w(e,t){return!((r.g.contains(l.q.correctlyDetected)(e.activeAlert.takeawayFeedback)||r.g.contains(l.q.correctlyDetectedAndDone)(e.activeAlert.takeawayFeedback))&&e.activeAlert.takeawayIsLikelyToBeRead&&t)}function k(e,t){const a=r.g.contains(l.q.correctlyDetected)(e.activeAlert.takeawayFeedback);return e.activeAlert.takeawayIsLikelyToBeRead&&a&&t}function _(e){return!r.g.isNone(e.takeawayFeedback)&&!(!r.g.isSome(e.examples)&&!r.g.isSome(e.details))}a.d(t,"a",(function(){return A}));const O=(e,t)=>Object.assign(Object.assign({},Object(f.a)(e.layoutDensity)),{wrapper:Object(i.pipe)(e.layoutDensity,d.a.Density.matchOrDefault(d.a.Density.minimal)(()=>t?I.minimalCardWrapperWithHeader:I.minimalCardWrapper,()=>void 0))});var A;(A||(A={})).Full=({card:e,actions:t,cardHeader:a,isChecklistItem:i,isChecklistBundleItem:s})=>{const l=n.useContext(o.a.Context);return n.createElement(h.a,{visualState:e.visualState,onFocus:()=>t.next({type:c.b.Type.alertCardShow,cardType:c.b.getCardType(e),alertId:e.activeAlert.id}),theme:O(e.renderOptions,!!a),body:n.createElement(v,{card:e,actions:t,hasHeader:!!a}),mainActions:r.g.isNone(e.activeAlert.takeawayFeedback)?n.createElement(S,{card:e,feedbackActions:t}):k(e,!!s)?n.createElement(p.a.Ghost,{name:"takeaway-correctly-detected-and-done",onClick:u.d.callOnce(()=>t.next({type:c.b.Type.takeawayCorrectlyDetectedAndDone,id:e.id,alertId:e.activeAlert.id}))},l.done):w(e,!!i&&!s)?n.createElement(E,{card:e,feedbackActions:t}):null,header:a,footer:_(e.activeAlert)?n.createElement(g.i,{card:e}):null,subActions:_(e.activeAlert)?n.createElement(m.a,{key:"card-actions-button",mode:"default",actions:t,card:e}):null})};const T={padding:`${s.a.rem(.75)} ${s.a.rem(.5)} ${s.a.rem(.5)} ${s.a.rem(1)}`},x={padding:`0 ${s.a.rem(.5)} ${s.a.rem(.5)} ${s.a.rem(1)}`},I=s.a.stylesheet({minimalCardWrapper:[T],minimalCardWrapperWithHeader:[x]})},"0gxC":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("D57K"),r=a("ERkP"),s=a("OA+g"),o=a("I7vG"),l=a("vOOZ"),c=a("9NHN"),d=a("zR/0"),p=a("nb6X"),u=a("hoSD"),m=a("6fbX"),h=a("lrqh"),g=a("D9EC"),f=a("uO+M"),b=a("6gXa"),y=a("By/D"),C=a("1gzW"),v=a("gy42");!function(e){let t;!function(e){e.toSelector=function(e){switch(e){case"top":case"topCenter":return{align:"top",selector:p.a.Selector.preferBy("top",p.a.Selector.Placement.middle)};case"topRight":return{align:"top",selector:p.a.Selector.preferBy("top",p.a.Selector.Placement.right)};case"topLeft":return{align:"top",selector:p.a.Selector.preferBy("top",p.a.Selector.Placement.left)};case"bottom":case"bottomCenter":return{align:"bottom",selector:p.a.Selector.preferBy("bottom",p.a.Selector.Placement.middle)};case"bottomRight":return{align:"bottom",selector:p.a.Selector.preferBy("bottom",p.a.Selector.Placement.right)};case"bottomLeft":return{align:"bottom",selector:p.a.Selector.preferBy("bottom",p.a.Selector.Placement.left)};case"left":return{align:"left",selector:p.a.Selector.preferBy("left",p.a.Selector.Placement.middle)};case"right":return{align:"right",selector:p.a.Selector.preferBy("right",p.a.Selector.Placement.middle)};case"auto":case"center":return{align:u.c.Rect.Axis.vertical,selector:p.a.Selector.preferBy("top",p.a.Selector.Placement.middle)};default:return Object(m.d)(e)}}}(t=e.Alignment||(e.Alignment={})),e.ByPoint=e=>{var{point:t,className:a}=e,n=Object(i.__rest)(e,["point","className"]);return r.createElement(l.a.div,Object.assign({role:"positioned-container",style:t.pipe(d.a.map(h.g.mapOrDefault(p.a.toCss,{})))},Object(c.c)(A.wrapper,a,t.pipe(d.a.map(e=>h.g.isNone(e)?A.hidden:""))),n))};const a=t=>{const{rect:a,onMount:i}=C.a.useRectWatcher(),o=v.b.toObservable(t.rect),l=v.b.toObservable(t.pinTargetRect),c=f(t.align),u=n(o,a,c,t.selector||p.a.Selector.preferTopMiddle,l,"relative"===t.position);return r.createElement(e.ByPoint,{mount:i,className:t.className,point:u.pipe(d.a.map(h.g.map(e=>e.tangentialPoint)))},t.withPin&&u.pipe(d.a.map(Object(s.flow)(h.g.chain(e=>e.median),h.g.map(t=>r.createElement(e.Pin,{point:t,key:"pin"})),h.g.toNullable))),t.children)};e.ByAbsoluteRect=e=>r.createElement(a,Object.assign({},e,{position:"absolute"})),e.ByRelativeRect=e=>r.createElement(a,Object.assign({},e,{position:"relative"})),e.Pin=e=>{const t=v.b.toObservable(e.point).pipe(d.a.map(e=>e.side),d.a.map(e=>O[e])),a=v.b.toObservable(e.point).pipe(d.a.map(e=>e.point),d.a.map(({x:e,y:t})=>({top:t,left:e})));return r.createElement(l.a.i,Object.assign({role:"pin",style:a},Object(c.c)(t,O.wrapper)))};const n=(e,t,a,n,i,s)=>d.a.combineLatestStatic(e,r.useContext(y.a.Context).pipe(d.a.map(e=>e.rect)),t.pipe(d.a.distinctUntilChanged(h.g.getEq(u.c.Box.eq).equals)),i).pipe(d.a.map(([e,t,i,r])=>Object(o.pipe)(i,h.g.map(i=>{const l=p.a.QualifiedVariants.build(t,i,a(e));let c=n(l).point;const d=Object(o.pipe)(p.a.toRect(i,c),h.g.fromEither,h.g.chain(t=>Object(o.pipe)(u.c.Rect.getMedian(e,t),h.g.map(e=>({anchorMedian:e,bodyRect:t})))),h.g.chain(({anchorMedian:e,bodyRect:t})=>{if(r){const a=u.c.Rect.stickToSide(u.c.Rect.Side.invert(e.side),r)(t);return c=p.a.fromRect(a),Object(o.pipe)(u.c.Rect.getMedian(r,a),h.g.map(({side:e,point:t})=>({side:e,point:u.c.Rect.Point.relativeTo(t,a)})))}return Object(o.pipe)(h.g.some(e),h.g.map(({side:e,point:a})=>({side:e,point:u.c.Rect.Point.relativeTo(a,t)})))}));return{tangentialPoint:p.a.relativeTo(c,s?e:t),median:d}})))),f=(e=u.c.Rect.Axis.both)=>Object(g.v)(u.c.Rect.Axis,e)?t=>p.a.Variants.byAxis(e,t):t=>({[e]:p.a.Zone.bySide(e,t)})}(n||(n={}));const S={position:"absolute",border:`${b.a.px(7)} solid ${f.Color.BackgroundTooltip}`,transform:`translate(${b.a.px(-7)}, ${b.a.px(-7)})`},E={borderTopColor:"transparent",borderRightColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:`translateY(${b.a.px(7)})`}}},w={borderTopColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",$nest:{"& + *":{transform:`translateX(${b.a.px(-7)})`}}},k={borderRightColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:`translateY(${b.a.px(-7)})`}}},_={borderTopColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:`translateX(${b.a.px(7)})`}}},O=b.a.stylesheet({wrapper:[S],top:[E],right:[w],bottom:[k],left:[_]}),A=b.a.stylesheet({hidden:[{visibility:"hidden",opacity:0}],wrapper:[{position:"absolute",transition:"opacity .2s"}]})},"0mPX":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("aIes");const i=["b","i","br","ul","li"];var r;!function(e){e.renderToHtml=function(e,t){const a=t?{allowedTags:i.concat(["a"]),linkRegExp:t}:{allowedTags:i};return n.d.setInnerHTML(e,a)}}(r||(r={}))},"1Y2u":function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a("ERkP"),i=a("LNSM"),r=a("9NHN"),s=a("rk+4"),o=a("nnns"),l=a("tZ26"),c=a("mvgk"),d=a("quYV"),p=a("zR/0"),u=a("aH3e"),m=a("QRqj");const h=l.c.size+2,g=(28-h)/2,f=e=>{const t=n.useContext(s.a.Context),a=i.a.combine(e.checking,e.hasErrors,(e,a)=>{const i=e?t.sidebar.checkingLabel:a?t.sidebar.fixErrorsLabel:t.sidebar.openLabel;return n.createElement("div",{className:m.labelReveal,key:"label","data-name":i},i)}),r=d.a.fadeOutState(e.checking.pipe(p.a.skipWhile(e=>!1===e))),l=e.checking.pipe(p.a.map(e=>e?"inProgress":"end")),u=l.pipe(p.a.map(e=>"end"!==e?n.createElement(c.a.Svg,{role:"new-spinner",key:"loading",type:"white",size:h,strokeWidth:5,onTransitionEnd:r.complete,x:164+g,y:g}):null)),f=l.pipe(p.a.map(e=>"inProgress"===e?null:n.createElement("g",{"data-name":"checking-complete",className:"checking-complete",key:"complete"})));return n.createElement(o.a,{name:"assistant",className:m.full,onClick:e.onClick},n.createElement(y,null,f,u),a)},b=Object(r.d)(e=>n.createElement("g",Object.assign({},e))),y=({children:e})=>{const t=n.useContext(u.a.Context);return n.createElement("svg",{viewBox:"0 0 192 28",className:t.has(u.a.Flag.supportsSVGTransitions)?m.background:m.edgeBackground},n.createElement("defs",null,n.createElement("mask",{id:"mask"},n.createElement("circle",{cx:14,cy:14,r:14,fill:"#fff"}),n.createElement("rect",{x:14,width:164,height:28,fill:"#fff"}),n.createElement("circle",{cx:178,cy:14,r:14,fill:"#fff"})),n.createElement("clipPath",{id:"clip"},n.createElement("circle",{cx:178,cy:14,r:14}),n.createElement("rect",{x:-14,width:192,height:28,fill:"#fff"}))),n.createElement("g",{clipPath:"url(#clip)"},n.createElement("rect",{id:"box",x:"0",y:"0",width:192,height:28,mask:"url(#mask)"})),n.createElement(b,null,e))}},"1d/y":function(e,t,a){"use strict";var n=a("D57K"),i=a("ERkP"),r=a("OA+g"),s=a("vOOZ"),o=a("9NHN"),l=a("xlCj"),c=a("rk+4"),d=a("nnns"),p=a("D6Vf"),u=a("BugA"),m=a("pgXu"),h=a("GUi3"),g=a("zR/0"),f=a("4lva"),b=a("lrqh"),y=a("6fbX"),C=a("D9EC"),v=a("XaD9"),S=a("Pe9T");const E=({className:e})=>i.createElement("svg",{viewBox:"0 0 68 68",width:"68",height:"68",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e},i.createElement("path",{d:"M12.965 22.107c3.688-6.33 10.104-10.96 17.954-11.942 4.466-.621 8.752.094 12.604 1.714.68.292 1.411.648 2.027.994.616.346 1.284.755 1.9 1.102a23.872 23.872 0 016.326 6.12c.467.686.987 1.435 1.391 2.175.35.676.701 1.352.998 1.965.872 2.073 1.552 4.305 1.808 6.678.831 6.42-1.022 12.61-4.636 17.478-.806 1.107-1.718 2.088-2.683 3.006-1.484 1.461-3.18 2.67-4.92 3.698-2.662 1.48-5.578 2.526-8.793 2.96-5.77.745-11.235-.6-15.809-3.338a18.989 18.989 0 01-3.523-2.65",stroke:"#8383EF"}),i.createElement("path",{d:"M31.985 18.544c.297-.034.594-.067.827-.048M34.467 18.401c1.995.051 3.841.443 5.592 1.238M40.791 19.995c.223.136.51.22.733.356.392.21.838.482 1.23.692 1.55 1.071 3.015 2.43 4.109 3.992.308.496.68.94.87 1.426.255.433.457.803.648 1.289a16.01 16.01 0 011.202 4.275c.565 4.163-.621 8.178-2.964 11.33-.53.66-1.124 1.374-1.707 1.972A16.193 16.193 0 0141.7 47.7c-1.24.718-2.64 1.246-4.083 1.594",stroke:"#00B18F"}),i.createElement("path",{d:"M34.82 41.18a7.096 7.096 0 01-4.615-.978c-.392-.21-.721-.473-1.05-.736-.16-.19-.436-.39-.595-.579-.85-1.012-1.497-2.302-1.657-3.785-.138-1.07-.044-2.12.274-3.033.021-.234.159-.457.233-.627.138-.224.223-.51.36-.734 1.05-1.851 2.937-3.22 5.26-3.552 1.305-.125 2.589-.016 3.66.486.17.073.393.21.563.283.17.073.392.21.562.283a6.731 6.731 0 011.837 1.801",stroke:"#1CA6D0"}),i.createElement("path",{d:"M8.764 63.084h18.649c3.813 0 6.933-3.139 6.933-6.974V32.818c0-3.835-3.12-6.973-6.933-6.973H8.764c-3.812 0-6.932 3.138-6.932 6.973V56.11c.07 3.836 3.12 6.974 6.932 6.974z",fill:"#F2F3FA",stroke:"#1C1E33"}),i.createElement("path",{d:"M18.123 54.297c6.012 0 10.885-4.902 10.885-10.949 0-6.046-4.873-10.948-10.884-10.948-6.012 0-10.885 4.902-10.885 10.948 0 6.047 4.873 10.949 10.884 10.949z",fill:"#AFE4F4",stroke:"#1C1E33"}),i.createElement("path",{d:"M8.14 47.672c-2.148-4.951-.277-10.67 4.091-13.529 1.872 0 4.16-.558 9.498 6.346a482.407 482.407 0 012.426 3.627c-1.11.627-2.218 1.045-2.218 1.045.97 2.093 3.05 5.37 1.317 7.88l-.832.42c-5.477 2.3-11.924-.21-14.281-5.789z",fill:"#fff",stroke:"#1C1E33"}),i.createElement("path",{d:"M19.302 36.096c-2.08-2.72-3.605-2.86-4.853-3.138-.277.14-.554.209-.901.348h-.07l-.831.419h-.07c-.277.14-.485.349-.762.488-1.248.907-2.288 2.022-3.05 3.347 0 .07-.07.07-.07.14-.138.209-.208.348-.277.558-.07.14-.139.209-.139.348-.069.14-.138.349-.208.558-.069.21-.138.349-.208.488-.069.14-.138.35-.138.489-.07.139-.07.348-.139.488-.07.14-.07.348-.139.488-.069.21-.069.349-.069.558-.07.14-.07.279-.07.418 0 .21 0 .419-.069.628V44.186c0 .348.07.697.14 1.045a11.92 11.92 0 001.039 3.138c.139.35.347.628.555.907.97 1.534 2.287 2.72 3.812 3.626.14-1.604-.623-3.696-1.317-5.37-1.109-2.72 1.317-3.068 2.565-1.882 1.248 1.116.902-.349.763-2.86-.07-3.556 2.773-5.509 4.506-6.694z",fill:"#1C1E33"}),i.createElement("path",{d:"M47.605 40.74H28.956c-3.813 0-6.932-3.139-6.932-6.974V10.474c0-3.835 3.12-6.973 6.932-6.973h18.649c3.813 0 6.932 3.138 6.932 6.973v23.292c0 3.835-3.12 6.974-6.932 6.974z",fill:"#fff",stroke:"#1C1E33"}),i.createElement("path",{d:"M38.246 31.954c-6.011 0-10.884-4.902-10.884-10.949s4.873-10.948 10.884-10.948c6.01 0 10.884 4.901 10.884 10.948 0 6.047-4.873 10.949-10.884 10.949z",fill:"#B9CDFF",stroke:"#1C1E33"}),i.createElement("path",{d:"M48.991 22.888c.971-5.37-2.149-10.46-7.07-12.204-1.803.419-4.16.419-7.835 8.438-.554 1.534-1.525 4.045-1.525 4.045 1.248.349 2.427.488 2.427.488-.486 2.232-1.803 5.928.485 7.95.277.07.555.14.901.21 5.893 1.045 11.578-2.93 12.617-8.927z",fill:"#fff",stroke:"#1C1E33"}),i.createElement("path",{d:"M45.04 24.84c1.178-2.37-1.179-3.975-1.872-2.58-.693 1.464-2.01 1.813-1.664.628.486-2.371 1.525-5.37-2.149-6.137-3.674-.697-3.882-3.975-2.98-6.555.831-.14 1.663-.21 2.564-.14 6.032.349 10.607 5.58 10.191 11.646-.208 3.417-1.941 6.346-4.506 8.229-.901-1.186-.416-3.487.416-5.09z",fill:"#1C1E33"}));var w=a("M32K"),k=a("9A2v");a.d(t,"a",(function(){return _}));const _=({upgradeViewModel:e,navigationViewModel:t,isSidebarOpen:a})=>i.createElement(s.a.div,{className:a.view(e=>e?"":k.closedSidebar)},t.popover.view(Object(r.flow)(b.g.map(a=>{const n={navigationViewModel:t,upgradeViewModel:e};switch(a){case f.a.ProofitHook:return i.createElement(x,Object.assign({},n,{key:"proofit"}));case f.a.PlagiarismHook:return i.createElement(N,Object.assign({},n,{key:"plagiarism"}));case f.a.EngagementHook:return i.createElement(I,Object.assign({},n,{key:"engagement"}));case f.a.DeliveryHook:return i.createElement(M,Object.assign({},n,{key:"delivery"}));case f.a.GbVoxHook:return i.createElement(L,Object.assign({},n,{key:"GbVoxHook"}));case f.a.GbEnableVoxHook:return i.createElement(j,Object.assign({},n,{key:"GbEnableVox"}));default:return Object(y.d)(a)}}),b.g.toNullable))),O=({title:e,description:t,visible:a,children:n,footer:r,className:l,overlayType:c})=>i.createElement(s.a.div,{className:k.wrapper},i.createElement(p.b,{positionType:"fixed",visible:a,alignment:"none",overlayType:c}),a.view(a=>a&&i.createElement("div",Object.assign({key:"container"},Object(o.c)(k.container,l)),i.createElement("div",{className:k.messageContainer},i.createElement(u.Paper,{className:k.baseTitle},e),i.createElement(u.Base,null,t),i.createElement(d.a.Group,{className:k.buttonsContainer},r)),i.createElement("div",{className:k.imageContainer},n)))),A=e=>{const{gnarSpec:t,pageId:a}=i.useContext(v.a.Context),n=e.navigationViewModel.popover.lens(l.a.create(b.g.exists(t=>t===e.type),e=>(Object(y.g)(!e,"Positive values shouldn't be set through Option.clear lens"),b.g.none)));return i.createElement(O,Object.assign({},e,{visible:n,className:e.className,overlayType:e.overlayType||"transparent",footer:i.createElement(i.Fragment,null,i.createElement(m.a,{size:"small",upgradeAction:()=>{t.getPremiumButtonClick(a,e.trackingPlacement),e.upgradeViewModel.openUpgradeUrl(e.place)}}),i.createElement(d.a.Ghost,{name:"later",className:k.laterButton,onClick:()=>{t.dismissUpHookButtonClick(a,e.trackingPlacement),n.set(!1)}},"Maybe later"))}))},T=e=>{const t=e.navigationViewModel.popover.lens(l.a.create(b.g.exists(t=>t===e.type),e=>(Object(y.g)(!e,"Positive values shouldn't be set through Option.clear lens"),b.g.none)));return i.createElement(s.a.div,{className:k.wrapper},i.createElement(p.b,{positionType:"fixed",visible:t,alignment:"none",overlayType:"transparent"}),t.view(a=>a&&i.createElement("div",Object.assign({key:"container"},Object(o.c)(w.container,k.gbVoxUphook)),i.createElement(u.Base,{className:w.title},e.title),i.createElement("div",{className:w.content},i.createElement(u.Base,null,e.description),i.createElement(E,{className:w.image})),i.createElement("div",{className:w.buttonsContainer},i.createElement(d.a.Ghost,{textPosition:"surrounded",name:"gb.hook.CTA",className:w.ctaButton,onClick:()=>Object(n.__awaiter)(void 0,void 0,void 0,(function*(){yield e.onCta(),t.set(!1)}))},e.cta),i.createElement(d.a.Flat,{name:"gb.hook.later",className:w.dismissButton,onClick:()=>{e.onLater(),t.set(!1)}},e.maybeLater)))))},x=e=>{const t=i.useContext(c.a.Context);return i.createElement(A,{type:f.a.ProofitHook,upgradeViewModel:e.upgradeViewModel,navigationViewModel:e.navigationViewModel,title:t.proofitTitle,description:t.proofitDescription,place:S.k.Place.DenaliDocument.editorDenaliProofit,className:e.className||k.proofit,overlayType:e.overlayType,trackingPlacement:"proofreadingTooltip"},i.createElement(P,null))},I=e=>{const t=i.useContext(c.a.Context);return i.createElement(A,{type:f.a.EngagementHook,upgradeViewModel:e.upgradeViewModel,navigationViewModel:e.navigationViewModel,title:h.a.OutcomeId.fromOutcomeId(h.a.SpecialId.Engagement),description:t.freemiumNotifications.engagement,place:S.k.Place.DenaliDocument.editorDenaliEngagement,className:e.className||k.engagement,overlayType:e.overlayType,trackingPlacement:"engagementLensTooltip"},i.createElement(D,null))},M=e=>{const t=i.useContext(c.a.Context);return i.createElement(A,{type:f.a.DeliveryHook,upgradeViewModel:e.upgradeViewModel,navigationViewModel:e.navigationViewModel,title:h.a.OutcomeId.fromOutcomeId(h.a.SpecialId.Delivery),description:t.freemiumNotifications.delivery,place:S.k.Place.DenaliDocument.editorDenaliDelivery,className:e.className||k.delivery,overlayType:e.overlayType,trackingPlacement:"deliveryLensTooltip"},i.createElement(R,null))},j=e=>{const t=i.useContext(c.a.Context).gbEnableVoxLensHook,{gnarSpec:a,pageId:n}=i.useContext(v.a.Context);return i.useEffect(()=>void a.gbEnableVoxNotificationShow(n)),i.createElement(T,Object.assign({type:f.a.GbEnableVoxHook,onCta:()=>{a.gbEnableVoxButtonClick(n),e.upgradeViewModel.enableGBVoxHookLens()},onLater:()=>void a.dismissUpHookButtonClick(n,"gbVoxLensEnableHook")},t,e))},L=e=>{const t=i.useContext(c.a.Context).gbVoxLensUpHook,{gnarSpec:a,pageId:n}=i.useContext(v.a.Context);return i.createElement(T,Object.assign({type:f.a.GbVoxHook,onCta:()=>g.a.mergeStatic(Object(C.f)(300),a.getGBButtonClick(n,"gbVoxLens").catch(C.l)).pipe(g.a.first(),g.a.tap(()=>e.upgradeViewModel.fromGbVoxUpHookLens())).toPromise(),onLater:()=>void a.dismissUpHookButtonClick(n,"gbVoxLens")},t,e))},N=e=>{const t=i.useContext(c.a.Context);return i.createElement(A,{type:f.a.PlagiarismHook,upgradeViewModel:e.upgradeViewModel,navigationViewModel:e.navigationViewModel,title:t.plagiarism.title,description:t.freemiumNotifications.plagiarism,place:S.k.Place.DenaliDocument.editorDenaliPlagiarism,className:e.className||k.outcomesPlagiarism,overlayType:e.overlayType,trackingPlacement:"plagiarismTooltip"},i.createElement(F,null))},P=()=>i.createElement("svg",{width:"78",height:"79",viewBox:"0 0 78 79"},i.createElement("defs",null,i.createElement("path",{d:"M30.333 58.933c16.753 0 30.334-13.192 30.334-29.466S47.086 0 30.333 0C13.581 0 0 13.193 0 29.467s13.58 29.466 30.333 29.466z",id:"profproofreadersimg-path"})),i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("g",{transform:"translate(2 2)"},i.createElement("path",{d:"M6.33 44.008c2.564 7.611 16.385 17.525 29.127 17.525C51.773 61.533 65 48.53 65 32.488 65 16.447 48.648 4.311 36.516 2.983c-8.395-.919-11.41-.345-18.512 3.497-4.216 2.28-7.884 6.083-10.256 9.605-2.569 3.814-4.281 11.482-4.281 16.403 0 3.514 1.719 8.403 2.863 11.52z",fill:"#B8D3FA"}),i.createElement("mask",{id:"profproofreadersimg-mask",fill:"#fff"},i.createElement("use",{xlinkHref:"#profproofreadersimg-path"})),i.createElement("path",{stroke:"#555C6A",strokeWidth:"2",d:"M30.333 59.933C13.035 59.933-1 46.3-1 29.467-1 12.634 13.035-1 30.333-1c17.299 0 31.334 13.634 31.334 30.467S47.632 59.933 30.333 59.933z"}),i.createElement("path",{d:"M29.843 47.74L31 51.519 26.81 67c-8.664-1.11-15.147-2.6-19.45-4.473 0 0-1.308-.306-1.36-3.263 0 0 .47-5.809 4.499-11.621 0 0 1.15-1.53 3.87-2.55l8.696-3.687a5.183 5.183 0 0 0 1.345-1.17c.041-.053.099-.131.172-.236l-.172 10.523 5.433-2.783zm24.59-.228c4.09 5.858 4.568 11.71 4.567 11.71-.053 2.98-1.38 3.29-1.38 3.29-2.61 1.126-9.133 2.622-19.573 4.488L34 51.523l1.24-3.84 4.908 2.836L40.366 40c.281.357.518.602.71.735.086.097.352.277.437.37.193.145.407.288.637.431 2.902 1.806 8.352 3.408 8.352 3.408 2.763 1.027 3.931 2.568 3.931 2.568zM40 36.076V37c0 2.5-4.5 8-7.688 8-3.188 0-7.312-5.5-7.263-8 .016-.5.016-.643 0-.924-1.271-1.628-2.286-2.805-2.845-4.803-1.451 0-1.82-5.804-1.451-6.707-.043-.098-.078-3.484.35-7.296 0 0 .204-7.073 7.397-8.27 1.005 1.073 9.547-2.5 9.547 3.5C45 9 44.453 24.284 44.358 24.566c.31.478 0 6.707-1.695 6.707-.562 1.537-1.64 3.463-2.663 4.803z",fill:"#FFF",mask:"url(#profproofreadersimg-mask)"})),i.createElement("g",{transform:"translate(43 44)"},i.createElement("ellipse",{stroke:"#555C6A",strokeWidth:"2",fill:"#FFF",strokeLinecap:"square",cx:"15.714",cy:"15.963",rx:"16.714",ry:"16.963"}),i.createElement("ellipse",{fill:"#68DEC2",style:{mixBlendMode:"multiply"},cx:"18.571",cy:"17.414",rx:"16.429",ry:"16.688"}),i.createElement("path",{stroke:"#FFF",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",d:"M7.857 17.274l5.501 5.724L25 10.884"})))),F=()=>i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32"},i.createElement("defs",null,i.createElement("rect",{id:"plariarismoutcomesimg-rect",width:"22",height:"22",rx:"4"}),i.createElement("path",{id:"plariarismoutcomesimg-path",d:"M22 10v8a4 4 0 0 1-4 4h-8v-8a4 4 0 0 1 4-4h8z"}),i.createElement("filter",{id:"plariarismoutcomesimg-filter",width:"350%",height:"350%",x:"-125%",y:"-125%",filterUnits:"objectBoundingBox"},i.createElement("feOffset",{in:"SourceAlpha",result:"shadowOffsetOuter1"}),i.createElement("feGaussianBlur",{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:"5"}),i.createElement("feColorMatrix",{in:"shadowBlurOuter1",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.5 0"}))),i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("use",{fill:"#5CDAE6",transform:"translate(10 10)",xlinkHref:"#plariarismoutcomesimg-rect"}),i.createElement("mask",{id:"plariarismoutcomesimg-mask",fill:"#fff"},i.createElement("use",{xlinkHref:"#plariarismoutcomesimg-rect"})),i.createElement("use",{fill:"#99F6FF",xlinkHref:"#plariarismoutcomesimg-rect"}),i.createElement("g",{mask:"url(#plariarismoutcomesimg-mask)"},i.createElement("use",{fill:"#000",filter:"url(#plariarismoutcomesimg-filter)",xlinkHref:"#plariarismoutcomesimg-path"}),i.createElement("use",{fill:"#79E8F2",xlinkHref:"#plariarismoutcomesimg-path"})))),D=()=>i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32"},i.createElement("defs",null,i.createElement("circle",{id:"engagementimg-circle",cx:"16",cy:"16",r:"16"}),i.createElement("path",{id:"engagementimg-path",d:"M8 16a10 10 0 1 1 16 0 10 10 0 1 1-16 0zm0 0a9.98 9.98 0 0 0 16 0 9.98 9.98 0 0 0-16 0z"}),i.createElement("filter",{id:"engagementimg-filter",width:"250%",height:"193.8%",x:"-75%",y:"-46.9%",filterUnits:"objectBoundingBox"},i.createElement("feOffset",{in:"SourceAlpha",result:"shadowOffsetOuter1"}),i.createElement("feGaussianBlur",{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:"5"}),i.createElement("feColorMatrix",{in:"shadowBlurOuter1",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0"}))),i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("mask",{id:"engagementimg-mask",fill:"#fff"},i.createElement("use",{xlinkHref:"#engagementimg-circle"})),i.createElement("use",{fill:"#B9F9EA",xlinkHref:"#engagementimg-circle"}),i.createElement("g",{mask:"url(#engagementimg-mask)"},i.createElement("use",{fill:"#000",filter:"url(#engagementimg-filter)",xlinkHref:"#engagementimg-path"}),i.createElement("use",{fill:"#0FDCAC",xlinkHref:"#engagementimg-path"})),i.createElement("path",{fill:"#C0F9EC",d:"M8 16a9.98 9.98 0 0 1 16 0 9.98 9.98 0 0 1-16 0z",mask:"url(#engagementimg-mask)"}))),R=()=>i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 42 32"},i.createElement("defs",null,i.createElement("ellipse",{id:"deliveryimg-ellipse",cx:"16",cy:"20",rx:"11.97",ry:"12"}),i.createElement("filter",{id:"deliveryimg-filter1",width:"225.3%",height:"225%",x:"-62.7%",y:"-62.5%",filterUnits:"objectBoundingBox"},i.createElement("feOffset",{in:"SourceAlpha",result:"shadowOffsetOuter1"}),i.createElement("feGaussianBlur",{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:"5"}),i.createElement("feColorMatrix",{in:"shadowBlurOuter1",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.934440559 0"})),i.createElement("circle",{id:"deliveryimg-circle",cx:"16",cy:"24",r:"8"}),i.createElement("filter",{id:"deliveryimg-filter2",width:"287.5%",height:"287.5%",x:"-93.8%",y:"-93.8%",filterUnits:"objectBoundingBox"},i.createElement("feOffset",{in:"SourceAlpha",result:"shadowOffsetOuter1"}),i.createElement("feGaussianBlur",{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:"5"}),i.createElement("feColorMatrix",{in:"shadowBlurOuter1",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.5 0"}))),i.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(5 2)"},i.createElement("circle",{cx:"16",cy:"16",r:"16",fill:"#E8C7FF"}),i.createElement("use",{fill:"#000",filter:"url(#deliveryimg-filter1)",xlinkHref:"#deliveryimg-ellipse"}),i.createElement("use",{fill:"#D39DFA",xlinkHref:"#deliveryimg-ellipse"}),i.createElement("g",null,i.createElement("use",{fill:"#000",filter:"url(#deliveryimg-filter2)",xlinkHref:"#deliveryimg-circle"}),i.createElement("use",{fill:"#BC78ED",xlinkHref:"#deliveryimg-circle"}))))},"1dIs":function(e,t,a){"use strict";var n=a("6fbX"),i=a("1w6p"),r=a("bZeK"),s=a("dE97"),o=a("zR/0"),l=a("GUi3"),c=a("Y7d8");function d(e,t,a,r){const d=t.pipe(o.a.filter(e=>e!==l.a.SpecialId.Premium),o.a.map(e=>e===l.a.SpecialId.Priority?c.a.LensMode.priority:c.a.LensMode.all),o.a.distinctUntilChanged());return i.a.fromSideEffect(t=>{switch(t.kind){case c.a.Action.Kind.select:e.events.next({type:"switchToLens",id:t.selected===c.a.LensMode.priority?l.a.SpecialId.Priority:l.a.SpecialId.AllAlerts,focusFirst:!1,actionSource:s.b.sidebar});break;default:Object(n.d)(t.kind)}},d.pipe(o.a.map(e=>({ord:"priority"===a?c.a.Order.priorityFirst:c.a.Order.allFirst,layoutMode:r,lensMode:e}))))}function p(e,t,a){const r=e.lensMode.pipe(o.a.map(e=>"all"===e?c.a.LensMode.all:c.a.LensMode.priority),o.a.distinctUntilChanged());return i.a.fromSideEffect(t=>{switch(t.kind){case c.a.Action.Kind.select:e.lensModeEvents.next({type:"changeLensMode",lensMode:t.selected});break;default:Object(n.d)(t.kind)}},r.pipe(o.a.map(e=>({ord:"priority"===t?c.a.Order.priorityFirst:c.a.Order.allFirst,layoutMode:a,lensMode:e}))))}var u=a("kfbT");function m(e,t,a,n,s,l){return i.a.composeKnot({info:r.a.createLensCounterFlow(t,t.pipe(o.a.switchMap(e=>s.getLens(e).view("count"))),l),switcher:d(e,t,a,n)})}function h(e,t,a,n,s,l){return i.a.composeKnot({info:r.a.createLensCounterFlow(t,t.pipe(o.a.switchMap(e=>s.getLens(e).view("count"))),l),switcher:p(e,a,n)})}function g(e,t){return i.a.fromSideEffect(t=>{switch(t.kind){case u.a.LensFilter.Action.Kind.switchBack:e.events.next({type:"switchToAll",focusFirst:!0,actionSource:s.b.sidebar});break;default:Object(n.d)(t.kind)}},t.pipe(o.a.map(e=>({lensTitle:e}))))}function f(e,t,a,n,s){return i.a.composeKnot({counter:r.a.createLensCounterFlow(t,t.pipe(o.a.switchMap(e=>n.getLens(e).view("count"))),s),filter:g(e,a)})}function b(e,t,a,n,r,s,o){return i.a.composeKnot({info:f(e,t,o,r,s),switcher:p(e,a,n)})}function y(e,t,a,n,r,s,l,c){return i.a.composeUnion({withFilter:b(e,t,a,n,r,s,l),withoutFilter:h(e,t,a,n,r,s)},()=>c.pipe(o.a.map(e=>({kind:e?"withFilter":"withoutFilter"}))))}a.d(t,"b",(function(){return m})),a.d(t,"c",(function(){return b})),a.d(t,"a",(function(){return y}))},"1nqz":function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a("ERkP"),i=a("vOOZ"),r=a("6fbX"),s=a("uO+M"),o=a("rmLU"),l=a("PrA7"),c=a("6gXa"),d=a("rk+4"),p=a("nnns"),u=a("Z5Rd"),m=a("o79T");const h={unauthorizedError:(e,t)=>n.createElement(g.UnauthorizedError,{action:t("gotoLogin")}),offline:(e,t)=>n.createElement(g.Offline,{reconnect:t("reconnect"),reconnectTime:e.args.reconnectTime}),serverError:()=>n.createElement(g.ServerError,null),connectionWSError:()=>n.createElement(g.ConnectionWSError,null),clientConnectionError:()=>n.createElement(g.ClientConnectionError,null),documentNotFoundError:(e,t)=>n.createElement(g.DocumentNotFoundError,{navigateToDocuments:t("navigateToDocuments")}),selfUpdate:()=>n.createElement(g.SelfUpdate,null),desktopHardUpdate:(e,t)=>n.createElement(g.DesktopHardUpdate,{reloadMethod:t("reloadMethod")}),desktopHardDownload:(e,t)=>n.createElement(g.DesktopHardDownload,{downloadMethod:t("downloadMethod")}),slowNetwork:()=>n.createElement(g.SlowNetworkError,null),checkingIsDown:()=>n.createElement(g.CheckingIsDownError,null),error:()=>n.createElement(g.Error,null),paymentSuccess:()=>n.createElement(g.PaymentSuccessMessage,null),paymentError:()=>n.createElement(g.PaymentErrorMessage,null),proofitPaymentDeclinedError:(e,t)=>n.createElement(g.ProofitPaymentDeclinedError,{paymentMethod:e.args.paymentMethod,navigateToSubscription:t("navigateToSubscription")}),proofitEmptyDocumentError:()=>n.createElement(g.ProofitEmptyDocumentError,null),proofitComplexInternalStructureError:(e,t)=>n.createElement(g.ProofitComplexInternalStructureError,{navigateToDocuments:t("navigateToDocuments")}),proofitDocumentProofreadError:(e,t)=>n.createElement(g.ProofitDocumentProofreadError,{navigateToDocuments:t("navigateToDocuments")}),copyToClipboardFailed:()=>n.createElement(g.CopyToClipboardError,null),proofitCancelled:()=>n.createElement(g.ProofitCancelled,null),proofitCompleted:e=>n.createElement(g.ProofitCompleted,{documentTitle:e.args.documentTitle,documentDownloadUrl:e.args.documentDownloadUrl,email:e.args.email}),denaliDocumentUploaded:(e,t)=>n.createElement(g.DenaliDocumentUploaded,{navigateToDocuments:t("navigateToDocuments")}),denaliFormattingCompatibility:()=>n.createElement(g.DenaliFormattingCompatibility,null),alertsNothingFound:()=>n.createElement(g.AlertsNothingFound,null),desktopSoftUpdate:(e,t)=>n.createElement(g.DesktopSoftUpdate,{reloadMethod:t("reloadMethod")}),desktopSoftDownload:(e,t)=>n.createElement(g.DesktopSoftDownload,{downloadMethod:t("downloadMethod")}),thanksForFeedback:()=>n.createElement(g.ThanksForFeedbackNotification,null),switchToDenali:()=>n.createElement(g.Generic,{type:C.switchToDenali}),feedbackSend:()=>n.createElement(g.Generic,{type:C.feedbackSend}),statisticsError:()=>n.createElement(g.Generic,{type:C.statisticsError}),copySuccess:e=>n.createElement(g.Generic,{type:"referenceCopied"===e.args.copyType?C.referenceCopied:C.documentCopied}),downloadDocumentNotFoundError:()=>n.createElement(g.DownloadDocumentNotFoundError,null),isTemporaryDownloadError:()=>n.createElement(g.Generic,{type:C.isTemporaryDownloadError}),clipboardNotSupported:e=>n.createElement(g.ClipboardNotSupported,{hotkey:e.args.hotkey}),documentSizeExceeded:e=>n.createElement(g.DocumentSizeExceeded,{os:e.args.os,officeAddinUrl:e.args.officeAddinUrl}),documentUploaded:(e,t)=>n.createElement(g.DocumentUploaded,{navigateToDocument:t("navigateToDocument")}),documentTypeUnsupported:()=>n.createElement(g.DocumentTypeUnsupported,null),trackedChangesIsUnsupported:e=>n.createElement(g.DocumentWithTrackedChangesIsUnsupported,{link:e.args.link}),documentUploadGeneralError:()=>n.createElement(g.Generic,{type:C.documentUploadGeneralError}),documentIsEmpty:()=>n.createElement(g.Generic,{type:C.documentIsEmpty}),noFileToUpload:()=>n.createElement(g.Generic,{type:C.noFileToUpload}),oneDocumentIsAllowed:()=>n.createElement(g.Generic,{type:C.oneDocumentIsAllowed})};var g;!function(e){e.UnauthorizedError=({action:e})=>n.createElement(u.b.TitledContent,{title:"You've Been Logged Out"},"This occurs due to inactivity or logging out on another device.",n.createElement("br",null),n.createElement(m.a,{name:"login",className:y.footerLink,onClick:e},"Log Back In")),e.Offline=({reconnect:e,reconnectTime:t})=>n.createElement(u.b.TitledContent,{title:"Lost Connection"},"Your Internet session was interrupted. We’ll try to reconnect you in"," ",n.createElement(i.a.span,null,t.view(e=>e))," seconds.",n.createElement("br",null),n.createElement(m.a,{name:"reconnect",className:y.footerLink,onClick:e},"Reconnect Now")),e.ServerError=()=>{const t=e.withReload(m.a,"UnknownConnectionError");return n.createElement(u.b.TitledContent,{title:"Sorry, Unexpected Issue"},"A small error has occurred, causing an interruption of service.",n.createElement("br",null),n.createElement(t,{name:"reload-page",className:y.footerLink},"Reload This Page"))},e.ConnectionWSError=()=>{const e=n.useContext(o.a.Context);return n.createElement(u.b.TitledContent,{title:"Can’t Connect to Grammarly"},"Your network configuration currently blocks Grammarly services on this computer. ",n.createElement("br",null),n.createElement(m.a,{name:"troubleshoot",className:y.footerLink,href:e.support.diagnosticTestPath,target:"_blank"},"Troubleshoot This Issue"))},e.ClientConnectionError=()=>{const t=e.withReload(m.a,"ClientConnectionErrorNotification");return n.createElement(u.b.TitledContent,{title:"Your Internet Connection Is Unstable"},"Please check your network stability and then reload this page.",n.createElement("br",null),n.createElement(t,{name:"reload-page",className:y.footerLink},"Reload Page Now"))},e.DocumentNotFoundError=({navigateToDocuments:e})=>n.createElement(u.b.TitledContent,{title:"Can’t find this document"},"It looks like this document was removed or URL is incorrect.",n.createElement("br",null),n.createElement(m.a,{name:"goto-docs",className:y.footerLink,onClick:e},"Go to your documents")),e.SelfUpdate=()=>{const t=n.useContext(d.a.Context),a=e.withReload(p.a,"SelfUpdateBlocker");return n.createElement(u.b.TitledContent,{title:"Grammarly needs to refresh this page"},"Don't worry - your documents have already been saved. Please"," ",n.createElement(a,{name:"reload-page",className:y.link},"reload")," ","the page ",t.hotkeyLabelR,".")},e.DesktopHardUpdate=({reloadMethod:e})=>{const t=n.useContext(d.a.Context).desktopUpdate;return n.createElement(u.b.TitledContent,{title:t.hardTitle},t.hard,n.createElement("br",null),n.createElement(m.a,{name:"reload-desktop",className:y.footerLink,onClick:e},t.reload))},e.DesktopHardDownload=({downloadMethod:e})=>{const t=n.useContext(d.a.Context).desktopUpdate;return n.createElement(u.b.TitledContent,{title:t.hardTitle},t.hard,n.createElement("br",null),n.createElement(m.a,{name:"download-desktop",className:y.footerLink,onClick:e},t.download))},e.SlowNetworkError=()=>n.createElement(u.b.TitledContent,{title:"Your Internet Connection Is Unstable"},"Grammarly may work slower than normal."),e.CheckingIsDownError=()=>n.createElement(u.b.TitledContent,{title:"Text Checking Is Temporarily Unavailable"},"Grammarly is unable to check your text for errors at this time. We’re working to resolve the issue. Please check back soon."),e.Error=()=>{const e=n.useContext(o.a.Context);return n.createElement(u.b.TitledContent,{title:"Sorry, Something Went Wrong"},"Please try again later or"," ",n.createElement(p.a,{name:"support",className:y.link,href:e.support.login,target:"_blank"},"contact support")," ","now to report the issue.")},e.ProofitPaymentDeclinedError=({paymentMethod:e,navigateToSubscription:t})=>{const a=n.useContext(d.a.Context).proofitPayment,i=function(e,t,a){switch(e){case"creditCard":return t;case"payPal":return a;default:const n=`Unknown payment method: ${e}`;throw l.Monitoring.Logging.getLogger("ProofitView").warn(n),new Error(n)}}(e,a.creditCard,a.payPal);return n.createElement(u.b.TitledContent,{title:"Order can not be processed"},n.createElement("div",null,i),"Please update your credit card information in the Manage Subscription section.",n.createElement("br",null),n.createElement(m.a,{name:"manage-subscription",className:y.footerLink,onClick:t},"Go to Manage Subscription"))},e.PaymentSuccessMessage=()=>{const e=n.useContext(d.a.Context).proofitOrderModal.card.paymentSuccess;return n.createElement(u.b.TitledContent,{title:e.title},n.createElement("div",null,e.message))},e.PaymentErrorMessage=()=>{const e=n.useContext(d.a.Context).proofitOrderModal.card.paymentError,t=n.useContext(o.a.Context);return n.createElement(u.b.TitledContent,{title:e.title},n.createElement("div",null,e.message(t.support.login)))},e.ProofitEmptyDocumentError=()=>n.createElement(u.b.TitledContent,{title:"Document is empty"},"The document you are trying to submit is empty. Please write something and try again."),e.ProofitDocumentProofreadError=({navigateToDocuments:e})=>n.createElement(u.b.TitledContent,{title:"This document is a recent submission"},"The text you are trying to send for human proofreading was reviewed by our team. Please edit your text or select another document before you re-submit.",n.createElement("br",null),n.createElement(m.a,{name:"goto-docs",className:y.footerLink,onClick:e},"Go to your documents")),e.ProofitComplexInternalStructureError=({navigateToDocuments:e})=>n.createElement(u.b.TitledContent,{title:"This document cannot be corrected"},"The text you are trying to send for human proofreading has complex internal structure. Please edit your text (e.g., remove significantly long tables) or select another document.",n.createElement("br",null),n.createElement(m.a,{name:"goto-docs",className:y.footerLink,onClick:e},"Go to your documents")),e.withReload=(e,t)=>(class extends n.Component{render(){return n.createElement(e,Object.assign({},this.props,{onClick:()=>{try{localStorage.setItem("pageReloadReason",JSON.stringify({source:t,location:window.location.href,timestamp:Date.now()}))}catch(e){}window.location.reload()}}))}}),e.CopyToClipboardError=()=>{const e=n.useContext(d.a.Context);return n.createElement(u.b.TitledContent,{title:"Copying Is Not Supported by Your Browser"},"Please use ",e.hotkeyLabelC," instead.")},e.ProofitCancelled=()=>{const e=n.useContext(o.a.Context);return n.createElement(u.b.TitledContent,{title:"Your order has been cancelled"},"Your proofreading order has been cancelled and the payment refunded. Please check your email for more information, or contact"," ",n.createElement(m.a,{name:"support",className:y.footerLink,href:e.support.login,target:"_blank"},"Grammarly support"))},e.ProofitCompleted=({documentTitle:e,documentDownloadUrl:t,email:a})=>n.createElement(u.b.TitledContent,{title:`${e||"Your"} document has been proofread`},"A version of this document with proofreaders’ marks has been emailed to you at ",a," in .docx format.",n.createElement("br",null),n.createElement(m.a,{name:"download",className:y.footerLink,href:t,target:"_blank"},"Download .docx")),e.DenaliFormattingCompatibility=()=>{const e=n.useContext(d.a.Context),t=n.useContext(o.a.Context);return n.createElement(u.b.TitledContent,{title:e.rtfCompatibilityModeNotificationTitle},"To preserve your document’s formatting, Grammarly’s formatting tools are temporarily disabled.",n.createElement("br",null),n.createElement(m.a,{name:"support",className:y.footerLink,href:t.support.rtfCompatibilityUrl,target:"_blank"},"Learn more"))},e.DenaliDocumentUploaded=({navigateToDocuments:e})=>{const{denaliDocumentUploadNotification:t}=n.useContext(d.a.Context);return n.createElement(u.b.TitledContent,{title:t.title},t.text," ",n.createElement(p.a,{name:"goto-docs",className:y.link,onClick:e},t.link))},e.AlertsNothingFound=()=>n.createElement(u.b.Content,null,"Grammarly found no critical writing issues in this text. Keep up the great work!"),e.DesktopSoftUpdate=({reloadMethod:e})=>{const t=n.useContext(d.a.Context).desktopUpdate;return n.createElement(u.b.TitledContent,{title:t.softTitle},t.soft,n.createElement("br",null),n.createElement(m.a,{name:"reload-desktop",className:y.footerLink,onClick:e},t.reload))},e.DesktopSoftDownload=({downloadMethod:e})=>{const t=n.useContext(d.a.Context).desktopUpdate;return n.createElement(u.b.TitledContent,{title:t.softTitle},t.soft,n.createElement("br",null),n.createElement(m.a,{name:"download-desktop",className:y.footerLink,onClick:e},t.download))},e.ThanksForFeedbackNotification=()=>n.createElement(u.b.TitledContent,{title:"Your feedback has been sent"},"Thank you for helping make Grammarly better!"),e.DownloadDocumentNotFoundError=()=>{const e=n.useContext(d.a.Context);return n.createElement(u.b.TitledContent,{"data-name":"document-not-found",title:e.downloadDocumentNotFoundError})},e.ClipboardNotSupported=({hotkey:e})=>{const t=n.useContext(d.a.Context);return n.createElement(u.b.Content,null,t.hotkeyUnsupported,n.createElement("b",null,e))},e.DocumentSizeExceeded=({os:e,officeAddinUrl:t})=>{const a=n.useContext(d.a.Context).fileSizeExceededNotification;return n.createElement(u.b.TitledContent,{title:a.title},a.body,"windows"===e&&n.createElement(m.a,{name:"officeAddin",className:y.footerLink,href:t,target:"_blank"},a.link))},e.DocumentUploaded=({navigateToDocument:e})=>{const t=n.useContext(d.a.Context).documentUploaded;return n.createElement(u.b.Content,null,t.message,n.createElement("br",null),n.createElement(m.a,{name:"goto-doc",className:y.footerLink,onClick:e},t.link))},e.DocumentTypeUnsupported=()=>{const e=n.useContext(d.a.Context);return n.createElement(u.b.Content,null,"Unsupported file type. ",e.notificationUploadFileText,": Microsoft Word (.doc, .docx), OpenOffice (.odt), TXT and RTF.")},e.DocumentWithTrackedChangesIsUnsupported=({link:e})=>n.createElement(u.b.Content,null,"Your document contains revisions. Accept all revisions and try uploading again. Click"," ",n.createElement(p.a,{name:"document-accept-tracked-changes",className:y.link,href:e,target:"_blank"},"here")," ","for details.");const t=(e,t)=>{switch(e){case C.switchToDenali:return t.switchToDenali;case C.feedbackSend:return t.feedbackSend;case C.statisticsError:return t.statisticsError;case C.referenceCopied:return t.referenceCopied;case C.documentCopied:return t.documentCopied;case C.isTemporaryDownloadError:return t.isTemporaryDownloadError;case C.documentUploadGeneralError:return t.documentUploadGeneralError;case C.documentIsEmpty:return t.documentIsEmpty;case C.noFileToUpload:return t.noFileToUpload;case C.oneDocumentIsAllowed:return t.oneDocumentIsAllowed;default:return Object(r.d)(e)}};e.Generic=({type:e})=>{const a=n.useContext(d.a.Context);return n.createElement(u.b.TitledContent,{title:t(e,a)})}}(g||(g={}));const f={display:"inline-flex",overflow:"unset",color:s.Color.CoreNeutral0,verticalAlign:"baseline",textDecoration:"underline",fontWeight:"bold",cursor:"pointer"},b={marginTop:c.a.rem(.5),textDecoration:"none"},y=c.a.stylesheet({link:[f],footerLink:[f,b]});var C;!function(e){e.switchToDenali="switchToDenali",e.feedbackSend="feedbackSend",e.statisticsError="statisticsError",e.referenceCopied="referenceCopied",e.documentCopied="documentCopied",e.isTemporaryDownloadError="isTemporaryDownloadError",e.documentUploadGeneralError="documentUploadGeneralError",e.documentIsEmpty="documentIsEmpty",e.noFileToUpload="noFileToUpload",e.oneDocumentIsAllowed="oneDocumentIsAllowed"}(C||(C={}))},"1w6p":function(e,t,a){"use strict";var n,i,r=a("b+P9"),s=a("+Caq"),o=a("5p8x"),l=a("V0o3"),c=a("OA+g"),d=a("g6G6"),p=a("rYDR"),u=a("HM3f"),m=a("6Oco"),h=a("ROBh"),g=a("IdLP"),f=a("8j5Y"),b=a("TLy2"),y=a("xVbo"),C=a("YtkY"),v=a("iLlD"),S=a("SrNW"),E=a("7SLS"),w=a("mWib"),k=a("jIqt"),_=a("BwBJ"),O=a("jOdJ"),A=a("I7vG"),T=a("Lrfq"),x=a("i7Dj");(n||(n={})).split=function(e){const t=Object(A.pipe)(e,T.a(1),x.a());return{animation:Object(A.pipe)(t,y.a(e=>"root"===e.action.key),C.a(e=>({key:e.key,action:e.action.action}))),action:Object(A.pipe)(t,y.a(e=>"children"===e.action.key),C.a(e=>({key:e.key,action:e.action.action})))}},function(e){function t(e){return s.map(e)}function a(e){return s.local(e)}function i(e,t){return a=>Object(c.pipe)(e,y.a(e=>e.key===t&&e.action.animationType===a),C.a(e=>e.action),k.a({kind:"init"}),b.a(e=>"end"===e.kind?Object(h.a)(e):Object(c.pipe)(Object(h.a)({kind:"end",animationType:a}),_.a("start"===e.kind?x:T))),O.a())}e.fromSideEffect=function(e,t){return a=>Object(d.a)(a.pipe(f.a(e),b.a(()=>p.a)),function(e){return e instanceof g.a?e:Object(h.a)(e)}(t))},e.patchState=t,e.extendActions=a,e.patch=function(e,n){return Object(c.flow)(a(e),t(n))},e.replaceActions=function(e){return s.local(Object(c.flow)(e,b.a(()=>p.a)))},e.composeKnot=function(e){return s.asks(t=>Object(u.b)(Object.keys(e).map(a=>e[a](t.pipe(y.a(e=>e.key===a),C.a(e=>e.action))).pipe(C.a(e=>({[a]:e}))))).pipe(C.a(e=>e.reduce((e,t)=>Object.assign(Object.assign({},e),t)))))},e.composeUnion=function(e,t){return s.asks(a=>Object(c.pipe)(t(a),b.a(t=>{const[[n,i]]=Object.entries(t);return Object(c.pipe)(a,y.a(e=>e.key===i),C.a(e=>e.action),e[i],C.a(e=>Object.assign(Object.assign({},e),{[n]:i})))})))},e.animatingFlow=function(e,t){return a=>{const{action:s,animation:p}=n.split(a);let u=0;return Object(c.pipe)(s,y.a(e=>e.key===String(u)),v.a("action"),e,S.a(function(e,t){return(a,n)=>{const i=t(),s=r.fromNullable(a[i]),o=Object(c.pipe)(s,r.map(e=>e.children)),d=e(o,n);if(r.isNone(d))return{[i]:{root:r.none,children:n}};{const e={[i+1]:{root:l.getRight(d.value),children:n}},t=l.getLeft(d.value);return r.isSome(t)&&r.isSome(o)&&(e[i]={root:t,children:o.value}),e}}}(t,()=>u),{}),f.a(e=>u=Number(Object.keys(e).pop())),b.a(function(e,t){return a=>{const n=String(t()-1),s=String(t()),l=Object(c.pipe)(r.fromNullable(a[n]),r.chain(e=>e.root),r.map(i(e,n)),r.getOrElse(()=>m.a),E.a(o.b(n))),p=Object(c.pipe)(a[s].root,r.map(i(e,s)),r.getOrElse(()=>m.a),E.a(e=>{const t=Object.assign({},e);return t[s]=Object.assign(Object.assign({},t[s]),{root:r.none}),t}));return Object(c.pipe)(Object(d.a)(l,p),S.a((e,t)=>t(e),a),w.a(A),k.a(a))}}(p,()=>u)))}};const A=100,T=500,x=10*T}(i||(i={}));var I=a("ERkP"),M=a("ZTXN"),j=a("Ohay"),L=a("vOOZ");const N="root";var P=a("m6JR"),F=a("C05f");function D(e){return Object(c.flow)(j.a(),S.a((t,a)=>e.reduceWithIndex(a,new Map,(e,a,n)=>{const i=t.get(e);return void 0!==i?(a.set(e,i),i.next(n)):a.set(e,new F.a(n)),a}),new Map),j.a((t=P.fromEquals(()=>!0),{equals:(e,a)=>{if(e===a)return!0;if(e.size===a.size){const n=e.keys();let i;for(;!(i=n.next()).done;)if(!a.has(i.value)||!t.equals(e.get(i.value),a.get(i.value)))return!1;return!0}return!1}}).equals));var t}var R,B=a("5uGe"),H=a("xtkq");class W{constructor(e){this._keySelector=e}call(e,t){return t.subscribe(new $(e,this._keySelector))}}class $ extends B.a{constructor(e,t){super(e),this.destination=e,this._keySelector=t,this.attemptedToUnsubscribe=!1,this.count=0,this._currentGroup=r.none}_next(e){const t=this._keySelector(e);Object(A.pipe)(this._currentGroup,r.fold(()=>this._createGroup(t,e),({key:a,group:n})=>{a!==t?(n.complete(),this._currentGroup=r.none,this._createGroup(t,e)):n.closed||n.next(e)}))}_createGroup(e,t){const a=new F.a(t);this._currentGroup=r.some({key:e,group:a}),this.destination.next(new H.a(e,a,this))}_error(e){Object(A.pipe)(this._currentGroup,r.map(({group:t})=>t.error(e))),this._currentGroup=r.none,this.destination.error(e)}_complete(){Object(A.pipe)(this._currentGroup,r.map(({group:e})=>e.complete())),this._currentGroup=r.none,this.destination.complete()}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}function V(e,t){return Object(A.pipe)(t,R.mapAction(t=>({key:e,action:t})),s.map(t=>null===t?t:I.cloneElement(t,{key:e})))}function U(e){return"children"in e}function G(e){return"child"in e}function z(e){return"foldable"in e}function q(e){return"members"in e}function Y(e){return I.createElement(L.a.Fragment,{children:e})}!function(e){let t,a,n,i,l,d,p,u,h;function g(e){return G(e)?t=>{const a=new Proxy({},{get:()=>g(e.child)({children:null,notify:t.notify,state:t.state||m.a})});return e.grid({children:a,state:m.a,notify:c.constVoid})}:U(e)?t=>Object(A.pipe)(t.state,D(o.l),C.a(a=>{const n=Object(A.pipe)(e.children,o.j((e,n)=>V(e,g(n))({children:null,notify:t.notify,state:a.get(e)||m.a})));return e.grid({children:n,state:a.get(N)||m.a,notify:e=>t.notify({key:N,action:e})})}),Y):z(e)?t=>Object(A.pipe)(t.state,D(e.foldable),S.a((a,n)=>{const i=new Map;return n.forEach((n,r)=>{const s=a.get(r);if(void 0!==s)i.set(r,s);else{const a=V(r,g(e.of));i.set(r,a({children:null,notify:t.notify,state:n}))}}),i},new Map),C.a(e=>{const t=new Array;return e.forEach(e=>t.push(e)),t}),Y):q(e)?t=>Object(A.pipe)(t.state,function(e){return t=>t.pipe(t=>t.lift(new W(t=>t[e])))}(e.tag),C.a(a=>V(a.key,g(e.members[a.key]))({children:null,notify:t.notify,state:a})),Y):e}function f(e,t,a){return U(e)?{grid:f(e.grid,t,a),children:e.children}:z(e)?{foldable:e.foldable,of:f(e.of,t,a)}:n=>e({children:n.children,notify:Object(A.pipe)(n.notify,s.local(a)),state:Object(A.pipe)(n.state,C.a(t))})}!function(t){t.empty=()=>null,t.make=function(t){return e.Grid.make(t)}}(t=e.Node||(e.Node={})),function(e){e.make=function(e){return({children:t,state:a,notify:n})=>I.createElement(e,{slots:t,state:a,notify:e=>()=>n(e),view:(...e)=>Object(A.pipe)(a,v.a(...e),j.a())})}}(a=e.Grid||(e.Grid={})),function(e){e.make=function(e,t){return{grid:e,child:t}}}(n=e.Composite||(e.Composite={})),function(e){e.make=function(e,t){return{grid:e,children:t}}}(i=e.Knot||(e.Knot={})),function(e){e.make=function(e){return{grid:e=>Y(Object(A.pipe)(e.children,o.a((e,t)=>t))),children:e}}}(l=e.Group||(e.Group={})),function(e){e.make=function(e,t){return{foldable:e,of:t}}}(d=e.List||(e.List={})),function(t){t.make=function(e,t){return{tag:e,members:t}},t.asOption=function(t){return{tag:"_tag",members:{Some:e.Group.make({value:t}),None:e.Node.empty}}}}(p=e.Union||(e.Union={})),function(e){e.make=function(e,t){return a=>I.createElement(L.a.div,{"data-purpose":"animation-wrapper",children:a.children.children,className:Object(A.pipe)(a.state,C.a(Object(c.flow)(r.map(a=>e[a]||t[a]),r.toUndefined)),j.a()),onAnimationStart:Object(A.pipe)(a.state,C.a(r.fold(()=>c.constVoid,e=>()=>a.notify({kind:"start",animationType:e})))),onAnimationEnd:Object(A.pipe)(a.state,C.a(r.fold(()=>c.constVoid,e=>()=>a.notify({kind:"end",animationType:e}))))})}}(u=e.Transition||(e.Transition={})),function(t){t.make=function(t,a){return e.List.make(o.l,e.Knot.make(t,{children:a}))}}(h=e.Animated||(e.Animated={})),e.mount=function(e,t){const a=new M.a;return g(e)({children:null,notify:e=>a.next(e),state:Object(A.pipe)(t(a),T.a(1),x.a())})},e.patch=function(...e){return t=>a=>(function e(t,a,n){if(G(t)&&a.length>0)return{grid:t.grid,child:e(t.child,a,n)};if(U(t)&&a.length>0){const[i,...r]=a;return{grid:t.grid,children:Object.assign(Object.assign({},t.children),{[i]:e(t.children[i],r,n)})}}if(z(t)&&a.length>0)return{foldable:t.foldable,of:e(t.of,a,n)};if(q(t)&&a.length>0){const[i,...r]=a;return{tag:t.tag,members:Object.assign(Object.assign({},t.members),{[i]:e(t.members[i],r,n)})}}return n(t)})(a,e,t)},e.mapAction=function(e){return t=>f(t,c.identity,e)},e.contramapState=function(e){return t=>f(t,e,c.identity)},e.squash=g,e.promap=f}(R||(R={})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return R}))},"2BTG":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("ERkP"),r=a("vOOZ"),s=a("6fbX"),o=a("D9EC"),l=a("1w6p"),c=a("bZeK"),d=a("kfbT"),p=a("1dIs"),u=a("rk+4"),m=a("GUi3"),h=a("4lva"),g=a("Hr9Y"),f=a("nnns"),b=a("tZ26"),y=a("zR/0"),C=a("2U56");!function(e){e.Component=t=>t.type===h.b.LensTitleType.priority?i.createElement(e.PriorityTitle,Object.assign({},t)):i.createElement(e.Title,Object.assign({},t)),e.Title=o=>{const{lensId:d,lensAlertsCount:p,lensPreviewVM:u,customInfoButton:h}=o;return i.createElement(r.a.div,{className:m.a.isPlagiarismId(d)?C.a.plagiarismLensTitle:C.a.lensTitle},i.createElement(r.a.div,{className:C.a.flexContainer},p&&p.view(e=>e>0&&(m.a.isOutcomeId(d)||m.a.isAllAlerts(d)||m.a.isPriority(d)||m.a.isPlagiarismId(d)?i.createElement(i.Fragment,{key:"lens-counter"},l.b.mount(c.a.Component,c.a.createLensCounterFlow(y.a.of(d),y.a.of(e),12))):null)),(()=>{switch(o.lensId){case m.a.SpecialId.AllAlerts:return i.createElement(t,null);case m.a.SpecialId.Premium:return i.createElement(n,null);case m.a.SpecialId.Plagiarism:return i.createElement(v,null);case m.a.SpecialId.Correctness:case m.a.SpecialId.Clarity:case m.a.SpecialId.Engagement:case m.a.SpecialId.Delivery:case m.a.SpecialId.Vox:case m.a.SpecialId.CorrectnessPriority:case m.a.SpecialId.ClarityPriority:case m.a.SpecialId.EngagementPriority:case m.a.SpecialId.DeliveryPriority:case m.a.SpecialId.VoxPriority:return i.createElement(a,{lensId:o.lensId,lensPreviewVM:o.lensPreviewVM});case m.a.SpecialId.Priority:case m.a.SpecialId.Premium:case m.a.SpecialId.PredictionEmogenie:case m.a.SpecialId.PredictionTakeaways:case m.a.SpecialId.RealTimeProofit:return null;default:Object(s.d)(o.lensId)}})(),o.customSideButton,m.a.isOutcomeId(d)?i.createElement(f.b,{iconClass:C.a.infoIcon,tooltipClass:C.a.infoTooltip,title:Object(g.b)(o.lensId).description}):h||null,m.a.isOutcomeId(d)||m.a.isPlagiarismId(d)||m.a.isDraftAIId(d)?i.createElement(e.BackToAllAlertsButton,{key:"back-to-all-alerts"}):m.a.SpecialId.Premium===d&&u.getLens(m.a.SpecialId.AllAlerts).view("count").view(t=>t>0?i.createElement(e.BackToAllAlertsButton,{key:"back-to-all-alerts"}):null)))},e.PriorityTitle=e=>{const t=y.a.of(e.lensId);return i.createElement("div",{className:C.a.priorityTitleWrapper},l.b.mount(d.a.Component,Object(p.a)(e.navigationVM,t,e.navigationVM.defaultLensMode,"normal",e.lensPreviewVM,12,t.pipe(y.a.map(t=>e.lensPreviewVM.getLens(t).get().title)),t.pipe(y.a.map(Object(o.m)(m.a.isMainLens))))))},e.OutcomeContext=i.createContext({navigateToAllAlerts:o.l}),e.BackToAllAlertsButton=()=>{const{backToAllAlerts:t}=i.useContext(u.a.Context).sidebar;return i.createElement(e.OutcomeContext.Consumer,null,({navigateToAllAlerts:e})=>i.createElement(f.a.Flat,{name:"to-all-alerts",className:C.a.toAllAlertsButton,onClick:e},i.createElement("span",{className:C.a.toAllAlertsText},t),i.createElement(b.d.Close,{width:13})))};const t=()=>i.createElement(i.Fragment,null,i.useContext(u.a.Context).sidebar.allAlerts),a=({lensId:e,lensPreviewVM:t})=>i.createElement(i.Fragment,null," ",t.lensPreviews[e].title),n=()=>i.createElement(i.Fragment,null," ",i.useContext(u.a.Context).sidebar.premiumAlertsTitle),v=()=>i.createElement(i.Fragment,null," ",i.useContext(u.a.Context).plagiarism.title)}(n||(n={}))},"2GrK":function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return u}));var n=a("I7vG"),i=a("LNSM"),r=a("lrqh"),s=a("D9EC"),o=a("PrA7"),l=a("zR/0"),c=a("quYV"),d=a("NW9S");class p{constructor(e){this._validateOffset=e,this._log=o.Monitoring.Logging.getLogger("CardsListScrollManager"),this.scrollTop=i.a.create(0),this.paddingTop=i.a.create(0),this.viewport=i.a.create({top:d.b.FromWindowTop.ISO.wrap(0),height:0}),this.scrollOffset=new l.a.Subject,this.moveCardsBy=(e,t)=>(this._log.debug(`Cards list moved by ${e}, from: ${t}`),this.scrollOffset.next(e),r.b.right(void 0)),this.moveCardsByAnimated=(e,t)=>(this._log.debug(`Cards list moved by ${e}, from: ${t}`),l.a.Observable.create(t=>Object(n.pipe)(this._validateOffset(e,this),r.b.fold(e=>(t.thrownError(e),s.l),()=>{const a=2*this.viewport.get().height,n=Math.abs(e)>a?(e>0?1:-1)*a:e,i=e-n,r=c.a.createAnimationObservable(0,n,200).pipe(l.a.pairwise(),l.a.map(([e,t])=>t-e),l.a.startWith(i),l.a.tap(e=>this.scrollOffset.next(e))).subscribe({error:e=>t.error(e),complete:()=>t.complete()});return()=>r.unsubscribe()}))))}}class u{constructor(){this.scrollOffset=l.a.of(42)}getContentOffset(e){throw new Error("Method not implemented.")}moveCardsBy(e,t){throw new Error("Method not implemented.")}moveCardsByAnimated(e,t){throw new Error("Method not implemented.")}}},"2U56":function(e,t,a){"use strict";a.d(t,"a",(function(){return P}));var n=a("uO+M"),i=a("6gXa"),r=a("ps/9"),s=a("dx6p");const o=r.a-.5,l="0 3px 7px 0 rgba(129, 137, 169, .2)",c="0 -3px 7px 0 rgba(129, 137, 169, .2)",d={marginTop:0,height:i.a.percent(100)},p={position:"absolute",overflow:"hidden",marginTop:0,marginLeft:i.a.rem(-1*o),paddingTop:i.a.rem(4),paddingRight:i.a.rem(2),paddingLeft:i.a.rem(o),width:`calc(100% + ${i.a.rem(o)})`,height:i.a.percent(100)},u={position:"absolute",top:i.a.rem(r.y),visibility:"hidden",height:`calc(100vh - ${i.a.rem(r.y)})`},m={paddingRight:i.a.rem(2),width:i.a.percent(100),height:i.a.percent(100)},h={zIndex:r.k,width:i.a.rem(r.u),$nest:{[`@media (${r.x})`]:{width:i.a.rem(r.v)}}},g={margin:`0 ${i.a.rem(.25)} 0 auto`,lineHeight:i.a.rem(1.8)},f={marginRight:i.a.rem(1)},b={position:"relative",paddingTop:i.a.rem(1),height:i.a.rem(4.15),background:`linear-gradient(-180deg, ${n.Color.CoreNeutral0} 78%, rgba(255, 255, 255, 0) 100%)`,$nest:{"&:before":{position:"absolute",top:0,left:i.a.rem(-2),width:i.a.rem(2),height:i.a.percent(100),background:"inherit",content:"''"}}},y={paddingBottom:i.a.rem(.2)},C={maxWidth:i.a.rem(11),textAlign:"center",whiteSpace:"normal",lineHeight:i.a.rem(1)},v={position:"absolute",right:0,left:0,display:"flex",height:i.a.rem(2),background:n.Color.CoreNeutral0,alignItems:"center",justifyContent:"center"},S={top:i.a.rem(-1.15),boxShadow:l,$nest:{"&:before":Object(s.a)(i.a.rem(.25),-10,i.a.rem(-.4),l,i.a.rem(r.t)),"&:after":Object(s.a)(i.a.rem(.5),-20,i.a.rem(-.8),l,i.a.rem(r.t))}},E={bottom:0,boxShadow:c,$nest:{"&:before":Object(s.a)(i.a.rem(.25),-10,i.a.rem(.4),c,i.a.rem(r.t)),"&:after":Object(s.a)(i.a.rem(.5),-20,i.a.rem(.8),c,i.a.rem(r.t))}},w={position:"absolute",zIndex:r.i,display:"flex",pointerEvents:"all"},k={top:i.a.rem(.15)},_={bottom:i.a.rem(1.3)},O={position:"absolute",top:i.a.rem(4.15),display:"flex",width:`calc(100% - ${i.a.rem(2)})`,height:`calc(100vh - ${i.a.rem(4.15)})`,pointerEvents:"none",justifyContent:"center"},A=i.a.rem(2),T={paddingRight:A},x={display:"flex",marginTop:i.a.rem(.8125),marginLeft:i.a.rem(2.1875),paddingRight:A,color:n.Color.CoreNeutral90,textTransform:"none",letterSpacing:0,fontWeight:"bold",fontSize:i.a.rem(.875),lineHeight:i.a.rem(1.125),justifyContent:"space-between",$nest:{'& div[role="button"]':{marginTop:i.a.rem(-.3875),$nest:{"&[data-name='bulk-accept-mini-button']":{marginTop:i.a.rem(-.75)}}},'& div[role="counter"]':{position:i.a.important("absolute")}}},I={position:"absolute",zIndex:r.k,overflow:"visible",width:i.a.percent(100)},M={position:"absolute",right:i.a.rem(3),paddingLeft:i.a.rem(1),borderRadius:i.a.rem(r.s),color:n.Color.CoreNeutral90,letterSpacing:i.a.px(.25),fontSize:i.a.rem(.75),lineHeight:i.a.rem(1)},j={position:"relative",marginTop:i.a.rem(.05),fontWeight:300},L={marginLeft:i.a.rem(2.5)},N={margin:`${i.a.rem(.5)} 0`,backgroundColor:n.Color.CoreNeutral0,userSelect:"none",$nest:{"&:before":{position:"absolute",left:i.a.rem(-.5),width:i.a.rem(.5),height:i.a.percent(100),backgroundColor:n.Color.CoreNeutral0,content:"''"}}},P=i.a.stylesheet({viewport:[d],lensviewContentWrapper:[p],fakeTop:[u],rechecking:[m],fixedLensContent:[h],lensCounter:[g],headerBtn:[f],headerWrapper:[b],infoIcon:[y],infoTooltip:[C],stack:[v],topStack:[v,S],bottomStack:[v,E],seeAlerts:[w],topSeeAlerts:[w,k],bottomSeeAlerts:[w,_],seeAlertsContainer:[O],lensTitle:[x],header:[I],toAllAlertsButton:[M],toAllAlertsText:[j],plagiarismLensTitle:[x,L],cardWrapper:[N],flexContainer:[{display:"flex"}],priorityTitleWrapper:[T]})},"2qsX":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("ERkP"),r=a("vOOZ"),s=a("9NHN"),o=a("hoSD"),l=a("uO+M"),c=a("6gXa"),d=a("WIwS"),p=a("eTAx"),u=a("tZ26"),m=a("mvgk"),h=a("quYV"),g=a("zR/0"),f=a("gy42"),b=a("Z0Em");!function(e){const t=10,a=100,n=1e3;function l(e){return 0===e?"":e>=n?`${Math.min(Math.trunc(e/n),9)}k+`:String(e)}const c=({className:e,isChecking:t,type:a,animateFade:n=!0})=>{const{state:o,complete:l}=h.a.fadeOutState(t);return i.createElement(r.a.div,Object.assign({},Object(s.c)(W.loader,e),{role:"loader"}),n?o.pipe(g.a.map(e=>"end"===e?i.createElement("div",{key:"checking-complete",className:"checking-complete"}):i.createElement(m.a,{key:"spinner",variation:a,size:"100%",className:"fadeOut"===e?W.fadeOut:void 0,onTransitionEnd:l}))):t.pipe(g.a.map(e=>e?i.createElement(m.a,{variation:a,size:"100%"}):i.createElement("div",{className:"checking-complete"}))))},d=({name:e,theme:t={},count:n,type:c="white",suffix:d=""})=>{const u=i.useContext(p.a.Context);return i.createElement(r.a.div,Object.assign({},Object(s.c)(W.roundCounter,f.b.mapMaybeObservable(c,m.a.getClassName(W)),t.counterWrapper),{role:"counter"}),i.createElement("svg",{viewBox:"0 0 32 32",className:W.circular},i.createElement("g",null,i.createElement("circle",{r:"15.75",cx:"16",cy:"16"}),i.createElement("text",Object.assign({x:"16",y:"17"},o.c.svgVerticalAlignment(u.has(p.a.Flag.supportsSVGDominantBaseline)),{fontSize:n>=a?14:18,"data-name":e},Object(s.c)(k,t.counterContent)),l(n),d))))},y=({name:e,theme:t={},count:a,type:n="white",suffix:c=""})=>{const d=i.useContext(p.a.Context);return i.createElement(r.a.div,Object.assign({},Object(s.c)(W.ovalCounter,f.b.mapMaybeObservable(n,m.a.getClassName(W)),t.counterWrapper),{role:"counter"}),i.createElement("svg",{viewBox:"0 0 32 20",className:W.circular},i.createElement("rect",{width:"32",height:"20",rx:"10"}),i.createElement("text",Object.assign({x:"16",y:"10.5"},o.c.svgVerticalAlignment(d.has(p.a.Flag.supportsSVGDominantBaseline)),{fontSize:11,"data-name":e},Object(s.c)(k,t.counterContent)),l(a),c)))};e.Counter=({theme:e={},count:t,type:n="white"})=>{const r=t>=a?y:d;return i.createElement(r,{theme:Object.assign(Object.assign({},e),{counterWrapper:Object(s.c)(e.counterWrapper,W.flexCounter).className}),count:t,type:n})},e.OutcomeCounter=({name:e,theme:n={},count:c,type:d="white",suffix:u,fontSize:h=12})=>{const g=i.useContext(p.a.Context);return i.createElement(r.a.div,Object.assign({},Object(s.c)(W.outcomeCounter,f.b.mapMaybeObservable(d,m.a.getClassName(W)),n.counterWrapper),{role:"counter"}),i.createElement("svg",{viewBox:"0 0 32 18",className:W.circular},i.createElement("rect",Object.assign({},function(e,n){return n||e>=a?{width:32}:e>=t?{x:4,width:24}:{x:7,width:18}}(c,!!u),{height:18,rx:9})),i.createElement("text",Object.assign({x:"50%",y:"10px"},o.c.svgVerticalAlignment(g.has(p.a.Flag.supportsSVGDominantBaseline)),{fontSize:h,"data-name":e},Object(s.c)(k,n.counterContent)),l(c),u)))},e.MainMeter=({count:e,isChecking:t,className:a})=>{const n=0===e;return i.createElement("div",Object.assign({},Object(s.c)(W.meter,a)),i.createElement(c,{isChecking:t,type:n?"green":"red"}),0===e?i.createElement(u.d.Grammarly,null):i.createElement(d,{count:e,type:"red",name:"toolbar-mistakes"}))},e.LensNavMeter=({count:e,isChecking:t})=>i.createElement("div",{className:W.lensNavMeter},i.createElement(c,{isChecking:t,type:"red"}),i.createElement(d,{count:e,type:"white",name:"toolbar-mistakes"})),e.PlagiarismMeter=({count:e,isChecking:t,className:a})=>i.createElement("div",Object.assign({},Object(s.c)(W.plagiarismMeter,a)),i.createElement(c,{isChecking:t,type:"violet",animateFade:!1}),i.createElement(r.a.div,{className:W.wrapper},e.pipe(g.a.combineLatest(t),g.a.map(([e,t])=>0===e?i.createElement(u.d.NotificationInfo,{className:W.plagiarismIcon,key:"icon",width:20}):!t&&i.createElement(y,{count:e,type:"violet",key:"value",suffix:i.createElement("tspan",{fontSize:8,dominantBaseline:"center"},"%")})),g.a.startWith(null)))),e.PlagiarismOutcomesMeter=({count:t,isChecking:a,className:n})=>i.createElement("div",Object.assign({},Object(s.c)(W.plagiarismMeter,n)),i.createElement(c,{isChecking:a,type:"cyan",animateFade:!1}),i.createElement(r.a.div,{className:W.wrapper},t.pipe(g.a.combineLatest(a),g.a.map(([t,a])=>b.a.isMin(t)?i.createElement(u.d.CheckmarkOutcomes,{className:W.plagiarismOutcomeIcon,key:"icon",width:20}):!a&&i.createElement(e.OutcomeCounter,{count:b.a.prism.reverseGet(t),type:"cyan",key:"value",suffix:i.createElement("tspan",{fontSize:11},"%")})),g.a.startWith(null))))}(n||(n={}));const y={position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"visible",margin:"auto",width:c.a.percent(100),height:c.a.percent(100)},C={position:"absolute",width:c.a.percent(150),height:c.a.percent(150),transform:"translate(-17%, -17%)"},v={position:"relative",display:"inline-flex"},S={width:c.a.percent(100),height:c.a.percent(100)},E={minWidth:c.a.rem(2),width:c.a.percent(100),height:c.a.rem(1.25)},w={maxWidth:c.a.rem(2),height:c.a.rem(1.25)},k=c.a.joinClasses(["counterText",c.a.style({fontWeight:"bold",textAnchor:"middle",fill:l.Color.CoreNeutral0})]),_={fill:d.h,$nest:{"& .counterText":{fill:d.k}}},O={fill:l.Color.CoreRed50,$nest:{"& .counterText":{fill:l.Color.CoreNeutral0}}},A={fill:l.Color.CoreGreen50,$nest:{"& .counterText":{fill:l.Color.CoreNeutral0}}},T={fill:l.Color.CoreBlue50,$nest:{"& .counterText":{fill:l.Color.CoreNeutral0}}},x={fill:"transparent",$nest:{"& .counterText":{fill:d.k}}},I={fill:d.d,$nest:{"& .counterText":{fill:l.Color.CoreNeutral0}}},M={fill:d.n,$nest:{"& .counterText":{fill:l.Color.CoreNeutral0}}},j={fill:l.Color.CoreYellow20,$nest:{"& .counterText":{fill:l.Color.CoreYellow80}}},L={fill:l.Color.CoreYellow60,$nest:{"& .counterText":{fill:l.Color.CoreNeutral0}}},N={fill:l.Color.CoreCyan50,$nest:{"& .counterText":{fill:l.Color.CoreNeutral0}}},P={width:c.a.rem(1.5),height:c.a.rem(1.5)},F={margin:`0 ${c.a.rem(.25)}`},D={width:c.a.rem(2),height:c.a.rem(1.25)},R={margin:`${c.a.rem(-1)} 0`},B={$nest:{"&:not([data-disabled='true'])[data-active='true'], &:not([data-disabled='true'])[data-hovered='true']":{fill:l.Color.CoreCyan50}}},H={width:c.a.rem(2),height:c.a.rem(1.125),position:"relative"},W=c.a.stylesheet({fadeOut:[{opacity:0,transition:"opacity .5s linear"}],circular:[y],loader:[C],wrapper:[v],roundCounter:[v,S],ovalCounter:[v,E],flexCounter:[v,w],gray:[_],red:[O],green:[A],blue:[T],white:[x],violet:[I],yellow:[M],yellowPremium:[j],orange:[L],cyan:[N],meter:[v,P],lensNavMeter:[v,P,F],plagiarismMeter:[v,D],plagiarismIcon:[R],plagiarismOutcomeIcon:[R,B],outcomeCounter:[v,{position:"absolute",left:0},H]})},"2yqQ":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("1aGC"),i=a("hoSD");const r=n.import("core/theme");class s extends r{constructor(e,t){if(super(e,t),e.root.setAttribute("spellcheck","false"),t.classes){const a=t.classes,n=e.container.className;e.root.className=i.c.classes(a.editor,e.root.className),a.editorContainer&&a.editorContainer.subscribe(t=>{e.container.className=i.c.classes(t,n)})}}}},"30Va":function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return n}));var n,i=a("zR/0"),r=a("AMXJ"),s=a("lrqh"),o=a("6fbX"),l=a("D9EC"),c=a("PrA7");class d{constructor(e,t,a,n){this._config=e,this._settings=t,this._environment=a,this._modalOperations=n,this._log=c.Monitoring.Logging.getLogger("AddinPromoViewModel"),this.modalActions=new i.a.Subject,this._sub=this.modalActions.subscribe(e=>{switch(e){case"open":this._open();break;case"close":this._close(),this._modalOperations.onClose();break;case"download":s.b.getOrElse(e=>this._log.error("error on addin promo url open",e))(this._environment.actions.openUrl(new r.a(this._config.officeAddin.installURL))),this._modalOperations.onClose();break;case"remindLater":case"overlayClose":this._modalOperations.onClose();break;default:Object(o.d)(e)}})}dispose(){this._sub.unsubscribe()}_open(){this._settings.setAddinPromoData({lastOpenedAt:s.g.some(new Date),wasClosed:this._settings.addinPromoData.get().wasClosed})}_close(){this._settings.setAddinPromoData({wasClosed:!0,lastOpenedAt:this._settings.addinPromoData.get().lastOpenedAt})}}!function(e){e.Mock=class{constructor(){this.modalActions=new i.a.Subject,this.dispose=l.l}}}(n||(n={}))},"3BTE":function(e,t,a){"use strict";a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return d})),a.d(t,"e",(function(){return p})),a.d(t,"a",(function(){return u}));var n=a("6gXa"),i=a("0Hf4"),r=a("uO+M"),s=a("Ov/9");const o={section:"report-sections-section",sectionHeader:"report-sections-sectionHeader",genericTable:"report-sections-genericTable",text:"report-sections-text"},l={borderTop:`1px solid ${r.Color.CoreNeutral30}`,pageBreakInside:"avoid"},c={marginTop:n.a.px(24*s.a),color:r.Color.CoreNeutral90,letterSpacing:0,fontWeight:"bold",fontSize:n.a.px(18*s.a),lineHeight:n.a.px(32*s.a)},d={width:n.a.percent(100),tableLayout:"fixed",textAlign:"left"},p={color:r.Color.CoreNeutral50,letterSpacing:n.a.px(.11*s.a),fontSize:n.a.px(13*s.a),lineHeight:n.a.px(20*s.a)},u={section:n.a.joinClasses([o.section,i.a.style(l)]),sectionHeader:n.a.joinClasses([o.sectionHeader,i.a.style(c)]),genericTable:n.a.joinClasses([o.genericTable,i.a.style(d)]),text:n.a.joinClasses([o.text,i.a.style(p)])}},"3F3p":function(e,t,a){"use strict";var n=a("ERkP"),i=a("OA+g"),r=a("vOOZ"),s=a("lrqh"),o=a("D9EC"),l=a("1w6p"),c=a("6gXa"),d=a("hoSD"),p=a("x7eB"),u=a("zR/0");const m=({top:e,height:t})=>{const a=`cl-placeholder-pattern-${Math.random()}`;return n.createElement(r.a.div,{className:f.placeholder,style:{transform:d.c.CSS.translateY(e),height:t}},n.useContext(p.a.Context).pipe(u.a.map(e=>n.createElement("svg",{height:"100%",className:f.placeholderSVG},n.createElement("defs",null,n.createElement("pattern",{id:a,x:"0",y:"0",width:"100%",height:b*e,patternUnits:"userSpaceOnUse"},n.createElement("rect",{x:"0",y:"0",width:"100%",height:e*y,fill:"white"}))),n.createElement("rect",{fill:`url(#${a})`,rx:e*C,ry:e*C,width:"100%",height:"100%"})))))},h={position:"absolute",top:0,boxSizing:"border-box",marginTop:c.a.rem(.425),paddingRight:c.a.rem(2),width:c.a.percent(100)},g={width:c.a.percent(100),height:c.a.percent(100),filter:"drop-shadow(0 1px 3px rgba(129, 137, 169, .2))"},f=c.a.stylesheet({placeholder:[h],placeholderSVG:[g]}),b=4,y=3,C=.25;a.d(t,"a",(function(){return v}));const v=l.b.Node.make(({state:e})=>n.createElement(r.a.div,{key:"placeholder",className:e.pipe(u.a.map(s.g.isSome),u.a.distinctUntilChanged(),u.a.map(Object(o.c)(E.placeholder,E.hiddenPlaceholder)),u.a.startWith(E.hiddenPlaceholder))},e.pipe(u.a.map(Object(i.flow)(s.g.map(e=>n.createElement(n.Fragment,null,n.createElement(m,{key:"first",top:e[0].top,height:e[0].height}),n.createElement(m,{key:"last",top:e[1].top,height:e[1].height}))),s.g.toNullable))))),S={position:"absolute"},E=c.a.stylesheet({placeholder:[S],hiddenPlaceholder:[S,{opacity:0}]})},"3bJT":function(e,t,a){"use strict";a.d(t,"b",(function(){return f})),a.d(t,"a",(function(){return b}));var n=a("uO+M"),i=a("6gXa"),r=a("WIwS"),s=a("ps/9");const o={position:"relative",borderRadius:i.a.rem(s.r),background:n.Color.CoreNeutral0,boxShadow:`0 ${i.a.rem(.625)} ${i.a.rem(s.a)} 0 rgba(198, 203, 222, .45)`},l={$nest:{"&:before":{position:"absolute",width:i.a.px(10),height:i.a.px(10),borderRadius:i.a.percent(50),content:"''",transform:"scale(.5)"}}},c={$nest:{"&:before":{backgroundColor:r.e}}},d={$nest:{"&:before":{backgroundColor:r.n}}},p={$nest:{"&:before":{backgroundColor:n.Color.CoreRed50}}},u={$nest:{"&:before":{backgroundColor:n.Color.CoreBlue50}}},m={$nest:{"&:before":{backgroundColor:n.Color.CoreGreen50}}},h={$nest:{"&:before":{backgroundColor:n.Color.CorePurple50}}},g={$nest:{"&:before":{backgroundColor:n.Color.CoreNeutral50}}},f={fullCardSelector:"fullCard",bundleInnerContainerSelector:"bundleInnerContainer",bundleFakeCard1Selector:"bundleFakeCard1",bundleFakeCard2Selector:"bundleFakeCard2",alignButtonHiddenSelector:"alignButtonHidden",cozyCardContainerSelector:"cozyCardContainer",successWrapperSelector:"successWrapper"},b=Object.assign(Object.assign({},i.a.stylesheet({dot:[l],dotAdvanced:[d],dotCritical:[c],dotCorrectness:[p],dotClarity:[u],dotEngagement:[m],dotDelivery:[h],dotVox:[g]})),{fullCard:i.a.joinClasses([f.fullCardSelector,i.a.style(o)])})},"3gHY":function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"e",(function(){return i})),a.d(t,"c",(function(){return A})),a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return s}));var n,i,r,s,o=a("OA+g"),l=a("I7vG"),c=a("5E2i"),d=a("Ni70"),p=a("lrqh"),u=a("6fbX"),m=a("D9EC"),h=a("hoSD"),g=a("PrA7"),f=a("dE97"),b=a("GUi3"),y=a("zR/0"),C=a("gy42"),v=a("4GD7"),S=a("+w1e"),E=a("NW9S"),w=a("+5S2"),k=a("EjiM"),_=a("XxrX"),O=a("BeBM");!function(e){e.cardSuggestedPositionGetter=(e,t)=>(a,n,i,r)=>{const s="cardTop"===r?0:t(n);return Object(l.pipe)(e(a,Object(l.pipe)(i,p.g.map(E.b.FromWindowTop.ISO.modify(E.a.concatC(-s))))),p.b.map(e=>({top:e,contentOffset:s})))},e.getSuperScrollMapper=(t,a,n)=>{const i=w.a.Mover.moveCardToPositionAnimatedGetter(t,a),r=w.a.Mover.moveCardToPositionSyncGetter(t,a),s=w.a.ContentOffset.contentOffsetGetter();return{setCardPosition:(e,t,a,o)=>{const l={top:o,contentOffset:s(t,n.get())};return(a?i({id:e,position:o}):y.a.of(r({id:e,position:o})).pipe(y.a.map(p.b.unsafeGet))).pipe(y.a.mapTo(l),y.a.startWith(l),y.a.distinctUntilChanged())},getCardSuggestedPosition:e.cardSuggestedPositionGetter(w.a.InfinityScrollGetter.cardPositionGetter(t,a),e=>s(e,n.get())),getCardSuggestedPositionInViewport:e.cardSuggestedPositionGetter(w.a.InfinityScrollGetter.cardPositionInViewportGetter(t,a),e=>s(e,n.get())),willFitViewport:(e,n)=>Object(l.pipe)(t.get(),t=>!!O.e.hasItems(t)&&w.a.willFitViewport(t,a)(e,n)),isAboveViewportTop:w.a.isAboveViewportTop(a)}}}(n||(n={})),function(e){e.getMapper=(e,t,a)=>{return{moveAlertHighlightInViewport:(t,a,n)=>e.ensureAlertHighlightInViewport(t,E.b.FromWindowTop.ISO.unwrap(a),n),getMarkAlertPosition:n=>Object(l.pipe)(e.getMarkByAlert(n),p.g.chain(i=>Object(l.pipe)(i.getRect(),p.b.map(d.b.relativeToViewport),p.b.map(e=>p.g.some(e.top)),p.b.getOrElse(()=>(a.debug("Cached alert is missing, falling back to flush"),(a=>(t.flushChanges(),Object(l.pipe)(e.getMarkByAlert(a),p.g.chain(e=>Object(l.pipe)(p.g.fromEither(Object(l.pipe)(e.getRect(),p.b.map(d.b.relativeToViewport),p.b.map(e=>e.top))))))))(n))),p.g.map(E.b.FromWindowTop.ISO.wrap))))}}}(i||(i={}));class A{constructor(e,t,a){this._cardPositions=e,this._alignMarkToItem=t,this._alignItemToMark=a,this._log=g.Monitoring.Logging.root.getLogger("AlignmentViewModel"),this.alignMarkToCard=(e,t,a)=>Object(l.pipe)(e,this._alignMarkToItem({animation:t,suggestedPosition:a})),this.alignCardToMark=(e,t,a)=>Object(l.pipe)(e,this._alignItemToMark({animation:t,fitCardIntoViewport:a}))}alignCardTo(e,t,a){const n=a!==v.a.Animation.NO_ANIMATION;return y.a.defer(()=>y.a.of(p.b.unsafeGet(this._cardPositions.getCardSuggestedPosition(e.id,e.renderOptions.features.has(_.a.Features.showLabel),p.g.some(t),"cardTop")))).pipe(y.a.switchMap(t=>this._cardPositions.setCardPosition(e.id,e.renderOptions.features.has(_.a.Features.showLabel),n,t.top)),y.a.mapTo(C.b.voidValue),y.a.catchError(e=>(this._log.error("Cannot align card to required top",e),y.a.EMPTY)),y.a.share())}}!function(e){e.Mock=class{constructor(){this.alignCardToMark=()=>y.a.EMPTY,this.alignCardTo=()=>y.a.EMPTY,this.alignMarkTo=()=>y.a.EMPTY,this.alignMarkToCard=()=>y.a.EMPTY}}}(r||(r={})),function(e){let t,a;!function(e){let t;!function(e){e.below="below",e.above="above",e.intersects="intersects"}(t=e.RelativePosition||(e.RelativePosition={})),e.getRelativePosition=(e,a,n)=>a.top+n>e.bottom?t.below:e.top>a.bottom?t.above:t.intersects}(t||(t={})),e.createAlignmentOnTypingEffect=(e,t,a,n,i)=>{const r=e.view(O.e.mapper(({currentLens:e})=>Object(l.pipe)(p.g.some(e),p.g.filter(Object(k.c)(i))))).pipe(y.a.map(p.g.chain(n),p.g.filter(i.isValidToAlign)),y.b.compactMap(e=>a.pipe(y.a.switchMap(C.b.Scheduler.rafScheduler),y.a.switchMap(()=>t.alignCardToMark(e,v.a.Animation.NO_ANIMATION,!1)))));return{id:"alignmentOnTyping",when:b.a.isWithAlertsId,what:O.e.Effect.Applicator.create(r.pipe(y.a.switchMapTo(y.a.NEVER)))}},e.createAlignOnDisjointedAreasEffect=(e,a,n,i)=>{const r=e.view(Object(o.flow)(O.e.getLens,p.g.filter(e=>p.g.isNone(O.j.getActiveItem(e))&&e.isCardsHeightValid&&e.items.size>0))),s=r.pipe(y.a.map(p.g.isSome),y.a.distinctUntilChanged(),y.a.switchMap(C.b.orEmpty(n.changes.pipe(y.a.startWith(C.b.voidValue),y.a.switchMap(C.b.Scheduler.rafScheduler),y.a.map(()=>p.g.some((e=>{const t=e.viewport.getValue();return{top:Math.min(t.text.top,t.wrapper.top),bottom:t.text.bottom}})(n))),y.a.map(p.g.filter(e=>e.top-e.bottom!=0))))),y.a.withLatestFrom(r.pipe(y.a.map(p.g.map(({items:e})=>e))),p.g.map2((n,r)=>Object(l.pipe)(w.c.getCardsRect(e,i),p.g.map(e=>({top:E.b.FromWindowTop.ISO.unwrap(e.top),bottom:E.b.FromWindowTop.ISO.unwrap(e.bottom)})),p.g.chain(e=>Object(l.pipe)(((e,a,n)=>{const i=Object(l.pipe)(e.getAt(0),p.g.map(e=>e.positionState.height),p.g.getOrElse(()=>0)),r=t.getRelativePosition(a,n,i);switch(r){case t.RelativePosition.above:return Object(l.pipe)(e.getAt(0),p.g.map(e=>({card:e,top:a.top})));case t.RelativePosition.below:return Object(l.pipe)(e.getAt(0),p.g.map(e=>({card:e,top:a.bottom-e.positionState.height})));case t.RelativePosition.intersects:return p.g.none;default:return Object(u.d)(r)}})(r,n,e),p.g.map(({card:e,top:t})=>a.alignCardTo(e,E.b.FromWindowTop.ISO.wrap(t),v.a.Animation.NO_ANIMATION)))),p.g.getOrElse(()=>y.a.EMPTY)))),y.a.switchMap(p.g.fold(()=>y.a.EMPTY,c.a)));return{id:"alignOnDisjointedAreas",when:b.a.isWithAlertsId,what:O.e.Effect.Applicator.create(s.pipe(y.a.switchMapTo(y.a.NEVER)))}},e.createAlignOnResizeSideEffect=(e,t,a,n,i,r=C.b.Scheduler.rafScheduler)=>{const s=e.view(O.e.mapper(({currentLens:e,alertSource:t})=>p.g.some({currentLens:e,alertSource:t}))).view(p.g.filter(({currentLens:e})=>Object(k.c)(i)(e))).view(p.g.chain(({currentLens:e,alertSource:t})=>Object(l.pipe)(n(e),p.g.filter(i.isValidToAlign),p.g.map(a=>({item:a,source:t,lensId:e.id}))))),o=C.a.windowResize.pipe(y.a.throttleTime(100),y.a.merge(a),y.a.withLatestFrom(s,(e,t)=>t),y.a.switchMap(r),y.a.switchMap(p.g.fold(()=>y.a.EMPTY,({item:e})=>t.alignCardToMark(e,v.a.Animation.NO_ANIMATION,!1))));return{id:"alignOnResizeSideEffect",when:b.a.isWithAlertsId,what:O.e.Effect.Applicator.create(o.pipe(y.a.switchMapTo(y.a.NEVER)))}},function(e){e.skip="skip"}(a=e.SkipAlertActionSource||(e.SkipAlertActionSource={})),e.createAlignmentSideEffect=(t,a,n=((e,t)=>t),i,r,s,o,l=C.b.Scheduler.rafScheduler)=>{const c=e._createAlignmentSource(t,a,n,i,r,s,o,l);return{id:"alignmentSideEffect",when:b.a.isWithAlertsId,what:O.e.Effect.Applicator.create(c.pipe(y.a.switchMapTo(y.a.EMPTY)))}},e._createAlignmentSource=(e,t,n=((e,t)=>t),i,r,s,d,u=C.b.Scheduler.rafScheduler)=>{const g=Object(m.p)(S.b.isAlertMinicardButtonClick,S.b.isSwitchToClosestByViewport,S.b.isAlertCardShow,S.a.isCardExpand,S.b.isBulkAcceptItemShow,S.b.isBulkHighlight),b=y.a.mergeStatic(e.pipe(y.a.map(O.e.mapper(({currentLens:e,alertSource:t})=>p.g.some({currentLens:e,alertSource:t}))),y.a.startWith(p.g.none),y.a.map(p.g.map(e=>e.currentLens.id)),y.a.pairwise(),y.a.filter(([e,t])=>Object(l.pipe)(p.g.map2((e,t)=>e!==t)(e,t),p.g.exists(c.a))),y.a.mapTo(p.g.none)),e.pipe(y.a.map(O.e.mapper(({currentLens:e,alertSource:t})=>p.g.some({currentLens:e,alertSource:t}))),y.a.filter(p.g.exists(({currentLens:e})=>Object(k.c)(r)(e))),y.a.map(p.g.chain(({currentLens:e,alertSource:t})=>Object(l.pipe)(i(e),p.g.filter(r.isValidToAlign),p.g.map(a=>({item:a,source:t,lensId:e.id}))))))).pipe(y.a.distinctUntilChanged(Object(o.flow)(p.g.map2((e,t)=>e.lensId===t.lensId&&e.source===t.source&&e.item.activeAlert.id===t.item.activeAlert.id&&e.item.visualState.transition.type===t.item.visualState.transition.type&&e.item.activeHighlightIndex===t.item.activeHighlightIndex),p.g.exists(c.a)))),w=Object(m.p)(S.b.isBulkHighlight,S.b.isAlertMinicardButtonClick),_=t.pipe(y.a.filter(g),y.a.map(p.g.some),y.a.startWith(p.g.none),y.a.pairwise(),y.a.filter(Object(o.flow)(Object(o.tupled)(p.g.map2((e,t)=>!S.b.isAlertCardShow(t)||!S.b.isAlertMinicardButtonClick(e))),p.g.getOrElse(o.constFalse))),y.a.map(([,e])=>Object(l.pipe)(e,p.g.filter(w))),y.a.startWith(p.g.none)).pipe(y.a.switchMap(e=>b.pipe(y.a.filter(p.g.exists(e=>e.source===f.b.sidebar)),y.a.map(p.g.chain(t=>p.g.some(Object.assign(Object.assign({},t),{clickPoint:Object(l.pipe)(e,p.g.map(h.e.pick("clickPoint")))}))))))),A=b.pipe(y.a.filter(p.g.exists(e=>e.source!==f.b.sidebar)),y.a.map(e=>Object(l.pipe)(e,p.g.chain(e=>p.g.some(Object.assign(Object.assign({},e),{clickPoint:p.g.none}))))));return y.a.mergeStatic(_,A).pipe(y.a.startWith(p.g.none),y.a.pairwise(),y.a.map(([e,t])=>Object(l.pipe)(t,p.g.map(a=>({lensId:a.lensId,card:a.item,source:a.source,animate:Object(l.pipe)(e,p.g.forAll(({lensId:e})=>e===a.lensId)),clickPoint:Object(l.pipe)(t,p.g.chain(h.e.pick("clickPoint")),p.g.map(Object(o.flow)(h.e.pick("y"),E.b.FromWindowTop.ISO.wrap)))})))),y.a.switchMap(p.g.fold(()=>y.a.EMPTY,u)),y.a.withLatestFrom(e),y.a.switchMap(([{card:e,source:t,animate:i,clickPoint:r,lensId:o},c])=>Object(l.pipe)(n(e,t),t=>{return O.e.hasItems(c)&&c.currentLens.items.has(e.id)&&o===c.currentLens.id&&t!==a.skip?((e,t,a,n)=>{if(a===f.b.text)return Object(l.pipe)(e,d({animation:t?v.a.Animation.ANIMATE_ALL:v.a.Animation.NO_ANIMATION,fitCardIntoViewport:!0}));if(a===O.c.forceText)return Object(l.pipe)(e,d({animation:v.a.Animation.NO_ANIMATION,fitCardIntoViewport:!1}));{const i=a===f.b.sidebar?t?v.a.Animation.ANIMATE_ALL:v.a.Animation.ANIMATE_MARK:v.a.Animation.NO_ANIMATION;return Object(l.pipe)(e,s({animation:i,suggestedPosition:n}))}})(e,i,t,r):y.a.NEVER})))}}(s||(s={}))},"3hQ2":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("GUi3"),r=a("zR/0"),s=a("BeBM");!function(e){let t,a;!function(e){let t,a;!function(e){e.toggleNonPriorityCards="toggleNonPriorityCards"}(t=e.Kind||(e.Kind={})),function(e){let t;!function(e){e.collapsed="collapsed",e.expanded="expanded"}(t=e.NextState||(e.NextState={}))}(a=e.ToggleNonPriorityCards||(e.ToggleNonPriorityCards={}))}(t=e.Event||(e.Event={})),function(e){e.toggleNonPriorityCards=(e,t,a)=>({id:"toggleNonPriorityCards",when:i.a.isWithAlertsId,what:s.e.Effect.Applicator.create(e.pipe(r.a.map(e=>n=>s.e.hasItems(n)&&Object(s.l)(n.currentLens)?(a(e.nextState),n.patch({currentLens:t.toggleNonPriorityList(e.nextState)(n.currentLens)})):n)))})}(a=e.SideEffects||(e.SideEffects={}))}(n||(n={}))},"3jsv":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a("ERkP"),i=a("7nmT"),r=a("hoSD"),s=a("1huE"),o=a("zR/0");class l extends n.Component{constructor(){super(...arguments),this._subs=new s.a.Keeper}componentDidMount(){const e=i.findDOMNode(this);this._subs.push(o.a.fromEvent(document,"mousedown").subscribe(t=>{e&&e!==t.target&&!r.c.isParent(e,t.target)&&this.props.hide(t.target)}))}componentWillUnmount(){this._subs.dispose()}render(){return n.Children.only(this.props.children)}}},"3s0z":function(e,t,a){"use strict";var n,i;a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i})),function(e){e.Keydown="keydown",e.Input="input"}(n||(n={})),function(e){e.alt="alt",e.shift="shift",e.short="short"}(i||(i={}))},"3zdQ":function(e,t,a){"use strict";a.d(t,"b",(function(){return b})),a.d(t,"a",(function(){return y}));var n=a("ERkP"),i=a("LNSM"),r=a("9NHN"),s=a("vOOZ"),o=a("lrqh"),l=a("uO+M"),c=a("6gXa"),d=a("WIwS"),p=a("ps/9"),u=a("x7eB"),m=a("zR/0"),h=a("gy42");const g=40;class f extends n.Component{constructor(){super(...arguments),this._linesCount=this.props.defaultLinesCount||g,this._wrapper=i.a.create(o.g.none),this._title=i.a.create(o.g.none),this._linesHeight=i.a.create(this._linesCount),this._subs=[]}componentDidMount(){this._subs.push(m.a.combineLatestStatic(this.context,h.a.windowResize.pipe(m.a.startWith(h.b.voidValue)),e=>e).pipe(m.a.switchMap(e=>i.a.combine(this._wrapper,this._title,(t,a)=>({wrapper:t,title:a,remSize:e}))),m.a.filter(({wrapper:e,title:t})=>o.g.isSome(e)&&o.g.isSome(t)),m.a.switchMap(h.b.Scheduler.rafScheduler),m.a.switchMap(h.b.Scheduler.rafScheduler)).subscribe(({wrapper:e,title:t,remSize:a})=>{const n=Math.floor((o.g.unsafeGet(e).offsetHeight-o.g.unsafeGet(t).offsetHeight)/a);this._linesHeight.set(n)}))}componentWillUnmount(){this._subs.forEach(e=>e.unsubscribe()),this._subs=[]}render(){const{wrapperClass:e}=this.props;return n.createElement("div",Object.assign({ref:e=>this._wrapper.set(o.g.fromNullable(e))},Object(r.c)(F.wrapper,e)),n.createElement("div",{className:F.loaderInitial}),n.createElement("div",{className:F.loader1}),n.createElement("div",{className:F.loader2}),n.createElement("div",{className:F.titleWrap,ref:e=>this._title.set(o.g.fromNullable(e))},this.props.children),n.createElement(s.a.div,Object.assign({style:this._linesHeight.view(e=>({height:`${e}rem`}))},Object(r.c)(F.lines,this.props.linesClass))),n.createElement("div",{className:F.empty}))}}f.contextType=u.a.Context;const b=()=>n.createElement(f,{linesClass:F.documentLines},n.createElement("div",{className:F.documentTitleWrap},n.createElement("div",{className:F.documentTitle}))),y=()=>n.createElement(f,{linesClass:F.lensviewLines,wrapperClass:F.lensviewWrapper},n.createElement(n.Fragment,null,n.createElement("div",{className:F.lensviewTitle}),n.createElement("div",{className:F.lensviewOpenCard}))),C=`calc(${c.a.rem(2)} + 5px)`,v=c.a.keyframes({from:{transform:"translateY(-50%)"},to:{transform:"translateY(100%)"}}),S=c.a.keyframes({from:{transform:"translateY(-100%)"},to:{transform:"translateY(100%)"}}),E={position:"relative",overflow:"hidden",width:c.a.percent(100),height:c.a.percent(100),background:l.Color.CoreNeutral0},w={position:"absolute",top:0,width:c.a.percent(100),height:c.a.percent(100),backgroundImage:`linear-gradient(-179deg, ${l.Color.CoreNeutral0} 0%, ${d.j} 30%, ${l.Color.CoreNeutral0} 60%)`,backgroundSize:c.a.percent(100),backgroundRepeat:"no-repeat",opacity:.45,animation:`${S} ${c.a.seconds(3)} linear forwards infinite`,willChange:"transform"},k={animation:`${v} ${c.a.seconds(2.25)} linear forwards`},_={transform:"translateY(-100%)",animationDelay:c.a.seconds(.75)},O={transform:"translateY(-100%)",animationDelay:c.a.seconds(2.25)},A={position:"relative",zIndex:1,width:c.a.percent(100),backgroundColor:"transparent",backgroundImage:`repeating-linear-gradient(180deg, ${d.g}, ${d.g} ${c.a.rem(1)}, ${l.Color.CoreNeutral0} ${c.a.rem(1)}, ${l.Color.CoreNeutral0} ${c.a.rem(2)})`,backgroundPosition:"0 0"},T={position:"relative",height:c.a.percent(100),backgroundColor:l.Color.CoreNeutral0},x={position:"relative",$nest:{"&:before":{display:"block",width:c.a.percent(100),height:c.a.rem(1.2),background:l.Color.CoreNeutral0,content:"''"}}},I={position:"relative",zIndex:1,marginTop:C,width:c.a.percent(100),height:c.a.rem(1.5),borderRadius:c.a.rem(p.t),backgroundColor:l.Color.CoreNeutral0},M={backgroundImage:`repeating-linear-gradient(180deg, ${d.g}, ${d.g} ${c.a.rem(1)}, ${l.Color.CoreNeutral0} ${c.a.rem(1)}, ${l.Color.CoreNeutral0} ${c.a.rem(2)})`},j={top:c.a.rem(1.6)},L={marginTop:c.a.rem(1.5),height:c.a.rem(1.8),backgroundColor:l.Color.CoreNeutral0},N={marginTop:c.a.rem(10.5),height:c.a.rem(2.7),backgroundColor:l.Color.CoreNeutral0},P={backgroundImage:`repeating-linear-gradient(180deg, ${d.g}, ${d.g} ${c.a.rem(1)}, ${l.Color.CoreNeutral0} ${c.a.rem(1)}, ${l.Color.CoreNeutral0} ${c.a.rem(3)})`},F=c.a.stylesheet({wrapper:[E],loader:[w],loaderInitial:[w,k],loader1:[w,_],loader2:[w,O],lines:[A],empty:[T],titleWrap:[{position:"relative"}],documentTitleWrap:[x],documentTitle:[I],documentLines:[M],lensviewWrapper:[j],lensviewTitle:[L],lensviewOpenCard:[N],lensviewLines:[P]})},"4GD7":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("OA+g"),r=a("bYZB"),s=a("lrqh"),o=a("PrA7"),l=a("zR/0"),c=a("gy42"),d=a("NW9S"),p=a("XxrX");!function(e){let t;!function(e){e[e.ANIMATE_ALL=0]="ANIMATE_ALL",e[e.ANIMATE_MARK=1]="ANIMATE_MARK",e[e.NO_ANIMATION=2]="NO_ANIMATION"}(t=e.Animation||(e.Animation={})),e.alignMarkToItem=function(e,a){return({animation:n,suggestedPosition:u})=>({id:m,renderOptions:{features:h},activeHighlightIndex:g,activeAlert:f})=>l.a.defer(()=>l.a.of(e.getMarkAlertPosition({alert:f,highlightIndex:g}))).pipe(l.b.compact,l.a.switchMap(e=>{const t=s.b.unsafeGet(a.getCardSuggestedPositionInViewport(m,h.has(p.a.Features.showLabel),s.g.none,"cardContentTop"));return a.setCardPosition(m,h.has(p.a.Features.showLabel),!1,d.b.FromWindowTop.ISO.modify(d.a.concatC(-t.contentOffset))(e)).pipe(l.a.distinctUntilChanged(),l.a.mapTo(Object(i.pipe)(u,s.g.filter(e=>a.willFitViewport(m,d.b.FromWindowTop.ISO.modify(d.a.concatC(-t.contentOffset))(e))),s.g.getOrElse(()=>d.b.FromWindowTop.ISO.modify(d.a.concatC(t.contentOffset))(t.top)))))}),l.a.switchMap(a=>e.moveAlertHighlightInViewport({alert:f,highlightIndex:g},a,n===t.ANIMATE_ALL?r.a.fake:r.a.none)),l.a.mapTo(c.b.voidValue),l.a.catchError(e=>(o.Monitoring.Logging.root.getLogger("AlignmentViewModel").error("Cannot align mark to card",e),l.a.EMPTY)),l.a.share())},e.alignItemToMark=function(t,a){return({animation:n,fitCardIntoViewport:i})=>({id:u,renderOptions:{features:m},activeAlert:h,activeHighlightIndex:g})=>l.a.defer(()=>l.a.of(t.getMarkAlertPosition({alert:h,highlightIndex:g}))).pipe(l.a.switchMap(s.g.fold(()=>l.a.EMPTY,e=>l.a.of(e))),l.a.map(e=>({mark:e,card:s.b.unsafeGet(a.getCardSuggestedPositionInViewport(u,m.has(p.a.Features.showLabel),s.g.some(e),"cardContentTop"))})),l.a.switchMap(({card:s,mark:o})=>l.a.mergeStatic(a.setCardPosition(u,m.has(p.a.Features.showLabel),n===e.Animation.ANIMATE_ALL,d.b.FromWindowTop.ISO.modify(d.a.concatC(-s.contentOffset))(o)),c.b.orEmpty(t.moveAlertHighlightInViewport({alert:h,highlightIndex:g},d.b.FromWindowTop.ISO.modify(d.a.concatC(s.contentOffset))(s.top),n===e.Animation.ANIMATE_ALL?r.a.initial:r.a.none))(i))),l.a.mapTo(c.b.voidValue),l.a.catchError(e=>(o.Monitoring.Logging.root.getLogger("AlignmentViewModel").error("Cannot align card to mark",e),l.a.EMPTY)),l.a.share())}}(n||(n={}))},"4Gmt":function(e,t,a){"use strict";var n=a("ERkP"),i=a("vOOZ"),r=a("6fbX"),s=a("1w6p"),o=a("rk+4"),l=a("BoSw"),c=a("nnns"),d=a("D6Vf");const p=()=>n.createElement("svg",{width:"128",height:"177"},n.createElement("defs",null,n.createElement("rect",{id:"a",y:"14",width:"128",height:"128",rx:"64"})),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("ellipse",{fill:"#F1F2FA",cx:"64",cy:"173",rx:"48",ry:"4"}),n.createElement("path",{d:"M27 0h62a5 5 0 0 1 5 5v91a5 5 0 0 1-5 5H24a5 5 0 0 1-5-5V8a8 8 0 0 1 8-8z",fill:"#F1F2FA"}),n.createElement("mask",{id:"b",fill:"#fff"},n.createElement("use",{xlinkHref:"#a"})),n.createElement("use",{fill:"#A2BCFF",xlinkHref:"#a"}),n.createElement("path",{d:"M116.708 48.783a4.144 4.144 0 0 1 5.672-1.465 4.138 4.138 0 0 1 1.466 5.667l-17.955 30.462a4.141 4.141 0 0 1-3.57 2.039 4.145 4.145 0 0 1-2.879-1.164l-12.527-12.1a4.138 4.138 0 0 1-.099-5.855 4.144 4.144 0 0 1 5.858-.099l8.747 8.45 15.287-25.935zm-63.446 45.53h58.877a4.141 4.141 0 0 1 4.142 4.139 4.141 4.141 0 0 1-4.142 4.14H53.262a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zM8.793 17.33h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm0 17.526h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm4.99 68.985a4.74 4.74 0 0 1-4.686 4.794 4.74 4.74 0 0 1-.111-9.477 4.74 4.74 0 0 1 4.798 4.683zm16.757 16.106a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14c0 9.416-7.665 17.076-17.087 17.076S4.65 129.363 4.65 119.947a4.141 4.141 0 0 1 4.143-4.14 4.141 4.141 0 0 1 4.143 4.14c0 4.85 3.948 8.796 8.802 8.796 4.853 0 8.802-3.946 8.802-8.796zM8.793 76.46c-1.06 0-2.12-.405-2.93-1.213a4.138 4.138 0 0 1 0-5.855l4.274-4.27-4.273-4.27a4.138 4.138 0 0 1 0-5.855 4.145 4.145 0 0 1 5.859 0l4.273 4.27 4.273-4.27a4.144 4.144 0 0 1 5.858 0 4.138 4.138 0 0 1 0 5.855l-4.273 4.27 4.274 4.27a4.138 4.138 0 0 1-2.93 7.068c-1.06 0-2.12-.405-2.929-1.213l-4.273-4.27-4.273 4.27a4.133 4.133 0 0 1-2.93 1.213zm87.342 44.285l13.678 9.075a4.138 4.138 0 0 1 1.16 5.739 4.144 4.144 0 0 1-5.743 1.159l-11.387-7.555-11.386 7.555a4.143 4.143 0 0 1-4.378.128l-12.844-7.478-11.078 7.35c-.705.468-1.5.691-2.288.691a4.14 4.14 0 0 1-2.295-7.589l13.227-8.776a4.144 4.144 0 0 1 4.377-.128l12.844 7.478 11.53-7.65a4.145 4.145 0 0 1 4.583 0zM31.23 86.814a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14v19.402a4.141 4.141 0 0 1-4.143 4.14 4.141 4.141 0 0 1-4.142-4.14V86.814z",fill:"#BDCFFF",mask:"url(#b)"}),n.createElement("path",{d:"M36 12h65a5 5 0 0 1 5 5v88a8 8 0 0 1-8 8H36a5 5 0 0 1-5-5V17a5 5 0 0 1 5-5z",fill:"#7CA1FF",mask:"url(#b)"}),n.createElement("rect",{fill:"#FFF",x:"25",y:"6",width:"75",height:"101",rx:"5"}),n.createElement("path",{d:"M38 21h49a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1zm0 13h32a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1z",fill:"#F1F2FA"})));var u=a("mvgk"),m=a("BugA"),h=a("zR/0"),g=a("9NHN"),f=a("94k3"),b=a("hoSD"),y=a("lrqh"),C=a("uO+M"),v=a("6gXa"),S=a("WIwS"),E=a("ps/9"),w=a("tZ26"),k=a("I7vG"),_=a("LNSM");const O=e=>{const{score:t,documentIsEmpty:a,sidebarOpen:r=_.a.create(!0),successIcon:s,progressIcon:o,zeroIcon:l=null}=e,c=t.pipe(h.a.map(y.g.map(e=>e.rank))),d=h.a.combineLatestStatic(t,a,(e,t)=>Object(k.pipe)(e,y.g.fold(()=>!1,({rank:e})=>100===e&&!t))),p=r.pipe(h.a.switchMap(e=>e?c.pipe(h.a.startWith(y.g.none),h.a.pairwise(),h.a.switchMap(([e,t])=>Object(k.pipe)(t,y.g.fold(()=>h.a.of(l),t=>d.pipe(h.a.startWith(!1),h.a.pairwise(),h.a.switchMap(([a,n])=>n?h.a.of(s):Object(k.pipe)(e,y.g.filter(()=>!a),y.g.fold(()=>h.a.of(o(t)).pipe(h.a.delay(1),h.a.startWith(o(0))),()=>h.a.of(o(t)))))))))):h.a.of(null)),h.a.startWith(null));return n.createElement(i.a.Fragment,null,p)};var A=a("kHl6"),T=a("/i6n");const x={display:"flex",flexDirection:"column",maxHeight:"90vh",width:v.a.rem(32),height:v.a.rem(41),background:C.Color.CoreNeutral0},I={padding:`${v.a.rem(2.75)} ${v.a.rem(1)} 0 ${v.a.rem(2)}`,minHeight:v.a.rem(5.1),height:v.a.rem(5.1),backgroundColor:C.Color.CoreNeutral0},M={marginRight:v.a.rem(1),paddingBottom:v.a.rem(.3),borderBottom:`1px solid ${S.j}`},j={padding:`0 ${v.a.rem(1)} ${v.a.rem(1)} ${v.a.rem(2)}`},L={padding:`0 ${v.a.rem(1.9)}`,minHeight:v.a.rem(4),height:v.a.rem(4)},N={position:"absolute",top:v.a.rem(-5.15),right:0,bottom:0,left:0,margin:"auto"},P={display:"flex",flexDirection:"column",marginTop:v.a.rem(7.15),marginBottom:v.a.rem(2),paddingRight:v.a.rem(1),alignItems:"center"},F={wordSpacing:v.a.rem(.05),fontSize:v.a.rem(.875),lineHeight:v.a.rem(1.5)},D={padding:`${v.a.rem(1.3)} ${v.a.rem(2.6)}`,textAlign:"center"},R=v.a.prefixedStylesheet("statistics",{wrapper:[x],modalHeader:[I],modalHeaderUnderline:[M],modalReady:[{transition:"opacity .2s"}],modalEmpty:[{opacity:0}],modalBody:[j],modalFooter:[L],loader:[N],zeroStateContainer:[P],performanceText:[F],zeroStateText:[F,D]});var B;!function(e){e.number="number",e.time="time",e.percentage="percentage"}(B||(B={}));const H=e=>{switch(e){case B.number:case B.percentage:return me.numberRowData;case B.time:return me.timeRowData;default:return Object(r.d)(e)}},W=({type:e,value:t,info:a,children:i,dataName:s})=>n.createElement("div",{className:me.row,"data-name":s},n.createElement("div",{className:H(e)},n.createElement("div",{className:me.metricTitle},i),n.createElement("div",{className:me.metric},((e,t)=>{switch(e){case B.number:return(Math.round(10*t)/10).toLocaleString();case B.time:return b.d.convertTimeToShortString(t);case B.percentage:return Math.round(t)+"%";default:return Object(r.d)(e)}})(e,t))),a&&n.createElement(c.b,{title:a})),$=({state:e})=>{const t=n.useContext(o.a.Context).performance,{stats:a,score:r,documentIsEmpty:s}=e;return n.createElement(n.Fragment,null,n.createElement("section",{className:me.titleSection},n.createElement("div",{className:me.titleColumns},n.createElement(i.a.div,Object.assign({},Object(g.c)(R.performanceText,me.headerDescription)),100===r.rank?t.score100:t.scoreUnder100(r.rank)),n.createElement(O,{score:h.a.of(y.g.some(r)),documentIsEmpty:h.a.of(s),successIcon:n.createElement(w.d.CheckmarkAnimated,{key:"modal-checkmark",width:50,className:me.checkmark}),progressIcon:e=>n.createElement(T.a,{key:"modal-performance-progress",colorType:T.a.ColorType.royalBlue,fontSize:T.a.FontSize.small,percentage:e,theme:he})}))),n.createElement("section",{className:me.wordCountSection},n.createElement(m.H2,{className:me.sectionHeaderUnderline},t.wordCount),n.createElement("div",{className:me.wordCountColumns},n.createElement("div",{className:me.firstColumn},n.createElement(W,{type:B.number,value:Math.max(a.chars-1,0)},t.characters),n.createElement(W,{type:B.number,value:a.words},t.words),n.createElement(W,{type:B.number,value:a.sentences},b.f.pluralize(a.sentences,t.sentence,t.sentences))),n.createElement("div",{className:me.secondColumn},n.createElement(W,{type:B.time,value:f.a.DocumentStatistics.calculateReadingTime(a.words)},t.readingTime),n.createElement(W,{type:B.time,value:f.a.DocumentStatistics.calculateSpeakingTime(a.words)},t.speakingTime)))),n.createElement("section",{className:me.readabilitySection},n.createElement("div",{className:me.sectionHeaderWrapper},n.createElement(m.H2,null,t.readability),n.createElement(m.SmallLight,null,t.sectionTitleDescription)),n.createElement("div",{className:me.readabilityColumns},n.createElement("div",{className:me.firstColumn},n.createElement(W,{type:B.number,value:a.wordLength},t.wordLengthTitle),n.createElement(W,{type:B.number,value:a.sentenceLength},t.sentenceLengthTitle),n.createElement(W,{type:B.number,value:a.readabilityScore,info:t.readabilityDescription,dataName:"readability"},t.readabilityScore)),n.createElement("div",{className:me.secondColumn},n.createElement("div",{className:me.row},n.createElement(A.a,{value:a.wordLengthIndex,className:me.progressBar,leftCustomClass:me.leftProgress,rightCustomClass:me.rightProgress}),n.createElement(A.a.Label,{value:a.wordLengthIndex,className:me.progressLabel})),n.createElement("div",{className:me.row},n.createElement(A.a,{value:a.sentenceLengthIndex,className:me.progressBar,leftCustomClass:me.leftProgress,rightCustomClass:me.rightProgress}),n.createElement(A.a.Label,{value:a.sentenceLengthIndex,className:me.progressLabel})),n.createElement("div",{className:me.verticalPillar}))),n.createElement(m.SmallLight,{className:me.readabilityDescr},a.readabilityDescription)),n.createElement("section",null,n.createElement("div",{className:me.sectionHeaderWrapper},n.createElement(m.H2,null,t.vocabulary),n.createElement(m.SmallLight,null,t.sectionTitleDescription)),n.createElement("div",{className:me.vocabularyColumns},n.createElement("div",{className:me.firstColumn},n.createElement(W,{type:B.percentage,value:a.uniqueWords,info:t.uniqueWords},t.uniqueWordsTitle),n.createElement(W,{type:B.percentage,value:a.rareWords,info:t.rareWords},t.rareWordsTitle)),n.createElement("div",{className:me.secondColumn},n.createElement("div",{className:me.row},n.createElement(A.a,{value:a.uniqueWords,className:me.progressBar,leftCustomClass:me.leftProgress,rightCustomClass:me.rightProgress}),n.createElement(A.a.Label,{value:a.uniqueWords,className:me.progressLabel})),n.createElement("div",{className:me.row},n.createElement(A.a,{value:a.rareWords,className:me.progressBar,leftCustomClass:me.leftProgress,rightCustomClass:me.rightProgress}),n.createElement(A.a.Label,{value:a.rareWords,className:me.progressLabel})),n.createElement("div",{className:me.verticalPillar})))))},V={marginBottom:v.a.rem(2.4)},U={display:"flex",marginTop:v.a.rem(.9),marginRight:v.a.rem(1),justifyContent:"space-between"},G={marginBottom:v.a.rem(1.5)},z={display:"flex",marginTop:v.a.rem(.8)},q={marginBottom:v.a.rem(2.4)},Y={display:"flex",marginTop:v.a.rem(.8)},X={display:"flex",marginTop:v.a.rem(.8)},K={flexBasis:v.a.percent(50)},Z={position:"relative",paddingLeft:v.a.rem(.5),flexBasis:v.a.percent(50)},Q={display:"flex",height:v.a.rem(2),alignItems:"center"},J={display:"flex",justifyContent:"space-between"},ee={width:v.a.rem(10),fontFeatureSettings:`${E.g}, ${E.e}`},te={width:v.a.rem(13)},ae={marginRight:v.a.rem(1),paddingBottom:v.a.rem(.5),borderBottom:`1px solid ${S.j}`},ne={width:v.a.percent(80),whiteSpace:"pre-line"},ie={display:"inline-block",color:C.Color.CoreBlue50,textAlign:"right",fontWeight:"bold",fontSize:v.a.rem(.875),lineHeight:v.a.rem(2)},re={display:"inline-block",color:C.Color.CoreNeutral90,fontSize:v.a.rem(.875),lineHeight:v.a.rem(2)},se={width:v.a.rem(3.2),height:v.a.rem(3.2),fontWeight:"bold"},oe={width:v.a.rem(6),backgroundColor:S.j},le={marginLeft:v.a.rem(1.125)},ce={backgroundImage:S.b},de={backgroundImage:S.f},pe={display:"block",paddingTop:v.a.rem(.5)},ue={position:"absolute",top:v.a.rem(.5),left:v.a.rem(3.5),width:v.a.rem(.0625),height:v.a.rem(3),backgroundColor:S.i},me=v.a.stylesheet({titleSection:[V],titleColumns:[U],wordCountSection:[G],wordCountColumns:[z],readabilitySection:[q],readabilityColumns:[Y],vocabularyColumns:[X],firstColumn:[K],secondColumn:[Z],row:[Q],rowData:[J],numberRowData:[J,ee],timeRowData:[J,te],sectionHeaderUnderline:[ae],sectionHeaderWrapper:[ae,{display:"flex",alignItems:"baseline",justifyContent:"space-between"}],headerDescription:[ne],metric:[ie],metricTitle:[re],checkmark:[{alignItems:"center"}],circleProgressBar:[se],progressBar:[oe],progressLabel:[le],leftProgress:[ce],rightProgress:[de],readabilityDescr:[pe],verticalPillar:[ue]}),he={radialProgressBar:me.circleProgressBar};var ge;a.d(t,"a",(function(){return ge})),function(e){let t;e.ModalView=s.b.Grid.make(({slots:a,state:i,notify:r})=>{const s=r({kind:t.close});return n.createElement(d.c,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:s},n.createElement(e.ModalContent,{state:i,downloadButton:a.downloadButton,onClose:s}))}),function(e){e.close="close"}(t=e.ActionsKind||(e.ActionsKind={})),e.ModalContent=({state:t,downloadButton:a,onClose:i})=>n.createElement(d.a,{className:R.wrapper},n.createElement(d.a.Header,{className:R.modalHeader},n.createElement(e.Header,{state:t})),n.createElement(d.a.Body,{name:"performanceBody",className:R.modalBody,wrapperClassName:t.pipe(h.a.map(e=>e.type===l.a.State.Type.EMPTY?R.modalEmpty:R.modalReady))},n.createElement(e.Body,{state:t})),n.createElement(d.a.Footer,{className:R.modalFooter},n.createElement(f,{downloadButton:a,onClose:i})));const a=()=>{const e=n.useContext(o.a.Context);return n.createElement("div",{className:R.zeroStateContainer},n.createElement(p,null),n.createElement("div",{className:R.zeroStateText},e.performance.notEnoughTextToCalculateStats))};e.Header=({state:e})=>{const t=n.useContext(o.a.Context);return n.createElement(i.a.Fragment,null,e.pipe(h.a.map(e=>n.createElement(m.H2,{key:"statisticsHeader",className:e.type===l.a.State.Type.READY?R.modalHeaderUnderline:""},t.performance.title))))};const g=()=>n.createElement(u.a,{size:64,className:R.loader,variation:"blue"});e.Body=({state:e})=>n.createElement(i.a.Fragment,null,e.pipe(h.a.map(e=>{switch(e.type){case l.a.State.Type.EMPTY:return null;case l.a.State.Type.LOADING:case l.a.State.Type.ERROR:return n.createElement(g,{key:"statisticsLoading"});case l.a.State.Type.SHORT_CONTENT:return n.createElement(a,{key:"statisticsEmpty"});case l.a.State.Type.READY:return n.createElement($,{key:"statisticsContent",state:e});default:return Object(r.d)(e)}})));const f=({downloadButton:e,onClose:t})=>n.createElement(n.Fragment,null,e,n.createElement(c.a.Primary,{name:"close-stats",onClick:t},"Close"))}(ge||(ge={}))},"4e/B":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n,i,r=a("OA+g"),s=a("I7vG"),o=a("LNSM"),l=a("WOlp"),c=a("7Hnf"),d=a("Z0Em"),p=a("zR/0"),u=a("gy42"),m=a("6fbX"),h=a("lrqh"),g=a("hoSD");!function(e){let t;!function(e){e.Like="Like",e.Dislike="Dislike"}(t=e.FeedbackType||(e.FeedbackType={}))}(n||(n={})),function(e){function t(e){switch(e){case n.FeedbackType.Like:return l.m.EMOTION_LIKE;case n.FeedbackType.Dislike:return l.m.EMOTION_DISLIKE;default:return Object(m.d)(e)}}function a(e){return Object(s.pipe)(d.b.fromNumber(e.confidence),h.b.map(t=>({emoji:e.emoji,name:e.name,confidence:t,feedback:h.g.none})))}function i(e){return e.reduce((e,t)=>(e[t.name]=t,e),{})}e.toCapiFeedback=t,e.create=function(e,n,l){const m=o.a.create({}),f=[e.pipe(p.a.filter(c.b.is("emotions")),p.a.map(e=>Object(s.pipe)(function(e){const[t,n]=g.a.partition(e.map(a),h.b.isRight);return t.length===e.length?h.b.right(t.map(h.b.unsafeGet)):h.b.left(Object(s.pipe)(n.map(h.b.swap).map(h.b.unsafeGet).join(";")))}(e.emotions),h.b.map(i),h.b.fold(e=>(l.error("Failed to parse emotions from capi",{rejectionReason:e}),{}),r.identity)))).subscribe(u.b.toAtom(m))];return{emotions:m.view(e=>Object.values(e).sort((e,t)=>d.b.ord.compare(t.confidence,e.confidence))),sendEmotionFeedback:(e,a)=>Object(s.pipe)(function(e,t){return void 0===e[t]?h.b.left(new Error("Tried to send feedback for non-existing emotion")):Object(s.pipe)(e[t].feedback,h.g.fold(()=>h.b.right(void 0),()=>h.b.left(new Error("Tried to send feedback for an emotion which already has one"))))}(m.get(),e),h.b.map(()=>{n.sendFeedback({emotionName:e,kind:t(a)})(),m.modify(t=>Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},t[e]),{feedback:h.g.some(a)})}))})),dispose:()=>f.forEach(e=>e.unsubscribe())}}}(i||(i={}))},"4lva":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return s}));var n,i,r,s,o=a("LNSM"),l=a("lrqh"),c=a("D9EC"),d=a("zR/0"),p=a("CPFL"),u=a("Z86f");!function(e){e[e.EngagementHook=0]="EngagementHook",e[e.DeliveryHook=1]="DeliveryHook",e[e.PlagiarismHook=2]="PlagiarismHook",e[e.ProofitHook=3]="ProofitHook",e[e.GbVoxHook=4]="GbVoxHook",e[e.GbEnableVoxHook=5]="GbEnableVoxHook"}(n||(n={})),function(e){e.NotAvailable="NotAvailable",e.EmptyDocument="EmptyDocument"}(i||(i={})),function(e){e.NotAvailable="NotAvailable",e.EmptyDocument="EmptyDocument"}(r||(r={})),function(e){let t;!function(e){e.default="default",e.priority="priority"}(t=e.LensTitleType||(e.LensTitleType={})),e.documentActionAvailable={kind:"available"},e.proofitDisabled=e=>({kind:"disabled",reason:e}),e.plagiarismDisabled=e=>({kind:"disabled",reason:e});e.Mock=class{constructor(a={}){this.documentActions=o.a.create({proofit:e.documentActionAvailable,plagiarism:e.documentActionAvailable}),this.popover=o.a.create(l.g.none),this.showMuteControl=o.a.create(!1),this.isDocumentActionsDisabled=o.a.create(!1),this.lensMode=o.a.create(u.a.all),this.defaultLensMode=u.a.all,this.events=new d.a.Subject,this.lensModeEvents=new d.a.Subject,this.lensTitleType=t.default,this.dispose=c.l;const n=new p.a.Mock(a);this.lensPreviews=o.a.create(n.lensPreviews)}}}(s||(s={}))},"5GxT":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("ERkP"),i=a("OA+g"),r=a("lrqh"),s=a("hoSD"),o=a("uO+M"),l=a("6gXa"),c=a("ps/9"),d=a("0gxC"),p=a("v1xk");const u=()=>n.createElement(p.a,null,Object(i.flow)(r.g.map(e=>n.createElement(d.a.ByAbsoluteRect,Object.assign({rect:s.c.Rect.fromEl(e.target),className:g.container},d.a.Alignment.toSelector(e.alignment),{withPin:!0}),n.createElement("div",{className:g.content},e.content))),r.g.toNullable)),m={position:"fixed",zIndex:c.m,pointerEvents:"none",$nest:{"@media print":{visibility:"hidden"}}},h={padding:`${l.a.rem(.25)} ${l.a.rem(1)}`,borderRadius:l.a.rem(c.s),background:o.Color.BackgroundTooltip,color:o.Color.CoreNeutral1,textAlign:"center",whiteSpace:"nowrap",letterSpacing:l.a.px(.25),fontSize:l.a.rem(.75),lineHeight:l.a.rem(1)},g=l.a.stylesheet({container:[m],content:[h]})},"5RoT":function(e,t,a){"use strict";var n,i,r,s,o=a("a5W6"),l=a("OA+g"),c=a("I7vG"),d=a("2Jhg"),p=a("LNSM"),u=a("mbuk"),m=a("dE97"),h=a("kMag"),g=a("GUi3"),f=a("yA7V"),b=a("1huE"),y=a("zR/0"),C=a("gy42"),v=a("XpkH"),S=a("vVVP"),E=a("UEGg"),w=a("5o4I"),k=a("BeBM"),_=a("bFfh"),O=a("XCjp"),A=a("lrqh"),T=a("D9EC"),x=a("7b34"),I=a("hoSD"),M=a("PrA7"),j=a("Wcgi"),L=a("6fbX"),N=a("wbpH");(i=n||(n={})).base=N.a,i.fromAlert=function(e,t){return{base:g.a.outcomeFullTypeMatch(e.lensId===g.a.SpecialId.Premium?g.a.Type.Advanced:e.lensType)(i.base),markHeight:t?i.base.markHeightTall:i.base.markHeightStandard,markAnimated:i.base.markAnimated,markVisible:i.base.markVisible,markSelectedFocused:i.base.markSelectedFocused,markHidden:i.base.markHidden,markSuccess:i.base.markSuccess,markBulkApplied:i.base.markBulkApplied,markBulkAppliedAnimation:i.base.markBulkAppliedAnimation,markApplied:i.base.markApplied,noAnimation:i.base.noAnimation,markSelected:i.base.markSelected}},(s=r||(r={})).byAhr=function(e){return t=>Object(c.pipe)(e.get(),A.g.forAll(e=>t.meta.id===e.meta.id))?"full":"background"},s.byRangeType=function(e){return t=>h.b.isFocusView(t)?"focus":h.b.isEnclosingView(t)?"enclosing":m.a.isCapiDone(e)?"background":e.hasNestedHighlights?"underline":"full"};var P,F,D=a("VfH/");a.d(t,"a",(function(){return B})),(F=P||(P={})).create=(e,t,a,n)=>(i,r)=>j.a.Change.getCreateAction({classes:t({state:r.to.visualState,isBulkApplied:m.a.State.isBulkApplied(a("MarkActionFactory.create").state),range:i,isAnimated:!r.to.updateRanges&&Object(v.d)(r),isEnclosed:n}),range:i,order:e({range:i})}),F.update=(e,t,a,n)=>(i,r)=>j.a.Change.getUpdateAction({classes:t({state:r.to.visualState,isBulkApplied:m.a.State.isBulkApplied(a("MarkActionFactory.update").state),range:i,isAnimated:!r.to.updateRanges&&Object(v.d)(r),isEnclosed:n}),range:i,order:e({range:i})}),F.remove=e=>j.a.Change.getRemoveAction({range:e},j.a.Change.RemoveType.partial);const R=300;class B{constructor(e,t,a,n,i,r,s=!1,o,d,g){this._ded=e,this._state=t,this._alertList=a,this._alertsReader=n,this._alertsService=i,this._alertRangeService=r,this._useHighHighlights=s,this._marksRenderer=o,this._alertsFilterService=d,this._getActiveAlert=g,this._marksMap=new Map,this._log=M.Monitoring.Logging.getLogger("MarksViewModelImpl",M.Logging.LogLevel.DEBUG),this._subs=new b.a.Keeper,this._filterKit=p.a.create(A.g.none),this._filteredAlerts=p.a.create(A.g.none),this._alertStateDiff=this._alertList.state.pipe(y.a.pairwise(),y.a.map(([e,t])=>f.a.diff(e,t)),y.a.filter(Object(T.m)(x.a.isEmpty))),this.events=new y.a.Subject,this._getMarkAlert=({id:e})=>Object(c.pipe)(A.g.fromNullable(this._marksMap.get(e)),A.g.filter(v.a.notAnyOf(v.c.disposed)),A.g.chain(e=>Object(c.pipe)(this._alertsReader.getById(e.alert.id),A.g.map(t=>({alert:t,markAlert:e}))))),this._isAlertVisible=e=>Object(c.pipe)(this._filterKit.get(),A.g.filter(t=>t.filter(e)),A.g.isSome),this._getVisibleMarkAlert=({id:e})=>Object(c.pipe)(this._getMarkAlert({id:e}),A.g.filter(e=>this._isAlertVisible(e.alert))),this.getMarkByAlert=e=>Object(c.pipe)(this._getVisibleMarkAlert(e.alert),A.g.chain(t=>t.markAlert.markByIndex(e.highlightIndex))),this._isHighlightInteractable=e=>{const t=Object(c.pipe)(A.g.fromNullable(this._marksMap.get(e.alert.id)),A.g.fold(()=>!1,e=>v.a.isOrWillBe(v.c.highlighted)(e)));return!Object(c.pipe)(w.a.getHighlightRange(e),A.g.fold(()=>!1,h.b.isEnclosingView))||t},this.getAlertByMark=e=>Object(c.pipe)(this._alertsReader.getInteractable(h.a.fromRangeIdToAlertId(e.id)),A.g.filter(this._isAlertVisible),A.g.chain(t=>Object(c.pipe)(O.c.getHighlightIndex(t,e.range()),A.b.map(e=>({alert:E.a.fromModel(t),highlightIndex:e})),A.g.fromEither)),A.g.filter(this._isHighlightInteractable)),this._highlightedAlertId=A.g.none,this.highlightAlertHighlight=e=>Object(c.pipe)(this._getMarkAlert(e),A.g.map(e=>e.markAlert),A.g.filter(v.a.canBeChanged()),A.g.fold(()=>A.b.left(new Error("Cannot highlight alert")),t=>(Object(c.pipe)(this._highlightedAlertId,A.g.tap(t=>{this._log.warn(`Trying to highlight alert ${e.id} but previously highlighted alert ${t} is not unhighlighted`),this._unhighlightAlertHighlight({id:t})})),this._highlightedAlertId=A.g.some(e.id),t.scheduleApply(v.c.highlighted),this._marksRenderer.enqueue([t],D.b.Priority.asap),A.b.right({dispose:()=>this._unhighlightAlertHighlight(e)})))),this._unhighlightAlertHighlight=e=>Object(c.pipe)(e,e=>(A.g.exists(t=>t===e.id)(this._highlightedAlertId)||this._log.warn(`Trying to unhighlight alert ${e.id} but nothing is highlighted`),this._highlightedAlertId=A.g.none,e),this._getMarkAlert,A.g.map(e=>e.markAlert),A.g.filter(e=>v.a.canBeChanged()(e)&&!v.a.isOrWillBe(v.c.hidden)(e)&&!Object(c.pipe)(this._state.view(k.e.getActiveAlert(this._getActiveAlert)).get(),A.g.exists(t=>t.id===e.alert.id))),A.g.map(e=>this._marksRenderer.enqueue([e.scheduleApply(v.c.visible)],D.b.Priority.asap))),this._changeMarks=e=>this._ded.changeMarks(e),this._onTransitionEnd=e=>(t,a)=>{v.c.isApplied(t.to.visualState)&&requestAnimationFrame(()=>{Object(c.pipe)(a.mark,A.g.fold(()=>y.a.of(A.b.left(new Error("Cannot animate mark, as it not exists"))),e=>Object(c.pipe)(y.a.mergeStatic(y.a.mergeStatic(y.a.timer(R).pipe(y.a.mapTo(A.b.right(Object(l.constVoid)()))),e.fromMarkEvent("animationend"),e.fromMarkEvent("animationcancel")).pipe(y.a.first())))),Object(l.flow)(y.a.first(),y.a.map(A.b.fold(e=>(e instanceof u.a.CollapsedMarkError?this._log.debug("Cannot animate applied alert as it is collapsed",e):this._log.error("Cannot animate applied alert",e,{alertId:a.alert.id,currentState:a.state,alertInfo:{title:a.alert.title,patternName:a.alert.patternName}}),y.a.timer(R/2).pipe(y.a.map(l.constVoid))),y.a.of))),t=>{t.subscribe(()=>{v.a.isOrWillBe(v.c.disposed)(a)?this._log.info("Alert disposed before apply animation finished"):(this.events.next({type:O.b.Type.AppliedAlertAnimationFinished,alert:e}),m.a.isBulkApplied(e)||this._handleRemovedAlerts([e]))})})})},this._subs.push(this._listenMarksState(),this._listenFilterChange(),this._listenFilteredAlerts()),Object(T.r)("marksManager",this)}dispose(){this._subs.dispose()}flush(){const e=(new Date).getTime();return this._alertList.flushAlerts(),this._marksRenderer.flush().finally(()=>{const t=(new Date).getTime()-e;this._log.info("Flush performed",{duration:t})})}focusAlertHighlight(e){return Object(c.pipe)(this._getMarkAlert(e.alert),A.g.fold(()=>A.b.left(new Error("Cannot focus given alert")),t=>(v.a.canBeChanged()(t.markAlert)&&(m.a.isSuperAlert(t.alert)&&t.markAlert.scheduleForceUpdate(),t.markAlert.scheduleApply(v.c.highlighted),this._marksRenderer.enqueue([t.markAlert],D.b.Priority.asap)),A.b.right({dispose:()=>this._unfocusAlertHighlight(e)}))))}_unfocusAlertHighlight(e){Object(c.pipe)(e.alert,A.g.some,A.g.filter(e=>!Object(c.pipe)(this._highlightedAlertId,A.g.exists(t=>t===e.id))),A.g.chain(this._getMarkAlert),A.g.filter(e=>!v.a.isOrWillBe(v.c.hidden)(e.markAlert)&&v.a.canBeChanged()(e.markAlert)),A.g.map(e=>{v.a.isOrWillBe(v.c.success)(e.markAlert)?(this._handleRemovedAlerts([e.alert]),this._marksRenderer.enqueue([e.markAlert],D.b.Priority.asap)):this._marksRenderer.enqueue([e.markAlert.scheduleApply(v.c.visible)],D.b.Priority.asap)}))}moveCursorToHighlight(e,t){return Object(c.pipe)(this._getMarkAlert(e.alert),A.g.chain(t=>t.markAlert.markByIndex(e.highlightIndex)),A.g.chain(e=>A.g.fromEither(e.range())),A.g.fold(()=>A.b.left(new Error("Cannot find mark for given range")),e=>{const{index:a,length:n}=this._ded.getCursor();if(0===n&&(a<e.start||a>e.end)){const a=Math.min(e[t],this._ded.getLastPossibleCursorPosition());return Object(c.pipe)(this._ded.setCursor(a,0),A.b.orElse(e=>(this._log.error(`Failed to set cursor to ${a}. ${e}`),A.b.left(e))))}return A.b.right(void 0)}))}ensureAlertHighlightInViewport(e,t,a){return Object(c.pipe)(this._getVisibleMarkAlert(e.alert),A.g.map(e=>e.markAlert),A.g.chain(t=>t.markByIndex(e.highlightIndex)),A.g.fold(()=>(this._log.warn("Cannot ensureAlertHighlightInViewport, because mark is None"),y.a.EMPTY),e=>this._ded.scrollToMark(e,{animate:a,paddingTop:t})))}_listenFilterChange(){return this._state.pipe(y.a.distinctUntilChanged((e,t)=>!(e.currentLens.id!==t.currentLens.id||k.e.isWithPriorityList(e)&&k.e.isWithPriorityList(t)&&_.a.WithPriority.isNonPriorityListOpened(e.currentLens)!==_.a.WithPriority.isNonPriorityListOpened(t.currentLens))),y.a.map(e=>A.g.some({filter:Object(T.p)(this._alertsFilterService.alertVisibleInText(e.currentLens.id,_.a.WithPriority.nonPriorityAlertsVisible(e)),m.a.isBulkApplied),lensId:e.currentLens.id}))).subscribe(C.b.toAtom(this._filterKit))}getFirstMark(){return this._alertList.state.pipe(y.a.map(f.a.find(e=>m.a.isCritical(e.alert))),y.b.compactMap(e=>y.a.of(Object(c.pipe)(this._getMarkAlert(e.alert),A.g.chain(e=>e.markAlert.mark)))))}_listenFilteredAlerts(){return this._filterKit.pipe(y.a.withLatestFrom(this._alertList.state),y.a.map(([e,t])=>{const a=Object(c.pipe)(e,A.g.map(e=>e.filter));return Object(c.pipe)(t,f.a.reduce({},(e,t)=>{return Object(c.pipe)(a,A.g.map(e=>e(t.alert)),A.g.getOrElse(l.constTrue))&&m.a.isRegistered(t.alert)&&(e[t.alert.id]=t.alert),e}),e=>A.g.some({filter:a,alerts:e}))})).subscribe(C.b.toAtom(this._filteredAlerts))}_schedule(e,t){Object(T.n)(e)&&(this._log.trace(`Schedule alerts ${e.map(e=>e.alert.id)} to ${t}`),this._marksRenderer.enqueue(e.map(e=>e.scheduleApply(t)),D.b.Priority.low))}_handleRemovedAlerts(e){if(Object(T.n)(e)){const t=e.map(({id:e})=>{const t=this._marksMap.get(e);return this._marksMap.delete(e),t});this._schedule(t,v.c.disposed)}}_handleUpdatedAlerts(e){if(!e.length)return;const t=Object(c.pipe)(this._filteredAlerts.get(),A.g.chain(e=>e.filter)),{activeToHandle:a,removedToHandle:n}=e.reduce((e,a)=>(this._alertsFilterService.alertCanBeDisplayed(a)||m.a.isBulkApplied(a)?d.f.of(this._marksMap.get(a.id)).fold(()=>{Object(c.pipe)(t,A.g.map(e=>e(a)),A.g.getOrElse(()=>!0))&&e.activeToHandle.push(a)},e=>{e.scheduleUpdate(),v.a.isOrWillBe(v.c.success)(e)?e.scheduleApply(v.c.highlighted):this._marksRenderer.enqueue([e],D.b.Priority.asap)}):d.f.of(this._marksMap.get(a.id)).forEach(t=>{a.allowUpdate&&m.a.isCapiDone(a)&&m.a.isRated(a)&&v.a.isOrWillBe(v.c.highlighted)(t)?(t.scheduleUpdate(),t.scheduleApply(v.c.success),this._marksRenderer.enqueue([t],D.b.Priority.asap)):e.removedToHandle.push(a)}),e),{activeToHandle:[],removedToHandle:[]});this._handleVisibleAlerts(a),this._handleRemovedAlerts(n)}_handleVisibleAlerts(e){if(o.isEmpty(e))return;const t=e.map(e=>{if(this._marksMap.has(e.id))return this._marksMap.get(e.id);{const t=function({getMarkType:e,theme:t}){return({state:a,range:n,isAnimated:i,isBulkApplied:r,isEnclosed:s})=>{const o=[t.base,t.markHeight];switch(a){case v.c.faded:i&&o.push(t.markAnimated);break;case v.c.visible:{const a=e(n());switch(a){case"focus":case"enclosing":o.push(t.markHidden);break;case"full":case"background":case"underline":o.push(t.markVisible),i&&o.push(t.markAnimated),r&&o.push(t.markBulkApplied);break;default:Object(L.d)(a)}break}case v.c.highlighted:{const a=e(n());switch(a){case"full":case"focus":o.push(t.markSelected,t.markSelectedFocused,t.markVisible),r&&o.push(t.markBulkApplied);break;case"enclosing":case"background":o.push(t.markSelected,t.markVisible);break;case"underline":o.push(t.markSelectedFocused,t.markVisible),s&&o.push(t.markSelected);break;default:Object(L.d)(a)}i||o.push(t.noAnimation);break}case v.c.hidden:o.push(t.markHidden);break;case v.c.success:o.push("background"===e(n())?t.markSuccess:t.markHidden);break;case v.c.applied:o.push(r?t.markBulkAppliedAnimation:t.markApplied);break;case v.c.initial:case v.c.disposed:break;default:Object(L.d)(a)}return o}}({getMarkType:m.a.isSuperAlert(e)?r.byAhr(this._state.view(k.e.getActiveItem(this._getActiveAlert)).view(Object(l.flow)(A.g.filter(t=>t.activeAlert.id===e.id),A.g.chain(t=>Object(c.pipe)(A.g.fromNullable(e.getHighlightRanges()[t.activeHighlightIndex]),A.g.tapLeft(()=>{this._log.error(`Alert highlight ranges of length ${e.getHighlightRanges().length} do not contain a range at the given AHI: ${t.activeHighlightIndex}`)})))))):r.byRangeType(e),theme:n.fromAlert(e,this._useHighHighlights)}),a=t=>Object(c.pipe)(this._alertsReader.getById(e.id),A.g.alt(()=>(t&&this._log.warn("Could not find alert for provided MarkAlert",{alert:e,source:t}),A.g.some(e))),A.g.map(E.a.fromModel),A.g.unsafeGet),i=({range:t})=>{const a=g.a.getSortOrder(e.lensType);return h.b.isEnclosingView(t())?a+1:a},s=m.a.hasEnclosingHighlight(e),o=new S.a(a,this._alertsService,this._alertRangeService,this._changeMarks,P.create(i,t,a,s),P.update(i,t,a,s),P.remove,this._onTransitionEnd(e));return this._marksMap.set(e.id,o),o}}).filter(e=>v.a.isOneOf(v.c.initial)(e)||v.a.isOrWillBe(v.c.hidden)(e)||v.a.isOrWillBe(v.c.visible)(e)||v.a.isOrWillBe(v.c.faded)(e));this._schedule(t,v.c.visible)}_handleAcceptedAlerts(e){return Object(c.pipe)(e,o.map(this._getMarkAlert),o.compact,e=>{e.length&&(m.a.isBulkApplied(e[0].alert)||this.moveCursorToHighlight({alert:E.a.fromModel(e[0].alert),highlightIndex:0},"end"),this._marksRenderer.enqueue(e.map(e=>e.markAlert.scheduleApply(v.c.applied)),D.b.Priority.immediately))})}_listenMarksState(){const e=e=>Object.assign({activeAlerts:[],updatedAlerts:[],removedAlerts:[],acceptedAlerts:[],hiddenMarkAlerts:[]},e);return y.a.mergeStatic(this._filteredAlerts.pipe(y.b.compactMap(({alerts:t})=>y.a.of(e({hiddenMarkAlerts:Array.from(this._marksMap.values()).filter(e=>void 0===t[e.alert.id]&&v.a.notAnyOf(v.c.applied,v.c.success)(e)&&!m.a.State.isBulkApplied(e.alert.state)),activeAlerts:I.e.toArray(t)})))),this._alertStateDiff.pipe(y.a.withLatestFrom(this._filteredAlerts),y.a.map(([t,a])=>Object(c.pipe)(t,x.a.reduce(e({}),(e,t)=>(this._marksMap.has(t.alert.id)&&e.removedAlerts.push(t.alert),e),(e,t)=>(m.a.isAccepted(t.alert)?e.acceptedAlerts.push(t.alert):e.updatedAlerts.push(t.alert),e),(e,t)=>(Object(c.pipe)(a,A.g.chain(e=>e.filter),A.g.fold(()=>e.activeAlerts.push(t.alert),a=>a(t.alert)&&e.activeAlerts.push(t.alert))),e)))))).pipe(y.a.tap(({activeAlerts:e,removedAlerts:t,updatedAlerts:a,acceptedAlerts:n,hiddenMarkAlerts:i})=>(this._handleRemovedAlerts(t),this._handleUpdatedAlerts(a),this._handleVisibleAlerts(e),this._handleAcceptedAlerts(n),this._schedule(i,v.c.hidden),()=>this._marksRenderer.dispose())),y.a.catchError(this._log.handler("_listenMarksState exception").error),y.a.retry()).subscribe()}}(B||(B={})).Mock=class{constructor(){this.events=new y.a.Subject,this.focusAlertHighlight=()=>A.b.left(new Error("Method not implemented.")),this.highlightAlertHighlight=()=>A.b.left(new Error("Method not implemented.")),this.moveCursorToHighlight=T.l}getFirstMark(){throw new Error("Method not implemented.")}dispose(){throw new Error("Method not implemented.")}flush(){return Promise.resolve()}ensureAlertHighlightInViewport(){throw new Error("Method not implemented.")}getMarkByAlert(e){throw new Error("Method not implemented.")}getAlertByMark(e){throw new Error("Method not implemented.")}}},"5o4I":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("m6JR"),r=a("lrqh");!function(e){e.eq=Object(i.getStructEq)({alert:Object(i.contramap)(e=>e.id)(i.eqStrict),highlightIndex:i.eqStrict}),e.getEq=()=>e.eq,e.getHighlightRange=e=>r.a.lookup(e.highlightIndex)(e.alert.getHighlightRanges())}(n||(n={}))},"5z3N":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return E})),a.d(t,"d",(function(){return w})),a.d(t,"a",(function(){return L}));var n,i=a("ERkP"),r=a("OA+g"),s=a("I7vG"),o=a("5E2i"),l=a("9NHN"),c=a("lrqh"),d=a("rk+4"),p=a("GUi3"),u=a("dE97"),m=a("UEGg"),h=a("XxrX"),g=a("nnns"),f=a("8P+J"),b=a("tZ26"),y=a("SN1b"),C=a("BugA"),v=a("3bJT"),S=a("es5d");!function(e){e.none="none",e.persistent="persistent",e.new="new"}(n||(n={}));const E=({className:e,vox:t,isMinimalCard:a})=>{const{vox:{styleGuide:n}}=i.useContext(d.a.Context);return i.createElement("div",Object.assign({},Object(l.c)(e,S.a.voxTitle,a?S.a.minimalTitle:void 0)),i.createElement("span",null,t.companyName," ",n))},w=({logoUrl:e,className:t})=>i.createElement("img",Object.assign({src:e},Object(l.c)(t,S.a.voxLogo))),k=({title:e,layoutDensity:t})=>i.createElement(C.Base,{className:Object(s.pipe)(t,h.a.Density.matchOrDefault(h.a.Density.minimal)(()=>S.a.minimalTitle,()=>S.a.toneTitle))},i.createElement(f.a,{emojiClassName:S.a.toneLogo},e));function _(e){return p.a.outcomeTypeMatch(e.lensType)({correctness:v.a.dotCorrectness,clarity:v.a.dotClarity,premium:v.a.dotAdvanced,engagement:v.a.dotEngagement,delivery:v.a.dotDelivery,vox:v.a.dotVox})}const O=({companyLogoUrl:e})=>{const t=i.useContext(d.a.Context).card.sentenceLevelBrandTones;return i.createElement(C.Small,{className:S.a.sentenceLevelBrandTonesLabel},e&&i.createElement("img",{src:e,className:S.a.toneLogo}),i.createElement("span",{className:S.a.sentenceLevelBrandTonesOffBrand},t.offBrandCardTitle)," ",t.detected)};function A(e,t,a,n,d){const{extraProperties:p}=e;return m.a.isTakeaway(e)?function(e,t,a){return{style:"",description:i.createElement("div",{className:Object(s.pipe)(t,h.a.Density.matchOrDefault(h.a.Density.minimal)(()=>S.a.minimalTitle,()=>void 0))},(c.g.contains(u.q.correctlyDetected)(e.takeawayFeedback)||c.g.contains(u.q.correctlyDetectedAndDone)(e.takeawayFeedback))&&e.takeawayIsLikelyToBeRead?i.createElement(b.d.ValidationOk,Object.assign({width:16},Object(l.c)(S.a.cardLogo,S.a.takeawayIcon))):i.createElement(b.d.Megaphone,Object.assign({width:16},Object(l.c)(S.a.cardLogo,S.a.takeawayIcon))),t===h.a.Density.minimal?a:e.lensName)}}(e,a,d):m.a.isSmartPhrases(e)?function(e){return{style:"",description:i.createElement("div",null,i.createElement(b.d.SmartPhrases.HeaderCirclePlus,Object.assign({},Object(l.c)(S.a.cardLogo))),i.createElement(C.Small,{className:S.a.smartPhrasesLabel},e.miniCardTitle))}}(e):m.a.isSentenceLevelBrandTones(e)?function(e){const t=Object(s.pipe)(e.extraProperties.sentenceLevelBrandTones,c.g.chain(e=>e.companyLogoUrl),c.g.fold(r.constNull,o.a));return{style:"",description:i.createElement(O,{companyLogoUrl:t})}}(e):m.a.isShortenIt(e)?T(e,a,d):m.a.isToneAI(e)?T(e,a,d):c.g.isSome(p.tone)?function(e,t){return{style:_(e),description:i.createElement(k,{title:e.title,layoutDensity:t})}}(e,a):t?c.g.isSome(p.vox)?function(e,t){return{style:v.a.dotVox,description:i.createElement(i.Fragment,null,Object(s.pipe)(e.logoUrl,c.g.fold(()=>null,e=>i.createElement(w,{logoUrl:e,className:S.a.cardLogo}))),i.createElement(E,{vox:e,isMinimalCard:t===h.a.Density.minimal}))}}(p.vox.value,a):m.a.isFree(e)?T(e,a,d):function(e,t,a){return{style:_(e),description:i.createElement("div",Object.assign({},Object(l.c)(S.a.dualItemLabel,Object(s.pipe)(a,h.a.Density.matchOrDefault(h.a.Density.minimal)(()=>S.a.minimalTitle,()=>void 0)))),i.createElement("span",{className:S.a.dualItemLabel},e.lensName,i.createElement(M,{highlightStyle:t})))}}(e,n,a):null}function T(e,t,a){return Object(s.pipe)(t,h.a.Density.matchOrDefault(h.a.Density.minimal)(()=>(function(e,t){return{style:_(e),description:t||i.createElement(C.Base,{className:S.a.minimalTitle},e.miniCardTitle)}})(e,a),()=>(function(e){return{style:_(e),description:e.lensName}})(e)))}const x=({label:e})=>i.createElement("span",{className:S.a.fluencyLabel},e,i.createElement(g.b,{iconWidth:10,buttonClass:S.a.fluencyInfo,iconClass:S.a.fluencyInfo,title:i.useContext(d.a.Context).card.fluency.tooltip})),I=({style:e,description:t})=>i.createElement("span",Object.assign({},Object(l.c)(S.a.lens,S.a.dot,e)),t),M=({highlightStyle:e})=>{const t=i.useContext(d.a.Context);if(e===n.none)return null;const a=e===n.new?i.createElement("div",{className:S.a.newPremiumLabel},t.premiumAlertLabel.new,i.createElement(b.d.Paid,{className:S.a.newPremiumLabelIcon,width:12})):i.createElement(b.d.Paid,{className:S.a.premiumPersistentTooltipIcon,width:10});return i.createElement(y.a,{align:"topCenter",title:t.premiumAlertLabel.tooltip.includedWithPaid},a)},j=({style:e,description:t,extraStyle:a})=>i.createElement("span",Object.assign({},Object(l.c)(a,S.a.lensMinimal,S.a.lens,S.a.dot,e)),t),L=e=>Object(s.pipe)(A(e.activeAlert,e.showCardLabel,e.layoutDensity,e.premiumAlertLabelHighlight,e.children),c.g.fromNullable,c.g.map(t=>i.createElement("div",{className:e.className},Object(s.pipe)(e.activeAlert.extraProperties.fluencyMessage,c.g.fold(()=>Object(s.pipe)(e.layoutDensity,h.a.Density.matchOrDefault(h.a.Density.minimal)(()=>i.createElement(j,Object.assign({},t)),()=>i.createElement(I,Object.assign({},t)))),a=>Object(s.pipe)(e.layoutDensity,h.a.Density.match(i.createElement(i.Fragment,null,i.createElement(I,Object.assign({},t)),i.createElement(x,{label:a})),i.createElement(I,Object.assign({},t)),i.createElement(j,{style:t.style,extraStyle:S.a.minimalTitle,description:e.activeAlert.miniCardTitle}))))))),c.g.fold(()=>i.createElement("div",{"data-purpose":"label-placeholder"}),t=>i.createElement(N,null,t,e.badge))),N=({children:e})=>i.createElement("div",{className:S.a.labelContainer},e)},"6Gma":function(e,t,a){"use strict";a.d(t,"a",(function(){return S})),a.d(t,"b",(function(){return E}));var n=a("ERkP"),i=a("I7vG"),r=a("vOOZ"),s=a("LNSM"),o=a("9NHN"),l=a("rk+4"),c=a("tZ26"),d=a("NaPV"),p=a("zNQL"),u=a("mvgk"),m=a("BugA"),h=a("QshB"),g=a("lRnN"),f=a("9/oM"),b=a("lrqh"),y=a("XaD9"),C=a("/by5"),v=a("xm6m");const S=({documentModel:e,modalManager:t,navigationViewModel:a})=>{const i=n.useContext(l.a.Context),{gnarSpec:s,pageId:o}=n.useContext(y.a.Context),c=t.state.view(b.g.exists(e=>e.instance.type===d.d.SetGoals)),u=t.state.view(b.g.exists(e=>e.instance.type===d.d.Performance));return n.createElement(r.a.header,{className:v.headerWrapper},n.createElement(p.a,{small:!0}),n.createElement(f.b,{alignment:"bottom",eventType:"onclick",stepId:g.a.StepId.Step8,title:"Document statistics",message:"See how your writing stacks up against other Grammarly users.",dotPosition:{kind:"findFirstButton",buttonOrder:0,position:f.a.center},themes:{containerWrapperClassName:v.performanceOnboardingContainer}},n.createElement(E,{checkingState:e.checkingState,score:e.score,isActive:u,onClick:()=>{a.events.next({type:"performance"}),s.documentStatisticsButtonClick(o)}})),n.createElement(p.a,{small:!0}),n.createElement(f.b,{alignment:"bottom",eventType:"onclick",stepId:g.a.StepId.Step1,title:"Set Goals",message:"Tell Grammarly about your writing goals to receive more precise suggestions.",dotPosition:{kind:"findFirstButton",buttonOrder:0,position:f.a.center},themes:{containerWrapperClassName:v.goalsOnboardingContainer,notificationClassName:v.goalsNotification}},n.createElement(C.a,{name:"set-goals",isActive:c,isDisabled:c,title:i.goals.button.title,className:v.headerBtn,onClick:()=>{a.events.next({type:"setGoals"}),s.setGoalsButtonClick(o)}},n.createElement(m.Small,{className:v.description},e.contextCompleteness.view(e=>i.goals.button.subtitle(e,h.a.TOTAL_GOALS,h.a.MIN_GOALS))))),n.createElement(p.a,{small:!0}),n.createElement("div",{className:v.delimiter}))},E=({checkingState:e,score:t,isActive:a,onClick:c})=>{const d=n.useContext(l.a.Context);return n.createElement(r.a.Fragment,null,s.a.combine(e,t,(e,t)=>{const r="idle"===e,s=r?Object(i.pipe)(t,b.g.filter(({rank:e})=>100===e),b.g.fold(()=>d.performance.button.score,()=>d.performance.button.score100)):null;return n.createElement(C.a,{name:"performance",isActive:a,title:s,isDisabled:a,className:v.performanceBtn,onClick:c},n.createElement(w,{checkingState:e,score:t}),n.createElement(m.Small,Object.assign({},Object(o.c)(r&&"checking-complete",v.description)),r?Object(i.pipe)(t,b.g.fold(()=>d.performance.button.statuses.unavailable,()=>d.performance.button.statuses.available)):d.performance.button.statuses.calculating))}))},w=({checkingState:e,score:t})=>{const a="idle"===e;return n.createElement(n.Fragment,null,n.createElement(u.a,{variation:"green",size:20,className:a?v.spinnerFadeOut:v.spinnerFadeIn,isIdle:a,strokeWidth:5}),Object(i.pipe)(t,b.g.map(({rank:e})=>100===e?n.createElement(c.d.CheckmarkAnimated,{width:20,className:a?v.checkmark:v.checkmarkFadeOut}):n.createElement(m.Score,{className:a?v.performanceScoreFadeIn:v.performanceScoreFadeOut},e)),b.g.toNullable))}},"6qID":function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return r}));var n,i,r,s=a("7qGb"),o=a("OA+g"),l=a("LNSM"),c=a("zR/0"),d=a("lrqh"),p=a("D9EC"),u=a("6fbX"),m=a("PrA7");!function(e){let t,a;!function(e){e.Default="default",e.TacticSelected="tacticSelected"}(t=e.Type||(e.Type={})),function(e){e.Idle="Idle",e.Loading="Loading",e.Hidden="Hidden"}(a=e.GeneratePhrasesButtonState||(e.GeneratePhrasesButtonState={})),e.isDefault=function(e){return e.type===t.Default},e.isPhrases=function(e){return e.type===t.TacticSelected}}(n||(n={})),function(e){e.create=function(e,s,p,m,g,f){const b=l.a.create(t(e)),y=new c.a.Subject,C=c.a.mergeStatic(Object(o.pipe)(y,c.a.tap(Object(o.flow)(r.match({onUpdatePhrases:Object(o.constant)(e=>n.isPhrases(e)?Object.assign(Object.assign({},e),{generatePhrasesButtonState:n.GeneratePhrasesButtonState.Loading}):e),onCollapse:h(p),onInsertPhrase:i(e=>{s(e),f.gnarSpec.draftAIBetaSmartPhrasesButtonClicked(e.item.name,e.intensity.name,f.pageId,e.content,f.pageSessionId)}),onDismiss:u(()=>{m(),C.unsubscribe()}),onSelectTactic:a}),b.modify.bind(b)))),Object(o.pipe)(b,c.a.switchMap(e=>{if(n.isPhrases(e)&&e.generatePhrasesButtonState===n.GeneratePhrasesButtonState.Loading){const t=d.f.last(e.phrases);return Object(o.pipe)(g({tacticId:e.id,lastPhraseId:t.id}),d.l.map(t=>({prevId:e.id,phrases:t})))()}return c.a.EMPTY}),c.a.filter(d.b.isRight),c.a.map(d.b.unsafeGet),c.a.delay(1e3),c.a.tap(e=>b.modify(t=>n.isPhrases(t)&&e.prevId===t.id?Object.assign(Object.assign({},t),{phrases:e.phrases,generatePhrasesButtonState:n.GeneratePhrasesButtonState.Idle}):t)))).subscribe();return{state:b,actions:y}};const t=e=>Object.assign({type:n.Type.Default},e),a=e=>t=>{const a=t.tactics.find(t=>t.id===e.tacticId);return a?Object.assign(Object.assign(Object.assign({},t),a),{type:n.Type.TacticSelected,generatePhrasesButtonState:n.GeneratePhrasesButtonState.Idle}):(g("DraftAIEditorViewModel").error("Trying to select a missing section",{tactics:t.tactics.map(e=>e.id),selected:e.tacticId}),t)},i=e=>t=>a=>{if(n.isPhrases(a)){const n=a.phrases.find(e=>e.id===t.phraseId);n?e(n):g("DraftAIEditorViewModel").error("Trying to insert a missing phrase")}else g("DraftAIEditorViewModel").error("Cannot send phrase from Sections state");return a},u=s.map(Object(o.constant)(o.identity)),h=s.map(Object(o.constant)(t)),g=Object(p.k)(m.Monitoring.Logging.getLogger)}(i||(i={})),function(e){let t;!function(e){e[e.UpdatePhrases=0]="UpdatePhrases",e[e.Collapse=1]="Collapse",e[e.Dismiss=2]="Dismiss",e[e.SelectTactic=3]="SelectTactic",e[e.InsertPhrase=4]="InsertPhrase",e[e.SelectMiniCard=5]="SelectMiniCard"}(t=e.Type||(e.Type={})),e.match=e=>a=>{switch(a.type){case t.UpdatePhrases:return e.onUpdatePhrases(a);case t.Collapse:return e.onCollapse(a);case t.Dismiss:return e.onDismiss(a);case t.InsertPhrase:return e.onInsertPhrase(a);case t.SelectTactic:return e.onSelectTactic(a);default:return Object(u.d)(a)}}}(r||(r={}))},"6r/7":function(e,t,a){e.exports=a.p+"files/c85c7276ae2b89bc5aadf1b1cb256291/inter-mediumitalic.woff2"},"7FJK":function(e,t,a){"use strict";var n=a("1aGC"),i=a("mbuk"),r=a("6gXa"),s=a("hoSD"),o=a("PrA7"),l=a("I7vG"),c=a("lrqh");const d=n.import("parchment"),p=n.import("blots/inline"),u=(e,t)=>e>t?1:e<t?-1:0;class m extends d.Inline{static getOrders(e,t){return[p.order.indexOf(e),t&&"object"==typeof t&&"number"==typeof t.order?t.order:-1]}_compareWith(e,t){if(!t)return 0;const a=this.formats()[this.statics.blotName];if(!a)return 0;const n=m.getOrders(this.statics.blotName,a),i=m.getOrders(e,t);return n[0]===i[0]?n[1]===i[1]?u(this.statics.blotName,e):n[1]-i[1]:n[0]-i[0]}formatAt(e,t,a,n){if(this._compareWith(a,n)<0&&d.query(a,d.Scope.BLOT)){const i=this.isolate(e,t);n&&i.wrap(a,n)}else super.formatAt(e,t,a,n)}optimize(e){if(super.optimize(e),this.parent instanceof d.Inline&&this._compareWith(this.parent.statics.blotName,this.parent.formats()[this.parent.statics.blotName])>0){const e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}}m.allowedChildren=[m,d.Inline,d.Embed,d.Text];const h=e=>Array.from(e.attributes).map(e=>e.value),g=e=>e.parent?g(e.parent):e;class f extends m{constructor(e){super(e),this._unwrapMe=this.allowUnwrap(),this._unwrapMe&&f._logger.warn("Created self-unwrapped blot",h(this.domNode))}static get _logger(){return void 0===f.__logger&&(f.__logger=o.Monitoring.Logging.getLogger("DEd.custom_inline_blot")),f.__logger}allowUnwrap(){return this.domNode.childNodes.length>0&&Object.getPrototypeOf(this)===f.prototype&&"SPAN"===this.domNode.tagName}optimize(e){super.optimize(e),this._tryUnwrap("optimize")}_unwrap(e,t){return c.b.tryCatchError(()=>{f._logger.info("unwrap happened",{source:e,name:t,position:{index:this.length(),length:this.offset(g(this))}});const a=window.getSelection();if(a.isCollapsed&&a.anchorNode&&(a.anchorNode===this.domNode||a.anchorNode.parentNode===this.domNode&&1===this.domNode.childNodes.length)){const e=this.offset(this.parent)+this.length();this.unwrap(),requestAnimationFrame(()=>Object(l.pipe)(f._restoreSelectionWithinBlot(this.parent,e),c.b.mapLeft(e=>{f._logger.error("Self-unwrapped blot: cannot preserve selection",e,h(this.domNode))})))}else a.anchorNode===this.domNode||a.focusNode===this.domNode?(f._logger.error("Self-unwrapped blot: unknown case",h(this.domNode)),this.unwrap()):this.unwrap()})}formatAt(e,t,a,n){super.formatAt(e,t,a,n),this._tryUnwrap("formatAt")}update(e,t){super.update(e,t),this._tryUnwrap("update")}_tryUnwrap(e){if(this._unwrapMe){if(0===this.children.length)return;Object(l.pipe)(this._unwrap(`tryUnwrap: ${e}`,this.statics.blotName),c.b.mapLeft(t=>{f._logger.warn(`Cannot unwrap on "${e}"`,t)})),this._unwrapMe=!1}}}f.__logger=void 0,f._restoreSelectionWithinBlot=(e,t)=>c.b.tryCatchError(()=>{Object(l.pipe)(c.g.fromNullable(window.getSelection()),c.g.map(a=>{let n=0,i=e.children.head;for(;i&&n+i.length()<t;)n+=i.length(),i=i.next;const r=t-n;a.collapse(i.domNode,r)}))});(()=>{const e=n.import("blots/inline"),t=n.import("blots/block");e.allowedChildren.push(f),t.allowedChildren.push(f),n.register("blots/inline",f,!0)})(),a.d(t,"b",(function(){return C})),a.d(t,"a",(function(){return v})),a.d(t,"d",(function(){return E})),a.d(t,"e",(function(){return A})),a.d(t,"c",(function(){return T}));const b=n.import("parchment"),y=r.a.style({animation:"none",transition:"none"}),C="mark_underline";class v extends f{constructor(){super(...arguments),this._log=o.Monitoring.Logging.getLogger("underline")}get markId(){return this.statics.markId}get dataOrder(){return this.domNode.__dataOrder||0}static create(e){const t=super.create(e),a=e?e.id:"";return t.setAttribute("data-mark-id",a),t.__dataId=a,t.__lastValue=e,e&&(t.__dataOrder=e.order||0,void 0!==e.order&&t.setAttribute("data-order",`${e.order}`),t.className=s.c.classes(this.className,...e.classes||[])),t}wrap(e,t){return x(this),super.wrap(e,t)}clone(){x(this);const e=super.clone(),t=e.domNode;return t.__dataOrder=this.domNode.__dataOrder,t.__dataId=this.domNode.__dataId,t.__lastValue=this.domNode.__lastValue,e}formatAt(e,t,a,n){if(a===this.statics.blotName)if(null==n);else if(!1===n)super.formatAt(e,t,a,n);else switch(n.action){case i.a.Change.ActionType.create:this._log.warn("Create actions user for already created mark",n);break;case i.a.Change.ActionType.update:this.domNode.className=s.c.classes(this.statics.className,y,...n.classes||[]),0!==e||this.length(),super.formatAt(e,t,a,n);break;default:this._log.warn("Got an unknown action")}else super.formatAt(e,t,a,n)}static formats(e){return e.__lastValue}_tryMergeWithNextIfEq(){const e=this.next;return!!(e instanceof v&&e.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const a in e){if(-1!==a.indexOf(C)){const n=e[a],i=t[a];if("object"==typeof n&&"object"==typeof i||n===i)continue;return!1}if(e[a]!==t[a])return!1}return!0}(this.formats(),e.formats()))&&(e.moveChildren(this),e.remove(),!0)}optimize(e){super.optimize(e),_.has(this.domNode.__dataId)?this._tryMergeWithNextIfEq():this.domNode.hasAttribute("data-unwrapped")?this._log.debug("Oops. change in already removed mark",{id:this.markId}):(this._log.warn("Oops. change in already removed mark",{id:this.markId}),(this.domNode.hasAttribute("class")||this.domNode.hasAttribute("style"))&&(this.domNode.setAttribute("data-unwrapped","true"),this.domNode.removeAttribute("class"),this.domNode.removeAttribute("style")))}}v.tagName="SPAN";const S=e=>!!e&&Object.getPrototypeOf(e)===v,E=e=>`${C}_${e}`,w=e=>`formats/${E(e)}`;class k extends f{allowUnwrap(){return Object.getPrototypeOf(this)===k.prototype&&"SPAN"===this.domNode.tagName}get logName(){return"fake_underline_blot"}}const _=new Set;function O(e){n.register(`formats/${e.blotName}`,e,!0)}function A(e){const t=n.imports[w(e)];if(S(t))return t;{_.add(e);const t=function(e){class t extends v{}return t.className=`mark_underline_${e}`,t.blotName=E(e),t.markId=e,t}(e);return O(t),t}}function T(e){n.imports[w(e)]&&O(function(e){return k.blotName=E(e),k.className=`mark_underline_${e}`,k}(e)),_.delete(e)}function x(e){(function(e){return e instanceof v})(e)&&!e.domNode.classList.contains(y)&&e.domNode.classList.add(y),function(e){return e instanceof b.Container}(e)&&e.children.forEach(x)}},"86p/":function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a("7nmT"),i=a("7qGb"),r=a("OA+g"),s=a("I7vG"),o=a("lrqh"),l=a("6fbX"),c=a("D9EC"),d=a("PrA7"),p=a("GUi3"),u=a("zR/0"),m=a("gy42"),h=a("UEGg"),g=a("TC4P"),f=a("BeBM"),b=a("s+3N");class y{constructor(e,t,a,l,c,g,y){this._state=e,this._stateProvider=t,this._alertsReader=a,this._alertsService=l,this._stateSideEffects=c,this._getActiveAlert=g,this._stateTransformer=y,this.focusLens=(e,t,a={toFocus:f.d.defaultOptions.focusBehavior})=>{this._log.debug("focusLens "+e),this._switchLensActions.next({lensId:e,alertSource:t,options:a})},this.focusAlert=(e,t,a)=>{this._switchAlertActions.next({alertHighlight:e,alertSource:t,options:{order:a}})},this._log=d.Monitoring.Logging.getLogger("FocusedLensManagerImpl"),this._ts=d.Monitoring.TimeSeries.root.getMetric("lens_state.manager"),this._switchLensActions=new u.a.Subject,this._switchAlertActions=new u.a.Subject,this._addMetadata=e=>t=>t.pipe(u.a.map(t=>({source:t,metadata:e}))),this._focusLensEffect=({lensId:e,alertSource:t,options:{toFocus:a=f.d.defaultOptions.focusBehavior,order:n}})=>{if(this._log.debug("_focusLensEffect ",{alertSource:t,lensId:e}),p.a.isClosedId(e))return Object(s.pipe)(u.a.of(f.e.Effect.Applicator.Source.override(Object(b.b)())),this._addMetadata({sourceId:"LSM.focusLensEffect"}));if(p.a.isDraftAIId(e))return Object(s.pipe)(u.a.of(f.e.Effect.Applicator.Source.override(Object(b.c)())),this._addMetadata({sourceId:"LSM.focusLensEffect"}));const i=this._state.get(),r=i.patch({switchOrder:n||i.switchOrder,alertSource:t});return Object(s.pipe)(this._stateProvider.getLensEventsByLensId(r,e,{focusBehavior:a}),this._addMetadata({sourceId:"LSM.focusLensEffect"}))},this._focusAlertEffect=({alertHighlight:e,alertSource:t,options:a})=>{this._log.isEnabled(d.Logging.LogLevel.TRACE)&&this._log.trace(`focusAlert(${e.alert})`);const n=this._state.get(),i=n.patch({switchOrder:a.order||n.switchOrder,alertSource:t});return Object(s.pipe)(this._stateProvider.getLensEventsByAlert(i,function(e,t,a){if(e===p.a.SpecialId.Priority||e===p.a.SpecialId.PredictionTakeaways||e===p.a.SpecialId.PredictionEmogenie||e===p.a.SpecialId.RealTimeProofit)return e;if(void 0!==a)return a;if(e===p.a.SpecialId.Closed||e===p.a.SpecialId.AllAlerts)return p.a.SpecialId.AllAlerts;return t}(n.currentLens.id,e.alert.lensId,a.lensId),e),this._addMetadata({sourceId:"LSM.focusAlertEffect"}))};const C=this._state.get(),v=this._stateTransformer,S=new u.a.BehaviorSubject(C);this._effects=u.a.mergeStatic(...this._stateSideEffects.map(({when:e,what:t,id:a})=>this._state.view("currentLens","id").view(e).pipe(u.a.switchMap(m.b.orEmpty(Object(s.pipe)(this._effectToApplicator(t),this._addMetadata({sourceId:a})))))),u.a.mergeStatic(this._switchAlertActions.pipe(u.a.map(this._focusAlertEffect)),this._switchLensActions.pipe(u.a.map(this._focusLensEffect))).pipe(u.a.switchAll()));const E=this._ts.getTimer("batched.long_state_change");this._subs=[this._effects.pipe(u.a.catchError((e,t)=>(this._log.error("Got error from effects: ",e),t)),u.a.withLatestFrom(S,({source:e,metadata:t},a)=>({state:e(a),metadata:t})),u.a.catchError((e,t)=>(this._log.error("Got error while applying new state: ",e),t)),u.a.map(v),u.a.catchError((e,t)=>(this._log.error("Got error while transforming state: ",e),t))).subscribe(e=>Object(s.pipe)(e,o.b.fold(({state:e,metadata:t})=>{this._log.isEnabled(d.Logging.LogLevel.TRACE)&&this._log.trace(`lens state from: ${t.sourceId}`,e),Object(s.pipe)(this._checkState(e),o.b.fold(t=>this._log.error("incorrect state transition detected",{error:t,state:e}),()=>S.next(e)))},o.b.fold(e=>this._switchAlertActions.next(e),e=>this._switchLensActions.next(e))))),Object(s.pipe)(S,u.a.map(f.e.getActiveAlert(this._getActiveAlert)),u.a.tap(e=>this._log.trace("active alert: ",e)),u.a.distinctUntilChanged(o.g.getEq(h.a.eq).equals),u.a.switchMap(m.b.observeIfExists(e=>Object(s.pipe)(this._alertsService.takeReference(e,"activeCard"),o.b.mapLeft(e=>this._log.error("can not take alertRef",e)),o.b.fold(i.of(r.constVoid),e=>e.dispose))))).subscribe(),Object(s.pipe)(S,u.a.map(e=>{const t=performance.now();n.unstable_batchedUpdates(()=>{this._state.set(e)});const a=performance.now()-t;a>16&&E.recordTime(a)})).subscribe()],f.e.hasCards(C)&&Object(s.pipe)(f.e.getActiveAlertHighlight(this._getActiveAlert)(C),o.g.filter(e=>this._alertsReader.isRegistered(e.alert.id)),o.g.fold(()=>this._switchLensActions.next({lensId:C.currentLens.id,alertSource:C.alertSource,options:{order:C.switchOrder,toFocus:f.e.Effect.FocusBehavior.noFocus}}),e=>this._switchAlertActions.next({alertHighlight:e,alertSource:C.alertSource,options:{lensId:C.currentLens.id,order:C.switchOrder}})))}dispose(){this._subs.forEach(e=>e.unsubscribe()),this._subs=[]}_effectToApplicator(e){switch(e.type){case f.e.Effect.Type.Applicator:case f.e.Effect.Type.ItemsApplicator:return e.source;case f.e.Effect.Type.SwitchLens:return e.source.pipe(u.a.tap(e=>this._switchLensActions.next(e)),u.a.switchMapTo(u.a.NEVER));case f.e.Effect.Type.SwitchAlert:return e.source.pipe(u.a.tap(e=>this._switchAlertActions.next(e)),u.a.switchMapTo(u.a.NEVER));default:return Object(l.d)(e)}}_checkState(e){try{if(f.e.hasCards(e)){const t=e.currentLens.items.filter(Object(c.b)(g.a.isAnimatable,g.a.isFocused));Object(l.g)(t.size<=1,"cannot have more than one focused card",()=>JSON.stringify(t))}}catch(e){return o.b.left(e)}return o.b.right(void 0)}}y.toLensAlert=({alert:e,highlightIndex:t})=>({alert:e,highlightIndex:t,lensId:e.lensId})},"8NES":function(e,t,a){"use strict";var n,i=a("ERkP"),r=a("9NHN"),s=a("6gXa"),o=a("F/DG"),l=a.n(o),c=a("bP7Z"),d=a.n(c),p=a("yRCP"),u=a.n(p),m=a("beGk"),h=a.n(m),g=a("N1Ys"),f=a.n(g),b=a("p88l"),y=a.n(b),C=a("C1OD"),v=a.n(C),S=a("agjt"),E=a.n(S),w=a("fK7l"),k=a.n(w),_=a("m5GR"),O=a.n(_),A=a("sgef"),T=a.n(A),x=a("Yjm5"),I=a.n(x),M=a("g7Ig"),j=a.n(M),L=a("6r/7"),N=a.n(L),P=a("qzE2"),F=a.n(P),D=a("PBv0"),R=a.n(D);s.a.fontFace({fontFamily:"Inter",fontStyle:"normal",fontWeight:300,src:`url('${E.a}') format('woff2'), url('${v.a}') format('woff')`,fontDisplay:"swap"}),s.a.fontFace({fontFamily:"Inter",fontStyle:"normal",fontWeight:700,src:`url('${d.a}') format('woff2'), url('${l.a}') format('woff')`,fontDisplay:"swap"}),s.a.fontFace({fontFamily:"Inter",fontStyle:"normal",fontWeight:400,src:`url('${R.a}') format('woff2'), url('${F.a}') format('woff')`,fontDisplay:"swap"}),s.a.fontFace({fontFamily:"Inter",fontStyle:"normal",fontWeight:500,src:`url('${I.a}') format('woff2'), url('${T.a}') format('woff')`,fontDisplay:"swap"}),s.a.fontFace({fontFamily:"Inter",fontStyle:"italic",fontWeight:300,src:`url('${O.a}') format('woff2'), url('${k.a}') format('woff')`,fontDisplay:"swap"}),s.a.fontFace({fontFamily:"Inter",fontStyle:"italic",fontWeight:400,src:`url('${y.a}') format('woff2'), url('${f.a}') format('woff')`,fontDisplay:"swap"}),s.a.fontFace({fontFamily:"Inter",fontStyle:"italic",fontWeight:500,src:`url('${N.a}') format('woff2'), url('${j.a}') format('woff')`,fontDisplay:"swap"}),s.a.fontFace({fontFamily:"Inter",fontStyle:"italic",fontWeight:700,src:`url('${h.a}') format('woff2'), url('${u.a}') format('woff')`,fontDisplay:"swap"}),a.d(t,"a",(function(){return n})),function(e){const t=({fontStyles:e})=>i.createElement("div",{className:e.fontsPreload},i.createElement("span",{className:e.italicBold}),i.createElement("span",{className:e.italicRegular}),i.createElement("span",{className:e.italicLight}),i.createElement("span",{className:e.normalBold}),i.createElement("span",{className:e.normalRegular}),i.createElement("span",{className:e.normalLight}));e.fontsProvider=function(e,a={withPreload:!0}){return n=>i.createElement(i.Fragment,null,a.withPreload?i.createElement(t,{fontStyles:Object.assign({},B)}):null,i.createElement(e,Object.assign({},n,Object(r.c)(n.className,a.customFontStyle?a.customFontStyle:B.wrapper))))}}(n||(n={}));const B=s.a.stylesheet({wrapper:[{fontWeight:"normal",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif, Arial",fontFeatureSettings:"'ss01'","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",$nest:{"@media print":{visibility:"hidden"}}}],fontsPreload:[{visibility:"hidden",fontFamily:"'Inter'"}],italicBold:[{fontWeight:700,fontStyle:"italic"}],italicRegular:[{fontWeight:400,fontStyle:"italic"}],italicLight:[{fontWeight:100,fontStyle:"italic"}],normalBold:[{fontWeight:700,fontStyle:"normal"}],normalRegular:[{fontWeight:400,fontStyle:"normal"}],normalLight:[{fontWeight:300,fontStyle:"normal"}]})},"8P+J":function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return d}));var n=a("ERkP"),i=a("Kt6o"),r=a("6gXa");const s=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;function o(e){return i.b+e+".svg"}function l(e,t=p.emoji){return`<img alt="${e}" class="${t}" src="${function(e){return i.b+function(e){return e.length<4?e.codePointAt(0).toString(16):e.codePointAt(0).toString(16)+"-"+e.codePointAt(2).toString(16)}(e)+".svg"}(e)}" onerror="this.replaceWith(this.alt)" draggable="false" />`}const c=({children:e,emojiClassName:t,className:a})=>{const i=n.useCallback(e=>{null!==e&&(e.innerHTML=e.innerHTML.replace(s,e=>l(e,t)))},[e]);return n.createElement("span",{ref:i,className:a},e)},d=({id:e,className:t})=>n.createElement("img",{src:o(e),draggable:!1,className:t}),p=r.a.stylesheet({emoji:[{display:"inline",marginRight:".25em",width:"1em",verticalAlign:"sub",lineHeight:1,transform:"scale(1.25)",transformOrigin:"bottom",userSelect:"none"}]})},"8ZZk":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("m6JR"),r=a("OA+g"),s=a("I7vG"),o=a("2Jhg"),l=a("LNSM"),c=a("bYZB"),d=a("+JVj"),p=a("AMXJ"),u=a("zR/0"),m=a("1huE"),h=a("gy42"),g=a("hoSD"),f=a("lrqh"),b=a("6fbX"),y=a("D9EC"),C=a("PrA7"),v=a("0lfv");!function(e){let t,a,n,E,w,k;!function(e){e.EditingMode="EditingMode",e.ReadMode="ReadMode"}(t=e.VisualState||(e.VisualState={})),function(e){e.is=e=>e.visualState===t.EditingMode}(a||(a={})),function(e){e.is=e=>e.type!==E.Type.Close&&e.type!==E.Type.ApplyRemove&&e.type!==E.Type.ApplyChange}(n||(n={})),function(e){let a,n,i;!function(e){e.SwitchToReadMode="SwitchToReadMode",e.SwitchToEditMode="SwitchToEditMode",e.ApplyChange="ApplyChange",e.ApplyRemove="ApplyRemove",e.Close="Close"}(a=e.Type||(e.Type={})),function(t){t.is=t=>t.type===e.Type.SwitchToReadMode}(n=e.SwitchToReadMode||(e.SwitchToReadMode={})),function(t){t.create=function(t,a,n){const i=(r=g.f.sanitize(t),g.f.urlContainsProtocol(r)?r:"http://"+r);var r;return t.length>0&&function(e){return Object(s.pipe)(function(e){return f.b.tryCatchError(()=>new URL(e))}(e),f.b.fold(()=>!1,e=>S.includes(e.protocol.replace(":",""))))}(i)&&i.length<=p.a.MAX_URL_LENGTH?f.b.right({type:e.Type.ApplyChange,url:i,textRange:a,rect:n}):f.b.left(void 0)}}(i=e.ApplyChange||(e.ApplyChange={})),e.initMapFromState=function(t){return a=>{const n=t.getFormatting(a.range);if(c.e.LinkPayload.is(n)){const t=n[c.e.Type.link],{rect:i,url:r,range:s}=t[0];return"selection"===a.source?{type:e.Type.SwitchToReadMode,textRange:s,rect:i,url:r}:{type:e.Type.SwitchToEditMode,textRange:s,rect:i,url:r}}{Object(b.g)("toolbar"===a.source,"non-toolbar source can not emit ranges without link formatting");const n=Object(s.pipe)(t.getSelectionRect(),f.b.fold(()=>{throw new b.b("Failed to get selection rect while trying to add link")},r.identity));return{type:e.Type.SwitchToEditMode,textRange:a.range,rect:n,url:""}}}},e.initHandlers=function(t,a,n){const i=()=>f.b.tryCatchError(()=>n.next());return n=>{switch(n.type){case e.Type.SwitchToEditMode:return t.setCursor(n.textRange.start,d.b.size(n.textRange));case e.Type.SwitchToReadMode:return f.b.right(void 0);case e.Type.ApplyChange:return Object(s.pipe)(a.removeLink(n.textRange),f.b.chain(()=>d.b.isEmpty(n.textRange)?Object(s.pipe)(a.insertLinkWithCaption(n.textRange.start,n.url,n.url),f.b.chain(()=>t.setCursor(n.textRange.start+n.url.length,d.b.size(n.textRange)))):a.insertLink(n.textRange,n.url)));case e.Type.ApplyRemove:return Object(s.pipe)(i(),f.b.chain(()=>a.removeLink(n.textRange)),f.b.chain(()=>t.setCursor(n.textRange.start,0)));case e.Type.Close:return i();default:return Object(b.d)(n)}}},e.initMapToView=function(a){return n=>{const i=()=>a.next({type:e.Type.Close});switch(n.type){case e.Type.SwitchToEditMode:const r=l.a.create(n.url);return{visualState:t.EditingMode,rect:n.rect,inputContent:r,isValid:r.view(y.n),textRange:n.textRange,close:i,apply:()=>{Object(s.pipe)(e.ApplyChange.create(r.get(),n.textRange,n.rect),f.b.fold(i,e=>a.next(e)))}};case e.Type.SwitchToReadMode:return{visualState:t.ReadMode,url:n.url,rect:n.rect,textRange:n.textRange,close:i,remove:()=>a.next({type:e.Type.ApplyRemove,textRange:n.textRange}),change:()=>a.next({type:e.Type.SwitchToEditMode,url:n.url,rect:n.rect,textRange:n.textRange})};default:return Object(b.d)(n)}}}}(E||(E={})),function(e){e.eq=i.fromEquals((e,t)=>e.source===t.source&&d.b.ord.equals(e.range,t.range))}(w=e.LinkState||(e.LinkState={})),function(e){e.listenCloseHotkey=function(e){return e.bindHotkey(e.createHotkey(new Set,"ESCAPE")).pipe(u.a.mapTo({type:E.Type.Close}))},e.listenApplyHotkey=function(e,t){return e.bindHotkey(e.createHotkey(new Set,"ENTER")).pipe(u.a.map(()=>{const e=t.get().filter(a.is);Object(b.g)(e.nonEmpty(),"Called Apply when view wasn't in edit mode");const n=e.get();return Object(s.pipe)(E.ApplyChange.create(n.inputContent.get(),n.textRange,n.rect),f.b.fold(()=>({type:E.Type.Close}),e=>e))}))}}(k||(k={})),e.createManager=function(e,a,i,c){const d=l.a.create(o.e),p=new u.a.Subject,g=E.initMapFromState(e),b=E.initMapToView(p),y=E.initHandlers(e,a,i.closeLinks),S=C.Monitoring.Logging.getLogger("formattingLinksManager"),w=new m.a.Keeper;return w.push(e.dontFreezeWhen(d.view(v.a.exists(({visualState:e})=>e===t.EditingMode)),"links"),i.formattingLinkState.pipe(u.a.debounce(Object(r.flow)(f.g.filter(e=>"selection"===e.source),f.g.fold(()=>0,()=>200),u.a.timer)),u.a.switchMap(f.g.fold(()=>u.a.of(o.f.empty()),e=>p.pipe(u.a.startWith(g(e)),u.a.switchMap(e=>u.a.mergeStatic(u.a.of(e),k.listenCloseHotkey(c),e.type===E.Type.SwitchToEditMode?k.listenApplyHotkey(c,d):u.a.EMPTY)),u.a.switchMap(e=>Object(s.pipe)(y(e),f.b.fold(e=>(S.error("Error in formatting links",e),i.closeLinks.next(),u.a.EMPTY),()=>n.is(e)?u.a.of(e):u.a.EMPTY))),u.a.map(b),u.a.map(o.h)))),u.a.catchError(e=>(S.error("Error in formatting links",e),u.a.EMPTY))).subscribe(h.b.toAtom(d))),{visualState:d,dispose:()=>w.dispose()}}}(n||(n={}));const S=["http","https","mailto","tel"]},"8uad":function(e,t,a){"use strict";var n=a("ERkP"),i=a("OA+g"),r=a("I7vG"),s=a("vOOZ"),o=a("uqkn"),l=a("E0zP"),c=a("XxrX"),d=a("zR/0"),p=a("0A/6"),u=a("LNSM"),m=a("lrqh"),h=a("D9EC"),g=a("PrA7"),f=a("rk+4"),b=a("+w1e"),y=a("nnns"),C=a("hQF/"),v=a("BugA"),S=a("aIes"),E=a("yZqL"),w=a("H9T+"),k=a("uO+M"),_=a("6gXa");const O=_.a.style({margin:`${_.a.rem(1)} 0`}),A=_.a.style({marginLeft:_.a.rem(.5),lineHeight:_.a.rem(1.3125),fontSize:_.a.rem(.875),color:k.Color.CoreNeutral90}),T=_.a.style({marginTop:"0 !important",$nest:{"&:not(:last-child)":{marginBottom:_.a.rem(1)}}}),x=_.a.style({marginTop:"0 !important",marginLeft:_.a.rem(1)}),I={color:k.Color.CoreRed60,fontSize:_.a.rem(.75),lineHeight:_.a.rem(1.125)},M=_.a.style(I),j=_.a.style(I,{visibility:"hidden"});var L=a("HUX/");const N=({card:e,actions:t,hideLabel:a})=>{const i=n.useContext(f.a.Context).card.feedbackForm,o=u.a.create(void 0),l=u.a.create(!1);return Object(r.pipe)(e.visualState.transition,m.g.fromPredicate(e=>"feedback_form"===e.type),m.g.fold(()=>(g.Monitoring.Logging.getLogger("FeedbackForm").error("Trying to render feedback form from non-feedback state",e),null),({options:r})=>n.createElement(E.a,{onFocus:()=>t.next({type:b.b.Type.alertIgnoreFeedbackFormShow,alertId:e.activeAlert.id}),theme:Object(L.b)(e.renderOptions),visualState:e.visualState,body:n.createElement(n.Fragment,null,a?null:n.createElement(w.k,{alert:e.activeAlert,options:e.renderOptions}),n.createElement(v.H4,{className:O},i.dismissReason),n.createElement(C.a.Group,{itemWrapperClassName:T,selectedItemIndex:o,items:r.map(e=>n.createElement("div",{className:A},e.text)),onChange:()=>l.set(!1)})),mainActions:n.createElement(n.Fragment,null),footer:n.createElement(n.Fragment,null,n.createElement(s.a.div,{"aria-hidden":l,className:l.view(Object(h.c)(M,j))},i.error),n.createElement("div",null,n.createElement(y.a.Primary,{name:"submitCardFeedbackForm",onClick:()=>{const a=o.get();return void 0===a?l.set(!0):S.d.callOnce(()=>t.next({type:b.b.Type.alertIgnoreFormSubmit,alertId:e.activeAlert.id,reason:r[a].key}))()}},i.submit),n.createElement(y.a.Ghost,{className:x,name:"skipCardFeedbackForm",onClick:S.d.callOnce(()=>t.next({type:b.b.Type.alertIgnoreFormSubmit,alertId:e.activeAlert.id,reason:"skipped"}))},i.skip))),subActions:n.createElement(n.Fragment,null)})))};var P=a("jSKJ"),F=a("oWeJ"),D=a("tZ26"),R=a("1gzW");const B=_.a.style({marginRight:_.a.rem(-.5),marginTop:_.a.rem(.5)}),H=_.a.style({padding:`0 ${_.a.rem(1.625)} !important`,marginRight:_.a.rem(.125)}),W=_.a.style({marginRight:0}),$=({card:e,actions:t})=>{const a=n.useRef(u.a.create(!1));R.a.useEffectOnWillUnmount(()=>{a.current.get()||Object(r.pipe)(e.muteCategory,m.g.map(a=>t.next({type:b.b.Type.mutedAlertSuccessDismissed,id:e.id,categoryId:a.id})))});const i=n.useContext(f.a.Context).card.mutedAlertCard;return n.createElement(E.a,{onFocus:()=>t.next({type:b.b.Type.mutedAlertSuccessShow}),theme:Object(L.b)(e.renderOptions),visualState:e.visualState,body:n.createElement(n.Fragment,null,n.createElement(w.k,{alert:e.activeAlert,options:e.renderOptions}),n.createElement(v.Base,null,i.description(Object(r.pipe)(e.muteCategory,m.g.fold(()=>"",e=>e.description))))),mainActions:n.createElement(n.Fragment,null),footer:n.createElement("div",{className:B},n.createElement(y.a.Primary,{name:"gotIt",className:H,onClick:()=>S.d.callOnce(()=>t.next({type:b.b.Type.switchToNext}))()},i.successButtonLabel),n.createElement(y.a.Ghost,{name:"turnBackOn",onClick:S.d.callOnce(()=>{a.current.set(!0),Object(r.pipe)(e.muteCategory,m.g.map(a=>t.next({type:b.b.Type.undoMuteAlertCategory,categoryId:a.id,id:e.id})))})},i.undoButtonLabel,n.createElement(D.d.Undo,{color:k.Color.CoreBlue50,className:W}))),subActions:n.createElement(y.a.Tertiary,{name:"manageOptionalSuggestions",onClick:()=>t.next({type:b.b.Type.mutedAlertSuggestionManagementClick})},i.settingsLabel,n.createElement(D.d.OuterLink,null))})};var V=a("IdhR"),U=a("0PmZ");function G(e,t,a){const{activeAlert:n,activeHighlightIndex:i}=t,r=n.getHighlightRanges(),s=(i+("left"===e?r.length-1:1))%r.length;a.next({type:b.b.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"sameAlert",card:t,highlightIndex:s},direction:e})}const z=({card:e,actions:t,selectedLabelIndex:a,isChecking:i})=>{const r=n.useContext(f.a.Context),s=u.a.create(!1);return R.a.useSubscriptionTo(i.pipe(d.a.tap(e=>s.set(e)))),n.createElement(w.w,{applyMessage:e.activeAlert.todoAction,checkingMessage:r.card.checking,title:r.card.todoAction(e.activeAlert.todoAction),checkingInProgress:s,onClick:()=>{t.next({type:b.b.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:a.get(),cardType:b.b.getCardType(e)})}})},q=({card:e,actions:t})=>n.createElement(U.a,{onLeftClick:()=>G("left",e,t),onRightClick:()=>G("right",e,t),currentMatch:e.activeHighlightIndex,totalMatch:e.activeAlert.getHighlightRanges().length,disableOnEnd:!1,style:{}});var Y=a("eLeT");const X=({activeAlert:e,selectedLabelIndex:t,actions:a})=>{const i=n.useContext(f.a.Context);return n.createElement("div",{className:Y.a.optionsContainer},e.labels.map((e,r)=>n.createElement(n.Fragment,{key:`option-${r}`},n.createElement(C.a.Item,{className:Y.a.optionLabel,onChange:()=>{t.set(r),a.next({type:b.b.Type.alternativeReplacementRadioButtonClick,index:r})},checked:t.view(e=>e===r)},n.createElement(v.Base,{className:Y.a.optionRadio},e.label)),n.createElement(v.Small,{className:Y.a.optionExample},e.replacementTexts.join("; ")),n.createElement(v.Small,{className:Y.a.optionSecondaryAttribute},i.card.matchesNavigation.numberOfMatches(e.matches)))))},K=({card:e,actions:t,isChecking:a,isCheckingGlobal:i})=>{const r=u.a.create(0);return n.createElement(E.a,{visualState:e.visualState,onFocus:()=>t.next({type:b.b.Type.alertCardShow,cardType:b.b.getCardType(e),alertId:e.activeAlert.id}),theme:Object.assign({wrapper:Y.a.superWrapper,content:i.pipe(d.a.map(Object(h.c)(Y.a.loadingWrapperInvisible,Y.a.loadingWrapper)))},Object(L.a)(e.renderOptions.layoutDensity)),extra:n.createElement(w.c,{isChecking:i}),body:n.createElement(n.Fragment,null,n.createElement(w.k,{alert:e.activeAlert,options:e.renderOptions}),n.createElement(w.v,{alert:e.activeAlert}),n.createElement(w.m,{card:e,isChecking:a}),n.createElement(w.g,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}),n.createElement(X,{activeAlert:e.activeAlert,selectedLabelIndex:r,actions:t})),mainActions:n.createElement(w.f,{card:e,feedbackActions:t}),footer:n.createElement(n.Fragment,null,n.createElement(w.i,{card:e}),n.createElement(z,{selectedLabelIndex:r,card:e,actions:t,isChecking:a})),navigation:n.createElement(q,{card:e,actions:t}),subActions:n.createElement(V.a,{actions:t,card:e,mode:"mini"})})};var Z,Q;a.d(t,"a",(function(){return Z})),(Q=Z||(Z={})).Full=({card:e,actions:t})=>{const{isChecking:a,isCheckingGlobal:r,transform:l}=o.a.useCardStates(e),c=e=>n.createElement(P.a,{card:e,actions:t,isChecking:a,transform:l,isCheckingGlobal:r});return n.createElement(s.a.Fragment,null,e.pipe(d.a.distinctUntilChanged((e,t)=>e.hashCode()===t.hashCode()),d.a.map(Object(i.flow)(o.a.match({super:e=>n.createElement(K,{card:e,actions:t,isChecking:a,isCheckingGlobal:r}),smartPhrases:c,takeaway:c,sentenceLevelBrandTones:c,synfony:c,shortenIt:c,toneAI:c,default:c}),o.a.foldCard))))},Q.Mini=({card:e,actions:t})=>n.createElement(s.a.Fragment,null,e.pipe(d.a.map(e=>c.a.Density.matchL(()=>n.createElement(Q.MiniSingleLined,{card:e,actions:t}),()=>n.createElement(Q.MiniTwoLined,{card:e,actions:t}),()=>n.createElement(Q.MiniTwoLined,{card:e,actions:t}))(e.renderOptions.layoutDensity)))),Q.MiniSingleLined=({card:e,actions:t})=>{function a(e){return n.createElement(F.a.Standard,{card:e,actions:t})}return Object(r.pipe)(e,o.a.match({smartPhrases:a,super:a,takeaway:a,sentenceLevelBrandTones:a,synfony:a,shortenIt:a,toneAI:a,default:a}),o.a.foldCard)},Q.MiniTwoLined=({card:e,actions:t})=>{function a(e){return n.createElement(F.a.TwoLined,{card:e,actions:t})}return Object(r.pipe)(e,o.a.match({smartPhrases:a,super:a,takeaway:a,sentenceLevelBrandTones:a,synfony:a,shortenIt:a,toneAI:a,default:a}),o.a.foldCard)},Q.Success=p.a.Success,Q.FeedbackForm=({cardData:e,actions:t})=>{function a(e){return n.createElement(N,{card:e,actions:t})}return Object(r.pipe)(e,l.a.match({smartPhrases:function(e){return n.createElement(N,{card:e,actions:t,hideLabel:!0})},takeaway:a,default:a,sentenceLevelBrandTones:a,synfony:a,super:a,shortenIt:a,toneAI:a}),o.a.foldCard)},Q.MutedAlert=({cardData:e,actions:t})=>{function a(e){return n.createElement($,{card:e,actions:t})}return Object(r.pipe)(e,l.a.match({smartPhrases:a,takeaway:a,default:a,sentenceLevelBrandTones:a,synfony:a,super:a,shortenIt:a,toneAI:a}),o.a.foldCard)}},"8z+V":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var n,i=a("PrA7");!function(e){let t;!function(e){e.isVideo=function(e){return"video"in e}}(t=e.Content||(e.Content={}))}(n||(n={}));class r{constructor(e){this._settings=e}markSeen(e){return i.Monitoring.Logging.getLogger("whatsnew").info("News shown",e),this._settings.markNewsItemsAsSeen(e)}}},"8zjg":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("LNSM"),r=a("yA7V"),s=a("b/mo"),o=a("zR/0"),l=a("gy42"),c=a("jAb7");!function(e){e.defaultState={alerts:r.a.empty,lenses:c.a.monoid.empty},e.get=(n,i,s)=>i.pipe(o.a.startWith(new Map),o.a.combineLatest(n.pipe(o.a.startWith(r.a.empty),o.a.scan((e,a)=>t(a,s.lensFilters)(e),e.defaultState)),a)),e.getMock=(t,a)=>{const n=i.a.create(e.defaultState);return e.get(t,a,s.a.create(s.a.defaultLensFilters,s.a.defaultTextFilters)).subscribe(l.b.toAtom(n)),n};const t=(e,t)=>a=>{const n=r.a.Diff.toRegistered(r.a.diff(a.alerts,e));return{alerts:e,lenses:c.a.applyDiff(t)(n)(a.lenses)}},a=(e,t)=>Object.assign(Object.assign({},t),{lenses:c.a.updatePercentiles(e)(t.lenses)})}(n||(n={}))},"9/oM":function(e,t,a){"use strict";var n=a("D57K"),i=a("ERkP"),r=a("OA+g"),s=a("I7vG"),o=a("5E2i"),l=a("vOOZ"),c=a("9NHN"),d=a("LNSM"),p=a("lrqh"),u=a("6fbX"),m=a("hoSD"),h=a("x7eB"),g=a("By/D"),f=a("LXcl"),b=a("zR/0"),y=a("gy42"),C=a("SGQG"),v=a("nnns"),S=a("tZ26"),E=a("0gxC"),w=a("BugA");const k=({alignment:e,rect:t,onClose:a,className:n,children:r,icon:o,pinTargetRect:d,hideCloseButton:u,onMount:m})=>i.createElement(E.a.ByRelativeRect,Object.assign({rect:t,className:C.a.notificationContainer},E.a.Alignment.toSelector(e),{pinTargetRect:d,withPin:!0}),i.createElement(l.a.div,Object.assign({},Object(c.c)(C.a.stepWrapper,n),{mount:m}),Object(s.pipe)(o,p.g.fold(()=>i.createElement(S.d.Grammarly,{className:C.a.alertIcon}),e=>i.createElement(e,{className:C.a.alertIcon}))),r,!u&&i.createElement(v.a,{name:"onboard-close",className:C.a.closeIconWrapper,onClick:()=>a&&a()},i.createElement(S.d.Close,{className:C.a.closeIcon,width:12})))),_=e=>{var{title:t,description:a}=e,r=Object(n.__rest)(e,["title","description"]);return i.createElement(k,Object.assign({},r),i.createElement("span",{className:C.a.content},t&&i.createElement(w.P1,{className:C.a.header},t),i.createElement(w.Base,{className:C.a.description},a)))};a.d(t,"a",(function(){return A})),a.d(t,"b",(function(){return T})),a.d(t,"c",(function(){return I}));const O=({className:e,onClick:t,customStyle:a,enableOptimizations:n})=>i.createElement(l.a.div,Object.assign({},Object(c.c)(C.a.pulseWrapper,e),{style:a,onClick:()=>t&&t()}),i.createElement("div",{className:n?C.a.pulseOptimized:C.a.pulse}));var A;function T(e){const t=i.useContext(T.Context),{stepId:a,onboardingViewModel:r}=e,o=Object(n.__rest)(e,["stepId","onboardingViewModel"]),l=r||t,c=x(a,l),d=i.useContext(g.a.Context).pipe(b.a.map(e=>e.rect));return Object(s.pipe)(c,p.g.fold(()=>i.Children.only(e.children),e=>i.createElement(I,Object.assign({},o,{onboardingStep:e,enableOptimizations:l.cpuAndAnimationOptsExperiment,viewportRect:d}))))}!function(e){e.leftTop="leftTop",e.leftCenter="leftCenter",e.leftBottom="leftBottom",e.center="center",e.rightTop="rightTop",e.rightCenter="rightCenter",e.rightBottom="rightBottom"}(A||(A={}));const x=(e,t)=>(Object(u.g)(Boolean(t),"onboardingViewModel should be set either in context or in props"),t.isStepEnabled(e)?p.g.some(t.subscribeForStep(e)):p.g.none);class I extends i.Component{constructor(){super(...arguments),this._subs=[],this._wrapperElement=d.a.create(p.g.none),this._containerElement=d.a.create(p.g.none),this._exactTargetRect=d.a.create(p.g.none),this._visibilityState=d.a.create(!1),this._spotStyle=d.a.create({}),this._onEventActionTaken=(e,t=!0)=>a=>{var n;const i=e.state.get();if("popup"===i||t&&"dot"===i){const i=a.target;if(m.c.isDisabled(i))return;const r=t||m.c.hasParentWithClassName(i,C.a.containerDiv);if("findFirstButton"===(null===(n=this.props.dotPosition)||void 0===n?void 0:n.kind)&&!m.c.hasParentWithAttribute(i,"role","button"))return;r&&e.actionTaken()}else"dot"===i&&(a.preventDefault(),a.stopPropagation())}}componentWillUnmount(){const e=this.props.onboardingStep;"popup"===e.state.get()&&e.popupIgnored(),this._subs.forEach(e=>e.unsubscribe())}componentDidMount(){const e=this.props.dotPosition;e?this._subs.push(b.a.mergeStatic(this.context,this.props.onboardingStep.state.pipe(b.a.filter(e=>"dot"===e||"popup"===e))).pipe(b.a.delay(500),b.a.withLatestFrom(this._wrapperElement,this._containerElement),b.a.switchMap(([t,a,n])=>Object(s.pipe)(Object(r.tuple)(a,n),Object(r.tupled)(p.g.map2((t,a)=>{switch(e.kind){case"findFirstButton":return y.b.toObservable(e.buttonOrder).pipe(b.a.switchMap(n=>b.a.of(void 0).pipe(b.a.delay(500),b.a.map(()=>{const[i,r]=L(t,a,e.position,n);return this._exactTargetRect.set(r),i}))));case"dotAtPosition":return b.a.of(M(e.position));default:return Object(u.d)(e)}})),p.g.fold(()=>b.a.EMPTY,o.a)))).subscribe(e=>{this._spotStyle.set(e),this._visibilityState.set(!0)})):this._visibilityState.set(!0)}render(){const e=this.props.onboardingStep;return i.createElement(l.a.div,Object.assign({key:"onboarding-wrapper"},Object(c.c)(C.a.containerWrapper,this.props.themes&&this.props.themes.containerWrapperClassName),{mount:e=>this._wrapperElement.set(p.g.fromNullable(e))}),i.createElement("div",Object.assign({key:"container",ref:e=>this._containerElement.set(p.g.fromNullable(e))},Object(c.c)(C.a.containerDiv,this.props.themes&&this.props.themes.containerClassName),{onClickCapture:this._onEventActionTaken(e,"onclick"===this.props.eventType),onMouseEnter:t=>"onhover"===this.props.eventType&&this._onEventActionTaken(e,!1)(t)}),this.props.children),d.a.combine(e.state,this._visibilityState,(t,a)=>{if(!a)return null;switch(t){case"dot":const t=this.props.themes&&this.props.themes.spotClassName;return this.props.onboardingStep.dotShown(),i.createElement(O,Object.assign({customStyle:this._spotStyle,key:"spot",enableOptimizations:this.props.enableOptimizations},Object(c.c)(C.a.onboardingSpot,t),{onClick:()=>e.dotClicked()}));case"popup":return i.createElement(_,{key:"step",title:this.props.title,alignment:this.props.alignment,rect:this._containerElement.view(p.g.fold(()=>m.c.Rect.empty,m.c.Rect.fromEl)),className:this.props.themes&&this.props.themes.notificationClassName,description:this.props.message,icon:p.g.fromNullable(this.props.icon),onClose:()=>e.popupClosed(),pinTargetRect:this._exactTargetRect.view(p.g.orUndefined)});default:return null}}))}}I.contextType=h.a.Context,I.defaultProps={alignment:"left"};const M=e=>{switch(e){case A.leftTop:return{top:0,left:0};case A.leftCenter:return{top:"50%",left:0};case A.leftBottom:return{top:"100%",left:0};case A.rightTop:return{top:0,left:"100%"};case A.rightCenter:return{top:"50%",left:"100%"};case A.rightBottom:return{top:"100%",left:"100%"};case A.center:return{top:"50%",left:"50%"};default:return Object(u.d)(e)}},j=(e,t,a)=>{switch(a){case A.rightTop:return{top:0,left:e.left-t.left+e.width};case A.center:return{top:e.top-t.top+e.height/2,left:e.left-t.left+e.width/2};default:return Object(u.d)(a)}},L=(e,t,a,n)=>{const i=t.querySelectorAll('[role="button"]'),s=i.length>0&&(void 0===n?i[i.length-1]:i[n]);if(s){const t=m.c.Rect.fromEl(Object(r.unsafeCoerce)(s)),n=m.c.Rect.fromEl(e);return[j(t,n,a),p.g.some(t)]}return[{top:"50%",left:"50%"},p.g.none]};var N;(N=T||(T={})).Context=i.createContext(null),N.ContextMock=({children:e})=>i.createElement(N.Context.Provider,{value:new f.b,children:e})},"97ZK":function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return p}));var n=a("ERkP"),i=a("uO+M"),r=a("6gXa"),s=a("ps/9"),o=a("rk+4"),l=a("nnns"),c=a("BugA");const d=({onClick:e,collapsed:t})=>{const a=n.useContext(o.a.Context).priorityList;return n.createElement(l.a.Tertiary,{name:"card-list-more",className:g.toggleNonPriority,title:n.createElement("div",{className:g.tooltip},a.toggleButtonTooltip(t)),onClick:e},t?a.expand:a.collapse)},p=()=>{const e=n.useContext(o.a.Context).priorityList;return n.createElement("div",{className:g.toggleNonPriorityHint},n.createElement(c.Small,null,e.hint))},u={padding:`${r.a.rem(.5)} ${r.a.rem(.25)}`,width:r.a.rem(12.75),whiteSpace:"normal",lineHeight:r.a.rem(1)},m={padding:r.a.rem(.5),borderRadius:r.a.rem(s.s),backgroundColor:i.Color.CoreNeutral10},h={$nest:{"&[data-textpos='everywhere']":{marginTop:r.a.rem(1),padding:`0 ${r.a.rem(2)}`},"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:i.Color.CoreNeutral10}}},g=r.a.stylesheet({tooltip:[u],toggleNonPriority:[h],toggleNonPriorityHint:[m]})},"9ZtS":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("I7vG"),r=a("lrqh"),s=a("dE97"),o=a("yA7V");!function(e){e.create=e=>{return{getAlertMuteCategory:t=>Object(i.pipe)(e.getById(t),r.g.chain(e=>e.muteCategory))}},e.getAlerts=function(e,t){const a={byCategory:new Map(t.map(e=>[e,[]])),all:[]};return Object(i.pipe)(e.get(),o.a.reduce(a,(e,{alert:a})=>Object(i.pipe)(a.muteCategory,r.g.filter(e=>t.includes(e.id)),r.g.map(e=>e.id),r.g.alt(()=>r.g.fromNullable(t.find(s.a.belongsToSpecialCategory(a)))),r.g.fold(()=>e,t=>(e.byCategory.get(t).push(a),e.all.push(a),e)))))}}(n||(n={}))},AK7F:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return p}));var n=a("lrqh"),i=a("D9EC"),r=a("kFFO"),s=a("973I"),o=a("XxrX");const l=n.c.fromEquals((e,t)=>e.id===t.id&&e.visibilityState===t.visibilityState&&s.a.eq.equals(e.positionState,t.positionState)),c=e=>Object(r.a)({itemId:e.id,visibilityState:e.visibilityState,positionState:Object(r.a)(e.positionState)});var d,p;!function(e){e.id="PriorityToggleHintId",e.Kind="PriorityToggleHint",e.create=(e,a)=>new t(e,a,o.a.defaultOptions),e.hidden="hidden",e.visible="visible",e.isVisible=t=>t.visibilityState===e.visible,e.changePosition=(t,a)=>e.create(t.visibilityState,a),e.isPriorityToggleHint=t=>t.id===e.id,e.transitionTo=(t,a)=>t.visibilityState!==a?e.create(a,t.positionState):t;class t{constructor(t,a,n){this.visibilityState=t,this.positionState=a,this.renderOptions=n,this.kind=e.Kind,this.scheduledToDispose=!1,this.id=e.id}equals(e){return l.equals(this,e)}hashCode(){return c(this)}}}(d||(d={})),function(e){e.id="PriorityToggleId",e.Kind="PriorityToggle",e.isCollapsed=e=>"collapsed"===e.visibilityState,e.isExpanded=e=>"expanded"===e.visibilityState,e.isHidden=e=>"hidden"===e.visibilityState,e.create=(e,a)=>new t(e,a,o.a.defaultOptions),e.changePosition=(t,a)=>e.create(t.visibilityState,a),e.transitionTo=(t,a)=>t.visibilityState!==a?e.create(a,t.positionState):t,e.isPriorityToggle=t=>t.id===e.id,e.isPriorityItem=Object(i.p)(e.isPriorityToggle,d.isPriorityToggleHint);class t{constructor(t,a,n){this.visibilityState=t,this.positionState=a,this.renderOptions=n,this.kind=e.Kind,this.scheduledToDispose=!1,this.id=e.id}equals(e){return l.equals(this,e)}hashCode(){return c(this)}}}(p||(p={}))},AW4s:function(e,t,a){"use strict";a.d(t,"b",(function(){return E})),a.d(t,"a",(function(){return n}));var n,i=a("D57K"),r=a("SYKK"),s=a("OA+g"),o=a("I7vG"),l=a("LNSM"),c=a("JAs9"),d=a("prnJ"),p=a("24uI"),u=a("Xj7G"),m=a("94k3"),h=a("GUi3"),g=a("QshB"),f=a("zR/0"),b=a("lrqh"),y=a("pYfS"),C=a("QwZm"),v=a("CrFT");class S{constructor(e){this._changes=l.a.create(e),this.changes=this._changes.pipe(f.a.skip(1))}_updateValue(e,t){this._changes.modify(a=>Object.assign({},a,{[e]:t}))}get template(){return this._changes.get().template}set template(e){this._updateValue("template",e)}get checkedPlagiarism(){return this._changes.view("checkedPlagiarism").get()}set checkedPlagiarism(e){this._updateValue("checkedPlagiarism",e)}}class E{constructor(e,t,a,n,i,r,u,m){this.id=e,this._doxInit=t,this._ded=a,this._getStats=n,this._doxApi=i,this._enableTrackingOnDownload=r,this.rtfMode=u,this.saved=new f.a.Subject,this.checkingState=l.a.create("full"),this.asyncChecksState=l.a.create({plagiarism:"full"}),this.counters=l.a.create(g.b.group.empty),this.defaultContext=l.a.create(b.g.none),this.score=l.a.create(b.g.none),this.textInfo=l.a.create(b.g.none),this.recentDocumentStats=l.a.create(b.g.none),this.extraSettings=new S(Object(o.pipe)(this._doxInit.meta.settings.extraSettings,b.g.getOrElse(()=>c.a.Extra.empty))),this.flush=()=>(this._ded.flushChanges(),this._doxInit.remoteDocument.flush()),this.updateContext=e=>{const t=!d.a.equals(this.context.get(),e);return this.context.set(e),t},this.updateDefaultContext=e=>{const t=!Object(o.pipe)(Object(s.tuple)([this.defaultContext.get(),e],b.g.map2(d.a.equals)));return this.defaultContext.set(e),t},this.title=l.a.create(t.meta.title),this.proofit=m(this.title),this.context=l.a.create(Object(o.pipe)(t.meta.settings.context,b.g.getOrElse(()=>d.a.unset)));const h=t.initialDelta.length-1;this.documentLength=l.a.create({full:h,trimmed:p.a.isInsertString(t.initialDelta.delta)?p.a.getTrimmedInsertLength(t.initialDelta.delta):h}),this.contextCompleteness=this.context.view(g.a.calculateCompleteness)}get template(){return y.a.decodeTemplate(this.extraSettings.template)}updateTemplate(e){this.extraSettings.template=y.a.serializeTemplate(e)}get isInitialRevision(){return this._doxInit.remoteDocument.isInitialRevision}get isDemoDocument(){return this._doxInit.meta.isDemoDocument}get documentText(){return this._ded.getText()}downloadOriginal(e){return Object(o.pipe)(this.flush,r.map(()=>e),r.chain(b.g.fold(()=>()=>this._doxApi.downloadOriginal(this.id,this._enableTrackingOnDownload),e=>()=>this._doxApi.downloadInFormat(this.id,e,this._enableTrackingOnDownload))),r.map(u.a.saveToFS))()}downloadProofread(){return Object(i.__awaiter)(this,void 0,void 0,(function*(){yield this._doxApi.downloadProofread(this.id).then(u.a.saveToFS)}))}generateReport(e,t){return Object(i.__awaiter)(this,void 0,void 0,(function*(){yield this._doxApi.generateReport(this.id,e,t).then(u.a.saveToFS)}))}calculateStats(){return b.l.toPromise(this._getStats).then(e=>(this.recentDocumentStats.set(b.g.some(e)),e))}getCheckingForState(e){return e.currentLens.id!==h.a.SpecialId.Plagiarism?this.checkingState.view(e=>({kind:g.c.CheckingKind.Document,type:e})):l.a.combine(this.checkingState,this.asyncChecksState.view("plagiarism"),(e,t)=>"full"===e?{kind:g.c.CheckingKind.Document,type:e}:"idle"!==t?{kind:g.c.CheckingKind.Plagiarism,type:t}:{kind:g.c.CheckingKind.Document,type:e})}}!function(e){e.Mock=class{constructor(){this.template=b.g.none,this.rtfMode=C.DocumentFeatures.FormattingMode.on,this.score=l.a.create(b.g.none),this.textInfo=l.a.create(b.g.none),this.title=l.a.create(""),this.downloadOriginal=e=>Object(i.__awaiter)(this,void 0,void 0,(function*(){return Promise.resolve()})),this.downloadProofread=()=>Object(i.__awaiter)(this,void 0,void 0,(function*(){return Promise.resolve()})),this.documentText="",this.documentLength=l.a.create({full:0,trimmed:0}),this.counters=l.a.create(g.b.group.empty),this.saved=l.a.create(!0),this.checkingState=l.a.create("idle"),this.asyncChecksState=l.a.create({plagiarism:"idle"}),this.isDemoDocument=!1,this.calculateStats=()=>Promise.resolve(m.a.DocumentStatistics.generateStats(210,1601)),this.flush=()=>Promise.resolve(),this.context=l.a.create(d.a.fromDomain("general")),this.defaultContext=l.a.create(b.g.some(d.a.defaultContextFallback)),this.contextCompleteness=l.a.create(0),this.updateContext=()=>!0,this.updateDefaultContext=()=>!0,this.proofit=new v.a.Mock,this.extraSettings=new S(c.a.Extra.empty),this.recentDocumentStats=l.a.create(b.g.none),this.generateReport=()=>Promise.resolve()}updateTemplate(e){throw new Error("Method not implemented.")}getCheckingForState(){return l.a.create({type:"idle",kind:g.c.CheckingKind.Document})}}}(n||(n={}))},Ars8:function(e,t,a){"use strict";a.d(t,"b",(function(){return b})),a.d(t,"a",(function(){return S}));var n=a("6gXa"),i=a("0Hf4"),r=a("uO+M"),s=a("Ov/9");const o=44*s.a,l=144*s.a,c=700*s.a,d=12*s.a,p=16*s.a,u=14*s.a,m=u+(p-u)/2-4,h=8.25*s.a,g=.6*s.a;i.a.cssRule("html",{fontSize:n.a.px(u)});const f={invisible:"report-invisible",markBase:"report-markBase",markSuccess:"report-markSuccess",akkuratWrapper:"report-akkuratWrapper",content:"report-content",textContent:"report-textContent",text:"report-text",superscriptContainer:"report-superscriptContainer",superscript:"report-superscript",alertTableContainer:"report-alertTableContainer",alertTable:"report-alertTable",alertTableTd:"report-alertTableTd",alertTableTdIndex:"report-alertTableTdIndex",alertTableTdExample:"report-alertTableTdExample",alertTableTdPlagiarismSource:"report-alertTableTdPlagiarismSource",alertTableHighlightText:"report-alertTableHighlightText",separatorRemover:"report-separatorRemover",plagiarismLink:"report-plagiarismLink"},b=f.superscriptContainer,y={borderBottomColor:n.a.important("transparent"),textDecoration:n.a.important("none"),fontWeight:n.a.important("normal"),fontStyle:n.a.important("normal")},C={boxSizing:"border-box",margin:"0 -8px",paddingRight:n.a.px(o),paddingLeft:n.a.px(l),width:n.a.px(c),$nest:{thead:{display:"table-row-group"}}},v={padding:`${n.a.px(11*s.a)} ${n.a.px(16*s.a)} ${n.a.px(11*s.a)} 0`,borderTop:`1px solid ${r.Color.CoreNeutral20}`,verticalAlign:"top",fontSize:n.a.px(d),lineHeight:n.a.px(p),breakInside:"avoid",$nest:{"&:last-of-type":{paddingRight:0}}},S={akkuratWrapper:n.a.joinClasses([f.akkuratWrapper,i.a.style({fontWeight:"normal",fontFamily:"'Akkurat Std', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif, Arial","-webkit-font-smooting":"antialiased","-moz-osx-font-smoothing":"grayscale"})]),content:n.a.joinClasses([f.content,i.a.style(C)]),textContent:n.a.joinClasses([f.textContent,i.a.style(C,{fontSize:n.a.px(u),pageBreakBefore:"always"})]),text:n.a.joinClasses([f.text,i.a.style({lineHeight:n.a.px(48),$nest:{"& *":{animation:n.a.important("none")},"& .ql-container [class*=-placeholder]":{display:"none"},"& .ql-clipboard":{display:"none"}}})]),superscriptContainer:n.a.joinClasses([f.superscriptContainer,i.a.style({position:"relative",bottom:n.a.px(m),display:"inline-block",width:0,height:0,whiteSpace:"nowrap",fontSize:n.a.px(h)})]),superscript:n.a.joinClasses([f.superscript,i.a.style(y,{padding:`0 ${n.a.px(g)}`,whiteSpace:"nowrap",$nest:{"&:not(:last-child):after":{content:"','"}}})]),alertTableContainer:n.a.joinClasses([f.alertTableContainer,i.a.style(C,{paddingLeft:0,pageBreakBefore:"always"})]),alertTable:n.a.joinClasses([f.alertTable,i.a.style({width:n.a.percent(100),borderCollapse:"collapse",$nest:{[`& tr:first-of-type .${f.alertTableTd}`]:{borderTopWidth:0},"& [class*=-or]":{marginRight:n.a.px(4*s.a),marginLeft:0,fontSize:n.a.px(d)},"& [class*=-removeOrContainer]":{flexBasis:"auto",$nest:{"& [class*=-itemRemove]":{marginRight:n.a.px(4*s.a),marginBottom:0,padding:0,$nest:{"& [class*=-deleteAll]":{verticalAlign:"middle"}}},"& [class*=-itemContext]":{marginRight:n.a.px(4*s.a),color:r.Color.CoreNeutral60,fontStyle:"italic",fontSize:n.a.px(d)}}},"& [class*=-itemOriginal], & [class*=-itemRemove]":{backgroundColor:"transparent",color:r.Color.CoreRed50,fontSize:n.a.px(d),lineHeight:n.a.px(p),paddingLeft:0,marginBottom:0},"& [class*=-itemOriginal]":{marginRight:0},"& [class*=-itemOriginal]:after":{margin:"-5px 4px 0",color:r.Color.CoreNeutral60,fontSize:n.a.px(d),lineHeight:n.a.px(p)},"& [class*=-itemInsert]":{margin:0,padding:0,backgroundColor:"transparent",color:r.Color.CoreGreen60,fontSize:n.a.px(d),lineHeight:n.a.px(p)},"& [class*=-itemInsert]:not(:last-child):after":{display:"inline-block",marginRight:"4px",color:r.Color.CoreNeutral60,content:"','",fontSize:n.a.px(d),lineHeight:n.a.px(p)},"& [class*=-replacements_labels-diff]":{fontWeight:"normal"},"& [class*=-replacements_labels-list]":{marginBottom:0}}})]),alertTableTd:n.a.joinClasses([f.alertTableTd,i.a.style(v)]),alertTableTdIndex:n.a.joinClasses([f.alertTableTdIndex,i.a.style(v,{width:n.a.px(l),borderTopWidth:0,color:r.Color.CoreNeutral50,textAlign:"right"})]),alertTableTdExample:n.a.joinClasses([f.alertTableTdExample,i.a.style(v,{maxWidth:n.a.px(350*s.a)})]),alertTableTdPlagiarismSource:n.a.joinClasses([f.alertTableTdPlagiarismSource,i.a.style(v,{maxWidth:n.a.px(190*s.a),wordWrap:"break-word"})]),alertTableHighlightText:n.a.joinClasses([f.alertTableHighlightText,i.a.style({color:r.Color.CoreNeutral60,fontStyle:"italic",lineHeight:n.a.px(p)})]),markBase:n.a.joinClasses([f.markBase,i.a.style({$nest:{"@media print":{borderBottomWidth:n.a.important(n.a.px(3))}}})]),markSuccess:n.a.joinClasses([f.markSuccess,i.a.style({$nest:{"@media print":{backgroundColor:r.Color.CoreNeutral0}}})]),separatorRemover:n.a.joinClasses([f.separatorRemover,i.a.style({position:"fixed",top:0,width:n.a.percent(100),height:n.a.px(3),backgroundColor:r.Color.CoreNeutral0})]),plagiarismLink:n.a.joinClasses([f.plagiarismLink,i.a.style({display:"block",color:r.Color.CoreBlue50})]),invisible:n.a.joinClasses([f.invisible,n.a.style({position:"absolute",visibility:"hidden"})])},E=e=>({position:"fixed",left:n.a.px(160),zIndex:-1,width:e});i.a.cssRule("[data-vertical-underline-start]:before",E(n.a.px(60)),{height:n.a.percent(100),borderRight:`${n.a.px(4)} solid`,content:"' '","-webkit-print-color-adjust":"exact !important"}),i.a.cssRule("[data-vertical-underline-body]",E(n.a.px(60))),i.a.cssRule("[data-vertical-underline-body]:after",E(n.a.px(60)),{height:n.a.percent(100),borderRight:`${n.a.px(4)} solid`,background:r.Color.CoreNeutral0,content:"' '","-webkit-print-color-adjust":"exact !important"}),i.a.cssRule("[data-vertical-underline-index]",y,E(n.a.px(55)),{height:"inherit",backgroundColor:r.Color.CoreNeutral0,textAlign:"right",fontSize:n.a.px(h),lineHeight:n.a.px(h),"-webkit-print-color-adjust":"exact !important"}),i.a.cssRule("[data-vertical-underline-index]:before",{display:"block",boxSizing:"border-box",width:n.a.px(65),height:n.a.px(6),borderTop:`${n.a.px(6)} solid ${r.Color.CoreNeutral0}`,content:"' '","-webkit-print-color-adjust":"exact !important"}),i.a.cssRule("[data-vertical-underline-end]:after",{position:"fixed",left:0,zIndex:-1,display:"block",width:n.a.px(229),height:n.a.percent(100),background:r.Color.CoreNeutral0,content:"' '","-webkit-print-color-adjust":"exact !important"})},BBZl:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a("ERkP"),i=a("vOOZ"),r=a("D9EC"),s=a("6gXa"),o=a("ps/9"),l=a("D6Vf"),c=a("zR/0"),d=a("D8Xd"),p=a("P+uJ"),u=a("Z5Rd");const m=({manager:e,views:t,onNotificationClose:a=r.l,theme:s={}})=>{const o=function(e,t,a={}){return i=>{const r=e[i.type],s=e=>()=>{i.actions.next(e)};return i.metadata.viewType===p.a.ViewType.standard?n.createElement(u.b.Wrapper,{key:i.id,notification:i,onClose:()=>{i.actions.next("closedByUser"),t(i)},theme:a},r(i,s)):n.createElement(n.Fragment,{key:i.id},r(i,s))}}(t,a,s.view),m=void 0!==s.grid?Object.assign({},S,s.grid):S,g=e.state.view(e=>e.filter(h(p.a.Position.bottomLeft))),f=e.state.view(e=>e.filter(h(p.a.Position.bottomRight))),b=e.state.view(e=>e.filter(h(p.a.Position.top)));return n.createElement(i.a.div,{className:m.container},c.a.combineLatestStatic(b,f,b,e=>e.some(d.a.isHighPriority)).pipe(c.a.distinctUntilChanged(),c.a.map(e=>e&&n.createElement("div",{className:m.overlay},n.createElement(l.b,{positionType:"absolute",key:"notificationOverlay",preventClose:!0,overlayType:"light",alignment:"top-center",animate:!0,theme:{content:v.overlayContent,contentFaded:v.overlayContentFaded}})))),n.createElement(i.a.div,{className:m.bottomLeft},g.view(e=>e.map(o))),n.createElement(i.a.div,{className:m.bottomRight},f.view(e=>e.map(o))),n.createElement(i.a.div,{className:m.top},b.view(e=>e.map(o))))};function h(e){return t=>t.metadata.position===e}const g={position:"fixed",top:0,left:0,zIndex:o.n,width:s.a.percent(100),height:s.a.percent(100),pointerEvents:"none"},f={position:"absolute",zIndex:o.n,display:"flex",flexDirection:"column",width:s.a.rem(27),pointerEvents:"auto",alignItems:"flex-end"},b={right:s.a.rem(o.c),bottom:s.a.rem(1.5)},y={bottom:s.a.rem(1.5),left:s.a.rem(2)},C={transition:"transform .1s",transformOrigin:"center"},v=s.a.stylesheet({notificationContainer:[g],notificationWrapper:[f],bottomRightNotificationWrapper:[f,b],bottomLeftNotificationWrapper:[f,y],topNotificationWrapper:[f,{top:0,right:0,left:0,margin:"0 auto"}],overlayContentBase:[C],overlayContent:[C,{transform:"none"}],overlayContentFaded:[C,{transform:"scale(.95)"}]}),S={container:v.notificationContainer,bottomLeft:v.bottomLeftNotificationWrapper,bottomRight:v.bottomRightNotificationWrapper,top:v.topNotificationWrapper}},BM24:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a("ERkP"),i=a("vOOZ"),r=a("9NHN"),s=a("nnns"),o=a("BugA"),l=a("GUi3"),c=a("6gXa"),d=a("TYHi");const p=({onClick:e,isActive:t,className:a})=>n.createElement(i.a.div,Object.assign({},Object(r.c)(u.allAlertsBtnContainer,a)),n.createElement(s.a,{name:"lens-all-alerts",styleType:o.Typography.Type.Base,className:c.a.joinClasses([u.allAlertsBtn,d.outcomeBtn]),active:t,onClick:e},l.a.Info.allAlerts.title)),u=c.a.prefixedStylesheet("allAsuggestionsBtn",{allAlertsBtnContainer:[{position:"relative"}],allAlertsBtn:[{marginBottom:c.a.important(0)}]})},BeBM:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"i",(function(){return i})),a.d(t,"f",(function(){return r})),a.d(t,"j",(function(){return s})),a.d(t,"a",(function(){return o})),a.d(t,"l",(function(){return C})),a.d(t,"e",(function(){return v})),a.d(t,"d",(function(){return S})),a.d(t,"k",(function(){return E})),a.d(t,"h",(function(){return w})),a.d(t,"g",(function(){return k})),a.d(t,"b",(function(){return _}));var n,i,r,s,o,l=a("GRZr"),c=a("OA+g"),d=a("I7vG"),p=a("xlCj"),u=a("lrqh"),m=a("D9EC"),h=a("6fbX"),g=a("hoSD"),f=a("GUi3"),b=a("zR/0"),y=a("kFFO");!function(e){e.forceText="forceText",e.forceSidebar="forceSidebar"}(n||(n={})),function(e){e.lensview="lensview",e.advanced="advanced",e.plagiarism="plagiarism",e.draftAI="draftAI",e.closed="closed"}(i||(i={})),function(e){e.active="active",e.persistent="persistent",e.abstract="abstract"}(r||(r={})),function(e){function t(e){return Object(d.pipe)(e.cardIndex,u.g.chain(t=>e.items.getAt(t)))}e.getActiveItem=t,e.getActiveItemOfType=function(e){return Object(c.flow)(t,u.g.filter(e))}}(s||(s={})),function(e){e.withFilter=e=>t=>(a,n)=>t(a,Object(m.b)(e,n)),e.compose=function(e){return(t,a)=>Object(l.fold)(Object(l.getEndomorphismMonoid)())(e.map(e=>e(t,a)))}}(o||(o={}));const C=e=>"withPriorityList"in e&&e.withPriorityList;class v{constructor(e){this._data=e}static create(e){return new v(e)}get alertSource(){return this._data.alertSource}get switchOrder(){return this._data.switchOrder}get currentLens(){return this._data.currentLens}patch(e){return new v(Object.assign(Object.assign({},this._data),e))}hashCode(){let e=7;return e=31*(e=31*(e=31*e+Object(y.b)(this.alertSource))+Object(y.b)(this.switchOrder))+this.currentLens.hashCode()}equals(e){return this.alertSource===e.alertSource&&this.switchOrder===e.switchOrder&&this.currentLens.equals(e.currentLens)}}var S;!function(e){function t(e,t,a){return n=>{switch(n.currentLens.kind){case r.active:return e(n);case r.persistent:return t(n);case r.abstract:return a(n);default:return Object(h.d)(n.currentLens)}}}let a,s,o,l;function m(e){return e.currentLens.kind===r.persistent}function y(e){return f.a.isOutcomeId(e.currentLens.id)||f.a.isMainLens(e.currentLens.id)||e.currentLens.id===f.a.SpecialId.PredictionTakeaways||e.currentLens.id===f.a.SpecialId.PredictionEmogenie}e.withCardLensSnapshot=(e,t)=>a=>{const n=a.currentLens.items.size>50,i=Object(d.pipe)(a.currentLens.cardIndex,u.g.getOrElse(()=>0)),[r,s]=n?[Math.max(i-25,0),i+25]:[0,50];return{alertSource:a.alertSource,switchOrder:a.switchOrder,lens:{id:a.currentLens.id,card:Object(d.pipe)(t(a.currentLens),u.g.map(e)),items:a.currentLens.items.values().slice(r,s).map(e),sample:n}}},e.snapshot=(a,n)=>t(e.withCardLensSnapshot(a,n),e.withCardLensSnapshot(a,n),e=>({alertSource:e.alertSource,switchOrder:e.switchOrder,lens:{id:e.currentLens.id,kind:e.currentLens.kind}})),e.genericMapper=t,e.mapper=e=>t(e,e,()=>u.g.none),e.getActiveItem=t=>e.mapper(({currentLens:e})=>t(e)),e.getActiveAlertHighlight=t=>Object(c.flow)(e.getActiveItem(t),u.g.map(e=>({alert:e.activeAlert,highlightIndex:e.activeHighlightIndex}))),e.getActiveAlert=t=>Object(c.flow)(e.getActiveItem(t),u.g.map(e=>e.activeAlert)),e.getLens=e.mapper(({currentLens:e})=>u.g.some(e)),function(e){e.mapper=function(e,t){return a=>t[e(a)](a)}}(a=e.Items||(e.Items={})),e.is=function(e){return t=>t.currentLens.id===e},e.isLensview=function(e){return e.currentLens.type===i.lensview},e.isPersistent=m,e.hasCards=function(e){return e.currentLens.kind===r.active||m(e)},e.hasItems=function(e){return e.currentLens.kind===r.active||e.currentLens.kind===r.persistent},e.hasSuccess=y,e.isWithPriorityList=function(e){return y(e)&&C(e.currentLens)},e.isForceSidebar=t=>(e.isLensview(t)||t.currentLens.type===i.plagiarism)&&t.alertSource===n.forceSidebar,e.isSidebarOpened=t=>!e.is(f.a.SpecialId.Closed)(t),function(e){e.defaultFilter=g.e.pick("alertHighlight")}(s=e.FocusFirstFilter||(e.FocusFirstFilter={})),function(e){e.getLens=()=>p.a.create(e=>e.currentLens,(e,t)=>t.patch({currentLens:e})),e.getLensWithItems=()=>p.a.create(e=>e.currentLens,(e,t)=>t.patch({currentLens:e}))}(o=e.Prism||(e.Prism={})),function(e){let t,a,n,i,r,s,o,l;!function(e){e.SwitchLens="SwitchLens",e.SwitchAlert="SwitchAlert",e.Applicator="Applicator",e.ItemsApplicator="ItemsApplicator"}(t=e.Type||(e.Type={})),function(e){let a;e.create=function(e){return{type:t.Applicator,source:e}},function(e){e.identity=e=>e,e.override=e=>()=>e,e.empty=b.a.EMPTY}(a=e.Source||(e.Source={}))}(a=e.Applicator||(e.Applicator={})),function(e){let a;e.create=function(e){return{type:t.ItemsApplicator,source:e}},function(e){e.identity=()=>e=>e,e.override=e=>()=>e,e.empty=b.a.EMPTY}(a=e.Source||(e.Source={}))}(n=e.ItemsApplicator||(e.ItemsApplicator={})),function(e){e.create=function(e){return{type:t.SwitchAlert,source:e}}}(i=e.SwitchAlert||(e.SwitchAlert={})),function(e){e.create=function(e){return{type:t.SwitchLens,source:e}}}(r=e.SwitchLens||(e.SwitchLens={})),function(e){e.delayed=e=>t=>{const a=b.a.delayWhen(()=>b.a.of(void 0),e),n=Object.assign(Object.assign({},t.what),{source:a(t.what.source)});return Object.assign(Object.assign({},t),{what:n})}}(s=e.Producer||(e.Producer={})),function(e){e.noFocus="noFocus",e.unFocus="unFocus",e.focusFirst="focusFirst",e.focusNext="focusNext",e.focusAlert="focusAlert"}(o=e.FocusBehaviorType||(e.FocusBehaviorType={})),function(e){e.noFocus={kind:o.noFocus},e.unFocus={kind:o.unFocus},e.focusNext={kind:o.focusNext},e.focusFirst={kind:o.focusFirst},e.focusAlert=e=>({kind:o.focusAlert,alertHighlight:e})}(l=e.FocusBehavior||(e.FocusBehavior={}))}(l=e.Effect||(e.Effect={}))}(v||(v={})),function(e){e.defaultOptions={focusBehavior:v.Effect.FocusBehavior.focusFirst}}(S||(S={}));const E=e=>t=>t.id===e.id;var w,k,_;!function(e){e[e.allAlerts=0]="allAlerts",e[e.priorityAlertsOnly=1]="priorityAlertsOnly"}(w||(w={})),function(e){e.getDefault=()=>w.allAlerts}(k||(k={})),function(e){e.skip=c.constFalse,e.force=c.constTrue,e.proceed=e=>e.positionState.animationInProgress}(_||(_={}))},BoSw:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("OA+g"),r=a("lrqh"),s=a("uukV"),o=a("zR/0");!function(e){let t,a;!function(e){let t;!function(e){e[e.ERROR=0]="ERROR",e[e.EMPTY=1]="EMPTY",e[e.LOADING=2]="LOADING",e[e.SHORT_CONTENT=3]="SHORT_CONTENT",e[e.READY=4]="READY"}(t=e.Type||(e.Type={}))}(t=e.State||(e.State={})),function(e){e.Mock=class{constructor(e={type:t.Type.EMPTY},a=r.g.some(new s.a.ViewModel.Mock)){this.statisticsState=e,this.reportViewModel=a,this.state=o.a.of(this.statisticsState),this.onModalClose=i.constVoid}}}(a=e.ViewModel||(e.ViewModel={}))}(n||(n={}))},BwCH:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("zR/0");class i{static copy(e,t){this._clearSelection();const a=this._createHiddenSpan(e);return this.select(a),this._copy(e,t).then(()=>{a.parentElement.removeChild(a)}).catch(e=>{throw a.parentElement.removeChild(a),e})}static select(e){if(window.getSelection&&document.createRange){const t=window.getSelection(),a=document.createRange();a.selectNodeContents(e),t.removeAllRanges(),t.addRange(a)}else if("createTextRange"in document.body&&"selection"in document){const e=document.body.createTextRange();e.moveToElementText(this),e.select()}}static _clearSelection(){const e=window.getSelection?window.getSelection():document.selection;"removeAllRanges"in e?e.removeAllRanges():"empty"in e&&e.empty()}static _createHiddenSpan(e){const t=document.createElement("span");return t.setAttribute("style",["all: unset","position: fixed","top -999px","left -999px","opacity: 0","background transparent","white-space: pre","-webkit-user-select: text","-moz-user-select: text","-ms-user-select: text","user-select: text"].join(";")),t.textContent=e,document.body.appendChild(t),t}static _copy(e,t){return new Promise((a,n)=>{try{(t?window.clipboardData.setData("text",e):document.execCommand("copy"))?a():n(new Error("Copy API doesn't work"))}catch(e){n(e)}})}}i.copyApiAvailable=new n.a.BehaviorSubject(!0);try{n.a.fromEvent(window,"click").pipe(n.a.first()).subscribe(()=>{document.queryCommandSupported("copy")||i.copyApiAvailable.next(!1)})}catch(e){i.copyApiAvailable.next(!1)}},"By/D":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("ERkP"),r=a("lrqh"),s=a("hoSD"),o=a("PrA7"),l=a("zR/0"),c=a("gy42");!function(e){let t,a,n;!function(e){e.nextLevel=(e,t)=>({rect:e,level:t+1})}(t=e.State||(e.State={})),function(e){e.empty={top:0,bottom:0}}(a=e.Padding||(e.Padding={})),function(e){e.root="root",e.inherit="inherit"}(n=e.ContainerType||(e.ContainerType={})),e.withViewportContainer=function(t,a){return class extends i.Component{constructor(){super(...arguments),this._viewportEl=new l.a.BehaviorSubject(r.g.none),this._onMount=e=>{this._viewportEl.next(r.g.fromNullable(e)),this.props.onMount&&e&&this.props.onMount(e)}}render(){const{name:r,children:o}=this.props,d=this._viewportEl.pipe(l.b.compact,l.a.switchMap(e=>l.a.mergeStatic(c.a.windowResize,l.a.fromEvent(e,"transitionend").pipe(l.a.filter(t=>t.target===e)),l.a.of(!0).pipe(l.a.switchMap(c.b.Scheduler.rafScheduler))).pipe(l.a.mapTo(e),l.a.startWith(e),l.a.map(s.c.Rect.fromEl)))),p=a.type===n.root?e.RootVirtualContainer:e.InheritVirtualContainer;return i.createElement(t,Object.assign({},this.props,{onMount:this._onMount,name:r}),i.createElement(p,{viewport:d,name:r},o))}}},e.RootVirtualContainer=({viewport:t,viewportPadding:a=l.a.of(e.Padding.empty),name:n,children:r})=>{const s=i.useContext(e.Context);return i.createElement(e.Context.Provider,{key:p(n),value:l.a.combineLatestStatic(t,a,d).pipe(l.a.withLatestFrom(s.pipe(l.a.map(e=>e.level)),e.State.nextLevel),l.a.shareReplay({bufferSize:1,refCount:!0}))},r)},e.InheritVirtualContainer=({viewport:t,viewportPadding:a=l.a.of(s.c.Rect.empty),name:n,children:c})=>{const u=i.useContext(e.Context);return i.createElement(e.Context.Provider,{key:p(n),value:l.a.combineLatestStatic(u.pipe(l.a.map(e=>e.rect)),l.a.combineLatestStatic(t||u.pipe(l.a.map(e=>e.rect)),a,d),s.c.Rect.intersection).pipe(l.a.map(r.g.getOrElse(()=>(o.Monitoring.Logging.getLogger("InheritVirtualContainer").warn("Got an empty rect for inherit viewport",{name:n}),s.c.Rect.empty))),l.a.withLatestFrom(u.pipe(l.a.map(e=>e.level)),e.State.nextLevel),l.a.shareReplay({bufferSize:1,refCount:!0}))},c)};const u=l.a.defer(()=>c.a.windowResize.pipe(l.a.mapTo(document.body),l.a.startWith(document.body),l.a.map(s.c.Rect.fromEl),l.a.map(e=>({rect:e,level:0})))).pipe(l.a.shareReplay({bufferSize:1,refCount:!0}));e.Context=i.createContext(u)}(n||(n={}));const d=(e,t)=>({top:e.top+t.top,bottom:e.bottom-t.bottom,height:e.height-t.top-t.bottom,left:e.left,right:e.right,width:e.width}),p=e=>`viewportProvider${s.f.camelize(e)}`},C1OD:function(e,t,a){e.exports=a.p+"files/39a510c28179c25e0e4f65524d8d5394/inter-light.woff"},C53H:function(e,t,a){"use strict";a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return h}));var n=a("a5W6"),i=a("OA+g"),r=a("I7vG"),s=a("24uI"),o=a("94k3"),l=a("lrqh"),c=a("dE97"),d=a("JSz4"),p=a("KBak"),u=a("f3nf");const m=Object(i.flow)((function(e){return t=>Object(r.pipe)(t.alternatives,b(e,{isFullSentence:c.f.isFullSentence(t.cardType),isSmartPhrases:c.f.isSmartPhrases(t.cardType),isShortenIt:c.f.isShortenIt(t.cardType),isToneAI:c.f.isToneAI(t.cardType)}),l.b.chain(u.a.create({drilldown:t.drilldown})))}),d.a);const h=e=>Object(i.flow)(b(e,{isFullSentence:!1,isSmartPhrases:!1,isShortenIt:!1,isToneAI:!1}),l.b.map(l.f.map(({ops:e,text:t})=>Object(r.pipe)(e,function(e){return Object(i.flow)(n.reduce({currPos:0,diff:[]},(t,a)=>(s.a.isDelete(a)?(t.diff.push({textChunk:e.substr(t.currPos,a.delete),type:a.type===o.a.AlternativeOperation.Type.Main||a.type===o.a.AlternativeOperation.Type.Important?p.a.Type.Delete:p.a.Type.Retain}),t.currPos+=a.delete):s.a.isInsert(a)?t.diff.push({textChunk:s.a.isInsertString(a)?a.insert:"",type:a.type===o.a.AlternativeOperation.Type.Main?p.a.Type.Insert:p.a.Type.Retain}):(t.diff.push({textChunk:e.substr(t.currPos,a.retain),type:p.a.Type.Retain}),t.currPos+=a.retain),t)),e=>e.diff)}(t),function(e){return t=>Object(r.pipe)(t,n.findFirst(t=>t.type===p.a.Type.Delete&&t.textChunk===e.trim()),l.g.map(e=>[e,{textChunk:Object(r.pipe)(t,n.reduce("",(t,a)=>p.a.NoInvert.eq.equals(a,e)?t:(t+=a.textChunk,t))),type:p.a.Type.Insert}]),l.g.getOrElse(()=>t))}(t),g,f))));function g(e){return Object(r.pipe)(e,n.reduceWithIndex([],(t,a,n)=>{const i=e[t-1];return void 0!==i&&p.a.isDelete(n)&&p.a.isInsert(i)?(a.push(i),a[t-1]=n):a.push(n),a}))}function f(e){return Object(r.pipe)(e,n.reduceWithIndex([],(t,a,n)=>{const i=e[t-1];return void 0!==i&&p.a.isInsert(n)&&p.a.isDelete(i)?(a[t-1]=Object.assign(Object.assign({},i),{invertedChunk:n.textChunk}),a.push(Object.assign(Object.assign({},n),{invertedChunk:i.textChunk}))):a.push(Object.assign(Object.assign({},n),{invertedChunk:""})),a}))}function b(e,t){const a=Object(i.flow)(e,e=>e.delta.reduce((e,t)=>s.a.isInsertString(t)?e+t.insert:e,""));return Object(i.flow)(function(e,{isFullSentence:t,isSmartPhrases:a,isShortenIt:i,isToneAI:s}){return c=>Object(r.pipe)(c,n.filterMap(n=>Object(r.pipe)(n.type,l.g.map(r=>{if(o.a.Alternative.hasOptionalContext(n.ops)){const[l,...c]=n.ops,d=o.a.AlternativeOperation.length(l);return{text:e(d,n.lengthAffected-d),ops:c,type:r,isFullSentence:t,isSmartPhrases:a,isShortenIt:i,isToneAI:s}}return{text:e(0,n.lengthAffected),ops:n.ops,type:r,isFullSentence:t,isSmartPhrases:a,isShortenIt:i,isToneAI:s}}))),l.f.fromArray)}(a,t),l.b.fromOption(()=>new Error("Alternative array is empty")))}},C7EH:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("U75S"),r=a("Arv5"),s=a("OA+g"),o=a("66iv"),l=a("bYZB"),c=a("lrqh"),d=a("D9EC"),p=a("6fbX"),u=a("PrA7"),m=a("dE97"),h=a("UEGg"),g=a("O6HF"),f=a("NW9S"),b=a("zR/0"),y=a("gy42"),C=a("Z0Em"),v=a("kFFO"),S=a("TC4P"),E=a("973I"),w=a("4zjj");!function(e){e.id="BulkAcceptItemId",e.Kind="BulkAcceptItem";const t=i.eb(c.c.fromEquals((e,t)=>e.id===t.id&&h.a.isBulkApplied(e)===h.a.isBulkApplied(t)));e.efficientAlertEq=c.c.fromEquals((e,a)=>e.length===a.length&&t.equals(e,a)),e.eqByAlerts=c.c.fromEquals((t,a)=>e.efficientAlertEq.equals(t.alerts,a.alerts)),e.isInAppliedState=e=>"applied"===e.visibilityState,e.isInVisibleState=e=>"visible"===e.visibilityState,e.isInUndoneState=e=>"undone"===e.visibilityState,e.isInInitialState=Object(d.p)(e.isInVisibleState,e.isInUndoneState),e.eq=c.c.fromEquals((t,a)=>e.eqByAlerts.equals(t,a)&&t.activeAlertIndex===a.activeAlertIndex&&t.hasMarkFocusable===a.hasMarkFocusable&&t.visibilityState===a.visibilityState),e.visualStateEq=c.c.fromEquals((e,t)=>E.a.eq.equals(e.positionState,t.positionState)&&e.visibilityState===t.visibilityState),e.isBulkAcceptItem=function(t){return t.id===e.id},e.create=(e,t)=>(Object(p.g)(i.ob(e),"Cannot create BulkAcceptItem without bulk-acceptable alerts"),new k(e,C(e),E.a.empty,w.b.initial({type:"added",clockwise:!0}),t)),e.updateAlerts=(e,t)=>new k(t,"dismissed"===e.visibilityState?e.visibilityState:C(t),e.positionState,Object.assign(Object.assign({},e.visualState),{incomplete:!1}),e.renderOptions,e.hasMarkFocusable,Object(s.pipe)(c.g.fromNullable(t[e.activeAlertIndex]),c.g.map(()=>e.activeAlertIndex),c.g.getOrElse(()=>t.length-1))),e.changePosition=e=>t=>new k(e.alerts,e.visibilityState,t,e.visualState,e.renderOptions,e.hasMarkFocusable,e.activeAlertIndex),e.completeTransition=(e,t)=>new k(e.alerts,e.visibilityState,e.positionState,w.b.complete(e.visualState,t),e.renderOptions,e.hasMarkFocusable,e.activeAlertIndex),e.transitionTo=(e,t)=>new k(e.alerts,e.visibilityState,e.positionState,w.b.to(e.visualState,t),e.renderOptions,e.hasMarkFocusable,e.activeAlertIndex),e.dismiss=e=>new k(e.alerts,"dismissed",e.positionState,w.b.to(e.visualState,{type:"removed",clockwise:!0}),e.renderOptions);const a=Object(o.e)(r.X)(),n=a.composeLens(o.c.fromPath()(["state"])),g=a.composeLens(o.c.fromProp()("ignoreAllowed"));e.undo=e=>new k(Object(s.pipe)(e.alerts,n.set({type:m.a.State.Type.REGISTERED,checkingState:m.a.CheckingState.CHECKING}),g.set(!1)),"undone",e.positionState,Object.assign(Object.assign({},e.visualState),{incomplete:!1}),e.renderOptions),e.select=(e,t)=>Object(s.pipe)(t,c.g.filter(t=>t.id===e.id),c.g.orElse(Object(s.pipe)(e,c.g.fromPredicate(e=>"focused"===e.visualState.transition.type))),c.g.fold(()=>{const a=E.a.invalidateHeight(e.positionState),n={type:"focused",clockwise:!0},i=Object(s.pipe)(t,c.g.fold(()=>w.b.initial(n),()=>w.b.to(e.visualState,n)));return new k(e.alerts,e.visibilityState,a,i,e.renderOptions)},()=>e)),e.unselect=(e,t)=>Object(s.pipe)(t,c.g.filter(t=>t.id===e.id),c.g.orElse(Object(s.pipe)(e,c.g.fromPredicate(e=>"rendered"===e.visualState.transition.type))),c.g.fold(()=>{const t=E.a.invalidateHeight(e.positionState),a=S.a.isHidden(e)?e.visualState:w.b.to(e.visualState,{type:"rendered",clockwise:!0});return new k(e.alerts,e.visibilityState,t,a,e.renderOptions)},()=>e)),e.selectAlert=e=>t=>{const a=t.alerts.findIndex(t=>t.id===e);return a<0&&u.Monitoring.Logging.getLogger("BulkAcceptItem").error("Tried to select non-existing alert"),new k(t.alerts,t.visibilityState,t.positionState,t.visualState,t.renderOptions,-1!==a,-1!==a?a:0)},e.hasAlert=e=>t=>void 0!==t.alerts.find(t=>t.id===e),e.moveToViewportTop=(e,t)=>a=>e.setCardPosition(a.id,!1,!0,f.b.FromWindowTop.ISO.wrap(t)).pipe(b.a.switchMapTo(b.a.NEVER)),e.alignMarkToBulkItem=(e,t)=>({suggestedPosition:a})=>n=>{const i={alert:n.activeAlert,highlightIndex:n.activeHighlightIndex};return b.a.defer(()=>b.a.of(e.getMarkAlertPosition(i))).pipe(b.a.map(c.g.map(Object(s.flow)(f.b.FromWindowTop.ISO.modify(e=>e-f.b.FromWindowTop.ISO.unwrap(a)),f.b.FromWindowTop.ISO.unwrap))),b.b.compact,b.a.switchMap(t=>e.moveAlertHighlightInViewport(i,a,l.a.none).pipe(b.a.mapTo(t))),b.a.switchMap(e=>{const a=c.b.unsafeGet(t.getCardSuggestedPositionInViewport(n.id,!1,c.g.none,"cardContentTop")),i=f.b.FromWindowTop.ISO.modify(f.a.concatC(e))(a.top),r=t.isAboveViewportTop(i)?f.b.FromWindowTop.ISO.wrap(a.contentOffset):i;return t.setCardPosition(n.id,!1,!1,r)}),b.a.mapTo(y.b.voidValue),b.a.catchError(e=>(u.Monitoring.Logging.root.getLogger("AlignmentViewModel").error("Cannot align mark to suggested position of BulkAcceptItem",e),b.a.EMPTY)),b.a.share())};const C=Object(s.flow)(i.ib,c.g.filter(h.a.isBulkApplied),c.g.fold(()=>"visible",()=>"applied"))}(n||(n={}));class k{constructor(e,t,a,i,r,s=!1,o=0){this.alerts=e,this.visibilityState=t,this.positionState=a,this.visualState=i,this.renderOptions=r,this.hasMarkFocusable=s,this.activeAlertIndex=o,this.kind=n.Kind,this.id=n.id,this.activeHighlightIndex=0,this.removedAlertsIds=new Set,this.activeAlert=e[this.activeAlertIndex];const l=e.map(e=>e.getHighlightRanges()[0]);this.meta=new g.a.Impl(C.a.fromRatio(this.activeAlert.progress),this.activeAlert.explanation,g.a.CheckingState.Idle,l,!1)}equals(e){return n.eq.equals(this,e)}hashCode(){return Object(v.b)(this.alerts.map(e=>e.id).join())}}},CFZe:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return n}));var n,i=a("D57K"),r=a("LNSM"),s=a("zR/0"),o=a("gy42"),l=a("D9EC");class c{constructor(e,t,a){this._documentModel=e,this._events=t,this._plagiarismCapiClient=a,this._plagiarismCheckingState=this._documentModel.asyncChecksState.lens("plagiarism"),this.plagiarismCheckedInSession=this._plagiarismCheckingState.view(e=>"full"!==e),this.checkingState=this._plagiarismCheckingState,this._subs=[],this._isEnabled=r.a.create(!1),this._enable=()=>{this._plagiarismCheckingState.modify(e=>"idle"===e?"checking":e),this._documentModel.extraSettings.checkedPlagiarism=!0,this._plagiarismCapiClient.enablePlagiarismSearch()},this._disable=()=>{this._plagiarismCapiClient.disablePlagiarismSearch()},this._subs.push(this._isEnabled.pipe(s.a.switchMap(o.b.orEmpty(this._events.pipe(s.a.filter(e=>"session_started"===e.kind))))).subscribe(this._enable))}enable(){return this._isEnabled.set(!0),this._enable(),()=>{this._isEnabled.set(!1),this._disable()}}recheck(){return Object(i.__awaiter)(this,void 0,void 0,(function*(){const e=!this._isEnabled.get();e&&this._enable(),yield this._plagiarismCheckingState.pipe(s.a.filter(e=>"idle"===e),s.a.first()).toPromise(),e&&this._plagiarismCapiClient.disablePlagiarismSearch()}))}dispose(){this._subs.forEach(e=>e.unsubscribe())}}!function(e){e.Mock=class{constructor(){this.enable=()=>l.l,this.recheck=()=>new Promise(l.l),this.dispose=l.l,this.checkingState=r.a.create("idle"),this.plagiarismCheckedInSession=r.a.create(!0)}}}(n||(n={}))},CPFL:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("LNSM"),r=a("lrqh"),s=a("6fbX"),o=a("GUi3");!function(e){e.Mock=class{constructor(e={}){this._previewConfig=e}get lensPreviews(){return Object.entries(this._previewConfig).reduce((e,[t,a])=>{const n=this.getLens(t).get();return e[t]=Object.assign(Object.assign({},o.a.Info.base),{logo:r.g.none,id:t,title:n.title,description:n.description,status:a.status,progress:a.progress,isUnavailable:a.isUnavailable}),e},{})}getLens(e){const t=t=>t.lensId===e;if(o.a.isOutcomeId(e))return i.a.create(new o.a.LensImpl(o.a.Info.createOutcome(e),o.a.Meta.group.empty,t));switch(e){case o.a.SpecialId.AllAlerts:return i.a.create(new o.a.LensImpl(o.a.Info.allAlerts,o.a.Meta.group.empty,t));case o.a.SpecialId.Premium:return i.a.create(new o.a.LensImpl(o.a.Info.premium,o.a.Meta.group.empty,t));case o.a.SpecialId.Plagiarism:return i.a.create(new o.a.LensImpl(o.a.Info.plagiarism,o.a.Meta.group.empty,t));case o.a.SpecialId.Priority:return i.a.create(new o.a.LensImpl(o.a.Info.priority,o.a.Meta.group.empty,t));case o.a.SpecialId.PredictionTakeaways:return i.a.create(new o.a.LensImpl(o.a.Info.predictionTakeaways,o.a.Meta.group.empty,t));case o.a.SpecialId.PredictionEmogenie:return i.a.create(new o.a.LensImpl(o.a.Info.predictionEmogenie,o.a.Meta.group.empty,t));case o.a.SpecialId.RealTimeProofit:return i.a.create(new o.a.LensImpl(o.a.Info.realTimeProofit,o.a.Meta.group.empty,t));default:return Object(s.d)(e)}}findLens(){return r.g.none}}}(n||(n={}))},CrFT:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return g}));var n,i=a("OA+g"),r=a("2Jhg"),s=a("LNSM"),o=a("R+r4"),l=a("zR/0"),c=a("lrqh"),d=a("hoSD"),p=a("PrA7"),u=a("0lfv");!function(e){function t(e){return"sending"===e.kind}e.isSendingState=function(e){return e.exists(t)},e.isSending=t}(n||(n={}));class m{constructor(e,t){this._doc=e,this.documentTitle=t,this._proofitStatisticsIO=r.c.async((e,t)=>{this._doc.getProofitStatistics().then(Object(i.flow)(c.b.fold(e=>Object(r.b)(Object(r.d)(e)),e=>e.status===o.a.StatisticsStatus.Success?Object(r.i)(Object(r.g)(e)):Object(r.b)(Object(r.d)(new Error(e.status)))),t)).catch(e=>t(Object(r.b)(Object(r.d)(e))))}).memoizeOnSuccess(),this.state=s.a.create(r.e),this.jobDetails=s.a.create(r.e)}getPlans(){return this._doc.getProofitPlans().then(c.b.fold(e=>Promise.reject(e),e=>e.status===o.a.PlanStatus.Forbidden?Promise.reject({status:o.a.PlanStatus.Forbidden}):Promise.resolve(e)))}getStatistics(){return l.a.from(this._proofitStatisticsIO.run()).pipe(l.a.map(e=>e.toOption()))}placeOrder(e,t,a,n){return this.state.set(Object(r.h)({kind:"sending"})),c.l.toPromise(this._doc.placeProofitOrder({turnaround:e.turnaround,tier:e.tier,userInputs:t,priceOfferId:a},u.a.fromOption(n))).then(e=>this._updateStatus(e.status)).catch(e=>{p.Monitoring.Logging.getLogger("ProofitModel").warn("Error placing proofit order",e),this.state.set(Object(r.h)({kind:"error",errorType:"unknown"}))})}updateState(e){this._updateStatus(e.status),this.jobDetails.set(Object(r.h)({startTime:e.submitted,dueTime:e.due}))}_updateStatus(e){switch(e){case o.a.JobStatus.building:break;case o.a.JobStatus.newJob:this.state.set(Object(r.h)({kind:"submitted"}));break;case o.a.JobStatus.completed:this.state.set(Object(r.h)({kind:"finished"}));break;case o.a.JobStatus.cancelled:this.state.set(Object(r.h)({kind:"cancelled"}));break;case o.a.JobStatus.emptyDocument:this.state.set(Object(r.h)({kind:"error",errorType:"emptyDocument"}));break;case o.a.JobStatus.duplicate:this.state.set(Object(r.h)({kind:"error",errorType:"alreadyProofread"}));break;case o.a.JobStatus.complexInternalStructure:this.state.set(Object(r.h)({kind:"error",errorType:"complexInternalStructure"}));break;case o.a.JobStatus.paymentError:this.state.set(Object(r.h)({kind:"error",errorType:"payment"}));break;case o.a.JobStatus.forbidden:case o.a.JobStatus.unknown:default:this.state.set(r.e)}}}const h=(e,t,a)=>({getProofitPlans:()=>Promise.resolve(c.b.right({status:o.a.PlanStatus.Success,turnaroundOptions:[{enabled:!0,label:"24 hours",minutesToProcess:1440,perWord:.14,price:140,turnaround:o.a.PlanType.TwentyFourHours,requirePaymentCheck:!1,tier:o.a.PlanTier.Base},{enabled:!0,label:"3 hours",minutesToProcess:180,perWord:.18,price:180,turnaround:o.a.PlanType.ThreeHours,requirePaymentCheck:!0,tier:o.a.PlanTier.Base},{enabled:!0,label:"30 minutes",minutesToProcess:30,perWord:.3,price:300,turnaround:o.a.PlanType.Instant,requirePaymentCheck:!1,tier:o.a.PlanTier.Base}],clarityTurnaroundOptions:[{enabled:!0,label:"24 hours",minutesToProcess:1440,perWord:.14,price:140,turnaround:o.a.PlanType.TwentyFourHours,requirePaymentCheck:!1,tier:o.a.PlanTier.Clarity},{enabled:!0,label:"3 hours",minutesToProcess:180,perWord:.18,price:180,turnaround:o.a.PlanType.ThreeHours,requirePaymentCheck:!0,tier:o.a.PlanTier.Clarity}],words:100,userInputs:{nativeLanguage:c.g.none,dialect:c.g.none,quotationType:c.g.none,spaceType:c.g.none},priceOfferId:o.a.PriceOfferId.create("424242")})),placeProofitOrder:()=>()=>new Promise(t=>{const n=d.d.Local.Timestamp.now(),i=d.d.Local.Timestamp.toLocal(d.d.Local.Timestamp.add(n,3*d.d.MS_IN_HOUR)),r={submitted:d.d.Local.Timestamp.toLocal(n),corrections:5,due:i,price:666,name:"",completed:c.g.none,id:1,status:o.a.stringToJobStatus(e),is_dox_applied:!0};setTimeout(()=>t(c.b.right(r)),0),setTimeout(()=>a(r),500)}),getProofitStatistics:()=>Promise.resolve(c.b.right(t))});var g;!function(e){e.Mock=class extends m{constructor(e=o.a.JobStatus.newJob,t=c.g.none){super(h(e,{status:o.a.StatisticsStatus.Success,lastCompletedJobDate:t},e=>{this.updateState(e)}),s.a.create(""))}}}(g||(g={}))},CxAE:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("ERkP"),r=a("I7vG"),s=a("9NHN"),o=a("vOOZ"),l=a("lrqh"),c=a("6gXa"),d=a("wOnQ"),p=a("IVzZ"),u=a("8P+J"),m=a("BugA"),h=a("0A/6"),g=a("oWeJ");!function(e){e.BundleMini=({card:e,actions:t})=>i.createElement(h.a.Mini,Object.assign({},Object(s.c)(g.b.wrapper,g.b.bundleContainer),{actions:t,cardId:e.id,getActiveAlert:()=>e.alerts[0],counter:i.createElement(m.SmallLight,{className:g.b.alertsCounter},e.alerts.length),hideDot:!0}),i.createElement(o.a.div,{className:b.content},i.createElement(u.b,{id:e.activeAlert.newToneEmojiId,className:b.emoji}),i.createElement("div",{className:g.b.highlightedText},p.a.bundleTitle(e)))),e.Full=e=>Object(r.pipe)(e.card.transform,l.g.filter(d.j.isToneAI),l.g.fold(()=>null,()=>null))}(n||(n={}));const f={width:c.a.rem(1),height:c.a.rem(1),marginRight:c.a.rem(.5)},b=c.a.stylesheet({content:[{display:"flex",alignItems:"center"}],emoji:[f]})},"D/5U":function(e,t,a){"use strict";a.d(t,"f",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"e",(function(){return E})),a.d(t,"d",(function(){return O})),a.d(t,"a",(function(){return F})),a.d(t,"b",(function(){return D}));var n=a("6gXa"),i=a("ps/9"),r=a("3bJT");const s="linear",o=n.a.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),l=n.a.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),c=n.a.keyframes({from:{opacity:1,transform:"translateY(0) scaleY(1)"},to:{opacity:0,transform:"translateY(-75%) scaleY(.5)"}}),d=n.a.keyframes({"0%":{opacity:0,transform:"scaleY(0)"},"100%":{opacity:1,transform:"scaleY(1)"}}),p=n.a.keyframes({"0%":{opacity:0,transform:"scaleY(.2) translateY(-50%)"},"80%":{opacity:1,transform:"scaleY(.8) translateY(0%)"},"100%":{opacity:1,transform:"scaleY(1)"}}),u=n.a.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"100%":{opacity:0,transform:"scaleY(0)"}}),m=n.a.keyframes({"0%":{opacity:0,transform:"scale(.8)"},"100%":{opacity:1,transform:"scale(1)"}}),h=n.a.keyframes({"0%, 100%":{opacity:0}}),g=n.a.keyframes({"0%, 59%":{opacity:0},"60%, 100%":{opacity:1}}),f=n.a.keyframes({"0%":{opacity:0},"80%":{opacity:0},"100%":{opacity:1}}),b=n.a.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"59%":{opacity:1},"60%":{opacity:0},"100%":{opacity:0,transform:"scaleY(0)"}}),y=n.a.keyframes({"0%":{opacity:1},"30%, 100%":{opacity:0}}),C=n.a.keyframes({"0%":{transform:"scaleY(.3)"},"100%":{transform:"scaleY(1)"}}),v=n.a.keyframes({"0%, 20%":{opacity:0},"100%":{opacity:1}}),S={position:"relative",margin:`${n.a.rem(.5)} ${n.a.rem(2)} ${n.a.rem(.5)} 0`,userSelect:"none"},E={position:"absolute",width:n.a.percent(100),pointerEvents:"none"},w={opacity:0,animation:`${o} ${n.a.seconds(i.d/4/1e3)} ${s} ${n.a.seconds(i.d/1e3)} forwards`},k={transformOrigin:"top",animation:`${l} ${n.a.seconds(i.d/1e3)} ${s} forwards`},_={transformOrigin:"bottom",animation:`${c} ${n.a.seconds(i.d/1e3)} ${s} forwards`},O={transformOrigin:"top",willChange:"contents"},A={animation:`${d} ${n.a.seconds(i.d/1e3)} ${s} forwards`},T={animation:`${p} ${n.a.seconds(i.d/1e3)} ${s} forwards`},x={animation:`${u} ${n.a.seconds(i.d/1e3)} ${s} reverse forwards`},I={animation:`${u} ${n.a.seconds(i.d/1e3)} ${s} forwards`},M={animation:`${m} ${n.a.seconds(i.d/1e3)} ${s} forwards`},j={animation:`${m} ${n.a.seconds(i.d/1e3)} ${s} reverse forwards`},L={transformOrigin:"top",animation:`${g} ${n.a.seconds(i.d/1e3)} ${s} forwards`,willChange:"contents",$nest:{[`& .${r.b.successWrapperSelector} > *`]:{animation:`${f} ${n.a.seconds(i.d/1e3)} ${s} forwards`}}},N={position:"absolute",width:n.a.percent(100),transformOrigin:"top",animation:`${b} ${n.a.seconds(i.d/1e3)} ${s} forwards`,pointerEvents:"none",$nest:{[`& .${r.b.fullCardSelector} > :not(.${r.b.alignButtonHiddenSelector})`]:{animation:`${y} ${n.a.seconds(i.d/1e3)} ${s} forwards`},[`& .${r.b.fullCardSelector} > .${r.b.alignButtonHiddenSelector}`]:{animation:`${h} ${n.a.seconds(i.d/1e3)} ${s} none`},[`& .${r.b.fullCardSelector}`]:{transform:`translateY(${n.a.rem(-1)})`}}},P={transformOrigin:"top",animation:`${C} ${n.a.seconds(i.d/1e3)} ${s} forwards`,willChange:"contents",$nest:{[`& .${r.b.fullCardSelector} > :not(.${r.b.alignButtonHiddenSelector})`]:{animation:`${v} ${n.a.seconds(i.d/1e3)} ${s} forwards`},[`& .${r.b.fullCardSelector} > .${r.b.alignButtonHiddenSelector}`]:{animation:`${h} ${n.a.seconds(i.d/1e3)} ${s} none`}}},F=n.a.stylesheet({wrapper:[S],animationWrapper:[{position:"relative"}],shade:[E],focused2renderedMain:[w],focused2renderedShade:[E,k],focused2renderedShadeClockwise:[E,_],rendered2focusedMainBase:[O],rendered2focusedMain:[O,A],rendered2focusedMainClockwise:[O,T],addedMain:[x],rendered2removedShade:[E,I],openedMain:[M],closedMain:[j],focused2successMain:[L],focused2successShade:[N],success2FocusedMain:[P]}),D=new Map([[l,F.focused2renderedShade],[c,F.focused2renderedShadeClockwise],[u,F.rendered2removedShade],[b,F.focused2successShade]])},DLWy:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return h}));var n,i=a("2Jhg"),r=a("LNSM"),s=a("QshB"),o=a("zR/0"),l=a("gy42"),c=a("BeBM"),d=a("D9EC"),p=a("6fbX"),u=a("vLzu"),m=a("DMXH");!function(e){e[e.Checking=0]="Checking",e[e.CheckingIn=1]="CheckingIn",e[e.CheckingOut=2]="CheckingOut",e[e.Idle=3]="Idle"}(n||(n={}));class h{constructor(e,t,a,n,s,l){this._state=e,this._lensState=t,this._documentModel=a,this._uploadVM=n,this._ded=s,this._features=l,this.loaderState=r.a.create(i.e),this._subs=[],this._isLocked=r.a.create(!0),this._loadingStateLock=o.a.combineLatestStatic(this._isLocked,this._uploadVM.state.pipe(o.a.startWith(u.a.State.idle)),(e,t)=>e||t!==u.a.State.idle).pipe(o.a.distinctUntilChanged()),this._subs.push(this._listenUploadingState(),this._listenProcessingState(),this._listenFullRecheckingState()),Object(d.r)("loader",(e,t,a)=>{this._state.set({text:i.f.of(e).filter(e=>e in m.a.TextType),lens:i.f.of(t).filter(e=>e in m.a.Type),navigation:i.f.of(a).filter(e=>e in m.a.Type)})})}init(){this._isLocked.set(!1)}_listenUploadingState(){return this._uploadVM.state.pipe(o.a.skip(1)).subscribe(e=>{this._state.set(e===u.a.State.idle?m.a.State.idle:m.a.State.loading)})}_listenProcessingState(){return this._ded.dontFreezeWhen(this._state.view(({text:e})=>e.nonEmpty()),"loader")}_listenFullRecheckingState(){const e=e=>e.filter(e=>e===m.a.Type.checkingIn||e===m.a.Type.checking).map(()=>m.a.Type.checkingOut),t=e=>e.kind===s.c.CheckingKind.Plagiarism||"full"!==e.type;return(e=>this._loadingStateLock.pipe(o.a.switchMap(l.b.orEmptyRight(e))))(this._lensState).pipe(o.a.switchMap(e=>{const a=this._documentModel.getCheckingForState(e),i=a.get(),r=c.e.isSidebarOpened(e);return a.pipe(o.a.skip(1),o.a.map(e=>t(e)||!r?n.Idle:n.Checking),o.a.startWith(t(i)?n.Idle:r?this._features.denali.focusFirstCard?n.Checking:n.CheckingIn:n.CheckingOut))}),o.a.tap(e=>this.loaderState.set(Object(i.h)(e)))).subscribe(t=>{switch(t){case n.Idle:return this._state.set(m.a.State.idle);case n.CheckingIn:return this._state.set({text:i.e,lens:Object(i.h)(m.a.Type.checkingIn),navigation:Object(i.h)(m.a.Type.checkingIn)});case n.Checking:return this._state.set({text:i.e,lens:Object(i.h)(m.a.Type.checking),navigation:Object(i.h)(m.a.Type.checking)});case n.CheckingOut:return this._state.modify(t=>({text:i.e,lens:e(t.lens),navigation:e(t.navigation)}));default:Object(p.d)(t)}})}dispose(){this._subs.forEach(e=>e.unsubscribe()),this._subs=[]}}},DMXH:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return u}));var n,i=a("OA+g"),r=a("I7vG"),s=a("2Jhg"),o=a("LNSM"),l=a("1huE"),c=a("zR/0"),d=a("lrqh"),p=a("PrA7");!function(e){let t,a,n;!function(e){e.checking="checking",e.checkingIn="checkingIn",e.checkingOut="checkingOut"}(t=e.Type||(e.Type={})),function(e){e.loading="loading",e.processing="processing"}(a=e.TextType||(e.TextType={})),function(t){t.idle={text:s.e,lens:s.e,navigation:s.e},t.text={text:Object(s.h)(e.TextType.loading),lens:s.e,navigation:s.e},t.processing={text:Object(s.h)(e.TextType.processing),lens:Object(s.h)(e.Type.checking),navigation:Object(s.h)(e.Type.checking)},t.lensAndNavigationProcessing=Object.assign(Object.assign({},t.processing),{text:s.e}),t.loading={text:Object(s.h)(e.TextType.loading),lens:Object(s.h)(e.Type.checking),navigation:Object(s.h)(e.Type.checking)},t.toString=function(e){const t=e.lens.filter(e=>"checkingOut"!==e).nonEmpty()?"on":"off",a=e.navigation.filter(e=>"checkingOut"!==e).nonEmpty()?"on":"off";return`text: ${e.text.getOrElse("off")}; lens: ${t}; nav: ${a}`}}(n=e.State||(e.State={}))}(n||(n={}));class u{constructor(e,t){this._router=e,this._features=t,this.state=o.a.create(n.State.idle),this._log=p.Monitoring.Logging.getLogger("denali_loader"),this._metric=p.Monitoring.TimeSeries.root.getMetric("denali_loader"),this._subs=new l.a.Keeper,this._listenLoading(),Object(r.pipe)(this._router.locationState,d.g.exists(e=>!0===e.openSidebar))||this._features.sidebarOpenedByDefault?this.state.set(n.State.processing):this.state.set(n.State.text)}dispose(){this._subs.dispose()}listenEngineErrors(e){this._subs.push(e.pipe(c.b.compact).subscribe(d.b.fold(()=>this.state.set(n.State.idle),i.constVoid)))}_listenLoading(){this._subs.push(this.state.subscribe(e=>{this._log.debug(`State is changed to ${n.State.toString(e)}`)}),this._listenTimeseries("text",e=>e.text.orUndefined(),!0),this._listenTimeseries("lens",e=>e.lens.filter(e=>"checkingOut"!==e).map(()=>"checking").orUndefined()),this._listenTimeseries("navigation",e=>e.navigation.filter(e=>"checkingOut"!==e).map(()=>"checking").orUndefined()))}_listenTimeseries(e,t,a=!1){return this.state.pipe(c.a.skip(1),c.a.map(e=>t(e)),c.a.distinctUntilChanged(),c.a.map(t=>{if(void 0!==t)return a&&this._metric.getCounter(`${e}.${t}.start.counter`).increment(),{time:this._metric.getTimer(`${e}.${t}.time`).start(),counter:a?this._metric.getCounter(`${e}.${t}.stop.counter`):void 0}}),c.a.pairwise()).subscribe(([e])=>{e&&(e.time.stop(),e.counter&&e.counter.increment())})}}},"E/Yu":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return C})),a.d(t,"b",(function(){return i}));var n,i,r=a("5p8x"),s=a("I7vG"),o=a("2Jhg"),l=a("LNSM"),c=a("bYZB"),d=a("3s0z"),p=a("zR/0"),u=a("gy42"),m=a("lrqh"),h=a("6fbX"),g=a("i+T4"),f=a("D9EC"),b=a("PrA7"),y=a("zGI0");function C(e,t,a,i,r){const s=[{name:"head",hotkey:m.g.none,initialState:{active:!1,disabled:!1}},{name:c.e.Type.bold,hotkey:g.a.array([t.createHotkey(new Set([d.a.short]),"b")]),initialState:{active:!1,disabled:!1}},{name:c.e.Type.italic,hotkey:g.a.array([t.createHotkey(new Set([d.a.short]),"i")]),initialState:{active:!1,disabled:!1}},{name:c.e.Type.underline,hotkey:g.a.array([t.createHotkey(new Set([d.a.short]),"u")]),initialState:{active:!1,disabled:!1}},"separator",{name:c.e.Type.header1,hotkey:g.a.array([t.createHotkey(new Set([d.a.short,d.a.alt]),"1")]),initialState:{active:!1,disabled:!1}},{name:c.e.Type.header2,hotkey:g.a.array([t.createHotkey(new Set([d.a.short,d.a.alt]),"2")]),initialState:{active:!1,disabled:!1}},"separator",{name:c.e.Type.link,hotkey:g.a.array([t.createHotkey(new Set([d.a.short]),"k")]),initialState:{active:!1,disabled:!1}},"separator",{name:c.e.Type.orderedList,hotkey:g.a.array([t.createHotkey(new Set([d.a.short,d.a.shift]),"7")]),initialState:{active:!1,disabled:!1}},{name:c.e.Type.bulletList,hotkey:g.a.array([t.createHotkey(new Set([d.a.short,d.a.shift]),"8")]),initialState:{active:!1,disabled:!1}},"separator",{name:"clear",hotkey:g.a.array([t.createHotkey(new Set([d.a.short]),"\\")]),initialState:{active:!1,disabled:!1}}],o=s.filter(Object(f.b)(y.a.isItem,e=>e.name!==c.e.Type.link)),l=n.initHandlers(o),{formattingEvents:u,viewModel:h}=function(e,t,a,i,r,s){const o=n.ToolbarViewModel.create(t,a),l=t.filter(y.a.isItem),c=y.a.toMenuEvents(e,o),d=y.a.bindHotkeys(e,l,i,e.isEditorFocused),u=p.a.mergeStatic(c,d).pipe(p.a.tap(([e,t,a])=>void r.rtfMenuEventFire(e,s,a)));return{viewModel:o,formattingEvents:u}}(e,s,a,t,i,r),[C,v]=p.a.partitionStatic(u,e=>e[0]!==c.e.Type.link);return{dispose:function(e,t,a,i){const r=t(e,i),s=b.Monitoring.Logging.getLogger("formattingMenuManager"),o=y.a.linkEvents(a,r).pipe(p.a.catchError((e,t)=>(s.error("Error handling formatting event",e),t))),l=n.ToolbarViewModel.stateManager(e,i),c=o.pipe(p.a.merge(l)).subscribe();return{dispose:()=>{c.unsubscribe()}}}(e,l,C,h).dispose,viewModel:h,linkEvents:v}}!function(e){let t,a;!function(e){e.Collapsed="Collapsed",e.Expanded="Expanded"}(t=e.VisualState||(e.VisualState={})),function(e){e.create=function(e,a){const n=e=>a.toolbar.formatting[e],i=e=>Object(o.h)(a.toolbar.formatting.tooltips[e]),r=new p.a.Subject,c=l.a.create({menu:t.Expanded,items:e.filter(y.a.isItem).reduce((e,t)=>(e[t.name]=t.initialState,e),{})}),d=e[0];return{head:{name:d.name,title:n(d.name),tooltip:i(d.name),nestedItem:m.g.none,active:c.view("items",d.name,"active"),disabled:c.view("items",d.name,"disabled"),onClick:()=>r.next(d.name)},list:e.slice(1).map(e=>y.a.isItem(e)?{name:e.name,title:n(e.name),tooltip:i(e.name),nestedItem:Object(s.pipe)(e.hotkey,m.g.map(e=>Object(o.d)(e[0].toString()))),active:c.view("items",e.name,"active"),disabled:c.view("items",e.name,"disabled"),onClick:()=>r.next(e.name)}:e),visualState:c.view("menu"),state:c,events:r}},e.stateManager=function(e,{state:t}){return e.selectedFormatting.pipe(p.a.tap(e=>{t.lens("items").modify(Object(r.j)((t,a)=>t===c.e.Type.bulletList?Object.assign(Object.assign({},a),{active:void 0!==e[c.e.Type.bulletList]||void 0!==e[c.e.Type.dashedList]}):t===c.e.Type.link?a:c.e.is(t)?Object.assign(Object.assign({},a),{active:void 0!==e[t]}):a))}),p.a.mapTo(u.b.voidValue))}}(a=e.ToolbarViewModel||(e.ToolbarViewModel={}));const n=(e,{state:a})=>n=>{switch(n.name){case"head":return()=>a.lens("menu").modify(e=>e===t.Collapsed?t.Expanded:t.Collapsed);case"clear":return t=>e.clearFormatting(t);case c.e.Type.bold:case c.e.Type.bulletList:case c.e.Type.header1:case c.e.Type.header2:case c.e.Type.italic:case c.e.Type.orderedList:case c.e.Type.underline:return(t=>n=>{a.get().items[t].active?e.removeFormatting(n,t):e.addFormatting(n,t)})(n.name);default:return Object(h.d)(n.name)}};e.initHandlers=function(e){return(t,a)=>{const i=n(t,a);return e.reduce((e,t)=>(e[t.name]=i(t),e),{})}}}(n||(n={})),function(e){e.fromToolbar=function(e){return e.pipe(p.a.map(([,e])=>({range:e,source:"toolbar"})))},e.fromDenaliEditor=function(e){return e.selectedFormatting.pipe(p.a.map(e=>c.e.LinkPayload.is(e)?m.g.some({range:e[c.e.Type.link][0].range,source:"selection"}):m.g.none))}}(i||(i={})),function(e){let t;!function(e){e.Mock=class{constructor(){this.linkEvents=new p.a.Subject}}}(t=e.Manager||(e.Manager={}))}(n||(n={}))},EH1O:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var n=a("ERkP"),i=a("OA+g"),r=a("I7vG"),s=a("vOOZ"),o=a("rk+4"),l=a("By/D"),c=a("3jsv"),d=a("nnns"),p=a("FieF"),u=a("dP+m"),m=a("0gxC"),h=a("zR/0"),g=a("hoSD"),f=a("lrqh"),b=a("nb6X"),y=a("PrA7"),C=a("0lfv"),v=a("8ZZk"),S=a("m/RE");const E=({vm:e})=>{const t=n.useContext(l.a.Context).pipe(h.a.map(g.e.pick("rect")));return n.createElement(s.a.div,{className:S.positionedWrapper},h.a.combineLatestStatic(t,e.visualState).pipe(h.a.map(([e,t])=>Object(r.pipe)(C.a.fromOption(t),f.g.chain(t=>Object(r.pipe)(t.rect.getRect(),f.b.map(({clientRects:[t,...a],rootClientRect:n})=>({viewportLikeRect:g.c.absToRelative(e,n),rect:Object(r.pipe)(g.c.Rect.join(t,...a),f.b.getOrElse(()=>g.c.Rect.empty))})),f.b.bimap(e=>y.Monitoring.Logging.getLogger("FormattingLink").error("Cannot render links popup",e),({viewportLikeRect:e,rect:a})=>n.createElement(s.a.div,{className:S.editorToViewportContainer,style:{top:e.top,left:e.left}},n.createElement(m.a.ByAbsoluteRect,{rect:a,align:g.c.Rect.Axis.vertical,selector:_},n.createElement(c.a,{hide:t.close},n.createElement("div",{className:S.wrapper},t.visualState===v.a.VisualState.EditingMode?n.createElement(w,{inputContent:t.inputContent,apply:t.apply,isValid:t.isValid}):n.createElement(k,{url:t.url,change:t.change,remove:t.remove})))))),f.g.fromEither)),f.g.orNull)),h.a.startWith(null)))},w=({apply:e,inputContent:t,isValid:a})=>{const r=n.useContext(o.a.Context);return n.createElement(n.Fragment,null,n.createElement(p.a,{name:"rtfLinks-urlInput",placeholder:r.toolbar.formatting.links.placeholder,autofocus:!0,className:S.urlInput,value:t}),n.createElement(d.a.Ghost,{name:"rtfLinks-apply",onClick:()=>{e()},disabled:a.view(Object(i.not)(i.identity))},r.toolbar.formatting.links.apply))},k=({url:e,change:t,remove:a})=>{const i=n.useContext(o.a.Context);return n.createElement(n.Fragment,null,n.createElement(u.a,{href:e,className:S.urlHolder},n.createElement("span",{className:S.urlText},e)),n.createElement(d.a.Tertiary,{name:"rtfLinks-change",onClick:t,className:S.button},i.toolbar.formatting.links.change),n.createElement("span",{className:S.delimiter}),n.createElement(d.a.Tertiary,{name:"rtfLinks-remove",onClick:a,className:S.button},i.toolbar.formatting.links.remove))},_=e=>{const t=b.a.Selector.Placement.left,a=b.a.Selector.takeBy("bottom",t)(e);return(({point:e})=>-1===Math.sign(e.x)||-1===Math.sign(e.y))(a.point)?b.a.Selector.preferBy("bottom",t)(e):a}},"Ei+9":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return L})),a.d(t,"a",(function(){return i}));var n,i,r=a("7qGb"),s=a("OA+g"),o=a("I7vG"),l=a("ZTXN"),c=a("LNSM"),d=a("94k3"),p=a("lrqh"),u=a("6fbX"),m=a("D9EC"),h=a("XF5a"),g=a("PrA7"),f=a("dE97"),b=a("HqKA"),y=a("GUi3"),C=a("+w1e"),v=a("zR/0"),S=a("1huE"),E=a("aIes"),w=a("AMXJ"),k=a("K4Sz"),_=a("4GD7"),O=a("UEGg"),A=a("uqkn"),T=a("YJiV"),x=a("W39u"),I=a("TC4P"),M=a("BeBM"),j=a("bFfh");!function(e){e.changeAlertEffect=(e,t,a,n,i,r,s,l)=>({id:"changeAlertEffect",when:y.a.isWithAlertsId,what:M.e.Effect.SwitchAlert.create(t.actionEvents.pipe(v.a.switchMap(t=>{const c=e.get();if(!M.e.hasCards(c))return v.a.throwError(new u.b("Cannot update state without cards"));switch(t.type){case C.b.Type.alertMinicardButtonClick:return Object(o.pipe)(i.getRegistered(t.alertHighlight.alert.id),p.g.fold(()=>(l.error("somehow we got click on non registered alert",{alert:O.a.snapshot(t.alertHighlight.alert),alertInRepo:Object(o.pipe)(i.getById(t.alertHighlight.alert.id),p.g.map(O.a.fromModel),p.g.map(O.a.snapshot)),state:M.e.snapshot(T.a.snapshot,n)(c)}),v.a.EMPTY),()=>v.a.of(t.alertHighlight)));case C.b.Type.cardMatchesNavigationButtonClick:const e=t.transitionTo;switch(e.kind){case"anotherAlert":return Object(o.pipe)("right"===t.direction?a.nextAlert(e.card):Object(o.pipe)(a.prevAlert(e.card),p.g.orElse(a.anyRegisteredAlert(e.card))),p.g.fold(()=>v.a.EMPTY,e=>v.a.of({alert:e,highlightIndex:0})));case"sameAlert":return Object(o.pipe)(i.getRegistered(e.card.activeAlert.id),p.g.fold(()=>v.a.EMPTY,()=>v.a.of({alert:e.card.activeAlert,highlightIndex:e.highlightIndex})));default:return Object(u.d)(e)}case C.b.Type.switchToClosestByViewport:return((e,t,a,n)=>{const i=e=>Object(o.pipe)(t,p.g.map(t=>t.alignMarkToCard(e,_.a.Animation.ANIMATE_ALL,p.g.none).pipe(v.a.switchMapTo(v.a.EMPTY))),p.g.getOrElse(()=>v.a.EMPTY));return Object(o.pipe)(n(t=>(t.lensId===e.id||y.a.isMainLens(e.id))&&!f.a.isPremium(t),"middleOfTheViewport"),p.g.fold(()=>v.a.EMPTY,t=>Object(o.pipe)(a(e),p.g.filter(e=>e.activeAlert.id===t.alert.id),p.g.fold(()=>v.a.of(t),i))))})(c.currentLens,r,n,s);default:return v.a.EMPTY}}),v.a.map(e=>({alertHighlight:e,alertSource:f.b.sidebar,options:{order:"lensOrder"}}))))}),e.createSendActiveAlertFeedbacksEffect=function(e,t,a,n,i){const r=e.view(M.e.getActiveAlert(t)).pipe(v.a.map(p.g.filter(e=>p.g.isSome(n.getRegistered(e.id))&&!f.a.isInPremiumLens(e))),v.a.switchMap(p.g.fold(()=>v.a.EMPTY,t=>v.a.Observable.create(()=>(Object(o.pipe)(a.applyFeedback(t.id,{kind:d.a.AlertFeedbackType.LOOKED,subtype:b.b.getSubTypeFromLens(e.get().currentLens.id)},f.b.sidebar),p.b.fold(i.handler("Failed to send LOOKED feedback").error,s.constVoid)),()=>{p.g.isSome(n.getRegistered(t.id))&&Object(o.pipe)(a.applyFeedback(t.id,{kind:d.a.AlertFeedbackType.CLOSED,subtype:b.b.getSubTypeFromLens(e.get().currentLens.id)},f.b.sidebar),p.b.fold(i.handler("Failed to send CLOSED feedback: ").error,s.constVoid))})))));return{id:"sendActiveAlertFeedbacksEffect",when:s.constTrue,what:M.e.Effect.Applicator.create(r.pipe(v.a.switchMapTo(v.a.NEVER)))}}}(n||(n={}));class L{constructor(e,t,a,n,r,c,h,y,w,_,T,I){this._ops=e,this._navigationEvents=t,this._cardFactory=a,this._alertsService=n,this._markOnboardingAsSeen=r,this._markMuteQuotedAdviceAsDismissed=c,this._sendToSignInExperiment=y,this._getActiveItemWithAlert=_,this._checksFeedCapabilities=T,this._lensState=I,this._log=g.Monitoring.Logging.getLogger("CardsViewModelImpl",g.Logging.LogLevel.DEBUG),this._subs=new S.a.Keeper,this._flushCompleteTransition=new v.a.Subject,this._flushPositionAnimation=new v.a.Subject,this.actionEvents=new v.a.Subject,this.completePositionAnimation=new v.a.Subject,this.changePosition=new v.a.Subject,this._transitionBuffer=v.a.interval(100).pipe(v.a.startWith(0),v.a.merge(this._flushCompleteTransition)),this._positionAnimationBuffer=v.a.interval(100).pipe(v.a.startWith(0),v.a.merge(this._flushPositionAnimation)),this._startTransitionStateChanges=this.actionEvents.pipe(v.a.filter(C.a.isStartTransitionTo),v.a.map(e=>t=>i.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,e.transition]]),t))),this._completeTransitionStateChanges=this.actionEvents.pipe(v.a.filter(C.a.isCompleteTransitionTo),v.a.buffer(this._transitionBuffer),v.a.filter(m.n),v.a.map(e=>t=>{const a=t.currentLens,n=this._applyCompleteVSChange(a,e.map(e=>[e.id,e.transitionId]));return this._log.isEnabled(g.Logging.LogLevel.TRACE)&&this._log.trace("batch transition complete",{events:e,diff:E.a.Sorted.diff(a.items,n.items)}),M.e.Prism.getLens().set(n,t)})),this._changePositionEffect=this.changePosition.pipe(v.a.map(({id:e,height:t})=>a=>{const n=Object(o.pipe)(k.a.update(a.currentLens.items,e,e=>this._checksFeedCapabilities.changePosition(x.a.PositionState.changeHeight(e.positionState,t))(e)),p.b.fold(()=>a.currentLens.items,s.identity));return i.itemsLens.set(n,a)})),this._transitionEndStateChanges=this.completePositionAnimation.pipe(v.a.buffer(this._positionAnimationBuffer),v.a.filter(m.n),v.a.map(e=>t=>{const a=t.currentLens.items,n=e.map(e=>[e,!1]).reduce((e,[t,a])=>Object(o.pipe)(k.a.update(e,t,e=>this._checksFeedCapabilities.changePosition(x.a.PositionState.changeAnimationInProgress(e.positionState,a))(e)),p.b.fold(()=>e,s.identity)),a);return i.itemsLens.set(n,t)})),this._switchToNextChanges=this.actionEvents.pipe(v.a.filter(e=>e.type===C.b.Type.switchToNext),v.a.map(()=>e=>e.patch({currentLens:Object(o.pipe)(M.e.hasItems(e)?this._checksFeedCapabilities.findNextAlert(e.currentLens):p.g.none,p.g.fold(()=>Object(o.pipe)(M.e.getActiveAlert(this._getActiveItemWithAlert)(e),p.g.fold(()=>{throw new u.b("Can not switch from non-existing card")},t=>this._checksFeedCapabilities.release(t)(e.currentLens))),t=>M.e.hasItems(e)?this._checksFeedCapabilities.selectItemByAlert(t)(e.currentLens):e.currentLens)),switchOrder:"lensOrder",alertSource:f.b.sidebar}))),this._dismissMuteQuotedAdvice=this.actionEvents.pipe(v.a.filter(C.b.isDismissMuteQuotedAdvice),v.a.tap(this._markMuteQuotedAdviceAsDismissed),v.a.map(()=>e=>{const t=e.currentLens.items.filter(Object(s.flow)(this._checksFeedCapabilities.hasActiveAlert,p.g.exists(O.a.isInQuotes))).keys().map(e=>[e,!1]).reduce((e,[t])=>Object(o.pipe)(k.a.update(e,t,this._cardFactory.hideMuteQuotedAdvice),p.b.fold(()=>e,s.identity)),e.currentLens.items);return i.itemsLens.set(t,e)})),this._changeUserInput=this.actionEvents.pipe(v.a.filter(C.b.isChangeUserInput),v.a.tap(({alertId:e,userInput:t})=>{this._alertsService.changeGapValue(e,t)}),v.a.map(({cardId:e,userInput:t})=>a=>{const n=Object(o.pipe)(a.currentLens.items.update(e,this._checksFeedCapabilities.updateUserInput(t?p.g.some(t):p.g.none)),p.b.fold(()=>a.currentLens.items,s.identity));return i.itemsLens.set(n,a)})),this._focusChecksFeedItem=this.actionEvents.pipe(v.a.filter(C.b.isMiniItemClick),v.a.map(e=>t=>t.patch({currentLens:Object(o.pipe)(t.currentLens.items.find(t=>t.id===e.id),p.g.fold(()=>(this._log.error("Can not switch from non-existing item"),t.currentLens),()=>Object(s.unsafeCoerce)(Object(o.pipe)(t.currentLens,this._checksFeedCapabilities.selectItemById(e.id))))),switchOrder:"lensOrder",alertSource:f.b.sidebar}))),this._collapseChecklistItem=this.actionEvents.pipe(v.a.filter(C.b.isChecklistItemCollapseButtonClick),v.a.map(()=>e=>e.patch({currentLens:M.e.hasItems(e)?this._checksFeedCapabilities.unselectItem()(e.currentLens):e.currentLens,switchOrder:"lensOrder",alertSource:f.b.sidebar}))),this._requestShortenItReplacements=this.actionEvents.pipe(v.a.filter(C.b.isRequestShortenItReplacementsAction),v.a.map(({alertId:e,itemId:t})=>Object(o.pipe)(this._alertsService.requestShortenItReplacements(e),p.b.map(e=>({newAlert:e,itemId:t})))),v.a.map(e=>this._updateShortenItCard(e))),this._smartPhrasesFeedback=this.actionEvents.pipe(v.a.filter(C.b.isSmartPhrasesFeedbackAction),v.a.map(({cardId:e,alertId:t,feedbackType:a})=>Object(o.pipe)(this._alertsService.changeSmartPhrasesFeedback(t,a),p.b.map(t=>({newAlert:t,cardId:e})))),v.a.tap(e=>this._sendSmartPhrasesUpdateStateAction(e)),v.a.map(e=>this._updateSmartPhrasesCard(e))),this._smartPhrasesShowMoreIdeas=this.actionEvents.pipe(v.a.filter(C.b.isSmartPhrasesShowMoreIdeasAction),v.a.map(({cardId:e,alertId:t})=>Object(o.pipe)(this._alertsService.rotateSmartPhrasesReplacements(t),p.b.map(t=>({newAlert:t,cardId:e})))),v.a.tap(e=>this._sendSmartPhrasesUpdateStateAction(e)),v.a.map(e=>this._updateSmartPhrasesCard(e))),this._smartPhrasesApply=this.actionEvents.pipe(v.a.filter(C.b.isSmartPhrasesApplyAction),v.a.map(({cardId:e,alertId:t,replacementIndex:a})=>Object(o.pipe)(this._alertsService.discardSmartPhrasesReplacement(t,a),p.b.map(t=>({newAlert:t,cardId:e})))),v.a.tap(e=>this._sendSmartPhrasesUpdateStateAction(e)),v.a.map(e=>this._updateSmartPhrasesCard(e))),this._synfonyDrilldown=this.actionEvents.pipe(v.a.filter(C.d.isDrilldown),v.a.map(({cardId:e,wordIndex:t})=>a=>Object(o.pipe)(k.a.update(a.currentLens.items,e,e=>{const a=e;return A.a.changeSynfonySelection(Object(o.pipe)(a.synfonySelection,p.g.getOrElse(()=>[]),e=>p.g.some(e.concat([t]))))(a)}),p.b.fold(()=>a,e=>M.e.Prism.getLens().compose(j.a.Prism.items).set(e,a))))),this._synfonyBack=this.actionEvents.pipe(v.a.filter(C.d.isBack),v.a.map(({cardId:e})=>t=>Object(o.pipe)(k.a.update(t.currentLens.items,e,e=>{const t=e;return A.a.changeSynfonySelection(Object(o.pipe)(t.synfonySelection,p.g.map(e=>e.slice(0,-1))))(t)}),p.b.fold(()=>t,e=>M.e.Prism.getLens().compose(j.a.Prism.items).set(e,t))))),this._sendToSignIn=Object(o.pipe)(this._sendToSignInExperiment,p.g.map(e=>e(this.actionEvents))),this._sendFeedback=Object(s.flow)((e,t)=>this._alertsService.applyFeedback(e,Object.assign(Object.assign({},t),{subtype:b.b.getSubTypeFromLens(this._lensState.get().currentLens.id)}),f.b.sidebar),p.b.fold(this._log.handler("error calling alert service to send a feedback").error,s.constVoid)),this._showIgnoreForm=new l.a,this._showIgnoreFormEffect=Object(o.pipe)(this._showIgnoreForm,v.a.map(e=>t=>i.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"feedback_form",clockwise:!0,options:e.options}]]),t))),this._showMutedAlertSuccessEffect=this.actionEvents.pipe(v.a.filter(C.b.isMuteCategoryAction),v.a.map(e=>t=>i.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"muted",clockwise:!0}]]),t))),this._undoMutedAlertEffect=this.actionEvents.pipe(v.a.filter(C.b.isUndoMuteCategoryAction),v.a.map(e=>t=>i.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"focused",clockwise:!0}]]),t))),this._handleAlertIgnore=Object(s.flow)(N(({alertId:e,drilldownSuggestionIds:t})=>()=>this._sendFeedback(e,{kind:d.a.AlertFeedbackType.IGNORE,drilldownSuggestionIds:t}),e=>()=>this._showIgnoreForm.next(e)),e=>this.actionEvents.pipe(v.a.filter(C.b.isAlertIgnoreAction)).subscribe(t=>e(t)())),this.hovered=this.actionEvents.pipe(v.a.filter(C.b.isHoverAction),v.a.tap(()=>this._ops.flush()),v.a.scan((e,t)=>"hover"===t.kind?p.g.some(t.id):Object(o.pipe)(e,p.g.filter(e=>e!==t.id)),p.g.none),v.a.share()),this.flushTransitionTo=()=>this._flushCompleteTransition.next(),this.flushPositionAnimation=()=>this._flushPositionAnimation.next(),this._subs.push(this._handleAlertFeedbacks(),this._applyTakeawayFeedbacks(),this._sendTakeawayFeedbacks(),this._handleIgnoreFormSubmit(),this._handleAlertIgnore(w),this._handleAlertResolve(),this._applyAlerts(),this._dismissAlertsBatch(),this._newFeatureSeen(),this._handleSmartPhrasesDone(),this._handleSmartPhrasesApplyLast(),this._handleSentenceLevelBrandTonesFeedback(),this._handleDrilldown()),Object(o.pipe)(h,p.g.tap(({model:e,openSuggestionsManagement:t})=>this._subs.push(this._handleCommitMuteCategories(e),this._handleSuggestionsManagementClick(t))))}_applyStartVSChange(e,t){return t.reduce((e,[t,a])=>Object(o.pipe)(k.a.update(e,t,e=>this._checksFeedCapabilities.transitionTo(a)(e)),p.b.fold(()=>e,s.identity)),e)}_applyCompleteVSChange(e,t){return t.reduce((e,[t,a])=>Object(o.pipe)(e.items.get(t),p.g.map(({value:e})=>e),p.g.fold(()=>e,n=>I.a.isAnimatable(n)&&"removed"===n.visualState.transition.type?this._checksFeedCapabilities.removeItemById(t)(e):Object(o.pipe)(k.a.update(e.items,t,e=>I.a.isAnimatable(e)&&e.visualState.transitionId===a?this._checksFeedCapabilities.completeTransition(a)(e):e),p.b.fold(()=>e,t=>j.a.Prism.items.set(t,e))))),e)}_handleSentenceLevelBrandTonesFeedback(){return this.actionEvents.pipe(v.a.filter(C.b.isSentenceLevelBrandTonesFeedbackAction)).subscribe(({alertId:e,feedbackType:t})=>(this._alertsService.changeSentenceLevelBrandTonesFeedback(e,t),this._sendFeedback(e,{kind:t===f.j.accurate?d.a.EmotionSentenceFeedbackType.EMOTION_SENTENCE_LIKE:d.a.EmotionSentenceFeedbackType.EMOTION_SENTENCE_DISLIKE})))}_sendSmartPhrasesUpdateStateAction(e){return Object(o.pipe)(e,p.b.map(({newAlert:e})=>e?this.actionEvents.next({type:C.b.Type.smartPhrasesUpdateState,alertId:e.id,state:e.getAlertState()}):void 0))}_updateSmartPhrasesCard(e){return t=>Object(o.pipe)(e,p.b.chain(({newAlert:e,cardId:t})=>p.b.tryCatchError(()=>(Object(u.g)(void 0!==e,"SmartPhrases alert should exist when updating SmartPhrases card."),{newAlert:e,cardId:t}))),p.b.chainW(({newAlert:e,cardId:a})=>k.a.update(t.currentLens.items,a,this._checksFeedCapabilities.updateWithAlerts([e]))),p.b.fold(e=>(this._log.error("Error updating SmartPhrases card.",e),i.itemsLens.set(t.currentLens.items,t)),e=>i.itemsLens.set(e,t)))}_updateShortenItCard(e){return t=>Object(o.pipe)(e,p.b.chainW(({newAlert:e,itemId:a})=>k.a.update(t.currentLens.items,a,this._checksFeedCapabilities.updateWithAlerts([e]))),p.b.fold(e=>(this._log.error("Error updating card with ShortenIt alert.",e),t),e=>M.e.Prism.getLens().compose(j.a.Prism.items).set(e,t)))}_handleAlertFeedbacks(){return this.actionEvents.pipe(v.a.filter(C.b.isAlertFeedbackAction)).subscribe(({alertId:e,feedbackType:t})=>this._sendFeedback(e,{kind:t}))}_applyTakeawayFeedbacks(){return this.actionEvents.pipe(v.a.filter(C.b.isTakeawayDetectionFeedbackOrDoneAction)).subscribe(({alertId:e,type:t})=>this._alertsService.changeTakeawayFeedback(e,t===C.b.Type.takeawayCorrectlyDetected?f.q.correctlyDetected:t===C.b.Type.takeawayCorrectlyDetectedAndDone?f.q.correctlyDetectedAndDone:t===C.b.Type.takeawayIncorrectlyDetected?f.q.incorrectlyDetected:Object(u.d)(t)))}_sendTakeawayFeedbacks(){return this.actionEvents.pipe(v.a.filter(C.b.isTakeawayFeedbackAction)).subscribe(e=>{switch(e.type){case C.b.Type.takeawayCorrectlyDetected:return this._sendFeedback(e.alertId,{kind:d.a.AlertFeedbackType.ACCEPTED,replacementText:e.takeawayText});case C.b.Type.takeawayIncorrectlyDetected:return this._sendFeedback(e.alertId,{kind:d.a.AlertFeedbackType.IGNORE});case C.b.Type.takeawayDismiss:return this._sendFeedback(e.alertId,{kind:d.a.AlertFeedbackType.IGNORE,pnameQualifier:e.isLikelyToBeRead?d.a.PNameQualifier.likelyToBeReadTakeaway:d.a.PNameQualifier.unlikelyToBeReadTakeaway});case C.b.Type.takeawayResolve:return this._sendFeedback(e.alertId,{kind:d.a.AlertFeedbackType.ACKNOWLEDGED,pnameQualifier:e.isLikelyToBeRead?d.a.PNameQualifier.likelyToBeReadTakeaway:d.a.PNameQualifier.unlikelyToBeReadTakeaway});default:Object(u.d)(e)}})}_handleSmartPhrasesDone(){return this.actionEvents.pipe(v.a.filter(C.b.isSmartPhrasesDoneAction)).subscribe(({alertId:e})=>this._sendFeedback(e,{kind:d.a.AlertFeedbackType.HIDE}))}_handleSmartPhrasesApplyLast(){return this.actionEvents.pipe(v.a.filter(C.b.isSmartPhrasesUpdateStateAction),v.a.filter(e=>0===e.state.replacementsLength)).subscribe(({alertId:e})=>this.actionEvents.next({type:C.b.Type.smartPhrasesDone,alertId:e,source:"auto"}))}_handleAlertResolve(){return this.actionEvents.pipe(v.a.filter(C.b.isAlertResolveAction)).subscribe(({alertId:e})=>this._sendFeedback(e,{kind:d.a.AlertFeedbackType.ACKNOWLEDGED}))}_handleIgnoreFormSubmit(){return this.actionEvents.pipe(v.a.filter(C.b.isAlertIgnoreFeedbackFormSubmit)).subscribe(({alertId:e,reason:t})=>this._sendFeedback(e,{kind:d.a.AlertFeedbackType.IGNORE,reason:t}))}_handleCommitMuteCategories(e){return this.actionEvents.pipe(v.a.filter(C.b.isMutedAlertCardDismissedAction)).subscribe(t=>Object(o.pipe)(e.muteCategories([t.categoryId]),p.b.fold(this._log.handler("error calling categories model to commit muted category").error,s.constVoid)))}_handleSuggestionsManagementClick(e){return this.actionEvents.pipe(v.a.filter(C.b.isMutedAlertSuggestionsManagementClick)).subscribe(e)}_applyAlerts(){return this.actionEvents.pipe(v.a.filter(C.b.isAlertApplyAction)).subscribe(e=>Object(o.pipe)(this._alertsService.apply(e.alertId,{alternativeIndex:e.alternativeIndex,source:f.b.sidebar,feedbackSubtype:b.b.getSubTypeFromLens(this._lensState.get().currentLens.id),drilldownSuggestionIds:e.drilldownSuggestionIds}),p.b.fold(this._log.handler("error calling alert service to apply an alert").error,s.constVoid)))}_handleDrilldown(){return this.actionEvents.pipe(v.a.filter(C.d.isDrilldown)).subscribe(e=>this._sendFeedback(e.alertId,{kind:d.a.DrilldownFeedbackType.DRILLDOWN,drilldownSuggestionIds:e.drilldownSuggestionIds,alternativeIndex:e.alternativeId}))}_dismissAlertsBatch(){return this.actionEvents.pipe(v.a.filter(C.c.isDismissAlertsBatchAction)).subscribe(e=>Object(o.pipe)(this._alertsService.dismissBatch(e.alerts,b.b.getSubTypeFromLens(this._lensState.get().currentLens.id)),p.b.fold(this._log.handler("error calling alert service to dismiss alerts batch").error,s.constVoid)))}_newFeatureSeen(){return this.actionEvents.pipe(v.a.filter(C.b.isOnboardingClose)).subscribe(e=>Object(o.pipe)(this._markOnboardingAsSeen(e.value)))}getApplicatorEffects(){return Object(o.pipe)([[this._startTransitionStateChanges,"startTransitionStateChanges"],[this._completeTransitionStateChanges,"completeTransitionStateChanges"],[this._changePositionEffect,"changePositionEffect"],[this._transitionEndStateChanges,"transitionEndStateChanges"],[this._switchToNextChanges,"switchToNextChanges"],[this._dismissMuteQuotedAdvice,"dismissMuteQuotedAdvice"],[this._changeUserInput,"changeUserInput"],[this._smartPhrasesFeedback,"smartPhrasesFeedback"],[this._smartPhrasesShowMoreIdeas,"smartPhrasesShowMoreIdeas"],[this._smartPhrasesApply,"smartPhrasesApply"],[this._synfonyDrilldown,"synfonyDrilldown"],[this._synfonyBack,"synfonyBack"],[this._requestShortenItReplacements,"requestShortenItReplacements"],[this._focusChecksFeedItem,"focusChecksFeedItem"],[this._collapseChecklistItem,"collapseChecklistItem"],[this.actionEvents.pipe(v.a.filter(C.b.isNavigation),v.a.tap(this._navigationEvents),v.a.switchMapTo(v.a.EMPTY)),"navigationEvents"],[Object(o.pipe)(this._sendToSignIn,p.g.fold(()=>v.a.EMPTY,v.a.identity)),"sendToSignIn"],[this._showIgnoreFormEffect,"showIgnoreFormEffect"],[this._showMutedAlertSuccessEffect,"showMutedAlertSuccessEffect"],[this._undoMutedAlertEffect,"undoMutedAlertEffect"]],p.a.map(([e,t])=>({id:`cardsViewModel.effects.${t}`,when:y.a.isWithAlertsId,what:M.e.Effect.Applicator.create(e)})))}dispose(){this._subs.dispose()}}!function(e){e.itemsLens=M.e.Prism.getLens().compose(j.a.Prism.items);let t;e.Mock=class{constructor(){this.animate=c.a.create(!0),this.clockwise=c.a.create(!0),this.toggleAnimations=()=>this.animate.modify(e=>!e),this.completePositionAnimation=new v.a.Subject,this.actionEvents=new v.a.Subject,this.flushTransitionTo=s.constVoid,this.sideEffect={id:"cardsViewModelMock",when:y.a.isWithAlertsId,what:M.e.Effect.Applicator.create(v.a.EMPTY)},this.changePosition=new v.a.Subject,this.dispose=m.l}},function(e){e.sendToSignIn=(e,t)=>a=>a.pipe(v.a.filter(e=>e.type===C.b.Type.toSignIn),v.a.map(()=>a=>(e.actions.openUrl(new w.a(t.funnel.signin).addParams({utm_medium:"internal",utm_source:"upHook",utm_campaign:"editorDenalianonymousUserGenericSignInPrompt"})),a)))}(t=e.Experiments||(e.Experiments={}))}(i||(i={}));const N=(e,t)=>a=>n=>Object(o.pipe)(n.eligibleForDismissSurvey,r.of,h.a.chain(e=>Object(o.pipe)(a,r.map(t=>t?p.g.none:p.g.some(e)))),h.a.fold(()=>e(n),e=>t({id:n.id,options:e})))},EiZq:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a("ERkP"),i=a("vOOZ"),r=a("9NHN"),s=a("hoSD"),o=a("1w6p"),l=a("6gXa"),c=a("ps/9"),d=a("zR/0"),p=a("gy42"),u=a("1gzW");var m;!function(e){let t,a;!function(e){e.front="front",e.back="back"}(t=e.Layer||(e.Layer={})),function(e){e.completePositionAnimation="completePositionAnimation",e.changePosition="changePosition"}(a=e.ActionKind||(e.ActionKind={})),e.Cell=o.b.Grid.make(({slots:e,state:o,notify:l})=>{const c=new d.a.ReplaySubject,m=o.pipe(d.a.withLatestFrom(c),d.a.switchMap(([e,t])=>e.position.animationInProgress?d.a.mergeStatic(d.a.fromEvent(t,"transitionend").pipe(d.a.filter(e=>e.target===t&&"transform"===e.propertyName),d.a.mapTo(void 0)),d.a.of(void 0).pipe(d.a.delay(200))).pipe(d.a.first()):d.a.EMPTY),d.a.tap(l({kind:a.completePositionAnimation}))),h=o.pipe(d.a.withLatestFrom(c),d.a.switchMap(([e,t])=>e.height.watched?p.a.getResizeObservable(t).pipe(d.a.filter(t=>e.height.value!==t.height||!e.height.isValid||t.height>0)):d.a.EMPTY),d.a.distinctUntilChanged(),d.a.tap(({height:e})=>l({kind:a.changePosition,height:e})()));u.a.useSubscriptionTo(d.a.mergeStatic(m,h));const g=o.pipe(d.a.map(e=>e.position.top),d.a.map(e=>s.c.CSS.translateY(e)),d.a.distinctUntilChanged()),b=o.pipe(d.a.map(e=>e.layer===t.front?1:0),d.a.distinctUntilChanged()),y=o.pipe(d.a.map(({position:e})=>e),d.a.distinctUntilChanged((e,t)=>e.top===t.top),d.a.map(({animationInProgress:e})=>e?f.animate:void 0),d.a.startWith(void 0));return n.createElement(i.a.div,Object.assign({},Object(r.c)(f.item,y),{style:{transform:g,zIndex:b},mount:e=>{null!==e&&c.next(e)}}),e.item)})}(m||(m={}));const h={position:"absolute",boxSizing:"border-box",width:l.a.percent(100),contain:"layout"},g={transition:`transform ${l.a.seconds(c.d/1e3)} linear`},f=l.a.stylesheet({item:[h],animate:[g]})},EjiM:function(e,t,a){"use strict";a.d(t,"c",(function(){return f})),a.d(t,"b",(function(){return y})),a.d(t,"a",(function(){return C})),a.d(t,"d",(function(){return v})),a.d(t,"f",(function(){return S})),a.d(t,"e",(function(){return E}));var n=a("93Qa"),i=a("8Js9"),r=a("OA+g"),s=a("I7vG"),o=a("lrqh"),l=a("hoSD"),c=a("aIes"),d=a("zR/0"),p=a("gy42"),u=a("W39u"),m=a("BeBM"),h=a("bFfh"),g=a("NW9S");const f=e=>t=>t.isCardsHeightValid&&Object(s.pipe)(m.j.getActiveItem(t),o.g.forAll(t=>!e.isScheduledToDispose(t))),b=e=>t=>t.isCardsHeightValid&&Object(s.pipe)(m.j.getActiveItem(t),o.g.forAll(t=>!e.isScheduledToDispose(t)));function y({cardTop:e,cardHeight:t,viewportHeight:a,padding:n}){const i=g.a.FromViewportTop.ISO.unwrap(e),r=i+t;return t>a?i:i<0?t+n.before<a?i-n.before:i:r>a?t+n.after<a?r-a+n.after:r-a:i<n.before?t+n.after+n.before<a?i-n.before:t+n.after<a?i-n.after:n.before:a-r<n.after&&t+n.after<a?n.after-(a-r):0}const C=e=>t=>t.pipe(v(e),d.a.map(o.g.map(e=>e.currentLens)),d.a.pairwise(),d.a.filter(([e,t])=>Object(s.pipe)(Object(r.tuple)(e,t),Object(r.tupled)(o.g.map2((e,t)=>e.id===t.id&&Object(s.pipe)(Object(r.tuple)(m.j.getActiveItem(e),e.cardIndex,m.j.getActiveItem(t),t.cardIndex),Object(r.tupled)(n.sequenceT(o.g.option)),o.g.map(([e,t,a,n])=>e.id===a.id&&t!==n)))),o.g.getOrElse(()=>!1))),d.a.map(Object(r.flow)(i.a(o.g.chain(m.j.getActiveItem),o.g.chain(m.j.getActiveItem)),Object(r.tupled)(o.g.map2((e,t)=>t.positionState.absTop-e.positionState.absTop)),o.g.getOrElse(()=>0)))),v=e=>t=>t.pipe(d.a.map(o.g.filter(({currentLens:t})=>b(e)(t)))),S=e=>(t,a,n,i,r)=>{const c=(e=>o.g.getEq(o.c.fromEquals((t,a)=>{const n=m.j.getActiveItem(t),i=m.j.getActiveItem(a);return o.g.getEq(e.visualStateEq).equals(n,i)&&t.items.size===a.items.size&&l.a.compareInPairs(t.items.keys(),a.items.keys(),(e,t)=>e===t)})))(e);return t.pipe(d.a.map(o.g.map(e=>e.currentLens.id)),d.a.distinctUntilChanged(o.c.eqStrict.equals),d.a.map(o.g.isSome),d.a.switchMap(p.b.orEmpty(d.a.combineLatestStatic(a,n,i,v(e)(t).pipe(d.a.map(o.g.map(e=>e.currentLens)),d.a.distinctUntilChanged(c.equals),d.a.switchMap(r))))),d.a.filter(([t,a,n,i])=>Object(s.pipe)(i,o.g.exists(b(e)))),d.a.map(([e,t,a])=>({viewport:e,scrollTop:t,paddingTop:a})))},E=({cardsBeyondViewport:e,cardsAroundActive:t,changePosition:a})=>({viewport:n,scrollTop:i,paddingTop:l,completeTransition:d})=>p=>{const g=p.currentLens,f=((e,t,a,n)=>e.size<2||Math.floor(t.height/Math.min(o.g.unsafeGet(e.getAt(0)).positionState.height,o.g.unsafeGet(e.getAt(1)).positionState.height))>=e.size?{from:0,to:e.size}:{from:Math.max(0,c.a.Sorted.lowerBound(e,e=>e.positionState.absTop+e.positionState.height<a)-n),to:Math.min(e.size,c.a.Sorted.lowerBound(e,e=>e.positionState.absTop<a+t.height)+n)})(g.items,n,i-l,e);let b=!1;const y=g.items.map((e,n,i)=>{const l=Object(r.flow)(((e,t)=>a=>a.positionState.visible!==t?e.changePosition(u.a.PositionState.changeVisible(a.positionState,t))(a):a)(a,e.positionState.watched||(e=>f.from<=e&&f.to>e||Object(s.pipe)(g.cardIndex,o.g.exists(a=>e>=a-t&&e<=a+t)))(i)),(e=>t=>!t.positionState.visible&&t.positionState.animationInProgress?e.changePosition(u.a.PositionState.changeAnimationInProgress(t.positionState,!1))(t):t)(a),d)(e);return l!==e?(b=!0,l):e});return b?m.e.Prism.getLens().compose(h.a.Prism.items).set(y,p):p}},"F/DG":function(e,t,a){e.exports=a.p+"files/b788e8a0ec2b2ab3fe6f0d17e4508835/inter-bold.woff"},F8cT:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("ERkP"),i=a("tZ26"),r=a("SoVu");class s extends n.Component{render(){return n.createElement(o,null,n.createElement(i.b,null))}}const o=({children:e})=>n.createElement("div",{className:r.preload},e)},Ffhm:function(e,t,a){"use strict";var n=a("ERkP"),i=a("OA+g"),r=a("vOOZ"),s=a("9NHN"),o=a("yrKE"),l=a("nnns"),c=a("tZ26"),d=a("lRnN"),p=a("zR/0"),u=a("es5d"),m=a("HUX/"),h=a("9/oM"),g=a("lrqh"),f=a("ot6E"),b=a("6qID"),y=a("x98X"),C=a.n(y),v=a("ev6t"),S=a("BugA"),E=a("6gXa"),w=a("uO+M");const k=({name:e,className:t,children:a,onClick:i})=>n.createElement(l.a.White,Object.assign({name:e},Object(s.c)(S.style.button,t),{onClick:i}),a),_=e=>n.createElement("div",{className:L.container},n.createElement(S.Base,{className:L.description},e.description),n.createElement(A,{phrases:e.phrases,onSelect:e.onSelect})),O=e=>n.createElement(n.Fragment,null,e.phrases.map(t=>n.createElement(T,{key:t.id,onClick:()=>e.onSelect(t.id)},t.content))),A=e=>{const t=n.createElement(O,Object.assign({},e)),[a,r]=n.useState({className:L.phrases,children:t});return n.useEffect(()=>{if(a.children!==t){const e=()=>r({className:L.phrasesAppearing,children:t}),n=setTimeout(e,350);r({className:L.phrasesRemoving,children:a.children,onTransitionEnd:Object(i.flow)(e,()=>clearTimeout(n))})}},[e.phrases]),n.createElement("div",Object.assign({},a))},T=e=>n.createElement(k,{name:"phrase",onClick:e.onClick,className:L.phrase},e.children),x=E.a.rem(1.375),I=E.a.keyframes({to:{opacity:0}}),M=E.a.keyframes({"0%":{opacity:0,transform:"translateY(50%)"},"50%":{opacity:0},"100%":{opacity:1}}),j={maxHeight:"43vh",overflowY:"auto",animationDuration:"300ms",animationFillMode:"forwards"},L=E.a.prefixedStylesheet("draft_ai_phrase_selector",{title:[{paddingTop:E.a.rem(1.5)}],description:[{paddingTop:E.a.rem(.5),marginBottom:E.a.rem(1.125),color:w.Color.CoreNeutral50}],smartPhrasesTitle:[{color:w.Color.CoreNeutral50,textTransform:"uppercase",letterSpacing:w.Text.SubheadingLetterSpacing,fontSize:E.a.rem(w.Text.SubheadingSize),lineHeight:E.a.rem(w.Text.SubheadingLineHeight),borderBottom:`1px solid ${w.Color.CoreNeutral20}`,marginTop:0,paddingBottom:E.a.rem(.5),marginBottom:E.a.rem(.5)}],phrase:[{width:E.a.percent(100),whiteSpace:"initial",textTransform:"none",lineHeight:E.a.important(E.a.rem(1.375)),padding:`${E.a.rem(.3)} ${E.a.rem(.5)}`,$nest:{"&:not(:last-child)":{marginBottom:E.a.rem(.5)}}}],addPhraseIcon:[{minWidth:x,minHeight:x,marginTop:E.a.important(0)}],container:[{paddingBottom:E.a.rem(.75)}],phrases:[j],phrasesRemoving:[j,{animationName:I}],phrasesAppearing:[j,{animationName:M}]}),N=({tactic:e,selected:t,onClick:a})=>n.createElement(k,{name:`ideas-tactic-${e.id}`,className:t?B.sectionButtonSelected:B.sectionButton,onClick:a},e.name),P=({tactics:e,selectedTactic:t,onSelect:a})=>n.createElement(n.Fragment,null,e.map(e=>n.createElement(N,{key:e.id,tactic:e,selected:Object(i.pipe)(t,g.g.exists(t=>e.id===t.id)),onClick:()=>a(e.id)}))),F={marginRight:E.a.rem(.5)},D={color:w.Color.CoreNeutral90},R={marginTop:E.a.rem(.5),color:w.Color.CoreNeutral50,lineHeight:E.a.rem(1.375),marginBottom:E.a.rem(1)},B=E.a.prefixedStylesheet("ideas_tactic_selector",{sectionButton:[F],sectionButtonSelected:[F,D],sectionDescription:[R]});a.d(t,"a",(function(){return H})),a.d(t,"b",(function(){return V}));const H=({state:e,actions:t})=>{const a=Object(m.b)({layoutDensity:"minimal"});return n.createElement("div",{className:a.container},n.createElement(r.a.div,{className:v.a.cardHeader},Object(i.pipe)(e,p.a.map(e=>n.createElement($,null,e.title))),n.createElement("div",{className:v.a.cornerButton},n.createElement(l.a.Ghost,{name:"collapse",onClick:()=>t.next({type:b.a.Type.Collapse})},n.createElement(c.f.Collapse,null)))),n.createElement("div",{className:v.a.cardWrapper},n.createElement(r.a.div,{className:v.a.cardSectionsRow},e.view(e=>{const a=g.g.fromPredicate(b.c.isPhrases)(e);return n.createElement(n.Fragment,null,n.createElement(P,{tactics:e.tactics,selectedTactic:a,onSelect:e=>t.next({type:b.a.Type.SelectTactic,tacticId:e})}),Object(i.pipe)(a,g.g.map(e=>n.createElement(_,{phrases:e.phrases,name:e.name,description:e.description,onSelect:e=>t.next({type:b.a.Type.InsertPhrase,phraseId:e})})),g.g.toNullable))})),n.createElement(r.a.div,{className:v.a.cardActionsRow},n.createElement(U,null,n.createElement(W,{state:e.view(e=>b.c.isPhrases(e)?e.generatePhrasesButtonState:b.c.GeneratePhrasesButtonState.Hidden),onClick:()=>t.next({type:b.a.Type.UpdatePhrases})})),n.createElement("div",{className:v.a.cardActionsSeparator}),n.createElement(l.a.Ghost,{name:"dismiss",onClick:()=>t.next({type:b.a.Type.Dismiss})},n.createElement(c.d.Ignore,null)))))},W=e=>{const t=new p.a.Subject;return n.createElement(l.a.Primary,{name:"generate-more-phrases",onClick:e.onClick,className:p.a.mergeStatic(Object(i.pipe)(e.state.view(e=>e===b.c.GeneratePhrasesButtonState.Idle?v.a.generateMoreIdle:e===b.c.GeneratePhrasesButtonState.Hidden?v.a.generateMoreHidden:v.a.generateMoreLoading),p.a.scan((e,t)=>e===v.a.generateMoreLoading&&t!==v.a.generateMoreHidden?e:t)),t)},n.createElement("div",{className:v.a.generateMoreAnimationContainer,onAnimationIteration:a=>{const n=a.currentTarget instanceof HTMLDivElement&&a.currentTarget.parentElement;if(n&&n.className.includes(v.a.generateMoreLoading)){const a=e.state.get();a===b.c.GeneratePhrasesButtonState.Idle?t.next(v.a.generateMoreIdle):a===b.c.GeneratePhrasesButtonState.Hidden&&t.next(v.a.generateMoreHidden)}}},n.createElement(o.a,{theme:{container:v.a.generateMoreLogo}})),n.useContext(f.a.Context).draftAI.morePhrases)},$=e=>n.createElement("span",Object.assign({},Object(s.c)(u.a.lens,u.a.dot,u.a.commonLabel,v.a.cardHeaderSpan)),n.createElement("img",{className:v.a.titleIcon,src:C.a}),e.children),V=e=>n.createElement(h.b,{alignment:"left",eventType:"onclick",stepId:d.a.StepId.Step14,title:"Click an idea to use and modify it.",message:"",dotPosition:{kind:"dotAtPosition",position:h.a.leftBottom}},e.children),U=e=>n.createElement(h.b,{alignment:"left",eventType:"onclick",stepId:d.a.StepId.Step15,title:"Click here for more inspiration.",message:"",dotPosition:{kind:"dotAtPosition",position:h.a.leftBottom}},e.children)},FieF:function(e,t,a){"use strict";a.d(t,"a",(function(){return g})),a.d(t,"c",(function(){return f})),a.d(t,"b",(function(){return y}));var n=a("ERkP"),i=a("OA+g"),r=a("9NHN"),s=a("uO+M"),o=a("6gXa"),l=a("WIwS"),c=a("ps/9"),d=a("Urso"),p=a("BugA");function u(e){return e?t=>`${e}/${t}`:i.identity}function m(e){const{name:t}=n.useContext(d.a.Context);return void 0===e?e:"string"==typeof e?u(t)(e):e.view(u(t))}const h=e=>n.createElement(p.Typography,Object.assign({},v(e),Object(r.b)({value:e.value}))),g=e=>n.createElement(h,Object.assign({},e,{nodeType:"input"})),f=e=>n.createElement(h,Object.assign({},e,Object(r.c)(E.textArea,e.className),{nodeType:"textarea"})),b=e=>n.createElement(p.Typography,Object.assign({},v(e),{value:e.value,onChange:e.onChange})),y=e=>n.createElement(b,Object.assign({},e,{nodeType:"input"})),C=e=>e?e=>e&&requestAnimationFrame(()=>e.focus()):void 0,v=e=>Object.assign({"data-name":m(e.name),mount:C(e.autofocus),styleType:p.Typography.Type.P1,nodeType:e.nodeType,placeholder:e.placeholder,onFocus:e.onFocus,onBlur:e.onBlur,onKeyPress:e.onKeyPress},Object(r.c)(E.inputField,e.className)),S={width:o.a.percent(100),outline:"none",border:`1px solid ${l.j}`,borderRadius:o.a.rem(c.s),background:s.Color.CoreNeutral0,$nest:{"&::placeholder":{color:l.k,opacity:1},"&:focus":{borderColor:s.Color.CoreBlue50}}},E=o.a.stylesheet({inputField:[S],textArea:[{resize:"none"}]})},FuGm:function(e,t,a){"use strict";a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return n}));var n,i=a("I7vG"),r=a("LNSM"),s=a("94k3"),o=a("lrqh"),l=a("GUi3"),c=a("BeBM"),d=a("zR/0"),p=a("gy42"),u=a("bFfh");class m{constructor(e,t,a,m,h,g,f,b=u.a.WithSuccess.State.isInSuccess(m),y){this._state=e,this._documentModel=t,this._trackSuccessStateChanged=a,this._capabilities=m,this.nonPriorityOptions=h,this.mutedAlertsOptions=g,this.hasNonPriorityAlerts=f,this.isInSuccess=b,this._withBirthday=y,this._getTextAmount=e=>0===e?n.TextAmount.zero:e<=s.a.BIG_TEXT_SIZE?n.TextAmount.small:n.TextAmount.large,this._subs=[],this.textAmount=r.a.create(this._getTextAmount(this._documentModel.documentLength.get().trimmed)),this.actionEvents=new d.a.Subject,this.applicatorEffects={id:"successViewModel.effects",when:l.a.isWithAlertsId,what:c.e.Effect.Applicator.create(this.actionEvents.pipe(d.a.filter(({type:e})=>e===n.ActionType.More),d.a.map(()=>e=>{const t=e.patch({currentLens:c.e.hasItems(e)&&Object(c.l)(e.currentLens)?this._capabilities.toggleNonPriorityList("expanded")(e.currentLens):e.currentLens});return Object(i.pipe)(c.e.hasItems(t)?this._capabilities.findFirstAlert(t.currentLens):o.g.none,o.g.fold(()=>t,e=>t.patch({currentLens:c.e.hasItems(t)?this._capabilities.selectItemByAlert(e)(t.currentLens):t.currentLens})))})))},this._currentLens=this._state.view(e=>({isSuccess:this.isInSuccess(e),type:e.currentLens.type,nonPriorityAlertsLeft:c.e.isLensview(e)&&c.e.hasItems(e)&&0!==this._capabilities.getActiveAlertsCount(e.currentLens),isAllAlerts:l.a.isMainLens(e.currentLens.id)})),this._listenTextSize=()=>this._currentLens.view(e=>e.isSuccess).pipe(d.a.switchMap(p.b.orEmpty(this._documentModel.documentLength.view("trimmed"))),d.a.map(this._getTextAmount)).subscribe(p.b.toAtom(this.textAmount)),this._lensSwitch=this._currentLens.pipe(d.a.startWith(this._currentLens.get()),d.a.pairwise(),d.a.map(([e,t])=>t.isSuccess?o.g.some({prevLensType:e.type,nonPriorityAlertsLeft:t.nonPriorityAlertsLeft,isAllAlerts:t.isAllAlerts}):o.g.none)),this._textAmountToSuccessType=e=>e===n.TextAmount.zero?{type:n.SuccessType.zero,showBirthday:this._withBirthday.get()}:e===n.TextAmount.large?{type:n.SuccessType.large}:{type:n.SuccessType.small},this.successState=r.a.create({type:n.SuccessType.zero,showBirthday:this._withBirthday.get()}),this._subs.push(this._listenTextSize(),this._listenSuccessStateChange()),this.priorityList=Object(i.pipe)(h,o.g.map(e=>({hasNonPriorityAlerts:this._state.view(f),reviewNonPriorityAlerts:()=>{e.trackNonPriorityToggle(),this.actionEvents.next({type:n.ActionType.More})}}))),this.mutedAlerts=Object(i.pipe)(g,o.g.map(()=>({reviewMutedSuggestions:()=>{},mutedSuggestionsCount:this._state.view(e=>e.currentLens.meta.mutedCount)})))}dispose(){this._subs.forEach(e=>e.unsubscribe()),this._subs=[]}_listenSuccessStateChange(){const e=e=>e.type===n.SuccessType.applied||e.type===n.SuccessType.zero?d.a.of(e):this._documentModel.checkingState.pipe(d.a.filter(e=>"checking"!==e),d.a.first(),d.a.mapTo(e));return this._lensSwitch.pipe(d.b.compactMap(t=>this.textAmount.pipe(d.a.map(this._textAmountToSuccessType),d.a.startWith(t.prevLensType===c.i.lensview?{type:n.SuccessType.applied,nonPriorityAlertsLeft:t.nonPriorityAlertsLeft,isAllAlerts:t.isAllAlerts}:this._textAmountToSuccessType(this.textAmount.get())),d.a.pairwise(),d.a.map(([e,t])=>e.type===n.SuccessType.applied&&t.type!==n.SuccessType.zero?e:t),d.a.switchMap((t,a)=>0===a?d.a.of(t):e(t)),d.a.tap(e=>{this._trackSuccessStateChanged(e.type===n.SuccessType.applied?"applied":e.type===n.SuccessType.zero?"nothingToCheck":"noIssues")})))).subscribe(p.b.toAtom(this.successState))}}!function(e){let t,a,n;!function(e){e.More="More"}(t=e.ActionType||(e.ActionType={})),function(e){e.zero="zero",e.small="small",e.large="large"}(a=e.TextAmount||(e.TextAmount={})),function(e){e.zero="zero",e.small="small",e.large="large",e.applied="applied",e.premiumOnboardingStart="premiumOnboardingStart",e.premiumOnboardingComplete="premiumOnboardingComplete"}(n=e.SuccessType||(e.SuccessType={}));e.Mock=class{constructor(){this.textAmount=r.a.create(a.zero),this.successState=r.a.create({type:n.zero,showBirthday:!1}),this.mutedSuggestionsCount=r.a.create(0),this.hasNonPriorityAlerts=r.a.create(!1)}reviewMutedSuggestions(){throw new Error("Method not implemented.")}reviewNonPriorityAlerts(){throw new Error("Method not implemented.")}dispose(){throw new Error("Method not implemented.")}}}(n||(n={}))},GqpD:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return b}));var n,i,r,s=a("I7vG"),o=a("2Jhg"),l=a("LNSM"),c=a("bYZB"),d=a("zR/0"),p=a("lrqh"),u=a("6fbX"),m=a("PrA7"),h=a("mEc7"),g=a("Pe9T"),f=a("zGI0");function b(e,t,a,n,i,r,s,o,l,c){const p=new d.a.Subject;return{viewModel:new y(e,p,t,a,n,i,r,s,o,l,c),events:p}}!function(e){e.Collapsed="Collapsed",e.Expanded="Expanded"}(n||(n={})),function(e){e.close="close",e.myGrammarly="myGrammarly",e.documentHeader="documentHeader",e.newDocument="newDocument",e.uploadFile="uploadFile",e.download="download",e.print="print",e.editHeader="editHeader",e.editorSettings="editorSettings",e.accountHeader="accountHeader",e.userName="userName",e.email="email",e.upgradeToPremium="upgradeToPremium",e.language="language",e.subscription="subscription",e.logout="logout",e.support="support",e.whatsNew="whatsNew",e.feedback="feedback",e.switchToClassicEditor="switchToClassicEditor",e.privacyPolicy="privacyPolicy",e.termsOfService="termsOfService"}(i||(i={})),function(e){e.uploadFile="uploadFile",e.accountHeaderLabel="accountHeaderLabel",e.languageSettings="languageSettings",e.whatsNewUpdates="whatsNewUpdates"}(r||(r={}));class y{constructor(e,t,a,i,r,s,c,p,u,g,b){this._events=t,this._textResources=a,this._userAccount=i,this._dialectSettings=r,this._uploadViewModel=s,this._environment=c,this._notificationsManager=p,this._telemetry=u,this._documentModel=g,this._appRouter=b,this.visualState=l.a.create({type:n.Collapsed}),this.items=[],this.onMenuHovered=()=>{this._documentModel.flush().catch(e=>m.Monitoring.Logging.getLogger("documentSettings").error("Could not flush document from toolbar",e))},this.onGoBackToGrammarlyHome=()=>{this._telemetry.gnarSpec.backToMyGrammarlyButtonClick(this._telemetry.pageId,"inline"),this._appRouter.navigate(h.a.routes.documents.href())},this.onOpenToolbar=()=>{this.visualState.set({type:n.Expanded,scrollTo:o.e})},this._changeDialect=e=>d.a.from(this._dialectSettings.setDialect(e)).pipe(d.a.tap(()=>{this._environment.actions.dialectChanged().recover(e=>{m.Monitoring.Logging.getLogger("documentSettings").error("env error during dialect change",e)}),this._telemetry.gnarSpec.docSettingsLanguageEventFire(e,this._telemetry.pageId)}),d.a.catchError(e=>(m.Monitoring.Logging.getLogger("documentSettings").error("Cannot set language preferences",e),this._notificationsManager.enqueue("error")))).toPromise(),this.itemsState=l.a.create(e.filter(f.a.isItem).reduce((e,t)=>(e[t.name]=t.initialState,e),{}));const[y,...C]=e.map(e=>this._createViewItem(e));this.head=y,this.items=C}_createViewItem(e){return f.a.isItem(e)?{name:e.name,title:this._getTitle(e.name),tooltip:this._getTooltip(e.name),nestedItem:this._getNestedItem(e),active:this.itemsState.view(e.name,"active"),disabled:this.itemsState.view(e.name,"disabled"),onClick:()=>this._events.next(e.name)}:e}_getNestedItem(e){const t=e.name;switch(t){case i.uploadFile:if(this._userAccount.features.demoMode)return p.g.none;const a=g.e.ACCEPTED_UPLOAD_EXTENSIONS.filter(e=>".doc"!==e&&".htm"!==e&&".html"!==e).join(", ");return p.g.some(Object(o.g)({type:r.uploadFile,uploadViewModel:this._uploadViewModel,label:a}));case i.newDocument:case i.print:case c.d.undo:case c.d.redo:case c.d.cut:case c.d.copy:case c.d.paste:case c.d.selectAll:return Object(s.pipe)(e.hotkey,p.g.map(e=>Object(o.d)(e[0].toString())));case i.accountHeader:return p.g.some(Object(o.g)({type:r.accountHeaderLabel,denaliUserType:this._userAccount.features.denaliUserType}));case i.language:return p.g.some(Object(o.g)({type:r.languageSettings,dialectSettings:this._dialectSettings,changeDialect:this._changeDialect}));case i.download:return this._documentModel.rtfMode===g.e.DocumentFeatures.FormattingMode.on?p.g.some(Object(o.d)(this._textResources.documentSettings.downloadLabel)):p.g.none;case i.close:case i.myGrammarly:case i.documentHeader:case i.editHeader:case i.editorSettings:case i.userName:case i.email:case i.upgradeToPremium:case i.subscription:case i.logout:case i.support:case i.whatsNew:case i.feedback:case i.switchToClassicEditor:case i.privacyPolicy:case i.termsOfService:return p.g.none;default:return Object(u.d)(t)}}_getTitle(e){const t=this._userAccount.profile.get();switch(e){case i.userName:return t.fullName;case i.email:return t.email;default:return this._textResources.documentSettings[e]}}_getTooltip(e){switch(e){case i.documentHeader:case i.editHeader:case i.accountHeader:case i.email:case i.userName:return o.e;default:return Object(o.h)(this._textResources.documentSettings.tooltips[e])}}}},"H9T+":function(e,t,a){"use strict";a.d(t,"g",(function(){return se})),a.d(t,"m",(function(){return oe})),a.d(t,"h",(function(){return ce})),a.d(t,"o",(function(){return de})),a.d(t,"f",(function(){return pe})),a.d(t,"w",(function(){return be})),a.d(t,"i",(function(){return ye})),a.d(t,"s",(function(){return Ce})),a.d(t,"n",(function(){return Se})),a.d(t,"t",(function(){return Ee})),a.d(t,"u",(function(){return we})),a.d(t,"v",(function(){return ke})),a.d(t,"k",(function(){return _e})),a.d(t,"j",(function(){return Oe})),a.d(t,"A",(function(){return Ae})),a.d(t,"c",(function(){return xe})),a.d(t,"d",(function(){return Ie})),a.d(t,"b",(function(){return Me})),a.d(t,"a",(function(){return Le})),a.d(t,"l",(function(){return Ne})),a.d(t,"e",(function(){return Ve})),a.d(t,"r",(function(){return Ue})),a.d(t,"q",(function(){return Ge})),a.d(t,"p",(function(){return ze})),a.d(t,"x",(function(){return qe})),a.d(t,"z",(function(){return Ye})),a.d(t,"C",(function(){return Xe})),a.d(t,"D",(function(){return Ke})),a.d(t,"y",(function(){return jt})),a.d(t,"B",(function(){return Lt}));var n=a("ERkP"),i=a("I7vG"),r=a("LaGA"),s=a("9NHN"),o=a("vOOZ"),l=a("LNSM"),c=a("94k3"),d=a("m7xn"),p=a("D9EC"),u=a("lrqh"),m=a("hoSD"),h=a("uO+M"),g=a("PrA7"),f=a("6gXa"),b=a("WIwS"),y=a("ps/9"),C=a("eTAx"),v=a("rk+4"),S=a("dE97"),E=a("UEGg"),w=a("uqkn"),k=a("IVzZ"),_=a("+w1e"),O=a("E0zP"),A=a("XxrX"),T=a("lRnN"),x=a("9/oM"),I=a("ZcwV"),M=a("Sfi4"),j=a("kED/"),L=a("nnns"),N=a("vtAC"),P=a("dgw0"),F=a("8P+J"),D=a("tZ26"),R=a("Z5Rd"),B=a("/i6n"),H=a("mvgk"),W=a("SN1b"),$=a("Xi00"),V=a("BugA"),U=a("1gzW"),G=a("zR/0"),z=a("Z0Em"),q=a("aIes"),Y=a("3bJT"),X=a("5z3N"),K=a("0mPX"),Z=a("IdhR"),Q=a("yZqL"),J=a("eLeT"),ee=a("HTie"),te=a("cVtq"),ae=a("HUX/");const ne=r.default||r,ie=Object(p.k)(g.Monitoring.Logging.getLogger);var re;!function(e){e.actionRegex=/^#([\w\d_-]+)$/,e.parse=t=>Object(i.pipe)(u.g.fromNullable(t.match(e.actionRegex)),u.g.chain(e=>{switch(e[1]){case"set-goals":return u.g.some(_.b.Type.openSetGoals);default:return u.g.none}}))}(re||(re={}));const se=({description:e,actions:t,layoutDensity:a,className:r})=>{const o=n.useContext(v.a.Context),l=n.useContext($.a.Context),{ref:c,onMount:d}=U.a.useElWatcher();U.a.useSubscriptionTo(c.pipe(G.b.compact,G.a.switchMap(e=>Array.from(e.getElementsByTagName("a")).reduce((e,a)=>{const n=G.a.fromEvent(a,"click").pipe(G.a.tap(e=>e.preventDefault()));return Object(i.pipe)(u.g.fromNullable(a.getAttribute("href")),u.g.chain(re.parse),u.g.fold(()=>(ie("Description").error("Invalid action",a),e.pipe(G.a.merge(n))),i=>e.pipe(G.a.merge(l.getTooltipObservable(a,o.card.actionDescription[i],"auto",u.g.none),n.pipe(G.a.mapTo({type:i}),G.a.tap(t))))))},G.a.EMPTY))));const p=Object(i.pipe)(a,A.a.Density.matchOrDefault(A.a.Density.minimal)(()=>Pt.minimalDescription,()=>Pt.description));return n.createElement(V.Base,Object.assign({mount:d},Object(s.c)(p,r),K.a.renderToHtml(e,re.actionRegex)))},oe=({card:e,isChecking:t})=>S.a.isRated(e.activeAlert)?n.createElement(N.a,{value:w.a.isCardPresuccess(e.visualState)?z.a.MAX:e.meta.percentile,initValue:w.a.isCardPresuccess(e.visualState)?e.meta.percentile:z.a.MIN,isLoading:t}):null,le=({card:e})=>{const t=Object(N.b)(w.a.isCardPresuccess(e.visualState)?z.a.MAX:e.meta.percentile,w.a.isCardPresuccess(e.visualState)?e.meta.percentile:z.a.MIN);return n.createElement(o.a.Fragment,null,t.pipe(G.a.map(z.a.prism.reverseGet),G.a.map(e=>n.createElement(B.a,{percentage:e,colorType:B.a.ColorType.neoBlue,iconSize:B.a.IconSize.extraSmall,theme:{radialProgressBar:Pt.circleProgress,radialProgressText:Pt.circleText}}))))},ce=({card:e,feedbackActions:t,onClick:a,disabled:r})=>{const s=n.useContext(v.a.Context);return n.createElement(L.a.Ghost,{name:"ignore",title:s.dismiss,onClick:q.d.callOnce(()=>{t.next({type:_.b.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForDismissSurvey:w.a.isEligibleForDismissSurvey(e),drilldownSuggestionIds:O.a.isSynfonyItem(e)?Object(i.pipe)(e.synfonySelection,u.g.getOrElse(()=>[])):void 0}),a&&a()}),disabled:r},n.createElement(D.d.Ignore,null))},de=({card:e,feedbackActions:t,onClick:a,disabled:i})=>{const r=n.useContext(v.a.Context);return n.createElement(L.a.Ghost,{name:"resolve",title:r.resolve,onClick:q.d.callOnce(()=>{t.next({type:_.b.Type.alertResolve,alertId:e.activeAlert.id,id:e.id}),a&&a()}),disabled:i},n.createElement(D.d.YesCircle,null))},pe=({card:e,feedbackActions:t})=>n.createElement(n.Fragment,null,n.createElement(ce,{card:e,feedbackActions:t}),n.createElement(ge,{activeAlert:e.activeAlert,onMute:Object(i.pipe)(e.muteCategory,u.g.map(a=>q.d.callOnce(()=>t.next({type:_.b.Type.muteAlertCategory,categoryId:a.id,id:e.id})))),onWrong:q.d.callOnce(q.d.callOnce(()=>t.next({type:_.b.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:c.a.AlertFeedbackType.WRONG_SUGGESTION}))),onOffensive:q.d.callOnce(q.d.callOnce(()=>t.next({type:_.b.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:c.a.AlertFeedbackType.OFFENSIVE_CONTENT}))),onVisibilityChange:e=>t.next({type:_.b.Type.moreActionsButtonToggle,mode:e?"open":"closed"})})),ue=({onClick:e})=>{const t=n.useContext(v.a.Context);return n.createElement(L.a.Flat,{name:"mute",onClick:e},n.createElement(D.d.Mute,null),t.card.mute)},me=({onClick:e})=>{const t=n.useContext(v.a.Context);return n.createElement(L.a.Flat,{name:"incorrect",onClick:e},n.createElement(D.d.Report,null),t.card.wrong)},he=({activeAlert:e,onClick:t})=>{const a=n.useContext(v.a.Context);return Object(i.pipe)(e.extraProperties.vox,u.g.mapOrDefault(()=>null,n.createElement(L.a.Flat,{name:"offensive",onClick:t},n.createElement(D.d.Report,null),a.card.offensive)))},ge=({activeAlert:e,onMute:t,onWrong:a,onOffensive:r,onVisibilityChange:s})=>{const o=e.getTransform(),l=u.g.isSome(t);return l||u.g.isSome(o)?n.createElement(P.a,{label:n.createElement(L.a.Ghost,{name:"moreActions"},n.createElement(D.f.MoreVertical,null)),align:"right",theme:{dropdownContainer:Pt.dropdownContainer},name:"moreActions",onVisibilityChange:s},Object(i.pipe)(t,u.g.map(e=>n.createElement(ue,{onClick:e})),u.g.orNull),Object(i.pipe)(o,u.g.map(()=>n.createElement(n.Fragment,null,l&&n.createElement(P.a.Delimiter,null),n.createElement(me,{onClick:a}),n.createElement(he,{activeAlert:e,onClick:r}))),u.g.orNull)):null},fe=({card:e,onClick:t,mode:a="default"})=>{const i=n.useContext(v.a.Context),r=n.useContext(C.a.Context),s=n.useCallback(e=>{r.has(C.a.Flag.onlyTrustedEvents)&&!e.isTrusted||t()},[]),o=e.renderOptions.features.has(A.a.Features.showAnonymousUserFooters)?{disabled:!0,title:i.card.disabledForAnonymous}:{title:"mini"===a?i.card.addToDict:""};return e.activeAlert.extraProperties.hasAddToDictionary?n.createElement(L.a.Tertiary,Object.assign({},o,{name:"add-to-dict",onClick:s}),n.createElement(D.d.Dict,null),i.card.addToDict):null},be=({title:e,checkingInProgress:t,checkingMessage:a,applyMessage:i,onClick:r})=>n.createElement(L.a.Primary,{key:"update-all",name:"update-all",title:e,className:t.pipe(G.a.map(Object(p.c)(J.a.updateAllBtnLoading,J.a.updateAllBtn))),disabled:t,children:t.pipe(G.a.map(Object(p.c)(n.createElement(n.Fragment,{key:"update-all-checking"},m.f.capitalize(a),n.createElement(H.a,{size:18,strokeWidth:2,wrapperClassName:J.a.updateBtnSpinner,variation:"white"})),n.createElement(n.Fragment,{key:"update-all-checked"},m.f.capitalize(i))))),onClick:q.d.callOnce(r)}),ye=({card:e})=>Object(i.pipe)(Te(e.activeAlert,e.renderOptions.layoutDensity),u.g.map(t=>n.createElement(Z.b,{key:"card-actions-details",visualState:e.visualState,className:Pt.more},t)),u.g.toNullable),Ce=({card:e,actions:t})=>Ae(e.activeAlert,e.renderOptions.layoutDensity)?n.createElement(Z.a,{key:"card-actions-button",mode:"default",actions:t,card:e}):n.createElement(fe,{key:"card-actions-button",card:e,mode:"default",onClick:q.d.callOnce(()=>t.next({type:_.b.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:c.a.AlertFeedbackType.ADD_TO_DICTIONARY}))}),ve=e=>n.createElement(x.b,{alignment:"bottom",eventType:"onclick",stepId:T.a.StepId.Step4,title:"Accept a correction",message:"Click on a suggestion to apply it to your text.",dotPosition:{kind:"findFirstButton",position:x.a.rightTop},themes:{containerWrapperClassName:Pt.onboardingNotification}},e.children),Se=({onClick:e,rl:t,layoutDensity:a})=>n.createElement(ve,null,n.createElement(te.f,{replacementsLabels:t,onClick:e,layoutDensity:a})),Ee=({text:e})=>n.createElement(V.P1,Object.assign({className:Pt.title},K.a.renderToHtml(e))),we=({text:e})=>n.createElement(V.P1,Object.assign({className:Pt.titleMinimal},K.a.renderToHtml(e))),ke=({alert:e})=>n.createElement(V.H4,Object.assign({className:Pt.title},K.a.renderToHtml(e.title))),_e=({alert:e,options:t,children:a,className:i,badge:r})=>n.createElement(X.a,Object.assign({activeAlert:e,showCardLabel:t.features.has(A.a.Features.showLabel),premiumAlertLabelHighlight:t.features.has(A.a.Features.showNewPremiumCardLabels)?X.b.new:t.features.has(A.a.Features.showPersistentPremiumCardLabels)?X.b.persistent:X.b.none,layoutDensity:t.layoutDensity},Object(s.c)(Pt.label,i),{badge:r}),a),Oe=({text:e,layoutDensity:t})=>n.createElement("div",{className:Pt.highlightedTextBox},n.createElement(V.Base,{className:Object(i.pipe)(t,A.a.Density.matchOrDefault(A.a.Density.minimal)(()=>Pt.minimalHighlightedTextInnerBox,()=>Pt.highlightedTextInnerBox))},e));function Ae(e,t){return!e.extraProperties.hasAddToDictionary&&(!E.a.isSentenceLevelBrandTones(e)&&(!(!u.g.isSome(e.examples)&&!u.g.isSome(e.details))||!(t!==A.a.Density.minimal||!u.g.isSome(e.getTransform())||void 0===e.explanation||null===e.explanation||""===e.explanation)))}const Te=(e,t)=>{if(!Ae(e,t))return u.g.empty();const a=Object(i.pipe)(t,A.a.Density.matchOrDefault(A.a.Density.minimal)(()=>Pt.minimalDescription,()=>Pt.description));return u.g.some(n.createElement(n.Fragment,null,Object(i.pipe)(t,A.a.Density.matchOrDefault(A.a.Density.minimal)(()=>u.g.isNone(e.details)?n.createElement(V.Base,Object.assign({className:a},K.a.renderToHtml(e.explanation,re.actionRegex))):null,()=>null)),Object(i.pipe)(e.details,u.g.map(e=>n.createElement(V.Base,Object.assign({className:a},K.a.renderToHtml(e)))),u.g.toNullable),Object(i.pipe)(e.examples,u.g.map(e=>n.createElement(ee.a,{layoutDensity:t,examples:e})),u.g.toNullable)))},xe=({isChecking:e})=>n.createElement(o.a.Fragment,null,e.pipe(G.a.map(e=>n.createElement(H.a,{className:e?Pt.spinner:Pt.spinnerInvisible,variation:"blue",isIdle:!e,size:32,strokeWidth:2})))),Ie=e=>{const[t,a]=n.useState(!0);return t?n.createElement(Pe,{type:e.type,actions:e.actions,onClose:()=>a(!1)}):null},Me=({card:e,actions:t})=>{if(O.a.isSentenceLevelBrandTonesItem(e))return null;if(Object(i.pipe)(e.activeAlert.extraProperties.freePremium,u.g.contains("unlocked")))return n.createElement(Be,null);if(!E.a.isFree(e.activeAlert)&&e.renderOptions.features.has(A.a.Features.showPremiumOnboarding))return n.createElement(He,null);if(!E.a.isFree(e.activeAlert)&&e.renderOptions.features.has(A.a.Features.showPremiumTrialFooters))return n.createElement(Re,{actions:t});if(e.renderOptions.features.has(A.a.Features.showAnonymousUserFooters))return n.createElement(De,{actions:t,card:e});const a=e.renderOptions.isPremiumOnboarding||l.a.create(!1);return n.createElement(o.a.Fragment,null,a.view(a=>!E.a.isFree(e.activeAlert)&&a?n.createElement(He,null):Object(i.pipe)(e.renderOptions.layoutDensity,A.a.Density.matchOrDefault(A.a.Density.cozy)(()=>n.createElement(Fe,{card:e,actions:t}),()=>Object(i.pipe)(e.activeAlert.extraProperties.fluencyMessage,u.g.fold(()=>n.createElement(Fe,{card:e,actions:t}),e=>n.createElement(We,{fluencyLabel:e})))))))};function je(e,t,a){a.next({type:_.b.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:e})}const Le=({card:e,actions:t})=>{const a=n.useContext(v.a.Context).card.matchesNavigation;return(n.createElement(o.a.Fragment,null,Object(i.pipe)(e,G.a.map(e=>n.createElement("div",{key:e.activeAlert.id,className:Pt.bundleNavWrapper},n.createElement(V.Base,{className:Pt.bundleTitle},k.a.bundleTitle(e)),n.createElement("div",{className:Pt.bundleNavMatchesRow},n.createElement(L.a.Ghost,{title:0!==e.activeAlertIndex?"Previous suggestion":void 0,className:Pt.bundleNavButtonGhost,disabled:0===e.activeAlertIndex,name:"left",onClick:()=>je("left",e,t)},n.createElement(D.d.Arrow,{className:Pt.bundleNavLeftButtonIcon})),n.createElement(V.Lawyer,{className:Pt.bundleNavCount},a.currentMatchPosition(e.activeAlertIndex+1,e.alerts.length)),n.createElement(L.a.Ghost,{title:e.activeAlertIndex!==e.alerts.length-1?"Next suggestion":void 0,className:Pt.bundleNavButtonGhost,disabled:e.activeAlertIndex===e.alerts.length-1,name:"right",onClick:()=>je("right",e,t)},n.createElement(D.d.Arrow,{className:Pt.bundleNavRightButtonIcon}))))))))},Ne=({card:e,actions:t,isChecking:a})=>n.createElement(n.Fragment,null,Object(i.pipe)(e.renderOptions.layoutDensity,A.a.Density.matchOrDefault(A.a.Density.minimal)(()=>S.a.isRated(e.activeAlert)?n.createElement(n.Fragment,null,n.createElement(le,{card:e}),n.createElement(we,{text:e.activeAlert.miniCardTitle})):n.createElement(_e,{alert:e.activeAlert,options:e.renderOptions},n.createElement(we,{text:e.activeAlert.miniCardTitle})),()=>n.createElement(n.Fragment,null,n.createElement(_e,{alert:e.activeAlert,options:e.renderOptions}),n.createElement(Ee,{text:e.activeAlert.title}),n.createElement(oe,{card:e,isChecking:a})))),n.createElement(se,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})),Pe=e=>{const t=n.useContext(v.a.Context),{title:a,content:i}=t.card.onboarding[e.type];return n.useLayoutEffect(()=>()=>e.actions.next({type:_.b.Type.onboardingClose,value:e.type})),n.createElement(R.b.AdHoc,{key:"new-notification",title:n.createElement(n.Fragment,null,a,n.createElement(j.a.Regular,{className:Pt.newLabel},t.new)),className:Pt.newCheckNotification,onClose:e.onClose},i)},Fe=({actions:e,card:t})=>{const a=n.useContext(v.a.Context);return U.a.useEffectOnDidMount(()=>{t.meta.showMuteQuotedAdvice&&e.next({type:_.b.Type.muteQuotedAdviceShow})}),t.meta.showMuteQuotedAdvice?n.createElement($e.Base,{className:ct},n.createElement("span",null,a.card.muteCitedText(n.createElement("a",{"data-name":"open-preferences-link",onClick:()=>e.next({type:_.b.Type.openPreferences})},a.documentSettings.editorSettings))),n.createElement(L.a,{name:"dismiss-mute-quoted-advice",onClick:()=>e.next({type:_.b.Type.dismissMuteQuotedAdvice})},n.createElement(D.d.Close,null))):null},De=({actions:e,card:t})=>{const a=n.useContext(v.a.Context),i=t.activeAlert.extraProperties.hasAddToDictionary?a.anonymousUserAddToDictionarySignInPrompt:a.anonymousUserGenericSignInPrompt;return n.createElement($e.Base,{className:Pt.anonymousUserNotice},i(()=>{e.next({type:_.b.Type.toSignIn})}))},Re=({actions:e})=>n.createElement($e.Small,{className:dt},n.createElement(D.d.PaidLink,{className:Pt.iconWrapper,width:12}),n.useContext(v.a.Context).premiumFreeTrial(()=>{e.next({type:_.b.Type.premiumTrialFooterCtaClick})})),Be=()=>{const{beforeIcon:e,afterIcon:t}=n.useContext(v.a.Context).freePremiumAlertFooter;return n.createElement($e.Small,{className:pt},e,n.createElement(D.d.PaidLink,{width:12}),t)},He=()=>{const{premiumOnboardingFooter:e}=n.useContext(v.a.Context);return n.createElement($e.Small,{className:pt},n.createElement(D.d.PaidLink,{width:12}),e)},We=({fluencyLabel:e})=>{const t=n.useContext(v.a.Context).card.fluency,a=Object.keys(d.c.PrimaryLanguage).filter(e=>e!==d.c.PrimaryLanguage.Other).map(e=>e.toLowerCase()),r=e.toLowerCase(),s=Object(i.pipe)(u.g.fromNullable(a.find(e=>r.includes(e))),u.g.map(m.f.capitalize),u.g.getOrElse(()=>"multilingual"),t.cardFooter);return n.createElement(V.Small,{className:Pt.fluencyNotice},s,n.createElement(W.a,{title:t.tooltip},n.createElement(D.d.Info,{width:10,className:Pt.fluencyInfo})))};var $e;!function(e){function t(e){return({children:t,className:a})=>n.createElement(e,Object.assign({},Object(s.c)(Pt.cardFooter,a)),t)}e.Small=t(V.Small),e.Base=t(V.Base)}($e||($e={}));const Ve=({title:e,children:t})=>n.createElement("div",{className:Pt.cardWrapper},n.createElement("div",{className:Pt.cardWrapperTitle},e),t),Ue=({className:e,title:t,emoji:a,hideBetaBadge:i})=>{const r=n.useContext(v.a.Context);return n.createElement("div",Object.assign({},Object(s.c)(Pt.smartPhrasesTitle,e)),n.createElement("div",{className:Pt.smartPhrasesTitleEmojiContainer},n.createElement(F.a,{className:Pt.smartPhrasesTitleEmojiWrapper,emojiClassName:Pt.smartPhrasesTitleEmoji},a),t),i?null:n.createElement(j.a.Regular,null,r.beta))},Ge=({card:e,actions:t,isLoading:a,transform:i,classes:r})=>{const[s,l]=n.useState(null),[c,d]=n.useState(null),[p,m]=n.useState(200),[h,f]=n.useState(null);n.useEffect(()=>{const e=new ne(e=>{e[0]&&d(e[0].contentRect.height)});return l(e),()=>e.disconnect()},[]);const b=n.useCallback(e=>{h&&(null==s||s.unobserve(h)),e&&(f(e),null==s||s.observe(e))},[h,s]);return n.useEffect(()=>{!e.activeAlert.hideReplacements&&c&&m(c)},[c]),a?n.createElement("div",{className:Pt.smartPhrasesLoadingContainer,style:{height:null!=p?p:void 0}},n.createElement("div",{className:Pt.smartPhrasesLoadingContainerInner},n.createElement(I.a,{size:"medium"}))):e.activeAlert.hideReplacements?n.createElement("div",{className:Pt.smartPhrasesSuccessLabel},n.createElement(D.d.SmartPhrases.HeaderCheckmark,{className:Pt.smartPhrasesSuccessLabelIcon}),e.activeAlert.phraseAddedTitle):n.createElement("div",{ref:b,className:Pt.smartPhrasesReplacementsContainer},n.createElement(_e,{alert:e.activeAlert,options:e.renderOptions,className:Pt.smartPhrasesReplacementsLabel}),n.createElement(o.a.div,{className:r.transformContainer},n.createElement(M.b,{classes:{rendered:r.renderedReplacement,removing:r.hiddenReplacement},timeout:250,content:i.pipe(G.a.map(u.g.fold(()=>(g.Monitoring.Logging.getLogger("SmartPhrasesReplacements").error("No replacements available for SmartPhrases card.",{cardId:e.id}),null),a=>{const i=Object.assign(Object.assign({},a),{labels:a.labels.filter((t,a)=>!e.activeAlert.usedReplacementsIndexes.includes(a)).slice(e.activeAlert.replacementsStartIndex,e.activeAlert.replacementsEndIndex)});return n.createElement(te.h,{replacementsLabels:i,onClick:a=>q.d.callOnce(()=>{const n=e.activeAlert.originalReplacementsIndexes.get(a+e.activeAlert.replacementsStartIndex)||a;t.next({type:_.b.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:n,cardType:_.b.getCardType(e)}),t.next({type:_.b.Type.smartPhrasesApply,alertId:e.activeAlert.id,cardId:e.id,replacementIndex:a+e.activeAlert.replacementsStartIndex,originalReplacementIndex:n})})})})))})))},ze=({card:e,actions:t})=>{const a=n.useContext(v.a.Context);return n.createElement(L.a.Flat,{className:Pt.smartPhrasesFooter,name:`smart-phrases-${e.activeAlert.intent}-open-feedback-form`,onClick:()=>t.next({type:_.b.Type.smartPhrasesOpenFeedbackForm,alertId:e.activeAlert.id,cardId:e.id})},n.createElement("span",null,a.card.smartPhrases.openFeedbackFormQuestion),n.createElement(D.d.SmartPhrases.OpenFeedbackFormArrow,null))},qe=({card:e,actions:t,isChecking:a,isCheckingGlobal:i,cardTheme:r,cardBody:s,cardFooter:o,mainActions:c,subActions:d,cardExtra:u})=>{const{transformHidden:m,isMouseInside:h,transformHiddenObservable:g}=U.a.useMemoOnDidMount(()=>{const e=l.a.create(!1),t=new G.a.Subject,n=G.a.mergeStatic(G.a.combineLatestStatic([t,a]).pipe(G.a.map(([e,t])=>e&&t),G.a.filter(e=>!0===e),G.a.tap(()=>e.set(!0))),a.pipe(G.a.skip(1),G.a.filter(e=>!e),G.a.tap(()=>e.set(!1))));return{transformHidden:e,isMouseInside:t,transformHiddenObservable:n}});return U.a.useSubscriptionTo(g),n.createElement(Q.a,{visualState:e.visualState,onFocus:()=>t.next({type:_.b.Type.alertCardShow,cardType:_.b.getCardType(e),alertId:e.activeAlert.id}),onMouseOver:()=>{t.next({type:_.b.Type.hover,kind:"hover",id:e.id}),h.next(!0)},onMouseOut:()=>{t.next({type:_.b.Type.hover,kind:"unhover",id:e.id}),h.next(!1)},theme:Object.assign(Object.assign({content:i.pipe(G.a.map(Object(p.c)(Pt.loadingWrapperInvisible,Pt.loadingWrapper)))},Object(ae.b)(e.renderOptions)),r),extra:n.createElement(n.Fragment,null,n.createElement(xe,{isChecking:i}),null==u?void 0:u()),body:s(m),mainActions:null==c?void 0:c(),footer:null==o?void 0:o(m),subActions:null==d?void 0:d()})},Ye={wordWrap:"break-word",overflowWrap:"break-word",$nest:{"& a":{borderBottom:"1px solid",textDecoration:"none",$nest:{"&:link, &:visited":{color:h.Color.CoreBlue50}}},"& b":{fontStyle:"italic",fontFeatureSettings:`${y.e}, ${y.f}`},"& ul":{margin:`${f.a.rem(.75)} 0 0`,padding:0,listStyle:"none"},"& li":{position:"relative",paddingLeft:f.a.rem(1.5),$nest:{"&:before":{position:"absolute",left:0,content:"'\\2022'"}}},"& li + li":{marginTop:f.a.rem(.5)}}},Xe={lineHeight:f.a.rem(1.3125)},Ke={$nest:{"& i":{color:h.Color.CoreNeutral50},"& > * + *":{marginTop:f.a.rem(.75)}}},Ze={fontWeight:"bold",textTransform:"none",$nest:{"&:first-letter":{textTransform:"uppercase"},"& i":{color:b.e}}},Qe={marginTop:f.a.important(0),lineHeight:f.a.rem(1.125)},Je={fontSize:f.a.rem(h.Text.SubheadingSize),lineHeight:f.a.rem(h.Text.SubheadingLineHeight)},et={width:f.a.rem(2),height:f.a.rem(2)},tt={position:"absolute",top:`calc(50% - ${f.a.rem(1)})`,left:`calc(50% - ${f.a.rem(1)})`,width:f.a.rem(2),height:f.a.rem(2),transition:"opacity .2s"},at={marginLeft:f.a.rem(.5),backgroundColor:h.Color.CoreGreen50,color:h.Color.CoreNeutral0,fontWeight:600},nt={position:"absolute",marginTop:f.a.rem(-8.5),marginLeft:f.a.rem(-2),$nest:{"&:after":{position:"absolute",bottom:f.a.rem(-.525),left:f.a.rem(.7),borderTop:`${f.a.rem(.625)} solid ${h.Color.BackgroundNotification}`,borderRight:`${f.a.rem(.5)} solid transparent`,borderLeft:`${f.a.rem(.5)} solid transparent`,content:"' '"}}},it={background:"linear-gradient(269.88deg, rgba(228, 244, 247, .6) .02%, rgba(215, 248, 240, .6) 50.81%, rgba(202, 227, 250, .6) 99.98%)"},rt={position:"absolute",top:f.a.rem(.75),left:f.a.rem(.4)},st={color:h.Color.CoreNeutral90,$nest:{"& a":{fontWeight:800,color:h.Color.CoreBlue50,$nest:{"&:link, &:visited":{color:h.Color.CoreBlue50},"&:hover":{borderBottom:`1px solid ${h.Color.CoreBlue40}`,color:h.Color.CoreBlue40}}}}},ot={display:"flex",borderRadius:`${y.q} ${y.q} ${f.a.rem(y.r)} ${f.a.rem(y.r)}`,color:h.Color.CoreNeutral50,padding:`${f.a.rem(.5)} ${f.a.rem(.75)} ${f.a.rem(.5)} ${f.a.rem(1)}`,fontSize:f.a.rem(.6875),lineHeight:f.a.rem(1.125)},lt={padding:`0 ${f.a.rem(.6)}`,minWidth:f.a.rem(.625),minHeight:f.a.rem(.625)},ct=f.a.joinClasses(["muteQuotedAdvice",f.a.style({$nest:{"& a":{borderBottom:`1px solid ${h.Color.CoreBlue50}`,color:h.Color.CoreBlue50,$nest:{"&:link, &:visited":{color:h.Color.CoreBlue50},"&:hover":{borderBottom:`1px solid ${h.Color.CoreBlue40}`,color:h.Color.CoreBlue40}}},"& i:hover":{strokeWidth:f.a.px(2)}}})]),dt=f.a.joinClasses(["premiumFreeTrial",f.a.style({$nest:{"& svg":{fill:h.Color.CoreYellow80},"& a":{fontWeight:800,color:h.Color.CoreYellow70,$nest:{"&:link, &:visited":{color:h.Color.CoreYellow80},"&:hover":{borderBottom:`1px solid ${h.Color.CoreYellow60}`,color:h.Color.CoreYellow60}}}}})]),pt=f.a.joinClasses(["premiumAlertFooter",f.a.style({$nest:{"& svg":{margin:`0 ${f.a.rem(.25)}`,fill:h.Color.CoreYellow80}}})]),ut={display:"block",boxSizing:"border-box",padding:`${f.a.rem(1)} ${f.a.rem(1)} ${f.a.rem(1)} ${f.a.rem(1.5)}`,width:f.a.percent(100),borderRadius:`${y.q} ${y.q} ${f.a.rem(y.r)} ${f.a.rem(y.r)}`,$nest:{"& a":{cursor:"pointer",transition:"color .2s"},"&.muteQuotedAdvice":{display:"flex",padding:`${f.a.rem(1)} ${f.a.rem(1)} ${f.a.rem(1)} ${f.a.rem(2)}`,background:h.Color.CoreNeutral10,color:h.Color.CoreNeutral90,justifyContent:"space-between",alignItems:"center"},"&.premiumFreeTrial":{padding:`${f.a.rem(1)} ${f.a.rem(1)} ${f.a.rem(1)} ${f.a.rem(2)}`,position:"relative",background:h.Color.CoreYellow20,color:h.Color.CoreNeutral90},"&.premiumAlertFooter":{display:"flex",justifyContent:"center",alignItems:"center",padding:`${f.a.rem(.5)}`,background:h.Color.CoreYellow20,color:h.Color.CoreYellow80}}},mt={position:"absolute",top:f.a.rem(.8),left:f.a.rem(.5),minWidth:f.a.rem(1),minHeight:f.a.rem(1)},ht={fontWeight:"bold",fontSize:f.a.rem(.875),lineHeight:f.a.rem(1.125),flex:2},gt={padding:`${f.a.rem(.625)} 0 ${f.a.rem(.1875)} ${f.a.rem(.5)}`,marginBottom:f.a.rem(.25),display:"flex",justifyContent:"space-between",alignItems:"center"},ft={fontSize:f.a.rem(.75),lineHeight:f.a.rem(1.125),color:h.Color.CoreNeutral90},bt={display:"flex",justifyContent:"flex-end",alignItems:"center",height:f.a.rem(1.5),$nest:{"& > * + *":{marginLeft:f.a.rem(.25)},"& > *":{borderRadius:f.a.rem(y.s)}}},yt={height:f.a.rem(2),minHeight:f.a.rem(2),width:f.a.rem(2),fill:h.Color.CoreNeutral90,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer",fill:h.Color.CoreBlue50},"&[data-disabled='true']":{fill:h.Color.CoreNeutral30}}},Ct={borderRadius:f.a.rem(.75),background:h.Color.CoreNeutral20,margin:`${f.a.rem(-.25)} ${f.a.rem(-.25)}`,padding:`${f.a.rem(.25)} ${f.a.rem(.25)}`,$nest:{[`& .${Y.b.cozyCardContainerSelector}`]:{margin:0,boxShadow:"none"},[`& .${Y.b.fullCardSelector}`]:{padding:`${f.a.rem(.75)} ${f.a.rem(.5)} ${f.a.rem(.5)} ${f.a.rem(1)}`},"& [role=dropdown-list]":{transform:`translateY(${f.a.rem(-.5)})`}}},vt={paddingTop:f.a.rem(.25),paddingBottom:f.a.rem(.5),paddingLeft:f.a.rem(.5),paddingRight:f.a.rem(.5),fontWeight:"bold",fontSize:f.a.rem(.875),lineHeight:f.a.rem(1.125)},St={marginRight:f.a.rem(.5),width:f.a.rem(1),height:f.a.rem(1)},Et={display:"flex",alignItems:"center",justifyContent:"space-between",background:h.Color.CoreNeutral10,borderRadius:`${y.q} ${y.q} ${f.a.rem(.5)} ${f.a.rem(.5)}`,padding:`${f.a.rem(.6875)} ${f.a.rem(.5)} ${f.a.rem(.6875)} ${f.a.rem(1)}`,color:h.Color.CoreNeutral50,fontSize:f.a.rem(.6875),lineHeight:f.a.rem(1.125),height:f.a.rem(2.5),boxSizing:"border-box"},wt={fontSize:f.a.rem(.75),lineHeight:f.a.rem(1.125),color:h.Color.CoreNeutral90,display:"flex",alignItems:"center",marginLeft:f.a.rem(-1.5)},kt={marginRight:f.a.rem(.5)},_t={display:"flex",flexDirection:"column",justifyContent:"center",animation:`${f.a.keyframes({from:{opacity:0,transform:"scale(0)"}})} .3s ease-in-out`},Ot={marginBottom:f.a.rem(.75)},At={animation:`${f.a.keyframes({from:{opacity:0}})} .3s ease-in-out`};function Tt(e,t){return{display:["block","-webkit-box"],maxHeight:f.a.rem(e*t),overflow:"hidden",overflowWrap:"anywhere",whiteSpace:"pre-wrap",textOverflow:"ellipsis","-webkit-line-clamp":t,WebkitBoxOrient:"vertical"}}const xt=Object.assign(Object.assign({},Tt(1.5,3)),{lineHeight:f.a.rem(1.5)}),It=Object.assign(Object.assign({},Tt(1.3125,3)),{lineHeight:f.a.rem(1.3125)}),Mt={padding:f.a.rem(.5),borderRadius:f.a.rem(y.s),background:h.Color.CoreNeutral10,color:h.Color.CoreNeutral90,fontWeight:400,fontStyle:"italic",fontFeatureSettings:`${y.e}, ${y.f}`},jt=.25,Lt={opacity:0,pointerEvents:"none"},Nt={transition:`opacity ${f.a.seconds(jt)}`},Pt=f.a.stylesheet({loadingWrapper:[Nt],loadingWrapperInvisible:[Nt,Lt],description:[Ye],minimalDescription:[Ye,Xe],more:[Ke],onboardingNotification:[{display:"block"}],title:[Ze],titleMinimal:[Ze,Qe],label:[Je],dropdownContainer:[et],spinner:[tt],spinnerInvisible:[tt,{opacity:0,pointerEvents:"none"}],newLabel:[at],newCheckNotification:[nt],baseNotice:[it],iconWrapper:[rt],anonymousUserNotice:[it,st],fluencyNotice:[it,ot],fluencyInfo:[lt],cardFooter:[ut],circleProgress:[mt],circleText:[{display:"none"}],bundleTitle:[ht],bundleNavWrapper:[gt],bundleNavCount:[ft],bundleNavMatchesRow:[bt],bundleNavButtonGhost:[{$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:"rgba(198, 203, 222, .5)"}}}],bundleNavButton:[yt],bundleNavLeftButtonIcon:[yt,{transform:"rotate(90deg)"}],bundleNavRightButtonIcon:[yt,{transform:"rotate(270deg)"}],cardWrapper:[Ct],cardWrapperTitle:[vt],smartPhrasesTitle:[{display:"flex",justifyContent:"space-between"}],smartPhrasesTitleEmojiContainer:[{display:"flex",alignItems:"center"}],smartPhrasesTitleEmojiWrapper:[{display:"inline-flex"}],smartPhrasesTitleEmoji:[St],smartPhrasesFooter:[Et],smartPhrasesSuccessLabel:[wt],smartPhrasesSuccessLabelIcon:[kt],smartPhrasesLoadingContainer:[_t],smartPhrasesLoadingContainerInner:[{width:"100%",display:"flex",justifyContent:"center"}],smartPhrasesReplacementsLabel:[Ot],smartPhrasesReplacementsContainer:[At],highlightedTextBox:[Mt],highlightedTextInnerBox:[xt],minimalHighlightedTextInnerBox:[It]})},HDvz:function(e,t,a){"use strict";a.d(t,"a",(function(){return L}));var n=a("ERkP"),i=a("I7vG"),r=a("2Jhg"),s=a("vOOZ"),o=a("9NHN"),l=a("LNSM"),c=a("bYZB"),d=a("rk+4"),p=a("kED/"),u=a("nnns"),m=a("BnIB"),h=a("dgw0"),g=a("tZ26"),f=a("0vvr"),b=a("BugA"),y=a("zR/0"),C=a("1gzW"),v=a("BeBM"),S=a("lRnN"),E=a("9/oM"),w=a("hoSD"),k=a("D9EC"),_=a("lrqh"),O=a("6fbX"),A=a("rmLU"),T=a("+ukg"),x=a("kbau"),I=a("GqpD"),M=a("zGI0"),j=a("jzV5");const L=({documentSettingsViewModel:e,lensState:t,isDemoMode:a})=>n.createElement("div",{className:j.leftSidebar},n.createElement(N,{viewModel:e}),n.createElement(P,{documentSettingsViewModel:e,lensState:t,isDemoMode:a})),N=({viewModel:e})=>{const t=n.createRef(),a=y.a.defer(()=>null!==t.current?y.a.of(t.current):y.a.EMPTY),i=new y.a.BehaviorSubject(0),o=e.visualState.pipe(y.a.filter(V.isExpanded),y.a.tap(()=>i.next(0))),l=e.visualState.pipe(y.a.filter(V.isExpanded),y.a.switchMap(()=>y.a.fromEvent(document,"mousedown").pipe(y.a.map(e=>r.f.of(e.target)))),y.a.withLatestFrom(a),y.a.filter(([e,t])=>!e.exists(e=>w.c.isParent(t,e))),y.a.tap(()=>e.visualState.set({type:I.a.Collapsed})));C.a.useSubscriptionTo(o.pipe(y.a.merge(l)));const c=new y.a.Subject;return n.createElement(s.a.Fragment,null,e.visualState.view(a=>{const r=V.isExpanded(a);return n.createElement(n.Fragment,null,n.createElement(D,{viewModel:e}),n.createElement("nav",{className:r?j.documentSettingsExpanded:j.documentSettings,ref:t,onMouseEnter:e.onMenuHovered},n.createElement("div",{className:j.menuHead}),n.createElement(f.a,{name:"documentSettingsScroll",showWhenScrollable:!0,className:j.scrollableContent,scrollTo:i,key:a.type,onScroll:c},e.items.map((e,t)=>M.a.Item.isViewItem(e)?V.isHeader(e.name)?n.createElement(F,{item:e,key:t,onScroll:c}):n.createElement("div",{ref:t=>{a.type===I.a.Expanded&&null!==t&&a.scrollTo.filter(t=>t.item===e.name).forEach(e=>{i.next(t.getBoundingClientRect().bottom-e.positionY)})},className:V.getItemClassName(e.name),key:t},n.createElement(R,{item:e,onScroll:c})):n.createElement($,{key:t})))))}))},P=({documentSettingsViewModel:e,lensState:t,isDemoMode:a})=>{const i=n.useContext(d.a.Context),r=t.view(v.e.isSidebarOpened);return n.createElement(s.a.Fragment,null,e.visualState.view(t=>{const l=V.isExpanded(t);return n.createElement("nav",{className:l?j.toolbarCollapsed:j.toolbarExpanded,key:"documentSettings-toolbar"},n.createElement("div",{className:j.expandButtonContainer},n.createElement(u.a.Animated,Object.assign({name:"documentSettings-toolbarExpand"},Object(o.c)(l?j.expandButtonAnimationWrapperCollapsed:j.expandButtonAnimationWrapperExpanded,a?j.expandButtonSquashed:r.view(Object(k.c)(j.expandButtonSquashedWhenSmall,null))),{animationMode:m.a.None}),n.createElement("div",{className:j.expandButton},!a&&n.createElement(n.Fragment,null,n.createElement(u.a,Object.assign({name:"documentSettings-toolbarExpand-backToMyGrammarlyInline",title:"Grammarly Home"},Object(o.c)(j.expandButtonInlineAnimation,r.view(Object(k.c)(j.expandButtonHiddenWhenSmall,null))),{onClick:e.onGoBackToGrammarlyHome}),n.createElement(g.d.Grammarly,{className:l?j.iconCollapsed:j.iconExpanded})),n.createElement(s.a.div,Object.assign({},Object(o.c)(j.expandButtonSeparator,r.view(Object(k.c)(j.expandButtonHiddenWhenSmall,null)))))),n.createElement(E.b,{alignment:"bottom",eventType:"onclick",stepId:S.a.StepId.Step10,title:i.documentSettings.onboarding.title,message:i.documentSettings.onboarding.message,themes:{spotClassName:j.onboardingSpot}},n.createElement(u.a,{name:"documentSettings-toolbarExpand-openToolbar",title:"Menu",className:j.expandButtonInlineAnimation,onClick:e.onOpenToolbar},n.createElement(g.d.DocumentSettings.ExpandMenu,null)))))),n.createElement(u.a.Ghost,{name:"documentSettings-toolbarSupport",className:j.toolbarSupportButton,title:i.documentSettings.supportTitle,onClick:t=>{e.visualState.set({type:I.a.Expanded,scrollTo:V.getClickEventY(t).map(e=>({item:I.b.support,positionY:e}))})}},n.createElement(g.d.QuestionMark,null)))}))},F=({item:e,onScroll:t})=>n.createElement("div",{className:V.getItemClassName(e.name)},n.createElement(b.Small,{className:V.getTextClassName(e.name).orUndefined()},e.title),n.createElement(W,{item:e,onScroll:t})),D=({viewModel:e})=>{const t=V.isExpanded(e.visualState.get());return n.createElement("div",{className:t?j.closeButtonWrapperExpanded:j.closeButtonWrapperCollapsed},n.createElement(u.a.Flat,{name:`documentSettings-${e.head.name}`,active:e.head.active,disabled:e.head.disabled,animationMode:m.a.None,onClick:e.head.onClick,className:t?j.closeButtonExpanded:j.closeButtonCollapsed},n.createElement(g.d.Close,{className:t?j.closeIconExpanded:j.closeIconCollapsed}),n.createElement("span",{className:t?j.closeButtonTitleExpanded:j.closeButtonTitleCollapsed},e.head.title)))},R=({item:e,onScroll:t})=>{const a=n.useContext(A.a.Context),i=V.getLink(e.name,a),r=n.createElement(n.Fragment,null,V.getIcon(e).fold(()=>n.createElement("span",{className:j.menuText},e.title),t=>n.createElement(n.Fragment,null,n.createElement("div",{className:j.icon},t),n.createElement("span",{className:j.menuTitle},e.title))),n.createElement(W,{item:e,onScroll:t}));return i.fold(()=>n.createElement(B,{item:e},r),t=>n.createElement(H,{item:e,link:t},r))},B=({item:e,children:t})=>n.createElement(u.a.Flat,{name:`documentSettings-${e.name}`,active:e.active,disabled:e.disabled,onClick:e.onClick,className:j.menuButton},t),H=({item:e,link:t,children:a})=>n.createElement(u.a.Flat,{name:`documentSettings-${e.name}`,active:e.active,disabled:e.disabled,className:j.menuButton,onClick:e.onClick,href:t,target:"_blank"},a),W=({item:e,onScroll:t})=>{const a=n.useContext(d.a.Context);return Object(i.pipe)(e.nestedItem,_.g.map(e=>e.fold(e=>n.createElement(b.Small,{className:j.label},e),e=>V.renderNestedItem(e,t,a.documentSettings.eduLabel))),_.g.toNullable)},$=()=>n.createElement("div",{className:j.separator});var V;!function(e){function t(e){switch(e){case"american":return n.createElement(g.d.DocumentSettings.USFlag,null);case"british":return n.createElement(g.d.DocumentSettings.GBFlag,null);case"canadian":return n.createElement(g.d.DocumentSettings.CanadianFlag,null);case"australian":return n.createElement(g.d.DocumentSettings.AustralianFlag,null);default:return Object(O.d)(e)}}function a(e){const t=e.getBoundingClientRect();return t.bottom-t.height/2}e.renderNestedItem=(e,a,i)=>{switch(e.type){case I.c.uploadFile:return n.createElement(n.Fragment,null,n.createElement(b.Small,{className:j.label},e.label),n.createElement(x.a,{documentUpload:e.uploadViewModel.uploadModel,hideTooltip:!0}));case I.c.accountHeaderLabel:return T.g.isPremium(e.denaliUserType)?T.g.isBusiness(e.denaliUserType)?n.createElement(p.a.Business,{className:j.accountHeaderLabel}):T.g.isEdu(e.denaliUserType)?n.createElement(p.a.Regular,{className:j.accountHeaderLabel},i):n.createElement(p.a.Premium,{className:j.accountHeaderLabel}):n.createElement(g.d.DocumentSettings.FreeLabel,{className:j.accountHeaderLabel});case I.c.whatsNewUpdates:return n.createElement(n.Fragment,null);case I.c.languageSettings:return function(e,a){const i=l.a.create("100%"),o=(d=e.dialectSettings,p=e.changeDialect,e=>n.createElement(u.a.Flat,{name:`documentSettings-${e}DialectButton`,onClick:()=>p(e)},n.createElement(s.a.Fragment,null,t(e),n.createElement("span",{className:j.dialect},`${e} English`),d.dialectOrDefault.view(t=>t===e&&n.createElement(g.d.DocumentSettings.Selected,{className:j.selectedLanguageIcon,key:e}))))),c=new y.a.Subject;var d,p;return n.createElement(h.a,{name:"languageSettingsDropdown",label:n.createElement("div",{className:j.languageSettings,onMouseEnter:e=>{const t=r.f.of(e.target).map(e=>e.getBoundingClientRect());return c.pipe(y.a.map(e=>e.offsetHeight),y.a.tap(e=>t.forEach(t=>{const a=t.top-t.height/2,n=e/4;window.innerHeight<a+e+n?i.set(`${window.innerHeight-e-n}px`):i.set(`${a}px`)}))).toPromise()}},n.createElement(s.a.div,{className:j.icon},e.dialectSettings.dialectOrDefault.view(e=>t(e))),n.createElement(b.Small,{className:j.label},"▶")),showDelay:0,closeDelay:100,theme:j,customPosition:{top:i,left:"18.5rem"},forceHide:a},n.createElement("div",{ref:e=>e&&c.next(e),className:j.languageButtonsWrapper},o("american"),o("british"),o("canadian"),o("australian")))}(e,a);default:return Object(O.d)(e)}},e.getLink=function(e,t){switch(e){case I.b.subscription:return Object(r.h)(t.account.subscription);case I.b.support:return Object(r.h)(t.support.mainPage);case I.b.privacyPolicy:return Object(r.h)(t.privacyPolicy);case I.b.termsOfService:return Object(r.h)(t.termsOfService);case I.b.close:case I.b.myGrammarly:case I.b.documentHeader:case I.b.newDocument:case I.b.uploadFile:case I.b.download:case I.b.print:case I.b.editHeader:case I.b.editorSettings:case I.b.accountHeader:case I.b.userName:case I.b.email:case I.b.upgradeToPremium:case I.b.language:case I.b.logout:case I.b.whatsNew:case I.b.feedback:case I.b.switchToClassicEditor:case c.d.undo:case c.d.redo:case c.d.cut:case c.d.copy:case c.d.paste:case c.d.selectAll:return r.e;default:return Object(O.d)(e)}},e.getIcon=function(e){const t=e.name;switch(t){case I.b.close:return Object(r.h)(n.createElement(g.d.Close,null));case I.b.myGrammarly:return Object(r.h)(n.createElement(g.d.DocumentSettings.Home,null));case I.b.newDocument:return Object(r.h)(n.createElement(g.d.DocumentSettings.NewDocument,null));case I.b.uploadFile:return Object(r.h)(n.createElement(g.d.DocumentSettings.UploadFile,null));case I.b.download:return Object(r.h)(n.createElement(g.d.ToolbarDownload,null));case I.b.print:return Object(r.h)(n.createElement(g.d.DocumentSettings.PrintFile,null));case c.d.undo:return Object(r.h)(n.createElement(g.d.DocumentSettings.UndoGrey,null));case c.d.redo:return Object(r.h)(n.createElement(g.d.DocumentSettings.Redo,null));case c.d.cut:return Object(r.h)(n.createElement(g.d.DocumentSettings.Cut,null));case c.d.copy:return Object(r.h)(n.createElement(g.d.Copy,null));case c.d.paste:return Object(r.h)(n.createElement(g.d.DocumentSettings.Paste,null));case I.b.editorSettings:return Object(r.h)(n.createElement(g.d.Gear,null));case I.b.support:return Object(r.h)(n.createElement(g.d.QuestionMark,null));case I.b.upgradeToPremium:return Object(r.h)(n.createElement(g.d.Paid,null));case I.b.documentHeader:case I.b.editHeader:case I.b.accountHeader:case I.b.userName:case I.b.email:case I.b.language:case I.b.subscription:case I.b.logout:case I.b.whatsNew:case I.b.feedback:case I.b.switchToClassicEditor:case I.b.privacyPolicy:case I.b.termsOfService:case c.d.selectAll:return r.e;default:return Object(O.d)(t)}},e.getItemClassName=function(e){switch(e){case I.b.myGrammarly:case I.b.editorSettings:return j.oneItemContainer;case I.b.documentHeader:case I.b.editHeader:case I.b.accountHeader:return j.header;case I.b.userName:return j.userNameHeader;case I.b.email:return j.emailHeader;case I.b.close:case I.b.newDocument:case I.b.uploadFile:case I.b.download:case I.b.print:case I.b.upgradeToPremium:case I.b.language:case I.b.subscription:case I.b.logout:case I.b.support:case I.b.whatsNew:case I.b.feedback:case I.b.switchToClassicEditor:case I.b.privacyPolicy:case I.b.termsOfService:case c.d.undo:case c.d.redo:case c.d.cut:case c.d.copy:case c.d.paste:case c.d.selectAll:return j.menuButtonWrapper;default:return Object(O.d)(e)}},e.getTextClassName=function(e){switch(e){case I.b.userName:return Object(r.h)(j.userName);case I.b.email:return Object(r.h)(j.email);case I.b.documentHeader:case I.b.editHeader:case I.b.accountHeader:return Object(r.h)(j.headerText);case I.b.close:case I.b.myGrammarly:case I.b.newDocument:case I.b.uploadFile:case I.b.download:case I.b.print:case I.b.editorSettings:case I.b.upgradeToPremium:case I.b.language:case I.b.subscription:case I.b.logout:case I.b.support:case I.b.whatsNew:case I.b.feedback:case I.b.switchToClassicEditor:case I.b.privacyPolicy:case I.b.termsOfService:case c.d.undo:case c.d.redo:case c.d.cut:case c.d.copy:case c.d.paste:case c.d.selectAll:return r.e;default:return Object(O.d)(e)}},e.isHeader=function(e){switch(e){case I.b.documentHeader:case I.b.editHeader:case I.b.accountHeader:case I.b.userName:case I.b.email:return!0;case I.b.close:case I.b.myGrammarly:case I.b.newDocument:case I.b.uploadFile:case I.b.download:case I.b.print:case I.b.editorSettings:case I.b.upgradeToPremium:case I.b.language:case I.b.subscription:case I.b.logout:case I.b.support:case I.b.whatsNew:case I.b.feedback:case I.b.switchToClassicEditor:case I.b.privacyPolicy:case I.b.termsOfService:case c.d.undo:case c.d.redo:case c.d.cut:case c.d.copy:case c.d.paste:case c.d.selectAll:return!1;default:return Object(O.d)(e)}},e.getClickEventY=function(e){return r.f.of(void 0!==e&&e.target).map(a)},e.getElementCenter=a,e.isExpanded=function(e){return e.type===I.a.Expanded}}(V||(V={}))},HTie:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a("ERkP"),i=a("I7vG"),r=a("lrqh"),s=a("uO+M"),o=a("6gXa"),l=a("ps/9"),c=a("EOGW"),d=a("XxrX"),p=a("BugA"),u=a("aIes");const m=({examples:e,layoutDensity:t})=>n.createElement(p.Typography,{nodeType:"table",styleType:p.Typography.Type.Base,className:k.wrapper},e.map((e,a)=>n.createElement("tbody",{key:a,className:k.group},e.map(({text:e,title:a,color:s,hasItalic:o},l)=>n.createElement("tr",{key:l,className:Object(i.pipe)(t,d.a.Density.matchL(()=>k.item,()=>k.itemCompact,()=>k.itemMinimal))},Object(i.pipe)(a,r.g.map(e=>n.createElement("td",{className:c.a.colorMatch(s)(k)},(e=>e.split("/").reduce((e,t,a)=>(0!==a&&e.push(n.createElement("br",{key:a})),e.push(t),e),[]))(e))),r.g.toNullable),n.createElement("td",Object.assign({colSpan:r.g.isNone(a)?2:void 0,className:o?k.content:k.contentItalic},u.d.setInnerHTML(e)))))))),h={$nest:{"&:not(:last-child):after":{display:"block",height:o.a.rem(1.75),content:"''"}}},g={$nest:{"&:not(:last-child)":{borderBottom:`${o.a.rem(.5)} solid transparent`}}},f={display:"flex",flexDirection:"column",lineHeight:o.a.rem(1.3125)},b={padding:0,verticalAlign:"top",lineHeight:o.a.rem(1.25)},y={paddingRight:o.a.rem(2),verticalAlign:"top",whiteSpace:"nowrap"},C={color:s.Color.CoreNeutral50,fontFeatureSettings:`${l.e}, ${l.f}`},v={color:s.Color.CoreRed50},S={color:s.Color.CoreGreen60},E={color:s.Color.CoreNeutral90},w={color:s.Color.CoreNeutral90},k=o.a.stylesheet({wrapper:[{borderCollapse:"collapse",userSelect:"initial"}],group:[h],item:[g],itemCompact:[g,{display:"flex",flexDirection:"column"}],itemMinimal:[g,f],baseBlock:[b],title:[b,y],content:[b,C],contentItalic:[b,C,{fontStyle:"italic"}],red:[b,y,v],green:[b,y,S],yellow:[b,y,E],fallback:[b,y,w]})},"HUX/":function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return d}));var n=a("I7vG"),i=a("uO+M"),r=a("6gXa"),s=a("ps/9"),o=a("XxrX"),l=a("3bJT");const c=e=>({container:Object(n.pipe)(e,o.a.Density.matchOrDefault(o.a.Density.cozy)(()=>h.cozyCardContainer,()=>h.compactCardContainer))}),d=e=>Object.assign(Object.assign({},c(e.layoutDensity)),{wrapper:Object(n.pipe)(e.layoutDensity,o.a.Density.matchOrDefault(o.a.Density.minimal)(()=>h.minimalCardWrapper,()=>void 0))}),p={padding:`${r.a.rem(.75)} ${r.a.rem(.5)} ${r.a.rem(.5)} ${r.a.rem(1)}`},u={margin:`${r.a.rem(1)} 0 ${r.a.rem(1.5)}`,borderRadius:r.a.rem(s.r),background:i.Color.CoreNeutral0,boxShadow:`0 ${r.a.rem(.625)} ${r.a.rem(s.a)} 0 rgba(198, 203, 222, .45)`},m={boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",borderRadius:r.a.rem(s.r),background:i.Color.CoreNeutral0},h=Object.assign(Object.assign({},r.a.stylesheet({minimalCardWrapper:[p],compactCardContainer:[m]})),{cozyCardContainer:r.a.joinClasses([l.b.cozyCardContainerSelector,r.a.style(u)])})},HqKA:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return y}));var n,i=a("a5W6"),r=a("rbBt"),s=a("LTbp"),o=a("GRZr"),l=a("U75S"),c=a("OA+g"),d=a("I7vG"),p=a("94k3"),u=a("WOlp"),m=a("lrqh"),h=a("tn8Q"),g=a("PrA7"),f=a("dE97"),b=a("GUi3");!function(e){e.getSubTypeFromLens=e=>b.a.isPriority(e)||b.a.isPriorityOutcomeId(e)?p.a.FeedbackSubtype.SidebarPriority:p.a.FeedbackSubtype.Sidebar}(n||(n={}));class y{constructor(e,t){this._alertsReader=e,this._ops=t,this._log=g.Monitoring.Logging.getLogger("AlertsServiceImpl"),this._findAlert=e=>Object(d.pipe)(e,this._alertsReader.getById,m.b.fromOption(()=>new Error(`alert ${e} not found in the repo`))),this.undoBulk=Object(c.flow)(l.P(Object(c.flow)(this._alertsReader.getById,m.g.filter(f.a.isBulkApplied))),e=>this._ops.undoApplied(e,f.a.State.Applied.Method.Bulk)(),m.b.getOrElse(e=>{throw this._log.error("Could not undo bulk-applied alerts",e),e})),this.getHighlightRanges=Object(c.flow)(this._findAlert,m.b.map(e=>e.getHighlightRanges())),this.hasNewRangesForUpdate=Object(c.flow)(this._findAlert,m.b.map(e=>e.hasNewRangesForUpdate)),this.applyPendingRangesUpdate=Object(c.flow)(this._findAlert,m.b.map(e=>e.applyPendingRangesUpdate())),this.getAppliedRanges=Object(c.flow)(this._alertsReader.getById,m.b.fromOption(()=>new Error("alert not found in the repo")),m.b.filterOrElse(f.a.isApplicableAlert,e=>new Error(`alert is not applicable: ${e.alertType}`)),m.b.map(e=>e.getAppliedRanges()))}apply(e,t){const{alternativeIndex:a,source:n}=t;return this._log.trace("apply",e),Object(d.pipe)(this._findAlert(e),m.b.chain(m.b.fromPredicate(f.a.isApplicableAlert,()=>new Error("cannot apply not applicable alert"))),m.b.chain(e=>Object(d.pipe)(m.b.tryCatchError(()=>e.apply(t)),m.b.mapLeft(t=>(this._log.error("apply single alert error",{error:t,alert:e.toLiteAlert(),alternativeIndex:a,source:n}),t)))))}applyBulk(e,t){this._log.trace("applyBulk",e),this.sendBatchFeedback(e,p.a.AlertsBatchFeedbackType.BULK_ACCEPTED,t);const a=Object(d.pipe)(e,h.a.fromArray(e=>Object(d.pipe)(this._findAlert(e),m.b.mapLeft(t=>Object(c.tuple)(t,{id:e})),m.b.chain(m.b.fromPredicate(f.a.isRegisteredApplicableAlert,e=>Object(c.tuple)(new Error("cannot apply not applicable or non-registered alert"),e.toLiteAlert()))),m.b.chain(m.b.fromPredicate(e=>u.w.withTransformJson(e._raw),e=>Object(c.tuple)(new Error("Only alerts with transformJSON can be bulk applied"),e.toLiteAlert()))),m.b.mapLeft(([e,t])=>(this._log.error(e.message,t),e)))));return Object(d.pipe)(a,h.a.flatMap(i.getMonoid(),e=>Object(d.pipe)(this._ops._applyTransformJson({alerts:e.map(e=>({alert:e,alternative:f.a.getApplicableAlternative(e,0)})),source:f.b.api,method:f.a.State.Applied.Method.Bulk,feedbackSubtype:t}),s.f(t=>()=>(this._log.error("applyBulk error",t),h.a.of([],e.map(e=>e.id))),()=>()=>h.a.of(e.map(e=>e.id))))()))}confirmApplied(e){return this._log.trace("commitApplied",e),Object(d.pipe)(e,h.a.fromArray(Object(c.flow)(this._findAlert,m.b.map(f.e.castApplied))),m.b.mapLeft(e=>new Error(`Error on trying to confirm applied alerts: ${e.rejected.join(",")}`)),m.b.chain(e=>this._ops._confirmApplied(e)()))}dismissBatch(e,t){return this._log.trace("dismissBatch",e),Object(d.pipe)(e.map(Object(c.flow)(this._findAlert,m.b.map(e=>[e]))),Object(o.fold)(v),m.b.chain(e=>this._ops._dismissBatch(e,t)()))}applyFeedback(e,t,a){return this._log.trace("sendFeedback",{alertId:e,type:t.kind}),Object(d.pipe)(this._findAlert(e),m.b.chain(e=>this._ops._alertFeedback(e,t,a)()))}sendBatchFeedback(e,t,a){return this._log.trace("sendBatchFeedback",{alertIds:e,type:t}),Object(d.pipe)(e,h.a.fromArray(this._findAlert),h.a.tapFailure(e=>this._log.error("Cannot send batch feedback for alerts",e.rejected)),h.a.foldSuccess(e=>m.b.right(this._ops._alertBatchFeedback(e,t,a)())))}takeReference(e,t){return this._log.trace("takeReference",{alertId:e.id,from:t}),Object(d.pipe)(this._findAlert(e.id),m.b.chain(e=>e.takeReference(t)))}changeMuteState(e,t){return this._log.trace("changeMuteState",e),Object(d.pipe)(e,h.a.fromArray(e=>this._findAlert(e.id)),h.a.flatMap(i.getMonoid(),e=>Object(d.pipe)(this._ops._changeMuteState(e,t)(),m.b.mapLeft(e=>(this._log.error("Can not change mute state",e),e)),m.b.unsafeGet)))}changeGapValue(e,t){return Object(d.pipe)(this._findAlert(e),m.b.chain(e=>this._ops._changeGapValue(e,t)()))}changeSmartPhrasesFeedback(e,t){return Object(d.pipe)(this._findAlert(e),m.b.chain(e=>this._ops._changeSmartPhrasesFeedback(e,t)()))}rotateSmartPhrasesReplacements(e){return Object(d.pipe)(this._findAlert(e),m.b.chain(e=>this._ops._rotateSmartPhrasesReplacements(e)()))}discardSmartPhrasesReplacement(e,t){return Object(d.pipe)(this._findAlert(e),m.b.chain(e=>this._ops._discardSmartPhrasesReplacement(e,t)()))}changeTakeawayFeedback(e,t){return Object(d.pipe)(this._findAlert(e),m.b.chain(e=>this._ops._changeTakeawayFeedback(e,t)()))}changeSentenceLevelBrandTonesFeedback(e,t){return Object(d.pipe)(this._findAlert(e),m.b.chain(e=>this._ops._changeSentenceLevelBrandTonesFeedback(e,t)()))}requestShortenItReplacements(e){return Object(d.pipe)(this._findAlert(e),m.b.chain(e=>this._ops._requestShortenItReplacements(e)()))}}const C=i.getMonoid(),v=Object(r.getApplyMonoid)(C)},Hr9Y:function(e,t,a){"use strict";a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return b}));var n=a("u/VI"),i=a("hoSD"),r=a("QxMx"),s=a("GUi3"),o=a("Z0Em");function l(e){return`${e} ${i.f.pluralize(e,"alert","alerts")}`}const c=(e,t)=>(a,n,i,r)=>{const s=r?a.count:a.priorityCount;return s>0?l(s):i&f.IsDocumentEmpty?e:t},d={description:"Improves spelling, grammar, and punctuation.",stateMessage:c("No alerts","Looking good")},p={description:"Helps make your writing easier to understand.",stateMessage(e,t,a){const i=Object(r.a)(n.lt(o.a.ord))(t);if(a&f.IsDocumentEmpty)return"So far so good";if(e.count>0){if(o.a.isMin(t))return l(e.count);if(i(o.a.fromNumber(20)))return"Unclear";if(i(o.a.fromNumber(70)))return"A bit unclear";if(i(o.a.fromNumber(85)))return"Mostly clear";if(i(o.a.fromNumber(95)))return"Clear"}return"Very clear"}},u={description:"Helps make your writing more interesting and effective.",stateMessage(e,t,a){const i=a&f.IsFreeUser,s=o.a.isMin(t),c=Object(r.a)(n.lt(o.a.ord))(t);if(a&f.IsDocumentEmpty||i&&s)return"Nothing yet";if(i||e.count>0){if(s)return l(e.count);if(c(o.a.fromNumber(20)))return"Bland";if(c(o.a.fromNumber(80)))return"A bit bland";if(c(o.a.fromNumber(95)))return"Engaging"}return"Very engaging"}},m={description:"Helps you make the right impression on your reader.",stateMessage(e,t,a){const i=a&f.IsFreeUser,s=o.a.isMin(t),c=Object(r.a)(n.lt(o.a.ord))(t);if(a&f.IsDocumentEmpty||i&&s)return"Nothing yet";if(i||e.count>0){if(s)return l(e.count);if(c(o.a.fromNumber(20)))return"Serious issues";if(c(o.a.fromNumber(40)))return"Very off";if(c(o.a.fromNumber(95)))return"Slightly off"}return"Just right"}},h={description:"Your organization’s writing guidelines.",stateMessage:c("Nothing yet","All good")},g={[s.a.SpecialId.Correctness]:d,[s.a.SpecialId.CorrectnessPriority]:d,[s.a.SpecialId.Clarity]:p,[s.a.SpecialId.ClarityPriority]:p,[s.a.SpecialId.Engagement]:u,[s.a.SpecialId.EngagementPriority]:u,[s.a.SpecialId.Delivery]:m,[s.a.SpecialId.DeliveryPriority]:m,[s.a.SpecialId.Vox]:h,[s.a.SpecialId.VoxPriority]:h,[s.a.SpecialId.Plagiarism]:{description:"Checks for similarities to published writing.",stateMessage:(e,t,a)=>a&f.IsLensVisited&&!(a&f.IsDocumentEmpty)?a&f.IsLensActive?o.a.isMin(t)?"100% original":`${t}% unoriginal`:"Recheck":"Not checked yet"},[s.a.SpecialId.Premium]:{description:"Offers more suggestions on how to improve your writing.",stateMessage:(e,t,a)=>a&f.IsDocumentEmpty?"Advanced checks":`${e.count} more ${i.f.pluralize(e.count,"alert","alerts")}`}};var f;function b(e){return g[e]}!function(e){e[e.IsDocumentEmpty=1]="IsDocumentEmpty",e[e.IsLensActive=2]="IsLensActive",e[e.IsLensVisited=4]="IsLensVisited",e[e.IsFreeUser=8]="IsFreeUser"}(f||(f={}))},IVzZ:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("OA+g"),r=a("I7vG"),s=a("lrqh"),o=a("6fbX"),l=a("dE97"),c=a("UEGg"),d=a("uqkn"),p=a("O6HF"),u=a("YJiV"),m=a("E0zP"),h=a("TC4P");!function(e){let t;e.Kind="AlertsBundle",e.getId=function(e){return e.id},e.bundleTitle=function(e){return e.bundleInfo.title},e.ord=Object(r.pipe)(s.h.ordNumber,s.h.contramap(Object(i.flow)(e=>e.activeAlert.bundleInfo,s.g.fold(()=>Number.MAX_SAFE_INTEGER,e=>e.rank)))),e.isExtendableWithAlerts=e=>{switch(e.visualState.transition.type){case"added":case"expanded":case"focused":case"hidden":case"rendered":return!0;case"feedback_form":case"removed":case"presuccess":case"success":case"muted":return!1;default:return Object(o.d)(e.visualState.transition.type)}},e.getAlertOutcomeBundle=e=>Object(r.pipe)(e.bundleInfo,s.g.fold(()=>({id:"other",title:"Other"}),e=>({id:e.title.toLowerCase().split(" ").join("_"),title:e.title}))),e.eq={equals:(e,t)=>m.a.eq.equals(e,t)&&s.g.getEq(s.c.eqString).equals(e.lensId,t.lensId)},function(t){const i=t=>(a,n)=>Object.assign({id:a,kind:e.Kind,bundleInfo:t,activeAlert:m.a.getAlertByIndex(n.activeAlertIndex,n.alerts),transform:Object(r.pipe)(n.cachedTransform,s.g.map(e=>e.labels)),equals(t){return e.eq.equals(this,t)},hashCode(){return m.a.hashCode(this)}},n);t.create=function(t,d,p,g){const f=n(t),b=e=>u.a.getCreate(i(e),d,f,g,p),y=a(p);return{create:e=>(t,a,n,i,r,o,l)=>b(r)(t,a,n,i,u.a.getApplicableCardMeta(a[n],o,p),e,s.g.some(o),l),createAdded:e=>(t,a,n,i)=>{const r=h.a.VisualState.initial({type:"added",clockwise:!0},!0);return b(a)(t,n,0,0,u.a.getApplicableCardMeta(n[0],r,p),e,s.g.some(r),i)},createFocused:e=>(t,a,n,i,r)=>{const o=h.a.VisualState.initial({type:"focused",clockwise:!0},!0);return b(a)(t,n,i,0,u.a.getApplicableCardMeta(n[i],o,p),e,s.g.some(o),r)},createRendered:e=>(t,a,n,i)=>{const r=h.a.VisualState.initial({type:"rendered",clockwise:!0},!1);return b(a)(t,n,0,0,u.a.getApplicableCardMeta(n[0],r,p),e,s.g.some(r),i)},updateWith:(a,n)=>i=>{Object(o.g)(a.every(e=>l.a.isRegistered(e)),"cannot add non registered alerts");const s=new Set(a.map(e=>e.id)),d=new Set(i.removedAlertsIds);s.forEach(e=>{d.delete(e)});const p=i.alerts.filter(e=>!s.has(e.id)).concat(a.map(c.a.fromModel)).sort(n.compare);return Object(r.pipe)(i,y(p,d,m.a.getIndexByAlert(i.activeAlert.id,p)),e.getCardHydrator(t))}}}}(t=e.ItemFactory||(e.ItemFactory={}));const a=e=>(t,a,n)=>i=>{const r=m.a.getAlertByIndex(n,t),s=c.a.isApplicableAlert(r)?u.a.getApplicableCardMeta(r,i.visualState,e):p.a.empty(void 0);return Object.assign(Object.assign({},i),{alerts:t,activeAlert:r,meta:s,removedAlertsIds:a,activeAlertIndex:n})};e.changePosition=e=>t=>Object.assign(Object.assign({},t),{positionState:e}),e.changeVisualState=e=>t=>Object.assign(Object.assign({},t),{visualState:e}),e.getCardHydrator=e=>u.a.getCardHydrator(e=>e.cachedTransform,d.a.canHydrate,g,e);const n=t=>u.a.getChangeVisualState(e.changeVisualState,e.getCardHydrator(t));e.changeUserInput=e=>t=>Object.assign(Object.assign({},t),{userInput:e});const g=e=>t=>Object.assign(Object.assign({},t),{cachedTransform:e,transform:Object(r.pipe)(e,s.g.map(e=>e.labels))});e.transitionTo=u.a.getTransitionTo(e.changeVisualState,e.changePosition),e.completeTransition=t=>a=>e.changeVisualState(h.a.VisualState.complete(a.visualState,t))(a),e.getRemove=t=>u.a.getRemove(a(t),e.transitionTo);const f=e=>t=>Object.assign(Object.assign({},t),{meta:e});e.unselect=u.a.getUnselect(e.changeVisualState,e.changePosition),e.getSelectByAlert=(t,n,i)=>u.a.getSelect(a(n),e.changeUserInput,e.changeVisualState,e.changePosition,f,i,t,n),e.getSelect=(t,a,n)=>u.a.getSelectFirstAlert(e.getSelectByAlert(t,a,n)),e.getRemoveAlertsCapability=(t,a,n,o)=>(l,c)=>{const d=e.getSelectByAlert(t,a,e.getCardHydrator(n)),p=u.a.getSelectNextAlert(u.a.getCardSelections(t),d);return t=>{const n=new Set(l.map(e=>e.id));if(!m.a.hasAnyOfAlerts(n)(t))return t;const d=e.getRemove(a)(l,Object(r.pipe)(c,s.g.map(e=>o.compare(t,e)>0),s.g.getOrElse(i.constTrue)))(t);return Object(r.pipe)(c,s.g.exists(e=>e.id===t.id))?p(o)(d):d}},e.getUpdatableWithAlertsCapability=t=>a=>Object(i.flow)(t.updateWith(a,l.d.ord),t=>e.isExtendableWithAlerts(t)?t:e.transitionTo({type:"added",clockwise:!0})(t))}(n||(n={}))},IdhR:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return m})),a.d(t,"c",(function(){return h}));var n=a("ERkP"),i=a("94k3"),r=a("rk+4"),s=a("uqkn"),o=a("+w1e"),l=a("nnns"),c=a("tZ26"),d=a("aIes"),p=a("es5d");const u=({card:{activeAlert:e,id:t,visualState:a},actions:u,mode:m,className:g})=>{const f=n.useContext(r.a.Context);return n.createElement(l.a.Tertiary,{key:"toggle-more",name:h(a,f),title:"mini"===m?h(a,f):"",className:g,onClick:d.d.callOnce(()=>{const n=s.a.isCardOpen(a);u.next({type:o.a.Kind.startTransitionTo,id:t,transition:{type:n?"focused":"expanded",clockwise:!0}}),n||u.next({type:o.b.Type.alertFeedback,alertId:e.id,feedbackType:i.a.AlertFeedbackType.EXPANDED})})},s.a.isCardOpen(a)?n.createElement(c.d.Arrow,{key:"more",className:p.a.lessIcon}):n.createElement(c.d.QuestionMark,{key:"expand"}),"default"===m&&h(a,f))},m=({visualState:e,children:t,className:a})=>n.createElement("div",{className:(s.a.isCardOpen(e)?p.a.more:p.a.moreHidden)+" "+a},t);function h(e,t){const a=t.card;return s.a.isCardOpen(e)?a.less:a.more}},IyPE:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.group=function(e){return Object.values(e.reduce((e,{group:t,category:a,categoryHuman:n,cost:i})=>(void 0===e[a]&&(e[a]={group:t,category:a,categoryHuman:n,count:0}),e[a].count+=i,e),{})).sort((e,t)=>t.count-e.count)}}(n||(n={}))},JSz4:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("OA+g"),i=a("I7vG"),r=a("lrqh"),s=a("6fbX"),o=a("f3nf"),l=a("W0xG"),c=a("wOnQ");const d=e=>t=>Object(i.pipe)(t.content,r.b.fold(e=>r.b.right(Object(l.a)(e,t.todo)),Object(n.flow)(e,r.b.map(e=>(function(e,t){switch(e.type){case o.a.Type.Drilldown:return c.d.create(e.remove,e.inserts,t);case o.a.Type.Substitution:return c.a.create(e.remove,e.inserts,t);case o.a.Type.Insert:return 2===e.inserts.length?c.i.create(e.inserts[0],e.inserts[1],t):c.g.create(e.inserts,t);case o.a.Type.Remove:return c.b.create([e.remove],t);case o.a.Type.RemoveOr:return c.c.create(e.removes,t);case o.a.Type.FullSentence:return function(e,t){switch(e.kind){case c.f.WithFormatting:return c.e.createWithFormatting(e.ops,t);case c.f.PlainText:return c.e.createPlainText(e.ops,t);default:return Object(s.d)(e)}}(e,t);case o.a.Type.SmartPhrases:return c.g.create(e.inserts,t);case o.a.Type.OneGap:return c.h.create(e,t);case o.a.Type.ShortenIt:return function(e,t){return{type:c.j.Type.ShortenIt,tooltipText:t,labels:e.summaries}}(e,t);case o.a.Type.ToneAI:return function(e,t){return{type:c.j.Type.ToneAI,tooltipText:t,labels:e.insertOrTextParts}}(e,t);default:return Object(s.d)(e)}})(e,t.todo)))))},JbXn:function(e,t,a){"use strict";var n=a("ERkP"),i=a("2Jhg"),r=a("LNSM"),s=a("rk+4"),o=a("Sfi4"),l=a("nnns"),c=a("tZ26"),d=a("FieF"),p=a("BugA"),u=a("1gzW"),m=a("D9EC"),h=a("PrA7"),g=a("XaD9"),f=a("vOOZ"),b=a("cIor");const y=({children:e,icon:t,onClose:a,className:i,onTransitionEnd:r})=>n.createElement(f.a.div,{className:i,onTransitionEnd:r},n.createElement(l.a,{name:"survey-close",className:b.closeIcon,onClick:a},n.createElement(c.d.Close,null)),n.createElement("section",{className:b.imageSection},t),e);var C,v=a("QYHm");!function(e){e.VeryUnsatisfied="veryUnsatisfied",e.Unsatisfied="unsatisfied",e.Neutral="neutral",e.Satisfied="satisfied",e.VerySatisfied="verySatisfied"}(C||(C={}));const S=({transition:e,onSelect:t,onClose:a,onTransitionEnd:i})=>{const r=n.useContext(s.a.Context).survey;return n.createElement(y,{onTransitionEnd:i,className:e,onClose:a,icon:n.createElement(c.d.Grammarly,null)},n.createElement("section",{className:v.step1},n.createElement(p.Base,null,r.tellUs),n.createElement("div",{className:v.emoteContainer},Object.entries(C).map(([e,a])=>{const i=c.d.Emote[e];return n.createElement(l.a,{key:a,title:r.satisfaction[a],name:`emote-${a}`,onClick:()=>t(a)},n.createElement(i,null))})),n.createElement("div",{className:v.emoteContainer},n.createElement(p.Small,null,r.satisfaction.veryUnsatisfied),n.createElement(p.Small,null,r.satisfaction.verySatisfied))))},E=({transition:e,onFinish:t})=>{const a=n.useContext(s.a.Context),i=r.a.create({liked:"",disliked:""}),o=()=>t("dismiss",i.get());return n.createElement(y,{className:e,onClose:o,icon:n.createElement(c.d.Grammarly,null)},n.createElement("section",{className:v.step2},n.createElement(p.H4,{className:v.title},a.survey.thankYou),n.createElement(p.Base,null,a.survey.more),n.createElement(p.Base,{className:v.withOffset},n.createElement("b",null,a.survey.whatsBad)),n.createElement(d.c,{name:"survey-feedback-disliked",autofocus:!0,value:i.lens("disliked")}),n.createElement(p.Base,{className:v.withOffset},n.createElement("b",null,a.survey.whatsGood)),n.createElement(d.c,{name:"survey-feedback-liked",value:i.lens("liked")}),n.createElement("div",{className:v.withOffset},n.createElement(l.a.Primary,{name:"take-survey",className:v.surveyBtn,onClick:()=>t("submit",i.get())},a.survey.shareFeedback),n.createElement(l.a.Caps,{name:"survey-dismiss",className:v.dismissBtn,onClick:o},a.dismiss))))};class w extends o.a{}const k=({surveyType:e,onClose:t,onRemindLater:a,onSubmit:s})=>{const{gnarSpec:o,pageId:l}=n.useContext(g.a.Context),c=r.a.create(i.e),d=(a,{liked:n,disliked:i})=>{"submit"===a?s():t(),c.get().fold(()=>{h.Monitoring.Logging.getLogger("SurveyDefaultNotificationView").error("Failed to send survey — the satisfaction score is empty")},t=>o.surveyButtonClick(i,a,n,l,t,e))};return u.a.useEffectOnDidMount(()=>void o.surveyPopupShow(l,e)),n.createElement(w,{state:c,stateToClassMapper:(e,t)=>{const[a,n]=t.nonEmpty()?[v.rotateHide,v.rotateShow]:[v.notification,v.notification];return{prev:{start:v.notification,end:a},next:{start:n,end:v.notification}}}},t=>t.state.isEmpty()?n.createElement(S,{onTransitionEnd:"prev"===t.type?t.done:m.l,key:"step-1",transition:t.view,onSelect:e=>c.set(Object(i.h)(e)),onClose:()=>{a(),o.remindLaterButtonClick(l,e)}}):n.createElement(E,{key:"step-2",transition:t.view,onFinish:d}))};var _=a("Fgeo"),O=a("YUkS");const A={[_.n.FreeClarityAlertsControl]:"https://www.surveymonkey.com/r/3ZCHBMP",[_.n.FreeClarityAlertsEnabled]:"https://www.surveymonkey.com/r/3ZHVKTS",[_.n.PriorityListForExistingUsers]:"https://www.surveymonkey.com/r/3ZHVKTS",[_.n.MostActiveUsers]:"https://grammarly.qualtrics.com/jfe/form/SV_82Lkzx9EQX37nFA",[_.i.SuperScrollWithAutoJump]:"https://www.surveymonkey.com/r/H6TH28M",[_.i.SuperScrollWithoutAutoJump]:"https://www.surveymonkey.com/r/H62KVPC"},T=({surveyType:e,onClose:t,onRemindLater:a})=>{const i=n.useContext(s.a.Context).survey.newUser,{gnarSpec:r,pageId:o}=n.useContext(g.a.Context);return n.useEffect(()=>void r.surveyPopupShow(o,e),[]),n.createElement(y,{className:O.notification,onClose:()=>{t(),r.closeSurveyButtonClick(o,e)},icon:n.createElement("div",{className:O.designerAvatar})},n.createElement("section",{className:O.contentSection},n.createElement(p.H4,{className:O.title},i.title),n.createElement(p.Base,{className:O.content},i.content),n.createElement(l.a.Group,{className:O.btnGroup},n.createElement(l.a.Primary,{name:"take-survey",className:O.surveyBtn,onClick:()=>{t(),r.takeSurveyButtonClick(o,e)},href:A[e],target:"_blank"},i.takeSurvey),n.createElement(l.a.Caps,{name:"remind-later",onClick:()=>{a(),r.remindLaterButtonClick(o,e)}},i.remindLater))))};a.d(t,"b",(function(){return k})),a.d(t,"a",(function(){return T}))},JniT:function(e,t,a){"use strict";var n=a("LNSM"),i=a("zR/0"),r=a("CvSs"),s=a("gy42"),o=a("ERkP");const l={NothingToCheck:()=>o.createElement(o.Fragment,null),NothingToNoIssueFound:()=>o.createElement(o.Fragment,null),NoIssueFoundToNothingToCheck:()=>o.createElement(o.Fragment,null),NoIssuesFound:()=>o.createElement(o.Fragment,null),EverythingIsClear:()=>o.createElement(o.Fragment,null),Birthday:()=>o.createElement(o.Fragment,null)};function c(e){const t=n.a.create(l);return i.a.from(e?a.e(33).then(a.bind(null,"tpg2")):Promise.all([a.e(0),a.e(26)]).then(a.bind(null,"fOmg"))).pipe(i.a.retryWhen(r.a.OperationRetrier.RetryStrategy.linear(3,1e3)),i.a.first(),i.a.map(e=>e.Illustration)).subscribe(s.b.toAtom(t)),t}a.d(t,"a",(function(){return c}))},K4Sz:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("I7vG"),r=a("lrqh");!function(e){e.update=function(e,t,a){return e.update(t,a)},e.filter=function(e,t){return e.filter(t)},e.get=function(e,t,a){return Object(i.pipe)(e.get(t),r.g.filter(e=>a(e.value)))},e.find=function(e,t){return e.find(t)}}(n||(n={}))},KBak:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("lrqh");!function(e){let t,a;!function(e){e.Retain="retain",e.Delete="delete",e.Insert="insert"}(t=e.Type||(e.Type={})),e.isDelete=function(t){return t.type===e.Type.Delete},e.isInsert=function(t){return t.type===e.Type.Insert},function(e){e.eq=i.c.getStructEq({type:i.c.eqString,textChunk:i.c.eqString})}(a=e.NoInvert||(e.NoInvert={}))}(n||(n={}))},Kt6o:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));var n="https://assets.grammarly.com/emoji/v1/",i="https://assets.grammarly.com/animations/v1/"},LOBD:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a("6gXa"),i=a("0Hf4"),r=a("uO+M");const s=e=>({[`&-${e}`]:{marginLeft:n.a.rem(3+1.5*e)}}),o=(e,t)=>({counterIncrement:`list${e}`,counterReset:t}),l=(e,t)=>({"&:before":{content:`counter(list${e}, ${t}) '. '`}}),c=(e,t,a)=>({[`&-${e}`]:Object.assign(Object.assign({},o(e,a)),{$nest:l(e,t)})}),d={editorContainer:"editor-editorContainer",rtfLink:"editor-rtfLink",bigSize:"editor-bigSize"},p=`0 0 ${n.a.rem(.5)}`,u=(e,t,a)=>({margin:p,fontSize:n.a.rem(e),lineHeight:n.a.rem(t),$nest:{"&:not(:first-child)":{marginTop:n.a.rem(a)}}}),m={position:"relative",overflow:"hidden",minHeight:n.a.rem(5),outline:"none",border:"none",resize:"none",$nest:{"& p":{margin:0,padding:0},"& h1":u(1.375,2,2),"& h2":u(1.125,1.7,1),"& ol, & ul":{margin:`0 0 ${n.a.rem(.5)}`,paddingLeft:0},"& ol:not(:first-child), & ul:not(:first-child)":{marginTop:n.a.rem(.5)},"& li":{margin:`0 0 0 ${n.a.rem(3)}`,paddingRight:0,listStyleType:"none",$nest:{"&:before":{display:"inline-block",marginRight:n.a.rem(.5),marginLeft:n.a.rem(-3),width:n.a.rem(2.5),textAlign:"right",whiteSpace:"nowrap",lineHeight:n.a.rem(1.375)},[`.${d.bigSize} &`]:{$nest:{"&:before":{lineHeight:n.a.rem(1.65)}}}}},"& .ql-indent":{$nest:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},s(1)),s(2)),s(3)),s(4)),s(5)),s(6)),s(7)),s(8))},"& ul li":{$nest:{"&:before":{content:"'\\2022'"}}},"& ul[data-type='dashed'] li":{$nest:{"&:before":{content:"'-'"}}},"& ol li":Object.assign(Object.assign({},o(0,"list1 list2 list3 list4 list5 list6 list7 list8")),{listStyleType:"none",$nest:Object.assign(Object.assign({},l(0,"decimal")),{"&.ql-indent":{$nest:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},c(1,"lower-alpha","list2 list3 list4 list5 list6 list7 list8")),c(2,"lower-roman","list3 list4 list5 list6 list7 list8")),c(3,"decimal","list4 list5 list6 list7 list8")),c(4,"lower-alpha","list5 list6 list7 list8")),c(5,"lower-roman","list6 list7 list8")),c(6,"decimal","list7 list8")),c(7,"lower-alpha","list8")),c(8,"lower-roman","none"))}})}),[`& .${d.rtfLink}`]:{color:r.Color.CoreBlue50,$nest:{"&:visited":{color:r.Color.CoreBlue50}}}}},h={fontSize:n.a.rem(1.375),lineHeight:n.a.rem(2.5),$nest:{"& h1":{fontSize:n.a.rem(1.65),lineHeight:n.a.rem(3)},"& h2":{fontSize:n.a.rem(1.375),lineHeight:n.a.rem(2.5)}}},g={editorContainer:n.a.joinClasses([d.editorContainer,n.a.style(m),n.a.style({paddingBottom:"40vh"}),i.a.style(m)]),bigSize:n.a.joinClasses([d.bigSize,n.a.style(h),i.a.style(h)]),rtfLink:n.a.joinClasses([d.rtfLink])}},LXcl:function(e,t,a){"use strict";a.d(t,"b",(function(){return l}));var n=a("LNSM"),i=a("D9EC"),r=a("PrA7"),s=a("lRnN");a.d(t,"a",(function(){return s.a}));var o=a("hnW1");class l{constructor(){this.completionTrigger=n.a.create(!1),this._steps={},this.cpuAndAnimationOptsExperiment=!1}isStepEnabled(e){return void 0!==this._steps[e]}relaunchAllSteps(){r.Monitoring.Logging.getLogger("OnboardingViewModelImpl").error("Not implemented")}setState(e,t){this.subscribeForStep(e).state.set(t)}subscribeForStep(e){const t=n.a.create(o.a.Hidden);return this._steps[e]||(this._steps[e]={id:e,state:t,dotShown:i.l,dotClicked:()=>t.set(o.a.Popup),popupClosed:()=>t.set(o.a.Passed),popupIgnored:()=>t.set(o.a.Hidden),actionTaken:()=>t.set(o.a.Passed)})}getStepCompletionCallback(e){throw new Error("Method not implemented.")}changeState(e){}}},Lmm7:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return b})),a.d(t,"c",(function(){return r}));var n,i,r,s=a("D57K"),o=a("I7vG"),l=a("LNSM"),c=a("4ae2"),d=a("FiSa"),p=a("94k3"),u=a("qE82"),m=a("zR/0"),h=a("lrqh"),g=a("hoSD"),f=a("PrA7");!function(e){e.Querying="querying",e.SynonymsReady="ready",e.SynonymsEmpty="empty",e.SynonymApplied="applied",e.SynonymsError="error",e.SynonymsNone="none"}(n||(n={})),function(e){e.isReady=function(e){return null!==e&&e.kind===n.SynonymsReady},e.isEmpty=function(e){return null!==e&&e.kind===n.SynonymsEmpty},e.isQuerying=function(e){return null!==e&&e.kind===n.Querying},e.isApplied=function(e){return null!==e&&e.kind===n.SynonymApplied},e.defaultState={kind:n.SynonymsNone,query:{id:-1,start:-1,word:""}}}(i||(i={}));class b{constructor(e,t,a,n){this.positionManager=e,this._getContent=t,this._capi=a,this._ded=n,this.state=l.a.create(i.defaultState),this.changes=new m.a.Subject,this._log=f.Monitoring.Logging.getLogger("editor.SynonymsModelImpl")}query(e){return Object(s.__awaiter)(this,void 0,void 0,(function*(){return this._log.trace("SynonymsQuery: "+e.word),this.state.set({kind:n.Querying,query:e}),h.l.toPromise(this._capi.requestSynonyms(e.start,e.word)).then(t=>{const a=g.d.Local.Timestamp.now(),i=Object(o.pipe)(t.synonymsOrGroups,h.g.fold(()=>({kind:n.SynonymsEmpty,query:e,synonyms:{id:t.id},readyAt:a,stats:r.emptySynonymsStats,pname:t.pname}),i=>({kind:n.SynonymsReady,query:e,synonyms:Object.assign(Object.assign({},t),{synonymsOrGroups:i}),readyAt:a,stats:r.getSynonymsStats(i),pname:t.pname})));return this._onResponse(i),i}).catch(t=>(this.abortQuery(),t.message&&-1!==t.message.indexOf("Timeout")?this._log.info("Synonyms timeout",t):this._log.warn("Error getting synonyms",t),{kind:n.SynonymsError,query:e}))}))}abortQuery(){const e=this.state.get();i.isQuerying(e)&&this.state.set(i.defaultState)}_onResponse(e){const t=window.SQT;setTimeout(()=>{this._log.trace("_onResponse() newState: "+e);const t=this.state.get();i.isQuerying(t)&&t.query.word===e.query.word?this.state.set(e):this._log.trace("Discarding result for "+e.query.word)},t)}applySynonym(e,t){this._log.debug(`_applySynonym(#${e.id})`);const a=e.range,i=a.start,r=a.end-a.start;this._ded.flushChanges();let s=this.positionManager.getTextLength();const l=Object(o.pipe)((new c.a).retain(i).delete(r).insert(t),u.a.getEnrichedWithFormattingDelta(this._getContent())),m=d.a.delta(l,s),g=l.invert(this._getContent());return this.changes.next(m),h.b.getOrElse(e=>this._log.error(`Failed to set cursor on synonym apply in ${i}. ${e}`))(this._ded.setCursor(i,0)),this.state.set({kind:n.SynonymApplied,target:e}),this._capi.sendFeedback({id:e.id,kind:p.a.SynonymFeedbackType.SYNONYM_ACCEPTED,replacementText:t})(),this._ded.flushChanges(),s=this.positionManager.getTextLength(),{action:p.a.SynonymFeedbackType.SYNONYM_ACCEPTED,replacement:t,commit:()=>{this._log.debug(`_applySynonym(#${e.id}):commit()`),e.dispose()},undo:()=>{this._log.debug(`_applySynonym(#${e.id}):undo()`);const t=this.positionManager.getTextLength();if(t===s){const e=d.a.delta(g,t);this.changes.next(e)}else this._log.error("Text has changed while uncommitted apply is present");return e.dispose(),[]}}}ignore(e){const t=this.state.get();(i.isEmpty(t)||i.isReady(t))&&t.synonyms.id===e?this._capi.sendFeedback({id:e,kind:p.a.SynonymFeedbackType.SYNONYM_DISMISSED})():this._log.error("Tried to report ignore for an unknown synonyms id",{reportedId:e,currentState:t})}}!function(e){e.emptySynonymsStats={numberOfMeanings:0,numberOfSynonymsByMeanings:[],numberOfSynonymsTotal:0};const t=e=>({numberOfMeanings:1,numberOfSynonymsByMeanings:[e.length],numberOfSynonymsTotal:e.length}),a=t=>t.reduce((e,t)=>({numberOfMeanings:e.numberOfMeanings+1,numberOfSynonymsByMeanings:[...e.numberOfSynonymsByMeanings,t.words.length],numberOfSynonymsTotal:e.numberOfSynonymsTotal+t.words.length}),e.emptySynonymsStats);e.getSynonymsStats=e=>Object(o.pipe)(e,h.b.fold(t,a));const n=(e,t)=>{const a=t.findIndex(t=>t===e);return{meaningIndex:0,synonymIndexInGroup:a,synonymIndexAbs:a}},i={meaningIndex:-1,synonymIndexInGroup:-1,synonymIndexAbs:-1};e.getSynonymStats=(e,t)=>Object(o.pipe)(t,h.b.fold(t=>n(e,t),t=>((e,t)=>t.reduce(({result:t,numberOfLookedSynonyms:a},i,r)=>{const s=n(e,i.words).synonymIndexInGroup;return s>-1?{result:{meaningIndex:r,synonymIndexInGroup:s,synonymIndexAbs:a+s},numberOfLookedSynonyms:a}:{result:t,numberOfLookedSynonyms:a+i.words.length}},{result:i,numberOfLookedSynonyms:0}).result)(e,t))),e.getTimeToClose=e=>Object(o.pipe)(e,e=>g.d.Local.Timestamp.subtract(g.d.Local.Timestamp.now(),e),e=>e/1e3)}(r||(r={}))},"MD/T":function(e,t,a){"use strict";var n=a("ERkP"),i=a("OA+g"),r=a("9NHN"),s=a("vOOZ"),o=a("lrqh"),l=a("hoSD"),c=a("1w6p"),d=a("+w1e"),p=a("C7EH"),u=a("HUX/"),m=a("zR/0"),h=a("U75S"),g=a("I7vG"),f=a("rk+4"),b=a("UEGg"),y=a("nnns"),C=a("D9EC"),v=a("KBak"),S=a("cVtq"),E=a("StFb"),w=a("uO+M"),k=a("6gXa");const _=k.a.style({display:"flex",flexGrow:2,lineHeight:k.a.rem(1.315),flexWrap:"wrap"}),O={padding:0,whiteSpace:"pre-wrap"},A=k.a.style(O),T=k.a.style(Object.assign({color:w.Color.CoreGreen60},O)),x=k.a.style(Object.assign(Object.assign({},O),{color:w.Color.CoreRed50,textDecoration:"line-through",$nest:{[`& + .${T}`]:{marginLeft:k.a.rem(.25)}}})),I=k.a.style({fontWeight:"bolder",textDecoration:"none",paddingLeft:"1px",paddingRight:"1px",$nest:{[`&.${T}`]:{backgroundColor:w.Color.CoreGreen10},[`&.${x}`]:{backgroundColor:w.Color.CoreRed10}}}),M=e=>n.createElement("div",{className:_},Object(g.pipe)(e.diff,o.a.mapWithIndex((e,t)=>Object(C.o)(v.a.isDelete(t),v.a.isInsert(t))?n.createElement("div",Object.assign({key:e},Object(r.c)(v.a.isDelete(t)?x:T,Object(C.o)(Object(E.c)(t.textChunk),Object(E.d)(t.textChunk))&&I)),n.createElement(S.a,{newText:t.textChunk,oldText:t.invertedChunk})):n.createElement("div",{key:e,className:A},t.textChunk))));var j=a("tZ26"),L=a("mvgk"),N=a("SN1b"),P=a("BugA"),F=a("aIes"),D=a("+Zgs"),R=a("ps/9");const B=k.a.keyframes({from:{opacity:0,width:0},to:{opacity:1,width:k.a.rem(1.5)}}),H=k.a.keyframes({from:{opacity:1,width:k.a.rem(1.5)},to:{opacity:0,width:0}}),W=k.a.keyframes({from:{opacity:1},to:{opacity:0}}),$=k.a.keyframes({from:{opacity:0},to:{opacity:1}}),V=(e,t="linear",a=".3s")=>({animation:`${e} ${a} ${t} forwards`}),U=e=>Object.assign(Object.assign({},V(e,"ease-out")),{display:"flex"}),G=e=>Object.assign(Object.assign({},V(e)),{position:"absolute"}),z=k.a.style(U(B)),q=k.a.style(U(H)),Y=k.a.style(V(W)),X=k.a.style(G($)),K=k.a.style(Object.assign(Object.assign({},G($)),{top:0})),Z=k.a.style(Object.assign(Object.assign({},G(W)),{top:0})),Q=k.a.style({marginLeft:k.a.rem(-.5)}),J=k.a.style({position:"relative",display:"flex",boxSizing:"border-box",padding:`0 ${k.a.rem(1)}`,alignItems:"center",justifyContent:"space-between",userSelect:"none",transform:"translateY(0)"}),ee=(k.a.style({display:"flex",flexFlow:"column",alignItems:"center",alignSelf:"center"}),k.a.style({height:k.a.rem(3),cursor:"pointer",borderRadius:k.a.rem(R.s),boxShadow:w.Elevation.Z100})),te=k.a.style({stroke:"none"}),ae=(k.a.style({position:k.a.important("static"),padding:k.a.important(`0 ${k.a.rem(.25)}`),width:k.a.important(k.a.rem(1.75)),background:k.a.important(w.Color.CoreGreen50),color:k.a.important(w.Color.CoreNeutral0)}),k.a.style({display:"flex",flexFlow:"column"})),ne=k.a.style({position:"relative",display:"flex",flexWrap:"wrap"}),ie={marginRight:k.a.rem(.75),textTransform:"none",letterSpacing:k.a.rem(w.Text.BodyLetterSpacing),fontSize:k.a.rem(w.Text.BodySize)},re=k.a.style({height:k.a.rem(1.5)}),se=k.a.style(Object.assign(Object.assign({},ie),{padding:`0 ${k.a.rem(.5)}`,display:"flex",justifyContent:"center",alignItems:"center",minWidth:k.a.rem(6)})),oe=k.a.style(Object.assign(Object.assign({},ie),{color:w.Color.CoreNeutral50,fontWeight:w.Text.BodyWeight,padding:`0 ${k.a.rem(.5)}`,$nest:{i:{marginLeft:k.a.rem(-.25)},"&[data-textpos='everywhere']":{padding:`0 ${k.a.rem(.5)}`}}})),le=k.a.style({fontSize:k.a.rem(w.Text.BodySize)}),ce=k.a.style({display:"flex",alignItems:"center",marginLeft:k.a.rem(-1)}),de=k.a.style({maxHeight:k.a.rem(17)}),pe=k.a.style({justifyContent:"space-between",height:k.a.percent(100),width:k.a.percent(100),padding:`${k.a.rem(1)} 0 ${k.a.rem(1)} ${k.a.rem(1)}`,$nest:{[`& .${ce}`]:{marginLeft:k.a.rem(-2)}}}),ue=k.a.style({maxHeight:k.a.rem(10),position:"relative",marginRight:k.a.rem(-.725),paddingRight:k.a.rem(.875),paddingBottom:k.a.rem(.5)}),me=k.a.style({overflowY:"auto",paddingBottom:k.a.rem(2)}),he=k.a.style({position:"absolute",top:k.a.rem(-3),left:0,right:0,height:k.a.rem(3),width:k.a.percent(100),background:`linear-gradient(0deg, ${w.Color.CoreNeutral0} 0%, ${w.Color.CoreNeutral0} 10%, rgba(255,255,255,0) 100%)`,pointerEvents:"none"}),ge=k.a.style({overflow:"hidden",flexWrap:"nowrap",height:k.a.rem(2),display:"flex",justifyContent:"flex-start",alignItems:"center",fontSize:k.a.rem(.875),fontFeatureSettings:"'ss03' on, 'ss02' on",padding:`0 ${k.a.rem(.25)}`,$nest:{"&:hover":{background:w.Color.CoreNeutral10,cursor:"pointer"}}}),fe=k.a.style({flexShrink:0}),be=k.a.style({$nest:{'&:not([data-disabled="true"])[data-hovered="true"],&:not([data-disabled="true"])[data-active="true"]':{backgroundColor:"transparent"}}}),ye=k.a.style({$nest:{g:{stroke:w.Color.CoreNeutral50}}}),Ce=k.a.style({minWidth:k.a.rem(1.5),minHeight:k.a.rem(1.5)}),ve=({className:e,children:t,onClick:a,onMount:i})=>n.createElement(s.a.div,Object.assign({},Object(r.c)(J,e),{onClick:a,mount:i}),t),Se=c.b.Transition.make({fadeIn:X},{fadeOut:Y}),Ee=c.b.Transition.make({fadeIn:K},{fadeOut:Z}),we=c.b.Transition.make({visible:z},{invisible:q}),ke=e=>n.createElement("span",{dangerouslySetInnerHTML:{__html:e}}),_e=c.b.Knot.make(c.b.Grid.make(({notify:e,slots:t,state:a})=>n.createElement(s.a.Fragment,null,a.pipe(m.a.map(a=>n.createElement(y.a.Primary,{name:"bulk-accept-apply",className:se,disabled:p.a.isInUndoneState(a),onClick:F.d.callOnce(e({type:p.a.isInInitialState(a)?d.b.Type.bulkApply:d.b.Type.bulkLooksGood,alertIds:a.alerts.map(e=>e.id)}))},p.a.isInUndoneState(a)?n.createElement(L.a,{wrapperClassName:re,size:20,variation:"white"}):t.content))))),{content:((e,t)=>c.b.Animated.make(t,c.b.Union.asOption(c.b.Node.make(({state:t})=>n.createElement(s.a.Fragment,null,t.pipe(m.a.map(t=>n.createElement(e,Object.assign({},t)))))))))(e=>{const t=n.useContext(f.a.Context);return n.createElement(n.Fragment,null,p.a.isInAppliedState(e)?t.bulkAccept.confirm:t.bulkAccept.apply(e.alerts.length))},Ee)}),Oe=()=>{const e=n.useContext(f.a.Context);return n.createElement(n.Fragment,null,e.dismiss)},Ae=e=>c.b.Node.make(({notify:t})=>n.createElement(y.a.Ghost,{className:oe,name:"bulk-accept-dismiss-button",onClick:F.d.callOnce(t({type:d.b.Type.bulkDismiss}))},Object(g.pipe)(e,o.g.map(e=>n.createElement("div",{className:e},n.createElement(j.d.Undo,Object.assign({width:16},Object(r.c)(Ce,ye))))),o.g.toNullable),n.createElement(Oe,null))),Te=c.b.Node.make(({view:e,notify:t})=>{const a=n.useContext(f.a.Context);return n.createElement(s.a.Fragment,null,e("alerts").pipe(m.a.map(e=>n.createElement(y.a.Ghost,{className:oe,name:"bulk-accept-undo-button",onClick:F.d.callOnce(t({type:d.b.Type.bulkUndo,alertIds:e.map(e=>e.id)}))},n.createElement("div",{className:z},n.createElement(j.d.Undo,Object.assign({width:16},Object(r.c)(Ce,ye)))),a.bulkAccept.undoAll))))}),xe=c.b.Union.make("visibilityState",{visible:Ae(o.g.none),applied:Te,beingApplied:Ae(o.g.none),dismissed:c.b.Node.empty,undone:Ae(o.g.some(q))}),Ie=c.b.Group.make({apply:_e,dismiss:xe}),Me=({onClick:e})=>{const t=n.useContext(f.a.Context);return n.createElement("div",{className:fe},n.createElement(y.a.Ghost,{name:"rejectAlertInBulk",onClick:F.d.callOnce(e),className:be,title:t.dismiss},n.createElement(j.d.Ignore,{className:Ce})))},je=c.b.Animated.make(we,c.b.Union.asOption(c.b.Node.make(()=>n.createElement(j.d.NotificationInfo,{className:Q,width:16})))),Le=c.b.Node.make(({state:e,notify:t})=>n.createElement(s.a.Fragment,null,e.pipe(m.a.map(e=>n.createElement(N.a,{align:"topCenter",title:ke(e.title)},n.createElement("div",{className:ge,"data-name":"bulk-accept-alert-row",onClick:a=>t({type:d.b.Type.bulkHighlight,alert:e,clickPoint:{x:a.clientX,y:a.clientY}})()},c.b.mount(je,Object(D.b)(e)),Object(g.pipe)(e.diff,o.g.map(e=>n.createElement(M,{diff:e})),o.g.toNullable),b.a.isBulkApplied(e)?n.createElement(n.Fragment,null):e.ignoreAllowed&&n.createElement(Me,{onClick:t({type:d.b.Type.bulkIgnore,alertId:e.id})}))))))),Ne=c.b.List.make(h.Eb,Le),Pe=({variant:e,state:t})=>{const a=n.useContext(f.a.Context),i="expanded"===e?P.H4:P.Base;return n.createElement(i,{className:le},t.pipe(m.a.map(({alerts:e,visibilityState:t})=>"applied"===t?a.bulkAccept.appliedTitle(e.length):a.bulkAccept.title(e.length))))},Fe=e=>c.b.Animated.make(Se,c.b.Union.asOption(c.b.Node.make(({state:t})=>n.createElement("div",{className:ce},n.createElement(j.d.Sparkles,{className:te,width:20}),n.createElement(Pe,{state:t,variant:e})))));a.d(t,"a",(function(){return Be})),a.d(t,"b",(function(){return He}));const De=c.b.Grid.make(({slots:e,notify:t})=>n.createElement(ve,{className:ee,onClick:t({type:d.b.Type.miniItemClick,id:p.a.id})},e.title)),Re=c.b.Grid.make(({state:e,slots:t,notify:a,view:c})=>{const p=e.pipe(m.a.map(Object(i.flow)(e=>e.alerts.length,o.g.fromPredicate(e=>e>4))));return n.createElement(ve,Object.assign({},Object(r.c)(de,c("renderOptions").pipe(m.a.map(u.b),m.a.map(l.e.pick("container")))),{onMount:a({type:d.b.Type.bulkAcceptItemShow})}),n.createElement("div",Object.assign({},Object(r.c)(ae,pe)),t.title,n.createElement(s.a.div,Object.assign({},Object(r.c)(ue,p.pipe(m.a.map(Object(i.flow)(o.g.map(()=>me),o.g.orNull))))),t.suggestions),n.createElement("div",{className:ne},n.createElement(s.a.Fragment,null,p.pipe(m.a.map(Object(i.flow)(o.g.map(()=>n.createElement("div",{className:he})),o.g.orNull)))),t.controls)))}),Be=c.b.Knot.make(Re,{title:Fe("expanded"),suggestions:Ne,controls:Ie}),He=c.b.Knot.make(De,{title:Fe("mini")})},N1Ys:function(e,t,a){e.exports=a.p+"files/88b63c27cdce33467477f6b31373c11b/inter-italic.woff"},NNUY:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return n}));var n,i=a("I7vG"),r=a("kgbq"),s=a("94k3"),o=a("lrqh"),l=a("6fbX"),c=a("PrA7"),d=a("zR/0"),p=a("qSni");class u{constructor(e,t,a,n,r){this._capi=e,this.events=t,this._documentContextHolder=a,this._dialectSettings=n,this._log=c.Monitoring.Logging.getLogger("ObservableCAPIClientImpl"),this._subs=[],this.pushChanges=e=>Object(i.pipe)(this._capi.pushChanges(e),o.l.mapLeft(e=>(this._log.warn("Failed to push changes",e),e))),this._warnOnCommandFail=e=>Object(i.pipe)(e,o.l.fold(e=>(this._log.warn("CAPI command failed",e),o.l.left(e)),e=>o.l.right(e))),this.setSessionOption=e=>Object(i.pipe)(this._capi.setSessionOption(e),this._warnOnCommandFail),this.sendFeedback=e=>Object(i.pipe)(this._capi.sendFeedback(e),this._warnOnCommandFail),this.requestDocStats=Object(i.pipe)(this._capi.requestDocStats,this._warnOnCommandFail),this.requestSynonyms=(e,t)=>Object(i.pipe)(this._capi.requestSynonyms(e,t),this._warnOnCommandFail),this.shortenItSubmit=e=>Object(i.pipe)(this._capi.shortenItSubmit(e),this._warnOnCommandFail),this.enablePlagiarismSearch=Object(i.pipe)(this._capi.enablePlagiarismSearch,this._warnOnCommandFail),this.disablePlagiarismSearch=Object(i.pipe)(this._capi.disablePlagiarismSearch,this._warnOnCommandFail),this.realtimeProofitSubmit=e=>Object(i.pipe)(this._capi.realtimeProofitSubmit(e),this._warnOnCommandFail),this.realtimeProofitCancel=Object(i.pipe)(this._capi.realtimeProofitCancel,this._warnOnCommandFail),this.boomerangGetSharedLink=Object(i.pipe)(this._capi.boomerangGetSharedLink,this._warnOnCommandFail),this.boomerangCheckReviewersFeedback=e=>Object(i.pipe)(this._capi.boomerangCheckReviewersFeedback(e),this._warnOnCommandFail),this.submitRecipients=e=>Object(i.pipe)(this._capi.submitRecipients(e),this._warnOnCommandFail),this.ping=()=>this._capi.ping(),this.getText=()=>this._capi.getText(),this.close=e=>this._capi.close(e),this.isClosed=()=>this._capi.isClosed(),this._subs.push(this._dialectSettings.dialectOrDefault.subscribe(e=>this._documentContextHolder.updateContext(Object.assign(Object.assign({},this._documentContextHolder.context.get()),{dialect:o.g.some(e)}))),this._documentContextHolder.context.pipe(d.a.skip(1)).subscribe(t=>{o.l.toPromise(e.setSessionOption({kind:s.a.CAPISessionOptionType.Context,context:t}))})),this._subs.push(this.events.subscribe(t=>{"finish"===t.kind?o.g.isNone(this._dialectSettings.dialect.get())&&p.a.isDialectString(t.dialect)&&this._dialectSettings.setDialectWeak(t.dialect):"session_started"===t.kind&&(this._documentContextHolder.updateDefaultContext(t.defaultDocumentContext),r.getContainerId().then(t=>{setTimeout(()=>o.l.toPromise(e.setSessionOption({kind:s.a.CAPISessionOptionType.GnarContainerId,id:t})).catch(e=>{this._log.warn("Can not send user container id",e)}),5e3)}).catch(e=>{this._log.warn("Can not get container id",e)}))}))}get checkingState(){return this._capi.checkingState}get asyncChecksState(){return this._capi.asyncChecksState}dispose(){this._subs.forEach(e=>e.unsubscribe())}}!function(e){const t=o.l.rightIO(r.a);e.Mock=class{constructor(){this.events=new d.a.Subject,this.feedbacks=new d.a.Subject,this.capi={pushChanges:e=>o.l.right(o.g.none),sendFeedback:e=>{switch(e.kind){case s.a.AlertFeedbackType.IGNORE:case s.a.AlertFeedbackType.ADD_TO_DICTIONARY:case s.a.AlertFeedbackType.LOOKED:case s.a.AlertFeedbackType.CLOSED:case s.a.AlertFeedbackType.LIKE:case s.a.AlertFeedbackType.DISLIKE:case s.a.AlertFeedbackType.WRONG_SUGGESTION:case s.a.AlertFeedbackType.OFFENSIVE_CONTENT:case s.a.AlertFeedbackType.EXPANDED:return Object(i.pipe)(o.l.rightIO(()=>this.feedbacks.next({type:"feedback",args:[e.id,e.kind]})));case s.a.AlertFeedbackType.ACCEPTED:return Object(i.pipe)(o.l.rightIO(()=>"replacementText"in e?this.feedbacks.next({type:"feedback",args:[e.id,e.kind,e.replacementText]}):"alternativeIndex"in e?this.feedbacks.next({type:"feedback",args:[e.id,e.kind,e.alternativeIndex,e.gapValue]}):Object(l.d)(e)));case s.a.GoalPrediction.Intent.FeedbackType.INTENT_ACCEPTED:case s.a.GoalPrediction.Intent.FeedbackType.INTENT_IGNORED:return Object(i.pipe)(o.l.rightIO(()=>this.feedbacks.next({type:"feedback",args:[e.predictionId,e.kind]})));default:return t}},enablePlagiarismSearch:t,disablePlagiarismSearch:t},this.activeAlerts=new Set,this.activeLensIds=new Set,this.fireAdd=e=>{this.activeAlerts.add(e),this.activeLensIds.add(e.cardLayout.outcome),this.events.next({kind:"before_alert"}),this.events.next({kind:"alert_received",alert:e})},this.fireRemove=(e,t=o.g.none,a=o.g.none)=>{this.activeAlerts.delete(e),this.activeLensIds.delete(e.cardLayout.outcome),this.events.next({kind:"alert_removed",alertId:e.id,mergedIn:t,hint:a})}}}}(n||(n={}))},NW9S:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));var n,i,r=a("m6JR"),s=a("66iv"),o=a("PK5a");!function(e){let t;!function(e){e.ISO=Object(o.iso)()}(t=e.FromWindowTop||(e.FromWindowTop={}))}(n||(n={})),function(e){let t,a,n;!function(e){e.ISO=Object(o.iso)(),e.equals=Object(o.getEq)(r.eqNumber).equals}(t=e.FromViewportTop||(e.FromViewportTop={})),function(e){e.ISO=Object(o.iso)()}(a=e.AbsTop||(e.AbsTop={})),function(e){e.ISO=Object(o.iso)()}(n=e.CardTop||(e.CardTop={})),e.concatC=e=>t=>e+t;const i=e=>new s.a(e);e.converters=function(t,a,n){const r=i(e.concatC(n)).get,s=i(e.concatC(-t)).get;return{windowToViewport:i(e.concatC(-a)).get,viewportToWindow:i(e.concatC(a)).get,cardTopToViewport:s,viewportToCardTop:i(e.concatC(t)).get,absTopToViewportTop:e=>s(r(e)),absTopToCardTop:r}}}(i||(i={}))},NaPV:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return r}));var n,i,r,s=a("OA+g"),o=a("LNSM"),l=a("lrqh"),c=a("zR/0");!function(e){e.SetGoals="SetGoals",e.Performance="Performance"}(n||(n={})),function(e){e.setGoals=e=>({type:n.SetGoals,source:e}),e.performance={type:n.Performance}}(i||(i={}));class d{constructor(e){this._modalViews=e,this.state=o.a.create(l.g.none),this._modalFactoryCache=new Map}show(e){return this.preload(e).pipe(c.a.switchMap(e=>this.showPreloaded(e)))}showPreloaded(e){return c.a.defer(()=>{const t=new c.a.BehaviorSubject("opened");return this.state.set(l.g.some(e({onClose:()=>{this.state.set(l.g.none),t.next("closed"),t.complete()}}))),t})}preload(e){const t=JSON.stringify(e);if(this._modalFactoryCache.has(t)){const e=this._modalFactoryCache.get(t);return c.a.of(e)}return c.a.defer(()=>this._modalViews.load(e)).pipe(c.a.tap(e=>{this._modalFactoryCache.set(t,e)}))}hideAll(){this.state.set(l.g.none)}}!function(e){e.Mock=class{constructor(){this.state=o.a.create(l.g.none),this.hideAll=s.constVoid}show(e){return c.a.EMPTY}showPreloaded(e){return c.a.EMPTY}preload(e){return c.a.EMPTY}}}(r||(r={}))},NbEL:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r}));var n,i,r,s=a("m6JR"),o=a("NW9S");!function(e){e.above="above",e.below="below",e.hidden="hidden"}(n||(n={})),function(e){e.Impl=class{constructor(e,t,a){this.scrollTop=e,this.viewport=t,this.converters=o.a.converters(e,o.b.FromWindowTop.ISO.unwrap(t.top),a)}}}(i||(i={})),function(e){const t=Object(s.getStructEq)({top:s.eqNumber,height:s.eqNumber});e.eqDimensionsTuple=Object(s.getTupleEq)(t,t)}(r||(r={}))},Ni70:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n,i,r=a("D57K"),s=a("I7vG"),o=a("lrqh"),l=a("hoSD");!function(e){var t=function(){function e(){}return e.prototype.getRect=function(){return o.b.right({rootClientRect:l.c.Rect.empty,clientRects:[l.c.Rect.empty]})},e}();e.Mock=t}(n||(n={})),function(e){e.relativeToViewport=function(e){var t,a=e.clientRects,n=a[0],i=a.slice(1);return Object(s.pipe)((t=l.c.Rect).join.apply(t,Object(r.__spreadArrays)([n],i)),o.b.getOrElse((function(){return l.c.Rect.empty})))},e.relativeToRoot=function(t){return l.c.absToRelative(e.relativeToViewport(t),t.rootClientRect)},e.relativeToRootFirst=function(e){return l.c.absToRelative(e.clientRects[0],e.rootClientRect)},e.relativeAndAbs=function(t){var a=e.relativeToViewport(t);return{abs:a,relative:l.c.absToRelative(a,t.rootClientRect)}}}(i||(i={}))},"OI/H":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("ERkP"),r=a("OA+g"),s=a("I7vG"),o=a("vOOZ"),l=a("zR/0"),c=a("lrqh"),d=a("D9EC"),p=a("uO+M"),u=a("PrA7"),m=a("6gXa"),h=a("ps/9"),g=a("uqkn"),f=a("E0zP"),b=a("Sfi4"),y=a("3bJT"),C=a("H9T+"),v=a("jSKJ"),S=a("oWeJ"),E=a("CxAE");!function(e){e.Mini=({card:e,actions:t})=>i.createElement(o.a.Fragment,null,e.pipe(l.a.map(e=>f.a.isToneAIItem(e)?i.createElement(E.a.BundleMini,{card:e,actions:t}):i.createElement(S.a.Bundle,{card:e,actions:t})))),e.Full=({card:e,actions:a,renderCard:c})=>{const{isChecking:d,isCheckingGlobal:u,transform:m}=g.a.useCardStates(e),h=e=>(p("CardBundle").error("card type not supported:",e),null),y=e.pipe(e=>e.lift(new l.d.SplitByOperator(e=>e.activeAlert.id)),l.a.switchMap(e=>e.pipe(l.a.distinctUntilChanged((e,t)=>e.activeAlertIndex===t.activeAlertIndex),l.a.map(t=>({activeAlertIndex:t.activeAlertIndex,activeAlertId:t.activeAlert.id,card:Object(s.pipe)(e,l.a.distinctUntilChanged((e,t)=>e.hashCode()===t.hashCode()&&e.visualState.transitionId===t.visualState.transitionId),l.a.shareReplay({bufferSize:1,refCount:!0}))}))))),C=(e,t)=>{const n=t.alerts.length,r=1===n?U.bundleInnerContainer:2===n?U.bundleInnerContainer2Cards:U.bundleInnerContainerNCards;return i.createElement(o.a.div,{className:r},c?c({card:t,actions:a,isChecking:d,isCheckingGlobal:u,transform:e}):i.createElement(v.a,{card:t,actions:a,isChecking:d,transform:e,isCheckingGlobal:u}))};return i.createElement(n,{card:e,actions:a},i.createElement(t,{state:y,stateToClassMapper:(e,t)=>{if(!e)return{prev:Object(b.c)(""),next:Object(b.c)("")};if(e.activeAlertId===t.activeAlertId)return{prev:Object(b.c)(U.inBundleToUpdatedCardOld),next:Object(b.c)(U.inBundleToUpdatedCardNew)};if(e.activeAlertIndex===t.activeAlertIndex)return{prev:Object(b.c)(U.inBundleToUpdatedCardOld),next:Object(b.c)(U.inBundleToUpdatedCardNew)};return e.activeAlertIndex<t.activeAlertIndex?{prev:Object(b.c)(U.inBundleToNextCardOld),next:Object(b.c)(U.inBundleToNextCardNew)}:{prev:Object(b.c)(U.inBundleToPrevCardOld),next:Object(b.c)(U.inBundleToPrevCardNew)}}},e=>i.createElement(o.a.div,{className:e.view,onAnimationEnd:"prev"===e.type?e.done:r.constVoid},Object(s.pipe)(e.state.card,l.a.map(Object(r.flow)(f.a.match({super:h,smartPhrases:t=>C("prev"===e.type?l.a.of(t.transform):m,t),takeaway:t=>C("prev"===e.type?l.a.of(t.transform):m,t),sentenceLevelBrandTones:e=>C(m,e),synfony:t=>C("prev"===e.type?l.a.of(t.transform):m,t),shortenIt:t=>C("prev"===e.type?l.a.of(t.transform):m,t),toneAI:t=>C("prev"===e.type?l.a.of(t.transform):m,t),default:t=>C("prev"===e.type?l.a.of(t.transform):m,t)}),g.a.foldCard))))))};class t extends b.a{}const a=({alertCount:e})=>1===e?i.createElement(i.Fragment,null):2===e?i.createElement("div",{className:U.bundleFakeCard1}):i.createElement(i.Fragment,null,i.createElement("div",{className:U.bundleFakeCard1}),i.createElement("div",{className:U.bundleFakeCard2})),n=({children:e,card:t,actions:n})=>i.createElement(o.a.div,{className:U.bundleCardWrapper},i.createElement(C.a,{card:t,actions:n}),i.createElement(o.a.div,{className:U.cardBundleContainer},e,Object(s.pipe)((e=>Object(s.pipe)(e,l.a.map(e=>c.g.some(e.alerts.length))))(t),l.a.map(c.g.map(e=>i.createElement(a,{key:e,alertCount:e}))),l.a.map(c.g.toNullable)))),p=Object(d.k)(u.Monitoring.Logging.getLogger)}(n||(n={}));const w="0 1px 8px rgba(109, 117, 141, .18)",k=m.a.keyframes({"0%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),_=m.a.keyframes({from:{transform:"translateX(0)",opacity:1},to:{transform:"translateX(-100px)",opacity:0}}),O=m.a.keyframes({from:{transform:"translateX(-100px)",opacity:0},to:{transform:"translateX(0)",opacity:1}}),A=m.a.keyframes({from:{opacity:0,transform:"scale(.95) translateY(-15px)"},to:{opacity:1,transform:"scale(1) translateY(0)"}}),T=m.a.keyframes({from:{opacity:1,transform:"scale(1) translateY(0)"},to:{opacity:0,transform:"scale(.95) translateY(-15px)"}}),x={position:"relative",borderRadius:m.a.rem(h.r),background:p.Color.CoreNeutral0,boxShadow:w,zIndex:2},I={marginTop:m.a.rem(.75)},M={marginTop:m.a.rem(1.25)},j={position:"absolute",top:m.a.px(-5),right:m.a.rem(.5),left:m.a.rem(.5),zIndex:-1,display:"block",height:m.a.percent(100),borderRadius:m.a.rem(h.r),backgroundColor:p.Color.CoreNeutral1,boxShadow:w,content:"' '"},L={position:"absolute",top:m.a.px(-10),right:m.a.rem(1),left:m.a.rem(1),zIndex:-2,display:"block",height:m.a.rem(2),borderRadius:m.a.rem(h.r),backgroundColor:p.Color.CoreNeutral10,boxShadow:w,content:"' '"},N={borderRadius:m.a.rem(.75),background:p.Color.CoreNeutral20,margin:`${m.a.rem(-.25)} ${m.a.rem(-.25)}`,padding:`${m.a.rem(.25)} ${m.a.rem(.25)}`,$nest:{[`& .${y.b.cozyCardContainerSelector}`]:{margin:0,boxShadow:"none"},[`& .${y.b.fullCardSelector}`]:{padding:`${m.a.rem(.75)} ${m.a.rem(.5)} ${m.a.rem(.5)} ${m.a.rem(1)}`},"& [role=dropdown-list]":{transform:`translateY(${m.a.rem(-.5)})`}}},P={position:"absolute",top:m.a.rem(.8),right:m.a.rem(1),margin:0},F={borderRadius:m.a.rem(h.r),background:p.Color.CoreNeutral0,boxShadow:w},D={display:"block",position:"absolute",top:0,$nest:{[`& .${y.b.bundleInnerContainerSelector}`]:{margin:0}}},R={animation:`${T} ${m.a.seconds(.25)} ease-out`},B={animation:`${O} ${m.a.seconds(.25)} ease-out`},H={animation:`${_} ${m.a.seconds(.25)} ease-in`},W={animation:`${A} ${m.a.seconds(.25)} ease-in`},$={display:"none",animation:`${k} ${m.a.seconds(.25)} ease-in`},V={animation:`${k} ${m.a.seconds(.25)} ease-in`},U=Object.assign(Object.assign({},m.a.stylesheet({bundleInnerContainer:[x],bundleCardWrapper:[N],minimalBetaLabel:[P],compactCardContainer:[F],cardBundleContainer:[{position:"relative",zIndex:2}],inBundleMovingCard:[D],inBundleToPrevCardOld:[D,R],inBundleToPrevCardNew:[B],inBundleToNextCardOld:[D,H],inBundleToNextCardNew:[W],inBundleToUpdatedCardOld:[$],inBundleToUpdatedCardNew:[V]})),{bundleInnerContainer:m.a.joinClasses([y.b.bundleInnerContainerSelector,m.a.style(x)]),bundleInnerContainer2Cards:m.a.joinClasses([y.b.bundleInnerContainerSelector,m.a.style(x,I)]),bundleInnerContainerNCards:m.a.joinClasses([y.b.bundleInnerContainerSelector,m.a.style(x,M)]),bundleFakeCard1:m.a.joinClasses([y.b.bundleFakeCard1Selector,m.a.style(j)]),bundleFakeCard2:m.a.joinClasses([y.b.bundleFakeCard2Selector,m.a.style(L)])})},OOrw:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("GRZr"),r=a("OA+g"),s=a("lrqh"),o=a("6fbX"),l=a("PrA7"),c=a("dE97"),d=a("GUi3"),p=a("zR/0"),u=a("Z0Em"),m=a("UEGg"),h=a("O6HF"),g=a("YJiV"),f=a("TC4P"),b=a("E0zP");!function(e){let t,a;e.Kind="PlagiarismCard",function(e){const t=e=>t=>Object.assign(Object.assign({},t),{positionState:e});e.changeVisualState=e=>t=>Object.assign(Object.assign({},t),{visualState:e});const a=g.a.getTransitionTo(e.changeVisualState,t);e.getChangePosition=function(){return{changePosition:t}},e.getTransitionTo=function(){return{transitionTo:a}},e.getCompleteTransition=function(){return{completeTransition:t=>a=>e.changeVisualState(f.a.VisualState.complete(a.visualState,t))(a)}};const n=(e,t,a)=>n=>Object.assign(Object.assign({},n),{alerts:e,activeAlert:b.a.getAlertByIndex(a,e),removedAlertsIds:t,activeAlertIndex:a});function i(t,n,i){Object(o.g)(1===n.length,"PlagiarismCard can only handle update with a single alert");const r=n[0];Object(o.g)(void 0!==t.alerts.find(e=>e.id===r.id),"can not receive updates for unknown alert",()=>r.toString());const s=function(e,t,a){const n=g.a.getApplicableCardMeta(t,e.visualState,a);return Object.assign(Object.assign({},e),{activeHighlightIndex:g.a.getAHI(e,n),meta:n})}(t,r,i);switch(r.state.type){case c.a.State.Type.REGISTERED:return"success"===s.visualState.transition.type||"presuccess"===s.visualState.transition.type?a({type:"focused",clockwise:s.visualState.transition.clockwise})(s):s;case c.a.State.Type.REMOVED:return"focused"!==s.visualState.transition.type&&"expanded"!==s.visualState.transition.type||!s.alerts.every(e=>c.a.isCapiDone(e)&&e.allowUpdate&&c.a.isRated(s.activeAlert))?e.remove(n,!0)(s):a({type:"presuccess",clockwise:s.visualState.transition.clockwise})(s);case c.a.State.Type.APPLIED:case c.a.State.Type.BEING_APPLIED:return e.remove(n,!0)(s);default:return Object(o.d)(r.state)}}e.select=(a,i)=>g.a.getSelect(n,e=>r.identity,e.changeVisualState,t,e=>r.identity,r.identity,a,i),e.getSelect=function(a,n){const i=e.select(a,n);return{select:g.a.getSelectFirstAlert(i),selectByAlert:(e,t,a)=>i(t,e,a),unselect:g.a.getUnselect(e.changeVisualState,t)}},e.remove=g.a.getRemove(n,a),e.getRemoveAlert=function(t,a){return{removeAlertFromItem:(n,i)=>o=>{const l=new Set(n.map(e=>e.id));return b.a.hasAnyOfAlerts(l)(o)?e.remove(n,Object(r.pipe)(t(i),s.g.map(e=>a.compare(o,e)>0),s.g.getOrElse(r.constTrue)))(o):o}}},e.getUpdateWithAlert=function(e){return{updateWithAlerts:t=>a=>i(a,t,e)}}}(t=e.Capabilities||(e.Capabilities={})),e.eq=b.a.eq,function(a){function n(t,a){const n=a.alerts;return Object.assign(Object.assign({id:t,kind:e.Kind,activeAlert:b.a.getAlertByIndex(a.activeAlertIndex,n),equals(t){return e.eq.equals(this,t)},hashCode(){return b.a.hashCode(Object.assign(Object.assign({},this),{userInput:s.g.none}))}},a),{alerts:n})}function o(e){const t=e.map(e=>e.getHighlightRanges()[0]),a=Object(r.pipe)(e.map(e=>u.b.groupSum.concat(u.b.MAX,u.b.groupSum.inverse(e.progress))),Object(i.fold)(u.b.groupSum),u.a.fromRatio);return new h.a.Impl(a,"",h.a.CheckingState.Idle,t,!1)}a.create=function(e,a){const i=l.Monitoring.Logging.getLogger("PlagiarismCardFactory"),u=(e,i,l,c)=>g.a.getCreate(n,s.g.none,g.a.getChangeVisualState(t.changeVisualState,r.identity),()=>p.a.EMPTY,a)(e,i,l,0,o(i),d.a.SpecialId.Plagiarism,c),h=g.a.getSelectNextAlert(g.a.getCardSelections(e),t.select(e,a)),y=(e,t)=>Object.assign(Object.assign({},e),{meta:o(t)});return{createRendered:(e,t)=>u(e,t,0,s.g.some(f.a.VisualState.initial({type:"rendered",clockwise:!0},!1))),createAdded:(e,t)=>u(e,t,0,s.g.some(f.a.VisualState.initial({type:"added",clockwise:!0},!0))),createFocused:(e,t,a)=>u(e,t,a,s.g.some(f.a.VisualState.initial({type:"focused",clockwise:!0},!0))),changePlagiarismMetaWithAlerts:y,addPlagiarismAlerts:(e,t)=>{const a=e.alerts.concat(t.map(e=>m.a.fromModel(e))).sort(c.d.ord.compare).filter(t=>{const a=m.a.isPlagiarism(t);return a||i.error("Encountered non-plagiarism alert in plagiarism card",{alert:t,cardId:e.id}),a});return y(Object.assign(Object.assign({},e),{alerts:a,activeAlertIndex:b.a.getIndexByAlert(e.activeAlert.id,a)}),a)},remove:(e,a,n)=>t.remove(a,n)(e),selectNextAlert:(e,t)=>h(t)(e),shouldAnimateAlertApply:a.shouldAnimateAlertApply}},a.getPlagiarismCardMeta=o}(a=e.ItemFactory||(e.ItemFactory={}))}(n||(n={}))},Od5a:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("ERkP"),r=a("I7vG"),s=a("vOOZ"),o=a("9NHN"),l=a("rk+4"),c=a("nnns"),d=a("GUi3"),p=a("zR/0"),u=a("ZvPX"),m=a("zTZn"),h=a("97ZK"),g=a("lrqh"),f=a("D9EC"),b=a("aH3e"),y=a("W1E0");!function(e){e.View=({lens:a,transition:n,successLensViewModel:l,preventAnimation:c,illustrations:C,onTransitionEnd:v,title:S,showTitle:E})=>{const w=i.useContext(b.a.Context).platform===b.a.Platform.IPAD,k=!d.a.isMainLens(a.id);return i.createElement(u.b.FixedContent,null,i.createElement(s.a.div,Object.assign({onTransitionEnd:v},Object(o.c)(w?y.successLensIPad:y.successLens,n.pipe(p.a.map(e=>e.base)))),E&&i.createElement(s.a.div,Object.assign({},Object(o.c)(y.successLensHeader,n.pipe(p.a.map(e=>e.title)))),S),i.createElement("div",{className:w?y.successLensContentIPad:y.successLensContent},i.createElement(m.a,{state:l.successState,preventAnimation:c,illustrations:C,alertsListType:g.g.isSome(l.priorityList)?"priority":"all"},Object(r.pipe)(l.priorityList,g.g.map(e=>i.createElement(s.a.Fragment,null,e.hasNonPriorityAlerts.view(Object(f.c)(i.createElement(h.b,{collapsed:!0,onClick:()=>e.reviewNonPriorityAlerts(a.id)}),null)))),g.g.orNull),k&&i.createElement(t,null),Object(r.pipe)(l.mutedAlerts,g.g.map(t=>i.createElement(e.MutedSuggestions,{count:t.mutedSuggestionsCount,onReview:t.reviewMutedSuggestions})),g.g.orNull)))))},e.MutedSuggestions=({count:e,onReview:t})=>{const a=i.useContext(l.a.Context);return i.createElement(s.a.Fragment,null,e.view(e=>e?i.createElement(s.a.span,{className:y.mutedSuggestions},a.successLens.mutedSuggestions(e),i.createElement(c.a.Ghost,{name:"review-muted",className:y.reviewButton,onClick:t},a.review)):null))};const t=()=>{const e=i.useContext(l.a.Context),{navigateToAllAlerts:t}=i.useContext(u.c);return i.createElement(c.a.Ghost,{name:"to-all-alerts",onClick:t,className:y.toAllAlerts},e.goBackToAllAlerts)}}(n||(n={}))},"Ov/9":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=1.7},PBv0:function(e,t,a){e.exports=a.p+"files/55c843b0b146c9d1db049e4751172fe1/inter-regular.woff2"},PDwX:function(e,t,a){e.exports=a.p+"files/2fdff5731e4f939b623f3e6d82b7eacf/mutedAlerts.mp4"},PPsJ:function(e,t,a){"use strict";var n=a("OA+g"),i=a("I7vG"),r=a("2Jhg"),s=a("1aGC"),o=a("4ae2"),l=a("24uI"),c=a("bYZB"),d=a("zR/0"),p=a("1huE"),u=a("hoSD"),m=a("lrqh"),h=a("D9EC"),g=a("6fbX"),f=a("PrA7"),b=a("o5+S"),y=a("0lfv");const C=s.import("modules/clipboard");var v,S,E,w;!function(e){e.normalizeSpacesInDelta=e=>e.reduce((e,t)=>e.push(l.a.isInsert(t)&&"string"==typeof t.insert?Object.assign(Object.assign({},t),{insert:t.insert.replace(/\s/g,e=>"\n"===e||"\r"===e||"\t"===e?e:" ")}):t),new o.a);let t,a;e.getConverter=(t,a,s=[],o)=>{const l=((e,t,a)=>r.j.of(()=>{const n={root:document.createElement("div"),scroll:e.scroll,addContainer:(t,n)=>{const i=e.addContainer(t,n);return a&&i.classList.add(a),i},setContents:h.l,setSelection:h.l,getFormat:()=>[],selection:{savedRange:{index:0,length:0}}},i=new C(n,{matchVisual:!1,matchers:t});return e=>{i.container.innerHTML="",i.container.appendChild(e);const t=i.convert();return i.container.innerHTML="",Object(b.r)(t)}}))(t,s,o);return t=>Object(i.pipe)(u.f.sanitize(t,{allowedAttrs:["href","style","class",w.TrailingSpaces.dataPreserveSpaces],forbidTags:["script","style","meta","img","video","embed","frame","iframe","area","source","track","template","canvas","audio"],allowDataAttrs:!1,returnHTML:!0}),e=>Object(i.pipe)(u.c.traverseMutate(e,e=>u.c.Guardians.isHTMLElement(e)||u.c.Guardians.isDocumentFragment(e),Object(n.flow)(w.normalizeBold,w.TrailingSpaces.decodeTrailingSpaces,w.cleanupStyles(["whiteSpace","fontWeight","fontStyle","white-space","font-weight","font-style","mso-list"]))),m.b.fold(e=>(f.Monitoring.Logging.getLogger("HTML2Delta").warn("Cannot normalize html on paste",e),m.g.none),e=>m.g.some(e))),m.g.chain(e=>y.a.fromOption(l.map(t=>t(e)).recover(f.Monitoring.Logging.getLogger("HTML2Delta").handler("Cannot convert given text to html").error).toOption())),m.g.map(a),m.g.map(e.normalizeSpacesInDelta))},function(e){let t;!function(e){e.and=(...e)=>t=>e.every(e=>e(t)),e.or=(...e)=>t=>e.some(e=>e(t)),e.includes=e=>t=>t.includes(e)}(t=e.Test||(e.Test={})),e.checks=[{name:c.f.MSOutlook,test:t.and(t.includes('xmlns:w="urn:schemas-microsoft-com:office:word'),t.includes("span.EmailStyle15"))},{name:c.f.MSWord,test:t.includes('xmlns:w="urn:schemas-microsoft-com:office:word')},{name:c.f.MSExcel,test:t.includes('xmlns:x="urn:schemas-microsoft-com:office:excel')},{name:c.f.MSOffice,test:t.includes('xmlns:o="urn:schemas-microsoft-com:office:office')},{name:c.f.MSWordOnline,test:t.and(t.includes('xml:lang="EN-US"'),t.includes("TextRun"),t.includes("SCX"))},{name:c.f.GDocs,test:t.includes('id="docs-internal-guid-')},{name:c.f.GSheets,test:t.includes('<meta name="generator" content="Sheets"/>')},{name:c.f.DropboxPaper,test:t.includes('class=" author-d-')},{name:c.f.CocoaHTMLWriter,test:t.includes('<meta name="Generator" content="Cocoa HTML Writer">')},{name:c.f.ProbablyMSOutlookOnline,test:t.or(t.includes("color: rgb(0, 0, 0); font-family: Calibri, Helvetica, sans-serif;"),t.includes("color: rgb(0, 0, 0); font-family: Calibri,Helvetica,sans-serif;"))},{name:c.f.ProbablyGMail,test:t.or(t.includes("color: rgb(34, 34, 34); font-family: Arial, Helvetica, sans-serif;"),t.includes("color: rgb(34, 34, 34); direction: ltr; font-family: Arial,Helvetica,sans-serif;"))}],e.detectSource=(e,t)=>{const a=t.find(t=>t.test(e));return a?a.name:c.f.Unknown}}(t=e.SourceDetector||(e.SourceDetector={})),function(e){function t(e,t){return u.c.Guardians.isP(e)&&"MsoNormal"===e.className&&1===e.childNodes.length&&e.firstChild&&e.firstChild.textContent===w.nbsp?(new o.a).insert("\n"):t}function a(e,t){let a=(new o.a).compose(t);if(0===t.ops.length)return m.b.right(a);const n=a.ops[0];if(!u.c.Guardians.isHTMLElement(e))return m.b.left(new Error("Cannot parse non-html element"));if(!l.a.isInsertString(n))return m.b.left(new Error("The first operation is not a string insert"));const i=n.insert.match(/^\s*?(\.|·|o|§|Ø)\s+/),r=n.insert.match(/^\s*?(\d+|[a-zA-Z]+)?[\.\)][\ \t\u202F\u00A0]+/);if(null===i&&null===r||r&&n.insert.length-1===r[0].length&&1===a.ops.length)return m.b.right(a);const s=null!==i?"bullet":"ordered",c=null!==i?i:r,d=(a=(new o.a).insert(n.insert.substring(c[0].length,n.insert.length),n.attributes).concat(new o.a(a.ops.slice(1)))).ops[a.ops.length-1];l.a.isInsertString(d)&&(a=new o.a(a.ops.slice(0,-1)).push({insert:d.insert.substring(0,d.insert.length-1),attributes:d.attributes}));const p=(e.getAttribute("style")||"").replace(/\n+/g,"").match(/level(\d+)/),h=p?Number(p[1])-1:0;return a.push({insert:"\n",attributes:{list:s,indent:h}}),m.b.right(a)}e.fancyTable=[["tr",(e,t)=>t.insert("\n")],["td",(e,t)=>{const a=Number(e.getAttribute("colspan"))||1;return e.nextSibling?t.insert("\t".repeat(a)):t}]],e.matchOutlookEmptyLine=t,e.outlookEmptyLine=[["p.MsoNormal",t]],e.matchMsWordList=a;const r=e=>(t,r)=>Object(i.pipe)(a(t,r),m.b.fold(t=>(e.info("Cannot parse MS Word List",t),r),n.identity));e.getMSWordList=e=>{const t=r(e.getLogger("MSWordListMatcher"));return[["p.MsoListParagraph",t],["p.MsoListParagraphCxSpFirst",t],["p.MsoListParagraphCxSpMiddle",t],["p.MsoListParagraphCxSpLast",t],["p.MsoNoSpacing",t],["h1",t],["h2",t],["h3",t],["h4",t],["h5",t],["h6",t],["p.MsoHeading7",t],["p.MsoHeading8",t],["p.MsoHeading9",t],["p.MsoTitle",t],["p.MsoSubtitle",t],["p.MsoQuote",t],["p.MsoIntenseQuote",t]]}}(a=e.Matchers||(e.Matchers={}))}(v||(v={})),(E=S||(S={})).byActiveSelection=(e,t)=>{const a=[`color: ${window.getComputedStyle(e).color};`,"background: transparent;","margin-top:0pt;","margin-bottom:0pt;"].join(" "),r=(e,t)=>{e.setAttribute("style",t.join("; "))};return Object(i.pipe)(E.getSelectedHTMLForCopy(e),m.g.chain(Object(n.flow)(w.removeAllSpans,m.b.chain(w.TrailingSpaces.normalizeTrailingSpaces),m.b.map(w.normalizeNestedListsUnsafe(e=>t(e)[0])),m.b.chain(e=>u.c.traverseMutate(e,u.c.Guardians.isHTMLElement,e=>(u.c.Guardians.isSPAN(e)?r(e,[a,e.parentNode&&u.c.Guardians.isLink(e.parentNode)?"color: #4a6ee0;":""]):u.c.Guardians.isBR(e)||(u.c.Guardians.isLink(e)?r(e,[a,"color: #4a6ee0;"]):u.c.Guardians.isH1(e)||u.c.Guardians.isH2(e)?r(e,[a,"font-weight: normal;"]):u.c.Guardians.isLI(e)&&e.parentNode?u.c.Guardians.isOL(e.parentNode)?r(e,[a,`list-style-type:${t(e)[1]};`]):u.c.Guardians.isUL(e.parentNode)&&r(e,[a,"list-style-type:disc"]):u.c.Guardians.isHTMLElement(e)&&r(e,[a])),e))),m.b.map(e=>u.f.sanitize(e,{allowedAttrs:["class","href","style","target",w.TrailingSpaces.dataPreserveSpaces],allowDataAttrs:!1})),m.b.map(e=>`<meta charset='utf-8'>${e}`),m.b.fold(e=>(f.Monitoring.Logging.getLogger("HTML4Copy").error("Cannot get html for copy",e),m.g.none),m.g.some))))},E.getSelectedHTMLForCopy=e=>Object(i.pipe)(u.c.getFirstSelectionRange(),m.g.chain(t=>{if(t.commonAncestorContainer===e){const e=document.createDocumentFragment();return e.appendChild(t.cloneContents()),m.g.some(e)}if(u.c.isParent(e,t.commonAncestorContainer)){const a=Object(i.pipe)(u.c.getTreeBetween(e,t.commonAncestorContainer,u.c.Guardians.isP),m.g.fold(()=>t.cloneContents(),e=>(u.c.appendTo(u.c.getLastChild(e),t.cloneContents()),e))),n=document.createDocumentFragment();return n.appendChild(a),m.g.some(n)}return m.g.none})),function(e){e.removeAllSpans=e=>Object(i.pipe)(u.c.traverseMutate(e,u.c.Guardians.isHTMLElement,e=>{if(u.c.Guardians.isSPAN(e)){const t=u.c.moveChildrenTo(document.createDocumentFragment(),e);return t.normalize(),t}return e}),m.b.map(e=>(e.normalize(),e))),e.space=" ",e.nbsp=" ";const t=t=>{if(0===t)return"";if(1===t)return e.nbsp;const a=t-1,n=(a-a%2)/2;return`${e.nbsp}${`${e.space}${e.nbsp}`.repeat(n)}${2*n===a?"":e.nbsp}`};let a;!function(e){e.dataPreserveSpaces="data-preserver-spaces";const a=/mso-spacerun:\s*yes/;e.decodeTrailingSpaces=t=>(u.c.Guardians.isSPAN(t)&&(t.hasAttribute(e.dataPreserveSpaces)||a.test(t.getAttribute("style")||""))&&t.setAttribute("style","white-space: pre-wrap"),t),e.normalizeTrailingSpaces=a=>u.c.traverseMutate(a,e=>u.c.Guardians.isHTMLElement(e),a=>{if(a.nodeType!==Node.TEXT_NODE||!a.textContent||a.parentNode&&u.c.Guardians.isSPAN(a.parentNode)&&a.parentNode.hasAttribute(e.dataPreserveSpaces))return a;{const n=a.textContent.match(/^( *)(.*?)( *)$/);if(n){const a=document.createElement("span");return a.appendChild(document.createTextNode(`${t(n[1].length)}${n[2]}${t(n[3].length)}`)),a.setAttribute(e.dataPreserveSpaces,"true"),a}throw new g.b("Cannot parse textContent")}})}(a=e.TrailingSpaces||(e.TrailingSpaces={})),e.normalizeBold=e=>!u.c.Guardians.isHTMLElement(e)||"B"!==e.nodeName&&"STRONG"!==e.nodeName||"normal"!==e.style.fontWeight?e:u.c.moveChildrenTo(document.createElement("span"),e),e.cleanupStyles=e=>t=>{if(!u.c.Guardians.isHTMLElement(t))return t;const a=(t.getAttribute("style")||"").split(";").map(e=>e.split(":")).filter(([t])=>e.includes(t)).map(([e,t])=>`${e}:${t}`).join(";");return t.setAttribute("style",a),t},e.normalizeNestedListsUnsafe=function(e){return t=>{return u.c.findAll(e=>u.c.Guardians.isOL(e)||u.c.Guardians.isUL(e))(t).forEach(t=>Array.from(t.childNodes).reduce(([a,n],r)=>{if(u.c.Guardians.isLI(r)){const s=e(r);if(s>0){let e;return e=a>s?u.c.getParentAt(n,a-s):a===s?m.b.right(n):Object(i.pipe)(u.c.createNested(n.nodeName,s-a),m.b.map(e=>(n===t?n.insertBefore(e,r):n.appendChild(e),e)),m.b.map(u.c.getLastChild)),Object(i.pipe)(e,m.b.map(e=>{e.appendChild(r)})),Object(i.pipe)(e,m.b.fold(()=>[a,n],e=>[s,e]))}return[0,t]}return[a,n]},[0,t])),t}}}(w||(w={})),a.d(t,"a",(function(){return O})),a.d(t,"b",(function(){return T}));const k=s.import("core/module");class _ extends k{constructor(e,t){super(e,t),this.quill=e,this._options=t,this._uuid=u.f.alphanumeric(12),this._sourceChecks=[{name:c.f.DenaliSameDocSession,test:v.SourceDetector.Test.includes(this._uuid)},{name:c.f.DenaliOtherDocSession,test:v.SourceDetector.Test.includes("<meta name='uuid' content='uuid")}],this._log=f.Monitoring.Logging.getLogger("DEd.Clipboard"),this._html2Delta=v.getConverter(this.quill,this._options.deltaFilter,[...v.Matchers.fancyTable,...v.Matchers.getMSWordList(this._log),...v.Matchers.outlookEmptyLine],this._options.className),this.textChangedAfterPaste=new d.a.Subject,this.clipboardShortcutUsed=new d.a.Subject,this._subs=new p.a.Keeper,this.syntheticPaste=e=>{this._options.flush(),this._onPaste({delta:(new o.a).insert(e),source:c.f.Synthetic})},this._onPaste=({delta:e,source:t})=>{const a=l.a.calcAmountLength(e),n=this.quill.getSelection()||{index:0,length:0};this.quill.getLength()-n.length+a>this._maxAllowedTextLength?this._lengthExceededCallback():this._flushHistory(()=>this._doPaste([e,a],n,t))},this._doPaste=([e,t],a,n)=>{const i=this.quill.getText(),r=i.length-1,l=i.trim().length,c=(new o.a).retain(a.index).delete(a.length),d=(new o.a).retain(a.index).concat(e);c.ops&&c.ops.length>0&&this.quill.updateContents(Object(b.s)(c),s.sources.USER),this._options.flush(),this.quill.updateContents(Object(b.s)(d),s.sources.USER),this._options.flush();const p=0===l?"initial":a.length===r?"reset":"partial";this.quill.setSelection("initial"===p||"reset"===p?0:a.index+t,0),this.quill.focus(),this.textChangedAfterPaste.next({type:p,source:n,len:t,tags:this._fetchTagsAmount(e)})},this._getNonEmptyRange=()=>Object(i.pipe)(m.g.fromNullable(this.quill.getSelection()),m.g.filter(c.g.nonEmpty)),this._deleteRange=e=>{const t=(new o.a).retain(e.index).delete(e.length);this.quill.updateContents(Object(b.s)(t),s.sources.USER),this.quill.setSelection(e.index,0),this._options.flush()},this._getHTMLByRange=e=>(this.quill.setSelection(e.index,e.length),Object(i.pipe)(S.byActiveSelection(this.quill.root,_.getListLevel),m.g.map(e=>`<meta name='uuid' content='uuid${this._uuid}'>${e}`))),this._copyRangeToClipboard=e=>t=>this.rtfSupport&&this._rangeHasFormatting(t)?this._copyHTMLByRange(e,t):this._copyPlainTextByRange(e,t),this._onClipboardShortcutUsed=e=>(this.clipboardShortcutUsed.next(),e),this._getRTFContentFromClipboardEvent=e=>t=>Object(i.pipe)(y.a.fromOption(O.getFromEvent(t,"html")),m.g.filter(e=>e.length>0),m.g.map(e=>({source:v.SourceDetector.detectSource(e,[...this._sourceChecks,...v.SourceDetector.checks]),originalHTML:e})),m.g.map(a=>Object(i.pipe)(e.some(e=>e===a.source)?this._getPlainTextFromClipboard(t):this._html2Delta(a.originalHTML),m.g.map(e=>({source:a.source,delta:e})))),m.g.getOrElse(()=>Object(i.pipe)(this._getPlainTextFromClipboard(t),m.g.map(e=>({source:c.f.PlainText,delta:e}))))),this._getPlainTextFromClipboard=e=>Object(i.pipe)(y.a.fromOption(O.getFromEvent(e,"text")),m.g.map(e=>(new o.a).insert(e))),this._fetchTagsAmount=e=>Array.from(e.reduce((e,t)=>(l.a.match(t=>Object.keys(t.attributes||{}).forEach(t=>e.add(t)),h.l,t=>Object.keys(t.attributes||{}).forEach(t=>e.add(t)))(t),e),new Set)),this._maxAllowedTextLength=t.maxAllowedTextLength||_.DEFAULTS.maxAllowedTextLength,this._lengthExceededCallback=t.lengthExceededCallback||_.DEFAULTS.lengthExceededCallback;const a=d.a.mergeStatic(d.a.fromEvent(this.quill.root,"keydown"),d.a.fromEvent(this.quill.root,"keyup")).pipe(d.a.map(e=>(e.metaKey||e.ctrlKey)&&!0===e.shiftKey&&"v"===e.key.toLowerCase()),d.a.distinctUntilChanged(),d.a.startWith(!1),d.a.shareReplay({bufferSize:1,refCount:!0}));this._subs.push(d.a.fromEvent(this.quill.root,"paste").pipe(d.a.withLatestFrom(a)).subscribe(([e,t])=>Object(i.pipe)(e,u.c.preventDefault,this._onClipboardShortcutUsed,this.rtfSupport&&!t?this._getRTFContentFromClipboardEvent(this.plainTextSources):Object(n.flow)(this._getPlainTextFromClipboard,m.g.map(e=>({source:c.f.Unknown,delta:e}))),m.g.map(this._onPaste))),d.a.fromEvent(this.quill.root,"copy").subscribe(Object(n.flow)(u.c.preventDefault,this._onClipboardShortcutUsed,e=>Object(i.pipe)(this._getNonEmptyRange(),m.g.map(this._copyRangeToClipboard(e))))),d.a.fromEvent(this.quill.root,"cut").subscribe(Object(n.flow)(u.c.preventDefault,this._onClipboardShortcutUsed,e=>Object(i.pipe)(this._getNonEmptyRange(),m.g.map(this._copyRangeToClipboard(e)),m.g.map(m.b.map(this._deleteRange)))))),this.container=this.quill.addContainer("ql-clipboard"),t.className&&this.container.classList.add(t.className),this.container.setAttribute("contenteditable","true"),this.container.setAttribute("tabindex","-1")}get rtfSupport(){return!1}get plainTextSources(){return[]}_rangeHasFormatting(e){return(e=>Object(b.r)(this.quill.getContents(e.index,e.length)).ops.some(e=>m.g.isSome(l.a.getAttr(e,b.b.QuillFormatNames.is))))(e)||(e=>this.quill.scroll.path(e.index+e.length).some(([e])=>u.c.Guardians.isLI(e.domNode)||u.c.Guardians.isH1(e.domNode)||u.c.Guardians.isH2(e.domNode)))(e)}_copyHTMLByRange(e,t){return Object(i.pipe)(this._getHTMLByRange(t),m.b.fromOption(()=>new Error("empty html in range")),m.b.chain(t=>O.setToEvent(e,{type:"html",value:t})),m.b.chainLeft(e=>(this._log.warn("HTML: Cannot copy html to clipboard",e),m.b.right(void 0))),m.b.chain(()=>O.setToEvent(e,{type:"text",value:this.quill.getText(t.index,t.length)})),m.b.bimap(e=>(this._log.error("HTML: Cannot copy plain text to clipboard",e),e),()=>t))}_copyPlainTextByRange(e,t){return Object(i.pipe)(O.setToEvent(e,{type:"text",value:this.quill.getText(t.index,t.length)}),m.b.bimap(e=>(this._log.error("Plain text: Cannot set range to clipboard",e),e),()=>t))}_flushHistory(e){this.quill.history.cutoff(),e(),this.quill.history.cutoff()}convert(){return(new o.a).insert("\n")}dangerouslyPasteHTML(){throw new Error("dangerouslyPasteHTML is not implemented")}}var O,A;_.getListLevel=e=>{const t=Number((e.className||"").split("-").pop())||0;return[t,(t+1)%3==0?"lower-roman":(t+1)%2==0?"lower-alpha":"decimal"]},_.DEFAULTS={maxAllowedTextLength:1e5,lengthExceededCallback:h.l},(A=O||(O={})).setToEvent=(e,t)=>m.b.tryCatch(()=>{switch(t.type){case"text":e.clipboardData.setData("text/plain",t.value);break;case"html":e.clipboardData.setData("text/html",t.value);break;default:Object(g.d)(t.type)}},m.b.toError),A.getFromEvent=(e,t)=>{switch(t){case"text":return e.clipboardData?r.f.of(e.clipboardData.getData("text/plain")):r.e;case"html":return e.clipboardData?r.f.of(e.clipboardData.getData("text/html")):r.e;default:return Object(g.d)(t)}};const T=(e,t)=>(class extends _{get rtfSupport(){return e}get plainTextSources(){return t}})},PyeZ:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));var n,i,r=a("D9EC");!function(e){let t;function a(t){return t.type===e.Type.confirmed}function n(t){return t.type===e.Type.undone}!function(e){e.mounted="mounted",e.opened="opened",e.closed="closed",e.hovered="hovered",e.unhovered="unhovered",e.applied="applied",e.addedToDictionary="added_to_dictionary",e.ignored="ignored",e.confirmed="confirmed",e.undone="undone"}(t=e.Type||(e.Type={})),e.isAlertApplyAction=function(t){return t.type===e.Type.applied},e.isAlertOpenAction=function(t){return t.type===e.Type.opened},e.isAlertIgnoreAction=function(t){return t.type===e.Type.ignored},e.isAlertAddToDictionaryAction=function(t){return t.type===e.Type.addedToDictionary},e.isConfirmAction=a,e.isUndoAction=n,e.isMountAction=function(t){return t.type===e.Type.mounted},e.isBulkAction=Object(r.p)(a,n)}(n||(n={})),function(e){let t;!function(e){e.Up="Up",e.Down="Down"}(t=e.Direction||(e.Direction={}))}(i||(i={}))},PzR3:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return i}));var n,i,r=a("OA+g"),s=a("I7vG"),o=a("94k3"),l=a("FiSa"),c=a("lrqh"),d=a("6fbX"),p=a("PrA7");!function(e){e.show={show:e=>`A(#${e.alternativeId})`},e.eq=c.c.getStructEq({alternative:o.a.Alternative.eq,alternativeId:c.c.eqString,alertId:c.c.eqString})}(n||(n={}));class u{constructor(){this._log=p.Monitoring.Logging.getLogger("alternative_manager",p.Logging.LogLevel.DEBUG),this._alternatives=new Map,this.getAlternative=e=>{const t=this._alternatives.get(e);if(t)return c.b.right(t);{const t=`Tried to retrieve non-registered alternative: ${e}`;return this._log.error(t),c.b.left(new Error(t))}}}pushChanges(e){l.a.isDelta(e)&&this._alternatives.forEach(t=>{Object(s.pipe)(t.alternative.rebase(e.delta),c.g.fold(r.constVoid,e=>t.alternative=e))})}registerAlternative(e,t){const a=u.getAlternativeId(t),n={alternative:e,alternativeId:a,alertId:t};return this._alternatives.set(a,n),n}deregisterAlternative(e){return Object(s.pipe)(this.getAlternative(e),c.b.chain(({alternative:e,alternativeId:t})=>c.b.tryCatchError(()=>(Object(d.g)(this._alternatives.delete(t),"alternative should exist before deletion"),e))))}}u._alternativeCounter=0,u.getAlternativeId=e=>`alt-${e}-${u._alternativeCounter++}`,function(e){e.mock={registerAlternative:(e,t)=>({alternative:e,alternativeId:u.getAlternativeId(t),alertId:t}),getAlternative:()=>c.b.left(new Error("Not implemented in mock")),deregisterAlternative:()=>c.b.right(o.a.Alternative.create([]))}}(i||(i={}))},Q4mH:function(e,t,a){"use strict";var n,i,r=a("ERkP"),s=a("vOOZ"),o=a("1w6p"),l=a("E0zP"),c=a("8uad"),d=a("0A/6"),p=a("rq0W"),u=a("OI/H"),m=a("zR/0"),h=a("oWeJ");(n||(n={})).Mini=({card:e,actions:t,useBundleContainer:a=!1,twoLined:n=!1})=>r.createElement(s.a.Fragment,null,e.pipe(m.a.map(e=>r.createElement(h.a.SmartPhrases,{card:e,actions:t,useBundleContainer:a,twoLined:n})))),a.d(t,"a",(function(){return i})),(i||(i={})).Card=e=>o.b.Node.make(({view:t})=>{const a=t("view");return r.createElement(s.a.Fragment,null,a.pipe(m.a.distinctUntilChanged((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type),m.a.map(i=>r.createElement(d.a.Card,{miniCard:l.a.isSmartPhrasesItem(i)?r.createElement(n.Mini,{card:a,actions:e,useBundleContainer:!0}):r.createElement(u.a.Mini,{card:a,actions:e}),fullCard:l.a.isSmartPhrasesItem(i)?r.createElement(c.a.Full,{card:a,actions:e}):r.createElement(u.a.Full,{card:a,actions:e}),successCard:r.createElement(c.a.Success,{isLastCard:t("isLastCard"),actions:e}),feedbackForm:r.createElement(c.a.FeedbackForm,{cardData:i,actions:e}),mutedCard:r.createElement(c.a.MutedAlert,{cardData:i,actions:e}),actions:e,card:i,transitionClassMapper:p.b}))))})},QshB:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return s}));var n,i,r,s,o=a("m6JR"),l=a("BbAu"),c=a("I7vG"),d=a("LNSM"),p=a("prnJ"),u=a("lrqh");!function(e){e.group=u.d.getStructGroup({critical:u.d.groupSum,advanced:u.d.groupSum,free:u.d.groupSum,paid:u.d.groupSum,criticalPriority:u.d.groupSum,advancedPriority:u.d.groupSum,freePriority:u.d.groupSum,paidPriority:u.d.groupSum,unread:u.d.groupSum,muted:u.d.groupSum}),e.eq=o.getStructEq({critical:o.eqNumber,advanced:o.eqNumber,free:o.eqNumber,paid:o.eqNumber,unread:o.eqNumber,criticalPriority:o.eqNumber,advancedPriority:o.eqNumber,freePriority:o.eqNumber,paidPriority:o.eqNumber,muted:o.eqNumber}),e.show=l.a({critical:l.d,advanced:l.d,free:l.d,paid:l.d,criticalPriority:l.d,advancedPriority:l.d,freePriority:l.d,paidPriority:l.d,unread:l.d,muted:l.d}),e.isValid=function(e){return e.critical>=0&&e.advanced>=0&&e.unread>=0},e.isEmpty=function(t){return e.eq.equals(t,e.group.empty)}}(n||(n={})),function(e){e.MIN_GOALS=3,e.TOTAL_GOALS=e.MIN_GOALS+2,e.calculateCompleteness=function(t){const a=Object(c.pipe)(t.goals,u.g.exists(e=>e.size>0)),n=Object(c.pipe)(t.emotions,u.g.exists(e=>e.size>0));return p.a.equals(t,p.a.unset)?0:Object(c.pipe)(t.domain,u.g.forAll(e=>"general"===e))&&!(u.g.isSome(t.audience)||u.g.isSome(t.style)||a||n)?0:Number(a||0)+Number(n||0)+e.MIN_GOALS}}(i||(i={})),function(e){e.zero={full:0,trimmed:0}}(r||(r={})),function(e){let t;!function(e){e[e.Document=0]="Document",e[e.Plagiarism=1]="Plagiarism"}(t=e.CheckingKind||(e.CheckingKind={})),e.Mock={getCheckingForState:()=>d.a.create({kind:e.CheckingKind.Document,type:"idle"})}}(s||(s={}))},RNks:function(e,t,a){"use strict";a.d(t,"b",(function(){return m})),a.d(t,"c",(function(){return h})),a.d(t,"a",(function(){return g}));var n=a("OA+g"),i=a("I7vG"),r=a("lrqh"),s=a("1w6p"),o=a("EiZq"),l=a("uqkn"),c=a("TC4P"),d=a("BeBM"),p=a("bFfh"),u=a("zR/0");const m=(e,t,a,n,i,r)=>s.a.composeKnot({content:f(e,t,i,r),root:y(t,a,n)});function h(e){return(t,a,n,i,r,o)=>s.a.composeKnot({content:s.a.fromSideEffect(a=>{b(t)(a);const n=a.action.action;"item"===n.key&&e(n.action)},C(a,r,o)),root:y(a,n,i)})}function g(e,t){return{viewState:(a,n,s)=>l=>{const d=Object(i.pipe)(a,r.g.exists(e=>e===l.id));return{cell:{item:t(n)(l),root:{height:{value:l.positionState.height,watched:l.positionState.watched&&!e.isScheduledToDispose(l),isValid:l.positionState.isHeightValid},position:{top:l.positionState.absTop,animationInProgress:l.positionState.animationInProgress},layer:d||c.a.isAnimatable(l)&&l.visualState.incomplete&&!Object(i.pipe)(l.visualState.from,r.g.exists(e=>"focused"===e))?o.a.Layer.front:o.a.Layer.back}},root:l.id,hashCode:l.hashCode.bind(l),equals:e=>l.equals(e.cell.item.view),compare:e=>s.compare(l,e.cell.item.view)}}}}const f=(e,t,a,n)=>s.a.fromSideEffect(b(e),C(t,a,n));function b(e){return t=>{switch(t.action.action.action.kind){case o.a.ActionKind.changePosition:e.changePosition.next({id:t.key,height:t.action.action.action.height});break;case o.a.ActionKind.completePositionAnimation:e.completePositionAnimation.next(t.key)}}}const y=(e,t,a)=>s.a.fromSideEffect(e=>{t.next(e.element)},u.a.combineLatestStatic(a,e.view("cardsHeight")).pipe(u.a.map(([e,t])=>({disableUserActions:e,height:t})),u.a.startWith({disableUserActions:!1,height:0}))),C=(e,t,a)=>{const s=e.view(p.a.Prism.items),o=e.pipe(u.a.map(e=>e.itemsOrd)),c=e.pipe(u.a.map(Object(n.flow)(d.j.getActiveItem,r.g.map(l.a.getId)),u.a.distinctUntilChanged())),m=e.view(t.getActiveAlertsCount).view(e=>0===e);return s.pipe(u.a.combineLatest(c,m,o),u.a.map(([e,n,s,o])=>{const l=e.getAt(0);return e.filter(e=>e.positionState.visible||e.positionState.watched&&((e,t)=>!!Object(i.pipe)(t,r.g.exists(t=>t.id===e.id))||Object(i.pipe)(t,r.g.exists(e=>e.positionState.isHeightValid)))(e,l)).map(t.viewState(n,s,o),a(o))}))}},RfT4:function(e,t,a){"use strict";var n=a("ERkP"),i=a("vOOZ"),r=a("LNSM"),s=a("dE97"),o=a("XaD9"),l=a("1Y2u"),c=a("rk+4"),d=a("nnns"),p=a("2qsX"),u=a("BugA"),m=a("6fbX"),h=a("+ukg"),g=a("4XP+"),f=a("j1Ag");const b=({switchToCritical:e,switchToAdvanced:t,counters:a,features:r})=>{const s=n.useContext(c.a.Context),{pageId:l,gnarSpec:b}=n.useContext(o.a.Context),y=r.denali.alertGroupNames===h.a.CRITICAL_ADVANCED?{critical:s.sidebar.critical,advanced:s.sidebar.advanced}:{critical:s.sidebar.free,advanced:s.sidebar.premium},C=a.view(function(e){switch(e){case h.a.CRITICAL_ADVANCED:return"critical";case h.a.CRITICAL_ADVANCED_PRIORITY:return"criticalPriority";case h.a.FREE_PREMIUM:return"free";case h.a.FREE_PREMIUM_PRIORITY:return"freePriority";default:return Object(m.d)(e)}}(r.denali.alertGroupNames)),v=a.view(function(e){switch(e){case h.a.CRITICAL_ADVANCED:return"advanced";case h.a.CRITICAL_ADVANCED_PRIORITY:return"advancedPriority";case h.a.FREE_PREMIUM:case h.a.FREE_PREMIUM_PRIORITY:return"paid";default:return Object(m.d)(e)}}(r.denali.alertGroupNames));return n.createElement(i.a.div,{className:g.counters},C.view(t=>t>0?n.createElement(d.a,{key:"critical-issues",name:"critical-issues",styleType:u.Typography.Type.H3Legacy,className:f.issuesWrapper,onClick:()=>{e(),b.assistantOpenButtonClick(l,"critical")}},n.createElement(p.a.OutcomeCounter,{theme:{counterWrapper:f.criticalCounterWrapper,counterContent:f.criticalCounterContent},count:t}),n.createElement("span",null," ",y.critical(t))):null),v.view(e=>e>0?n.createElement(d.a,{key:"advanced-issues",name:"advanced-issues",styleType:u.Typography.Type.H3Legacy,className:f.issuesWrapper,onClick:()=>{t(),b.assistantOpenButtonClick(l,"advanced")}},n.createElement(p.a.OutcomeCounter,{theme:{counterWrapper:f.advancedCounterWrapper,counterContent:f.advancedCounterContent},count:e}),n.createElement("span",null," ",y.advanced(e))):null))};a.d(t,"a",(function(){return y}));const y=({features:e,documentModel:t,navigationViewModel:a})=>{const{gnarSpec:c,pageId:d}=n.useContext(o.a.Context);return n.createElement(i.a.section,{className:g.wrapper},n.createElement(b,{features:e,switchToCritical:()=>a.events.next({type:"switchToCritical",actionSource:s.b.sidebar}),switchToAdvanced:()=>a.events.next({type:"switchToAdvanced",actionSource:s.b.sidebar}),counters:t.counters}),n.createElement(l.a,{checking:t.checkingState.view(e=>"idle"!==e),hasErrors:r.a.combine(t.counters.view("critical"),t.counters.view("advanced"),(e,t)=>e>0||t>0),onClick:()=>{a.events.next({type:"toggleSidebar",actionSource:s.b.sidebar}),c.assistantOpenButtonClick(d,"default")}}))}},SGQG:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var n=a("uO+M"),i=a("6gXa"),r=a("WIwS"),s=a("ps/9");const o=n.Color.BackgroundTooltip,l=i.a.keyframes({"0%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, .65)"},"70%":{boxShadow:`0 0 0 ${i.a.rem(1)} rgba(95, 139, 250, 0)`},"100%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, 0)"}}),c={width:i.a.rem(1),height:i.a.rem(1),borderRadius:i.a.percent(50),background:"rgba(95, 139, 250, .65)",boxShadow:"0 0 0 rgba(95, 139, 250, .65)",animation:`${l} 2s infinite`,$nest:{"&:hover":{animation:"none"},"@media print":{visibility:"hidden"}}},d=i.a.keyframes({"0%":{opacity:1,transform:"scale(1)"},"100%":{opacity:0,transform:"scale(3)"}}),p={width:i.a.rem(1),height:i.a.rem(1),borderRadius:i.a.percent(50),background:"rgba(95, 139, 250, .65)",willChange:"transform",$nest:{"@media print":{visibility:"hidden"},"&:before":{position:"absolute",top:0,left:0,zIndex:-1,width:i.a.rem(1),height:i.a.rem(1),borderRadius:i.a.percent(100),backgroundColor:"rgba(95, 139, 250, .65)",content:"''",animation:`${d} 2s infinite`,willChange:"transform"},"&:hover:before":{animation:"none"}}},u={margin:`${i.a.rem(-1.5)} 0 0 ${i.a.rem(-1.5)}`,padding:i.a.rem(1),borderRadius:i.a.percent(50),cursor:"pointer",pointerEvents:"all"},m={margin:`0 0 ${i.a.rem(.5)}`,color:n.Color.CoreNeutral0,fontWeight:"bold"},h={color:n.Color.CoreNeutral0,lineHeight:i.a.rem(1.25)},g={display:"flex",padding:`${i.a.rem(1)} ${i.a.rem(1.5)} ${i.a.rem(1.25)} ${i.a.rem(2)}`,width:i.a.rem(23),borderRadius:i.a.rem(s.s),background:o,color:n.Color.CoreNeutral0,textAlign:"left",letterSpacing:0,pointerEvents:"all",alignItems:"flex-start"},f={marginRight:i.a.rem(2),width:i.a.rem(2),flexShrink:0,alignSelf:"center"},b={stroke:r.k,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{stroke:n.Color.CoreNeutral0,fill:n.Color.CoreNeutral0}}},y={position:"absolute",top:i.a.percent(50),left:i.a.percent(50),zIndex:s.k},C={position:"relative",zIndex:s.i},v={zIndex:s.p},S={position:"absolute",zIndex:s.p},E=i.a.prefixedStylesheet("onboarding",{pulse:[c],pulseWrapper:[u],header:[m],description:[h],stepWrapper:[g],content:[{display:"inline-block"}],alertIcon:[f],closeIconWrapper:[{position:"absolute",top:0,right:0}],closeIcon:[b],containerWrapper:[{position:"relative",display:"inline-block"}],onboardingSpot:[y],containerDiv:[{}],editor:[C],onboardingPopup:[v],notificationContainer:[S],pulseOptimized:[p]})},Sfi4:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return f}));var n=a("ERkP"),i=a("a5W6"),r=a("OA+g"),s=a("I7vG"),o=a("LNSM"),l=a("vOOZ"),c=a("zR/0"),d=a("gy42"),p=a("lrqh");class u extends n.Component{constructor(){super(...arguments),this._state=this.props.state.pipe(c.a.startWith(void 0),c.a.map((e,t)=>({state:e,key:t})),c.a.pairwise(),c.a.map(([e,t])=>{const a=this.props.stateToClassMapper(e.state,t.state);return{prev:{key:e.key,state:e.state,view:g(a.prev)},next:{key:t.key,state:t.state,view:g(a.next)}}})),this._elements=o.a.create(h.empty),this._done=new c.a.Subject,this._subs=[]}componentDidMount(){const{children:e}=this.props;this._subs.push(this._state.pipe(c.a.map(({prev:t,next:a})=>{const n=e;return void 0===e?h.empty:[Object(s.pipe)(t.state,p.g.fromNullable,p.g.map(e=>n({state:e,view:t.view,type:"prev",done:()=>this._done.next("prev")})),p.g.chain(p.g.fromNullable),p.g.map(e=>({key:t.key,entry:e}))),Object(s.pipe)(n({state:a.state,view:a.view,type:"next"}),p.g.fromNullable,p.g.map(e=>({key:a.key,entry:e})))]})).subscribe(d.b.toAtom(this._elements)),this._done.subscribe(e=>{"prev"===e&&this._elements.modify(([e,t])=>[p.g.none,t]),"next"===e&&this._elements.set(h.empty)}))}componentWillUnmount(){this._subs.forEach(e=>e.unsubscribe()),this._subs=[]}render(){const{children:e,className:t,onMount:a,onMouseDown:r}=this.props;return e?n.createElement(l.a.div,{className:t,mount:a,onMouseDown:r},this._elements.view(i.array.compact).view(e=>e.map(e=>n.createElement(n.Fragment,{key:e.key},e.entry)))):null}}const m=e=>({start:e,end:e});var h;function g({start:e,end:t}){return c.a.Observable.create(a=>{a.next(e);const n=requestAnimationFrame(()=>requestAnimationFrame(()=>a.next(t)));return()=>cancelAnimationFrame(n)})}!function(e){e.empty=[p.g.none,p.g.none]}(h||(h={}));const f=e=>{const t=e.content.pipe(c.a.map(t=>({className:e.classes.rendered,el:t,onTransitionEnd:r.constVoid})),c.a.map(p.g.some),c.a.startWith(p.g.none),c.a.pairwise(),c.a.map(([t,a])=>Object(s.pipe)(t,p.g.fold(()=>p.g.map(c.a.of)(a),t=>Object(s.pipe)(a,p.g.map(a=>{const n=new c.a.Subject;return c.a.mergeStatic(c.a.of({className:e.classes.removing,el:t.el,onTransitionEnd:()=>n.next()}),c.a.raceStatic(n.pipe(c.a.first()),c.a.timer(e.timeout)).pipe(c.a.mapTo(a)))}))))),c.b.compact,c.a.switchAll(),c.a.shareReplay({refCount:!0,bufferSize:1}));return n.createElement(l.a.div,{className:t.pipe(c.a.map(e=>e.className)),onTransitionEnd:t.pipe(c.a.map(e=>e.onTransitionEnd))},t.pipe(c.a.map(e=>e.el)))}},StFb:function(e,t,a){"use strict";var n;function i(e){const t=e.replace(/\s/g,"");return null!==e&&null!==t.match(/^["'”“.,;:!?\\\/…\-—()]+$/)}function r(e){return null!==e&&null!==e.match(/^\s+$/)}function s(e,t){if(e.length<=4)return null;const a=function(e,t){if(e===t)return;const a=e.length,n=t.length;if(n>a){if(t.substr(0,a)===e)return{from:a,to:a,oldFragment:"",newFragment:t.substr(a)};if(t.substr(n-a)===e)return{from:0,to:0,oldFragment:"",newFragment:t.substr(0,n-a)}}if(n<a){if(e.substr(a-n)===t)return{from:0,to:a-n,oldFragment:e.substr(0,a-n),newFragment:""};if(e.substr(0,n)===t)return{from:n,to:a,oldFragment:e.substr(n),newFragment:""}}const i=n<a?n:a,r=function(e,t,a){let n=0;for(;e[n]===t[n]&&n<a;)n+=1;return n}(e,t,i);let s=function(e,t,a,n,i){let r=0;for(;e[a-r-1]===t[n-r-1]&&i-r>=0;)r+=1;return r}(e,t,a,n,i);r+s>a&&(s-=r+s-a);r+s>n&&(s-=r+s-n);return{from:r,to:a-s,oldFragment:e.substr(r,a-s-r),newFragment:t.substr(r,n-s-r)}}(e,t);if(void 0===a)return null;const{from:n,to:i,oldFragment:r,newFragment:s}=a,o=1===s.length&&n>0&&e[n-1]===s,l=1===r.length&&0===s.length&&t[n-1]===r;let c=n,d=s;return(o||l)&&(c=n-1),o&&(d=s+s),l&&(d=r),d.length>3?null:[e.substring(0,c),d,e.substring(i)]}a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return s})),function(e){e.getClass=function(e,t){return null!==(a=t)&&1===a.length&&/["'”’]/.test(a)?e.deleteApostrophe:function(e){return null!==e&&null!==e.match(/["'”][.,;]/)}(t)?e.deleteQuote:i(t)?e.deletePunctuation:function(e){return null!==e&&null!==e.match(/,,/)}(t)?e.deleteDoubleComma:function(e){return null!==e&&1===e.length&&null!==e.match(/[a-z]/i)}(t)?e.deleteLetter:function(e){return null!==e&&e.match(/[.,;:!?\\\/-]\s*[a-z]/i)}(t)?e.deletePunctuationBeforeLetter:e.deleteAll;var a}}(n||(n={}))},SxAM:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return m}));var n=a("ERkP"),i=a("vOOZ"),r=a("9NHN"),s=a("nnns"),o=a("tZ26"),l=a("zR/0"),c=a("6fbX"),d=a("fT1+"),p=a("2Xcb");class u extends n.Component{constructor(){super(...arguments),this._subs=[]}componentDidMount(){this._title&&(this._title.focus(),this._subs.push(this.props.searchViewModel.hotkeysActions.subscribe(e=>{switch(e){case d.a.focus:this._title&&(this._title.focus(),this._title.select());break;case d.a.next:this._resultFunctionOrSelect(e=>e.next());break;case d.a.previous:this._resultFunctionOrSelect(e=>e.prev());break;default:Object(c.d)(e)}}),this.props.searchViewModel.visible.pipe(l.a.filter(Boolean)).subscribe(()=>{requestAnimationFrame(()=>{this._title&&(this._title.focus(),this._title.select())})})))}componentWillUnmount(){this._subs.forEach(e=>e.unsubscribe()),this._subs=[]}_resultFunctionOrSelect(e){this.props.searchViewModel.result.get().fold(()=>this.props.searchViewModel.select(),e)}render(){const e=this.props.searchViewModel;return n.createElement("div",{className:p.view},n.createElement(i.a.div,{className:p.searchInputWrapper},n.createElement(o.d.SearchQuestion,{className:p.searchIcon}),n.createElement(i.a.input,Object.assign({name:d.b.SEARCH_INPUT_NAME,spellCheck:!1,mount:e=>this._title=e,placeholder:"Find in document",className:p.searchInput,autoFocus:!0},Object(r.b)({value:e.term}),{onKeyDown:e=>e.keyCode===d.b.KEY_Enter&&this._resultFunctionOrSelect(e=>e.next())})),e.result.view(e=>e.getOrElse({count:0,current:0})).view(({count:e,current:t})=>e>0&&n.createElement("span",{className:p.counter,key:"count"},t,"/",e))),n.createElement(s.a.Ghost,{className:p.roundButton,name:"search-prev",disabled:e.result.view(e=>e.filter(e=>1!==e.current).isEmpty()),onClick:()=>this._resultFunctionOrSelect(e=>e.prev())},n.createElement(o.d.Arrow,{className:p.lessIconUp})),n.createElement(s.a.Ghost,{className:p.roundButton,name:"search-next",disabled:e.result.view(e=>e.filter(e=>e.current!==e.count).isEmpty()),onClick:()=>this._resultFunctionOrSelect(e=>e.next())},n.createElement(o.d.Arrow,{className:p.lessIcon})),n.createElement(s.a.Ghost,{className:p.closeButton,name:"search-close",onClick:()=>e.visible.set(!1)},n.createElement(o.d.Close,null)))}}const m=({searchViewModel:e})=>n.createElement(i.a.div,{className:p.wrapper},e.visible.view(t=>t&&n.createElement(u,{searchViewModel:e})))},TeUQ:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("ERkP"),i=a("9NHN"),r=a("BugA"),s=a("6gXa"),o=a("HUX/"),l=a("uO+M"),c=a("x98X"),d=a.n(c),p=a("ev6t");const u=({title:e,onClick:t})=>{const a=Object(o.b)({layoutDensity:"minimal"});return n.createElement("div",Object.assign({},Object(i.c)(a.container,m.container),{onClick:t}),n.createElement("div",{className:a.wrapper},n.createElement(r.Base,{className:m.label},n.createElement("img",{className:p.a.titleIcon,src:d.a}),e)))},m=s.a.prefixedStylesheet("draft_ai_mini_card",{label:[{color:l.Color.CoreNeutral90,textOverflow:"ellipsis",position:"relative",lineHeight:s.a.rem(2),marginLeft:s.a.rem(1),userSelect:"none"}],container:[{cursor:"pointer"}]})},Uwwq:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("a5W6"),r=a("BbAu"),s=a("OA+g"),o=a("I7vG"),l=a("LNSM"),c=a("94k3"),d=a("lrqh"),p=a("D9EC"),u=a("PrA7"),m=a("dE97"),h=a("zR/0"),g=a("1huE"),f=a("gy42"),b=a("9ZtS");!function(e){let t,a,n;!function(e){let t;!function(e){e.ord=d.h.ordString,e.show=r.e,e.create=e=>e}(t=e.Id||(e.Id={})),e.isSpecial=e=>Object.values(c.a.MutedAlerts.SpecialCategory).includes(e),e.specialCategoryDescription="Special category"}(t=e.Category||(e.Category={})),function(e){e.filter=e=>d.e.filter(t=>e(t.id)),e.filterWithCount=(e,t)=>a=>{const n=Array.from(a.keys()),i=b.a.getAlerts(t,n).byCategory;return Object(o.pipe)(a,d.e.filterMap(t=>e(t.id)?d.g.some(Object.assign(Object.assign({},t),{alertsCount:i.get(t.id).filter(m.a.isRegistered).length})):d.g.none))}}(a=e.BaseMutedCategories||(e.BaseMutedCategories={})),function(e){let n,r;!function(e){let t;!function(e){e.CategoriesChanged="CategoriesChanged"}(t=e.Type||(e.Type={})),e.isChangedEvent=function(e){return e.type===t.CategoriesChanged}}(n=e.Events||(e.Events={})),e.create=function(e,r,p,y,C){const v=u.Monitoring.Logging.getLogger("MutedAlertsModel"),S=l.a.create(new Map),E=new h.a.Subject,w=new g.a.Keeper;return w.push(e.pipe(h.a.filter(c.a.CAPIEvent.is("session_started")),h.a.map(e=>(function(e){const t=e.map(e=>[e.userMuteCategory,{id:e.userMuteCategory,description:e.userMuteCategoryDescription,scope:e.userMuteScope}]);return new Map(t)})(e.userMutedCategories)),h.a.tap(f.b.toAtom(S)),h.a.tap(()=>E.next({type:n.Type.CategoriesChanged}))).subscribe(),S.pipe(h.a.pairwise(),h.a.map(([e,a])=>(function(e,a){return{muted:d.e.diffKeys(t.Id.ord)(e,a),unmuted:d.e.diffKeys(t.Id.ord)(a,e)}})(e,a)),h.a.map(function(e){return({muted:t,unmuted:a})=>({toMute:b.a.getAlerts(e,t).all.filter(e=>e.mute!==m.a.MuteStateType.Muted),toUnmute:b.a.getAlerts(e,a).all.filter(e=>e.mute!==m.a.MuteStateType.Unmuted)})}(p)),h.a.tap(({toMute:e,toUnmute:t})=>{e.length>0&&y.changeMuteState(e,m.a.MuteStateType.Muted),t.length>0&&y.changeMuteState(t,m.a.MuteStateType.Unmuted)})).subscribe()),{events:E,mutedCategories:S,muteCategories:e=>{Object(o.pipe)(r.sendFeedback({kind:c.a.MutedFeedbackType.MUTE,userMuteScope:C,userMuteCategories:e}),d.l.mapLeft(e=>{v.warn("Alerts could not be muted on CAPI",e)}))();const a=b.a.getAlerts(p,e);0===a.all.filter(e=>e.mute!==m.a.MuteStateType.Muted).length&&v.warn("No alerts were muted on category mute",{categoryIds:e});const s=function(e,a,n){return r=>{const s=new Map(r);return e.forEach((e,r)=>{t.isSpecial(r)?s.set(r,{id:r,scope:a,description:t.specialCategoryDescription}):Object(o.pipe)(i.lookup(0,e),d.g.chain(e=>e.muteCategory),d.g.fold(()=>n.error("No alerts to mute",r),e=>s.set(r,{id:e.id,description:e.description,scope:a})))}),s}}(a.byCategory,C,v)(S.get());return S.set(s),E.next({type:n.Type.CategoriesChanged}),d.b.right(void 0)},unmuteCategories:e=>{return Object(o.pipe)(r.sendFeedback({kind:c.a.MutedFeedbackType.UNMUTE,userMuteScope:C,userMuteCategories:e}),d.l.mapLeft(e=>{v.warn("Alerts could not be un-muted on CAPI",e)}))(),0===b.a.getAlerts(p,e).all.filter(e=>e.mute!==m.a.MuteStateType.Unmuted).length&&v.warn("No alerts were unmuted on category unmute",{categoryIds:e}),S.modify(function(e,t){return a=>{const n=new Map(a);return e.forEach(e=>{a.has(e)?n.delete(e):t.error("Tried to unmute a category which is not muted",e)}),n}}(e,v)),E.next({type:n.Type.CategoriesChanged}),d.b.right(void 0)},getMutedCategories:()=>Object(o.pipe)(S.get(),a.filterWithCount(Object(s.not)(t.isSpecial),p)),getMutedSpecialCategories:()=>Object(o.pipe)(S.get(),a.filter(t.isSpecial)),loadCachedMutedCategories:e=>{S.set(e)},dispose:()=>w.dispose()}},function(e){e.create=function(){return{events:h.a.EMPTY,mutedCategories:l.a.create(new Map),getMutedCategories:()=>new Map,getMutedSpecialCategories:()=>new Map,muteCategories:e=>d.b.right(void 0),unmuteCategories:e=>d.b.right(void 0),loadCachedMutedCategories:p.l,dispose:p.l}}}(r=e.Mock||(e.Mock={}))}(n=e.CategoriesModel||(e.CategoriesModel={}))}(n||(n={}))},VRL6:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a("ERkP"),i=a("hoSD"),r=a("uO+M"),s=a("6gXa"),o=a("rk+4"),l=a("tZ26"),c=a("Z5Rd"),d=a("o79T");const p=(e,t)=>{switch(e.kind){case"ignore":return"Dismissed";case"ignoreAll":return n.createElement(n.Fragment,null,n.createElement("span",null,e.alerts)," ",i.f.pluralize(e.alerts,"alert has been","alerts have been")," dismissed");case"replace":return"Corrected";case"replaceSynonym":return"Replaced";case"replaceTransform":return n.createElement(n.Fragment,null,e.transform);case"addToDictionary":return n.createElement(n.Fragment,null,n.createElement("b",{className:t&&t.addToDictionary},e.word)," has been added to dictionary");case"report":return"Your report has been sent";case"markAsHelpful":return"Marked as “Will address”";case"markAsNotHelpful":return"Marked as “Not helpful”";default:return""}},u={display:"flex",marginTop:s.a.rem(-1.1),marginBottom:s.a.rem(-.5),alignItems:"center",justifyContent:"space-between"},m={marginTop:s.a.rem(.6),marginRight:s.a.rem(1),color:r.Color.CoreNeutral0,flexGrow:0,flexShrink:0},h={marginTop:s.a.rem(-.25),paddingRight:s.a.rem(.5),minWidth:"auto",minHeight:"auto",justifyContent:"space-between"},g={marginTop:s.a.rem(.6),maxWidth:s.a.rem(14),wordWrap:"break-word",flexBasis:"auto",flexGrow:1},f={marginRight:s.a.rem(1.4)},b=s.a.stylesheet({alertUndoWrapper:[u],alertUndoWrapperFlexible:[u,{flexWrap:"nowrap"}],alertUndoWrapperFullWidth:[u,{flexWrap:"wrap"}],alertUndoBtn:[m],alertUndoIcon:[h],alertUndoContent:[g],alertUndoContentFlexible:[g,f],addToDictionary:[{wordBreak:"break-all"}]});var y;!function(e){const t={wrapper:b.alertUndoWrapperFlexible,content:b.alertUndoContent,icon:b.alertUndoIcon,button:b.alertUndoBtn};e.Standard=({action:a,params:i})=>n.createElement(c.b.Content,null,n.createElement(e.Content,{action:a,content:p(i),theme:Object.assign(Object.assign({},t),{wrapper:b.alertUndoWrapperFullWidth})})),e.Flexible=({notification:a,onClose:i,action:r,params:s})=>n.createElement(c.a.Wrapper,{notification:a,onClose:i},n.createElement(c.b.Content,null,n.createElement(e.Content,{action:r,content:p(s,{addToDictionary:b.addToDictionary}),theme:Object.assign(Object.assign({},t),{wrapper:b.alertUndoWrapperFlexible,content:b.alertUndoContentFlexible})}))),e.Content=({action:e,content:a,theme:i=t})=>{const r=n.useContext(o.a.Context);return n.createElement("div",{className:i.wrapper},n.createElement("div",{className:i.content},a),n.createElement(d.a,{name:"alertUndoButton",className:i.button,onClick:e},n.createElement(l.d.Undo,{className:i.icon}),r.undo))}}(y||(y={}))},"VfH/":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return b}));var n,i=a("I7vG"),r=a("LNSM"),s=a("+JVj"),o=a("1huE"),l=a("zR/0"),c=a("gy42"),d=a("XpkH"),p=a("vVVP"),u=a("BeBM"),m=a("Y8lK"),h=a("n61d"),g=a("6fbX"),f=a("lrqh");!function(e){let t;!function(e){e.immediately="immediately",e.asap="asap",e.low="low"}(t=e.Priority||(e.Priority={}))}(n||(n={}));class b{constructor(e,t){this._state=e,this._getActiveItemWithAlert=t,this._lockMarkUpdate=r.a.create(!1),this._subs=new o.a.Keeper,this._alertsChangeWorker=new m.a(this._renderMarks,new h.a.LazyPredicateUniq(d.a.isPending),this._asyncRunner(this._lockMarkUpdate,l.a.timer(50))),this._asapAlertsChangeWorker=new m.a(this._renderMarks,new h.a.LazyPredicateUniq(d.a.isPending),this._asyncRunner(this._lockMarkUpdate,c.b.Scheduler.inRaf(l.a.of(!0)))),this._subs.push(this._listenFocusedMark())}enqueue(e,t){switch(t){case n.Priority.immediately:e.forEach(e=>e.apply());break;case n.Priority.asap:this._asapAlertsChangeWorker.put(e);break;case n.Priority.low:this._alertsChangeWorker.put(e);break;default:Object(g.d)(t)}}flush(){return this._asapAlertsChangeWorker.flush(),this._alertsChangeWorker.flush(),Promise.resolve()}dispose(){this._subs.dispose(),this._alertsChangeWorker.shutdown(),this._asapAlertsChangeWorker.shutdown()}_renderMarks(e){const[t,...a]=e.filter(d.a.isPending);t&&t.applyWith(a)}_asyncRunner(e,t){return a=>e.pipe(l.a.switchMap(c.b.orEmptyRight(t)),l.a.first()).subscribe(a)}_listenFocusedMark(){return this._state.view(u.e.getActiveAlert(this._getActiveItemWithAlert)).subscribe(e=>{const t=Object(i.pipe)(e,f.g.map(e=>e.getHighlightRanges()[0]),f.g.getOrElse(()=>s.b.empty));this._alertsChangeWorker.order(p.a.compareTo(t))})}}},VwWj:function(e,t,a){"use strict";a.d(t,"f",(function(){return l})),a.d(t,"e",(function(){return c})),a.d(t,"b",(function(){return d})),a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return u})),a.d(t,"a",(function(){return m}));var n,i=a("6fbX"),r=a("GUi3"),s=a("BeBM"),o=a("bFfh");!function(e){e.compose=function(e){return t=>s.a.compose(e.map(e=>e(t)))},e.map=function(e,t){return a=>t(e(a))}}(n||(n={}));const l=(e,t,a)=>n=>n===r.a.SpecialId.Plagiarism?o.a.Plagiarism.getAlertsHandler(t):((e,t)=>a=>{if(r.a.isOutcomeId(a))return o.a.WithSuccess.getAlertHandler(e,t);switch(a){case r.a.SpecialId.Premium:return o.a.Premium.getAlertsHandler(e,t);case r.a.SpecialId.AllAlerts:case r.a.SpecialId.Priority:case r.a.SpecialId.PredictionTakeaways:case r.a.SpecialId.PredictionEmogenie:case r.a.SpecialId.RealTimeProofit:return o.a.WithSuccess.getAlertHandler(e,t);default:return Object(i.d)(a)}})(e,a)(n),c=(e,t,a,n,i)=>r=>a(r)?o.a.WithBundles.getAlertsHandler(e,t,i):n(r);class d{constructor(e,t,a,n,i,r){this._cardFactory=e,this._alertsFilterService=t,this._inner=a,this._capabilities=n,this._itemEq=i,this._itemsOrd=r}create(e,t,a,n){return r.a.isOutcomeId(e)||r.a.isAllAlerts(e)?o.a.WithPriority.create(e,t,a.filter(this._alertsFilterService.alertVisibleInSidebar(e)),n,this._cardFactory,this._capabilities,this._itemEq,this._itemsOrd):this._inner.create(e,t,a,n)}}class p{constructor(e,t,a,n,i,r){this._cardFactory=e,this._alertsFilterService=t,this._lensPredicate=a,this._inner=n,this._itemEq=i,this._itemOrd=r}create(e,t,a,n){return this._lensPredicate(t)?o.a.WithBundles.create(e,t,a.filter(this._alertsFilterService.alertVisibleInSidebar(e)),n,this._cardFactory,this._itemEq,this._itemOrd):this._inner.create(e,t,a,n)}}class u{constructor(e,t,a,n){this._plagiarismCardFactory=e,this._inner=t,this._itemEq=a,this._itemOrd=n}create(e,t,a,n){return e===r.a.SpecialId.Plagiarism?o.a.Plagiarism.create(t,a,n,this._plagiarismCardFactory,this._itemEq,this._itemOrd):this._inner.create(e,t,a,n)}}class m{constructor(e,t,a,n){this._cardFactory=e,this._alertsFilterService=t,this._itemEq=a,this._itemOrd=n}create(e,t,a,n){const s=()=>o.a.WithSuccess.create(e,t,a.filter(this._alertsFilterService.alertVisibleInSidebar(e)),n,this._cardFactory,this._itemEq,this._itemOrd);if(r.a.isOutcomeId(e))return s();switch(e){case r.a.SpecialId.Premium:return o.a.Premium.create(t,a,this._cardFactory,this._itemEq,this._itemOrd);case r.a.SpecialId.AllAlerts:case r.a.SpecialId.Priority:case r.a.SpecialId.PredictionTakeaways:case r.a.SpecialId.PredictionEmogenie:case r.a.SpecialId.RealTimeProofit:return s();default:return Object(i.d)(e)}}}},W0xG:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("6fbX"),i=a("D9EC"),r=a("PrA7"),s=a("wOnQ");const o=(e,t)=>{switch(e.kind){case"replacement":return function(e,t){Object(n.g)(Object(i.n)(e),"transforms should have at least one element");const[a]=e;return l(a)>-1?s.a.create(c(a),e.map(d),t,!0):s.g.create(e,t)}(e.content.map(e=>[{type:s.l.Insert,text:e}]),t);case"transform":return function(e,t){Object(n.g)(Object(i.n)(e),"transforms should have at least one element");const[a]=e;return l(a)>-1?s.a.create(c(a),e.map(d),t):function(e){return 2===e.length&&u(e)}(e)?s.i.create(e[0],e[1],t):u(e)?s.g.create(e,t):s.b.create(e,t)}(e.content.map(g),t);default:return Object(n.d)(e.kind)}};function l(e){return e.findIndex(e=>"arrow"===e.type)}function c(e){return e.slice(0,l(e))}function d(e){return e.slice(l(e)+1)}function p(e){return e.every(e=>"delete"!==e.type)}function u(e){return e.every(p)}function m(e,t){return{re:new RegExp(`^(${e})([\\s\\S]*)$`),createResult:t}}const h=[m("(?:\\<span class='gr_grammar_del'\\>([\\S\\s]*?)\\</span\\>)",e=>({type:s.l.Delete,text:e[2]})),m("(?:\\<span class='gr_grammar_ins'\\>([\\S\\s]*?)\\</span\\>)",e=>({type:s.l.Insert,text:e[2]})),m("(→)",e=>({type:s.l.Arrow})),m("([^<>→]+)",e=>({type:s.l.Text,text:e[1]}))];function g(e){function t(e){for(const t of h){const a=e.match(t.re);if(null!==a)return[t.createResult(a),a[a.length-1]]}}function a(t){let a=["<span class='gr_grammar_del'>","<span class='gr_grammar_ins'>","→"].map(e=>t.indexOf(e));if(a.findIndex(e=>0===e)>0)throw new Error(`Couldn't parse transform: ${e}`);if(a=a.filter(e=>e>0),Object(i.n)(a)){const e=Math.min(...a);return[{type:s.l.Text,text:t.substring(0,e)},t.substring(e)]}return[{type:s.l.Text,text:t},""]}const n=[];let o=e,l=!1,c=0,d=void 0;for(;Object(i.n)(o);){const e=t(o);void 0===e&&(l=!0);const[i,r]=e||a(o);d&&d.type===s.l.Text&&i.type===s.l.Text?d.text+=i.text:(d&&d.type===s.l.Delete&&i.type===s.l.Insert&&(n.push({type:s.l.Arrow}),c++),n.push(i)),i.type===s.l.Arrow&&c++,d=n[n.length-1],o=r}return(l||!Object(i.n)(n)||c>1)&&r.Monitoring.Logging.getLogger("model.editor.alert_replacement").warn("Bad parsing of transform",{transformHtml:e,transformPartCount:n.length,arrowCount:c}),n}},Wcgi:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("mbuk");!function(e){let t;!function(e){let t;!function(e){e.full="full",e.partial="partial"}(t=e.RemoveType||(e.RemoveType={})),e.getCreateAction=function(e){return t=>({id:t,action:i.a.Change.ActionType.create,meta:e})},e.getUpdateAction=function(e){return t=>({id:t,action:i.a.Change.ActionType.update,meta:e})},e.getRemoveAction=function(e,a=t.full){return t=>({id:t,action:i.a.Change.ActionType.remove,meta:{range:e.range,removeType:a}})}}(t=e.Change||(e.Change={}))}(n||(n={}))},XBrO:function(e,t,a){"use strict";var n=a("ERkP"),i=a("rk+4"),r=a("nnns"),s=a("D6Vf"),o=a("BugA"),l=a("kED/");const c=()=>n.createElement("svg",{width:"31",height:"13",viewBox:"0 0 31 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M1 6.5H30M30 6.5L24.5 1M30 6.5L24.5 12",stroke:"#0E101A",strokeLinecap:"round"}));var d=a("hoSD");const p=({value:e,currency:t})=>{const a="USD"===t?"$":`${t} `;return n.createElement(n.Fragment,null,a,d.f.formatPrice(e))},u=({value:e,currency:t,periodInMonths:a})=>{const r=e/Math.max(1,a),s=n.useContext(i.a.Context).changePlan;return n.createElement(n.Fragment,null,n.createElement(p,{currency:t,value:r}),"/",s.perMonth)},m=({value:e,currency:t,periodInMonths:a})=>{const r=12*(e/Math.max(1,a)),s=n.useContext(i.a.Context).changePlan;return n.createElement(n.Fragment,null,n.createElement(p,{currency:t,value:r}),"/",s.perYear)};var h=a("m71o");const g=({current:e})=>n.createElement("div",{className:h.plan},n.createElement(o.H4,{className:h.planTitle},e.title),n.createElement(o.Base,null,n.createElement(m,Object.assign({},e.regularPriceMoney,{periodInMonths:e.periodMonths})),n.createElement("div",{className:h.subMonthlyPrice},n.createElement(u,Object.assign({},e.regularPriceMoney,{periodInMonths:e.periodMonths}))))),f=({offer:e,saved:t})=>{const a=n.useContext(i.a.Context).changePlan;return n.createElement("div",{className:h.plan},n.createElement(o.H4,{className:h.planTitle},e.title),n.createElement(o.Base,null,n.createElement(m,Object.assign({},e.regularPrice,{periodInMonths:e.periodInMonths}))," ",n.createElement(l.a.Regular,{className:h.badge},a.savedBadge(t.percent)),n.createElement("div",{className:h.subMonthlyPrice},n.createElement(u,Object.assign({},e.regularPrice,{periodInMonths:e.periodInMonths})))))},b=({current:e,offer:t,saved:a})=>n.createElement("div",{className:h.offer},n.createElement(g,{current:e}),n.createElement("div",{className:h.arrow},n.createElement(c,null)),n.createElement(f,{offer:t,saved:a}));a.d(t,"a",(function(){return y}));const y=({changePlanViewModel:{currentPlan:e,offer:t,savedPrice:a,nextPaymentDate:l,changePlan:c,close:d}})=>{const u=n.useContext(i.a.Context).changePlan;return n.createElement(s.a,{className:h.wrapper},n.createElement(s.a.Header,{className:h.header},n.createElement(o.H2,null,u.title(a.price))),n.createElement(s.a.Body,{name:"change.plan.body",className:h.content},n.createElement(n.Fragment,null,n.createElement(b,{current:e,offer:t,saved:a}),n.createElement(o.Lawyer,null,u.confirmationDescription(e.title,l,n.createElement(p,Object.assign({},t.price)),n.createElement(p,Object.assign({},t.regularPrice)),t.periodInMonths)))),n.createElement(s.a.Footer,null,n.createElement(r.a.Ghost,{name:"modal.cancel",onClick:d},u.cancelButton),n.createElement(r.a.Primary,{name:"confirm.change.to.annual",onClick:c},u.confirmationButton(t.title))))}},XCjp:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return r}));var n,i,r,s=a("OA+g"),o=a("I7vG"),l=a("lrqh"),c=a("D9EC"),d=a("6fbX"),p=a("dE97"),u=a("GUi3"),m=a("zR/0"),h=a("gy42"),g=a("5o4I"),f=a("BeBM");!function(e){let t;!function(e){e.AppliedAlertAnimationFinished="AppliedAlertAnimationFinished"}(t=e.Type||(e.Type={}))}(n||(n={})),function(e){e.Mock=class{constructor(){this.events=new m.a.Subject,this.focusAlertHighlight=()=>l.b.left(new Error("Method not implemented.")),this.highlightAlertHighlight=()=>l.b.left(new Error("Method not implemented.")),this.moveCursorToHighlight=c.l}ensureAlertHighlightInViewport(){throw new Error("Method not implemented.")}getMarkByAlert(e){throw new Error("Method not implemented.")}getAlertByMark(e){throw new Error("Method not implemented.")}},e.getHighlightIndex=function(e,t){return Object(o.pipe)(t,l.b.mapLeft(()=>new Error("Mark is collapsed")),l.b.chain(t=>l.b.tryCatchError(()=>{const a=e.getHighlightRanges(),n=a.length>1?a.findIndex(e=>e.start===t.start&&e.end===t.end):0;return Object(d.g)(-1!==n,"Could not find highlight index by Range for provided Alert",()=>JSON.stringify({alertRanges:a,targetRange:t})),n})))}}(i||(i={})),function(e){e.getHighlightSubscribtion=(e,t,a)=>e.pipe(m.a.distinctUntilChanged(l.g.getEq(p.d.ord).equals),m.a.switchMap(e=>Object(o.pipe)(e,l.g.fold(()=>m.a.EMPTY,e=>m.a.Observable.create(()=>(a.debug(`highlight mark: ${e.id}`),Object(o.pipe)(t.highlightAlertHighlight(e),l.b.fold(t=>(a.error(`Cannot highlight mark: ${e.id}`,t),c.l),t=>()=>{a.debug(`unhighlight mark: ${e.id}`),t.dispose()})))))))),e.highlightMarkByHighlightedCard=(t,a,n,i,r,c)=>{const d=e.getHighlightSubscribtion(t.hovered.pipe(m.a.debounceTime(100),m.a.map(Object(s.flow)(l.g.chain(e=>{const t=a.get();return f.e.hasCards(t)?t.currentLens.items.find(t=>Object(o.pipe)(r.hasActiveAlert(t),l.g.exists(a=>t.id===e&&i.isRegistered(a.id)))):l.g.none}),l.g.chain(({value:e})=>r.hasActiveAlert(e))))),n,c);return{id:"highlightMarkByHighlightedAlert",when:u.a.isWithAlertsId,what:f.e.Effect.Applicator.create(d.pipe(m.a.switchMapTo(m.a.NEVER)))}},e.focusMarkByActiveAlert=(e,t,a,n,i)=>{const r=e.view(f.e.mapper(({currentLens:e,alertSource:t})=>Object(o.pipe)(n(e),l.g.map(e=>({alert:e.activeAlert,source:t,highlightIndex:e.activeHighlightIndex}))))).pipe(m.a.switchMap(h.b.Scheduler.rafScheduler),m.a.skipBy(l.g.getEq(g.a.getEq())),m.a.map(l.g.filter(e=>l.g.isSome(a.getRegistered(e.alert.id)))),m.a.tap(l.g.tap(e=>i.trace("new alert highlight: ",e))),m.a.switchMap(l.g.fold(()=>(i.debug("Nothing to focus"),m.a.EMPTY),e=>m.a.Observable.create(()=>(i.debug(`Focus mark: ${e.alert.id} | ${e.highlightIndex}`),e.source===p.b.sidebar&&t.moveCursorToHighlight(e,"start"),Object(o.pipe)(t.focusAlertHighlight(e),l.b.fold(t=>(i.error("Cannot focus mark",t,{alertId:e.alert.id,highlightIndex:e.highlightIndex}),c.l),t=>()=>{i.debug(`Unfocus mark: ${e.alert.id} | ${e.highlightIndex}'`),t.dispose()})))))));return{id:"focusMarkByActiveAlert",when:u.a.isWithAlertsId,what:f.e.Effect.Applicator.create(r.pipe(m.a.switchMapTo(m.a.NEVER)))}}}(r||(r={}))},"Xo/A":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("a5W6"),r=a("BbAu"),s=a("I7vG"),o=a("PK5a"),l=a("7b34"),c=a("lrqh"),d=a("6fbX"),p=a("v0pb");!function(e){function t(e,t){return a=>a.order.reduce((e,n)=>(Object(d.g)(a.entries.has(n),"got corrupted state"),t(e,a.entries.get(n))),e)}function a({added:e=new Map,updated:t=new Map,removed:a=new Map}){const n=new Map,i=l.a.fromMutation(i=>{a.forEach((e,t)=>{i.set(t,c.m.left(e))}),e.forEach((e,t)=>{i.has(t)?n.set(t,`alert add overlaps with alert remove: toAdd(${p.a.show.show(e)} overlapWith(${c.m.getShow(p.a.show,p.a.show).show(i.get(t))}))`):i.set(t,c.m.right(e))}),t.forEach(([e,t],a)=>{i.has(a)?n.set(a,`alert update overlaps with unexpected alert add/remove: toUpdate(${p.a.show.show(t)}) overlapWith(${c.m.getShow(p.a.show,p.a.show).show(i.get(a))}))`):i.set(a,c.m.both(e,t))})});return n.size>0?c.b.left({recovered:i,rejected:n}):c.b.right(i)}e.iso=o.iso(),e.empty={entries:new Map,order:[],latestChangeDiff:l.a.empty(),diffVersion:0},e.get=function(e){return t=>c.g.fromNullable(t.entries.get(e))},e.find=function(e){return t(c.g.none,(t,a)=>Object(s.pipe)(t,c.g.alt(()=>c.g.fromPredicate(e)(a))))},e.reduce=t,e.size=e=>e.entries.size,e.diff=function(e,t){return 0===e.diffVersion?c.b.unsafeGet(a({added:t.entries})):e.diffVersion+1===t.diffVersion?t.latestChangeDiff:c.e.symmetricDiff(p.a.ord)(e.entries,t.entries)},e.applyDiff=function(e){return t=>{const a=c.e.leftToRight(c.e.Merger.createStrict(p.a.ordShow),t.entries,e);return Object(s.pipe)(a,c.b.bimap(a=>{const n=l.a.fromMutation(t=>{Object(s.pipe)(e,l.a.forEach((e,n)=>!a.rejected.has(n)&&t.set(n,c.m.left(e)),(e,n,i)=>!a.rejected.has(i)&&t.set(i,c.m.both(e,n)),(e,n)=>!a.rejected.has(n)&&t.set(n,c.m.right(e))))});return{recovered:m(a.recovered,n,t.diffVersion),rejected:a.rejected}},a=>m(a,e,t.diffVersion)))}},e.applyDiffLoose=function(e){return t=>{const a=c.e.leftToRight(c.e.Merger.createLoose(p.a.ordShow),t.entries,e);return Object(s.pipe)(a,c.b.bimap(a=>({recovered:m(a.recovered,e,t.diffVersion),rejected:a.rejected}),a=>m(a,e,t.diffVersion)))}},e.createDiff=a,e.toJSON=function(e){return{entries:Array.from(e.entries),order:e.order,latestChangeDiff:l.a.toJSON(e.latestChangeDiff),diffVersion:e.diffVersion}},e.diffEqShow=Object.assign(Object.assign({},l.a.getEq(p.a.Id.ord,p.a.ord)),l.a.getShow(p.a.Id.show,p.a.show));const n=Object.assign(Object.assign({},c.e.getEq(p.a.Id.ord,p.a.ord)),c.e.getShow(p.a.Id.show,p.a.show)),u=Object.assign(Object.assign({},i.getEq(p.a.Id.ord)),i.getShow(p.a.Id.show));function m(e,t,a){return{entries:e,order:Object(s.pipe)(e,c.e.values(p.a.ord),i.map(e=>e.id)),latestChangeDiff:t,diffVersion:a+1}}e.contentEqShow=Object.assign(Object.assign({},c.c.getStructEq({entries:n,order:u,latestChangeDiff:c.c.eqEmpty,diffVersion:c.c.eqEmpty})),r.a({entries:n,order:u,latestChangeDiff:e.diffEqShow,diffVersion:r.d})),e.eqShow=Object.assign(Object.assign({},c.c.getStructEq({entries:n,order:u,latestChangeDiff:e.diffEqShow,diffVersion:c.c.eqNumber})),r.a({entries:n,order:u,latestChangeDiff:e.diffEqShow,diffVersion:r.d}))}(n||(n={}))},XpkH:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return l}));var n,i,r,s=a("m6JR"),o=a("dE97");function l(e){return e.from.visualState===r.initial||e.from.visualState===r.hidden||e.to.visualState===r.highlighted}!function(e){e.eq=Object(s.contramap)(e=>e.alert)(o.d.ordId),e.isPending=e=>null!==e.state.scheduled&&(e.state.scheduled.visualState!==e.state.current.visualState||e.state.scheduled.updateRanges||e.state.scheduled.forceUpdate),e.isOneOf=(...e)=>t=>e.some(e=>e===t.state.current.visualState),e.notAnyOf=(...e)=>t=>e.every(e=>e!==t.state.current.visualState),e.canBeChanged=t=>a=>t&&r.applied===a.state.current.visualState?t===r.disposed:o.a.State.isBulkApplied(a.alert.state)||e.notAnyOf(r.applied,r.disposed)(a),e.isOrWillBe=e=>t=>null===t.state.scheduled?t.state.current.visualState===e:t.state.scheduled.visualState===e,e.willBe=e=>t=>null!==t.state.scheduled&&t.state.scheduled.visualState===e}(n||(n={})),function(e){e.updateRanges=function(e,t){return Object.assign(Object.assign({},e),{updateRanges:t})},e.forceUpdate=function(e,t){return Object.assign(Object.assign({},e),{forceUpdate:t})},e.updateVisualState=function(e,t){return Object.assign(Object.assign({},e),{visualState:t})},e.from=function(e){return{visualState:e,updateRanges:!1,forceUpdate:!1}}}(i||(i={})),function(e){e.initial="initial",e.highlighted="highlighted",e.visible="visible",e.faded="faded",e.hidden="hidden",e.success="success",e.applied="applied",e.disposed="disposed"}(r||(r={})),function(e){e.isApplied=function(t){return t===e.applied}}(r||(r={}))},Y7d8:function(e,t,a){"use strict";var n=a("ERkP"),i=a("vOOZ"),r=a("9NHN"),s=a("lrqh"),o=a("6fbX"),l=a("1w6p"),c=a("rk+4"),d=a("nnns"),p=a("tZ26"),u=a("SN1b"),m=a("zR/0"),h=a("uO+M"),g=a("6gXa"),f=a("ps/9"),b=a("aqMe");const y=g.a.style({display:"inline-flex",overflow:"visible",border:`2px solid ${h.Color.CoreNeutral10}`,borderRadius:g.a.rem(f.s),backgroundColor:h.Color.CoreNeutral10}),C=g.a.joinClasses([g.a.style({padding:`0 ${g.a.rem(.5)} 0 ${g.a.rem(.5)}`,display:"inline-flex",justifyContent:"space-around",textAlign:"center",$nest:{"&:first-child":{marginRight:g.a.px(2)}}}),b.base]),v=g.a.style({fontSize:g.a.rem(h.Text.SmallSize)}),S=g.a.style({width:g.a.rem(2.5)}),E=g.a.style({width:g.a.rem(9.5)}),w=g.a.joinClasses([g.a.style({width:g.a.rem(2.25)}),v]),k=g.a.joinClasses([g.a.style({width:g.a.rem(8.75)}),v]),_=g.a.joinClasses([g.a.style({borderRadius:g.a.rem(f.s),backgroundColor:h.Color.CoreNeutral0,boxShadow:h.Elevation.Z100,fontWeight:600,$nest:{"&[data-disabled='true']":{backgroundColor:h.Color.CoreNeutral0}}}),C]),O=g.a.style({display:"inline-flex",width:g.a.rem(1.25),minWidth:0,minHeight:0,fill:h.Color.CoreNeutral50,stroke:h.Color.CoreNeutral50,$nest:{"&[data-disabled='true']":{fill:h.Color.CoreNeutral50,stroke:h.Color.CoreNeutral50}}});var A;a.d(t,"a",(function(){return A})),function(e){let t,a,h;!function(e){e.priority="priority",e.all="all"}(t=e.LensMode||(e.LensMode={})),function(e){let t;!function(e){e.select="select"}(t=e.Kind||(e.Kind={}))}(a=e.Action||(e.Action={})),function(t){t.priorityFirst=s.h.fromCompare(t=>t===e.LensMode.priority?-1:1),t.allFirst=s.h.fromCompare(t=>t===e.LensMode.all?-1:1)}(h=e.Order||(e.Order={})),e.Component=l.b.Node.make(({state:e,notify:s})=>n.createElement(i.a.div,{key:"feedModeSelector",className:y},e.pipe(m.a.map(({lensMode:e,layoutMode:i,ord:o})=>[t.all,t.priority].sort(o.compare).map(t=>n.createElement(d.a,Object.assign({name:`${t}-lens`,key:`${t}-lens`,disabled:e===t,onClick:()=>s({kind:a.Kind.select,selected:t})()},Object(r.c)(e===t?_:C,f(t,i))),n.createElement(g,{selected:t})))))));const g=({selected:e})=>{const a=n.useContext(c.a.Context).feedModeSelector;switch(e){case t.all:return n.createElement(n.Fragment,null,a.all);case t.priority:return n.createElement(n.Fragment,null,a.priority,n.createElement(u.a,{align:"bottomCenter",title:a.priorityDescription},n.createElement(p.d.Info,{width:10,className:O})));default:Object(o.d)(e)}},f=(e,a)=>{switch(e){case t.all:return"compact"===a?w:S;case t.priority:return"compact"===a?k:E;default:Object(o.d)(e)}}}(A||(A={}))},Y8lK:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(){function e(e,t,a,n){void 0===n&&(n=20),this._task=e,this._buffer=t,this._run=a,this._batchSize=n,this._sub=null}return e.prototype.put=function(e){this._buffer.put(e),null===this._sub&&this._buffer.nonEmpty&&this._scheduleWork()},e.prototype.order=function(e){this._buffer.order(e)},e.prototype.flush=function(){this._task(this._buffer.take(this._buffer.length))},Object.defineProperty(e.prototype,"length",{get:function(){return this._buffer.length},enumerable:!1,configurable:!0}),e.prototype._scheduleWork=function(){var e=this;this._sub=this._run((function(){e._task(e._buffer.take(e._batchSize)),e._sub=null,e._buffer.nonEmpty&&e._scheduleWork()}))},e.prototype.shutdown=function(){this._sub&&(this._sub.unsubscribe(),this._sub=null)},e}()},YfIO:function(e,t,a){"use strict";var n=a("ERkP"),i=a("vOOZ"),r=a("1w6p"),s=a("zR/0"),o=a("lrqh"),l=a("+w1e"),c=a("Urso"),d=a("D/5U");const p=r.b.Grid.make(({slots:e})=>n.createElement(c.a.Context.Provider,{value:c.a.emptyWithName("card")},n.createElement(i.a.div,{role:"animation-wrapper",className:d.a.animationWrapper},e.animatedItemBaseChild)));var u,m,h,g,f=a("sWLkM");!function(e){e.make=function(e){return r.b.Union.asOption(r.b.Knot.make(t,{shadeItem:e}))};const t=r.b.Grid.make(({slots:e,state:t,notify:a})=>n.createElement(i.a.Fragment,null,t.pipe(s.a.map(({item:r,key:s,className:o})=>n.createElement(i.a.div,{className:o,key:"shade"+t+s,onAnimationEnd:e=>{f.b.get(e.animationName)!==o&&d.b.get(e.animationName)!==o||a({type:l.a.Kind.completeTransitionTo,id:r.id,transitionId:r.visualState.transitionId})()}},e.shadeItem)))))}(u||(u={})),function(e){e.make=function(e){return r.b.Composite.make(p,r.b.Knot.make(t,{shade:u.make(e),item:e}))};const t=r.b.Grid.make(({state:e,slots:t,notify:a})=>n.createElement(i.a.Fragment,null,e.pipe(s.a.map(({item:e,className:r,hasAnimation:s})=>(s||requestAnimationFrame(a({type:l.a.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId})),n.createElement(i.a.Fragment,null,t.shade,n.createElement(i.a.div,{className:o.g.toUndefined(r),key:"expanded"===e.visualState.transition.type?"focused":e.visualState.transition.type,onAnimationEnd:a({type:l.a.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId}),onTransitionEnd:()=>{"presuccess"===e.visualState.transition.type&&a({type:l.a.Kind.startTransitionTo,id:e.id,transition:{type:"success",clockwise:e.visualState.transition.clockwise}})()}},t.item)))))))}(m||(m={})),function(e){e.make=function(e){return r.b.Composite.make(p,r.b.Knot.make(t,{staticItemChild:e}))};const t=r.b.Grid.make(({state:e,slots:t})=>n.createElement(i.a.Fragment,null,e.pipe(s.a.map(e=>n.createElement(i.a.div,{key:e},t.staticItemChild)))))}(h||(h={})),a.d(t,"a",(function(){return g})),function(e){e.make=function(e){return r.b.Knot.make(t,{animatedItem:r.b.Union.make("animatedItemKind",{static:h.make(e),animating:m.make(e)})})};const t=r.b.Grid.make(({state:e,slots:t})=>n.createElement(i.a.Fragment,null,e.pipe(s.a.distinctUntilChanged((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type),s.a.map(()=>n.createElement(i.a.Fragment,null,t.animatedItem)))))}(g||(g={}))},Yjm5:function(e,t,a){e.exports=a.p+"files/28aa0d261b04149285b4ec9850b7ae97/inter-medium.woff2"},YnIn:function(e,t,a){"use strict";var n=a("ERkP"),i=a("vOOZ"),r=a("D9EC"),s=a("bSlT"),o=a("Sfi4"),l=a("nnns"),c=a("tZ26"),d=a("rmLU"),p=a("rk+4"),u=a("BugA"),m=a("uO+M"),h=a("6gXa"),g=a("ps/9");const f={position:"fixed",bottom:h.a.rem(1),right:h.a.rem(1),zIndex:g.j,width:h.a.rem(20),padding:h.a.rem(2),background:m.Color.CoreNeutral0,transition:`transform ${h.a.seconds(.1)} linear ${h.a.seconds(.1)}`,transform:"perspective(100)",borderRadius:h.a.rem(g.r),boxShadow:"0 12px 48px 0 rgba(96, 101, 123, .24)"},b={transitionDelay:h.a.seconds(0),transform:"perspective(100) rotateY(90deg)"},y={transform:"perspective(100) rotateY(-90deg)"},C={paddingBottom:h.a.rem(1)},v={marginBottom:h.a.rem(1)},S={width:h.a.percent(100),borderRadius:h.a.rem(g.s),padding:`${h.a.rem(.5)} 0 ${h.a.rem(.5)} ${h.a.rem(.5)}`,lineHeight:h.a.rem(1.3125),margin:"0 2px"},E={width:h.a.rem(1),height:h.a.rem(1),minHeight:h.a.rem(1),display:"inline-block",verticalAlign:"top",marginLeft:h.a.rem(.25)},w={color:m.Color.CoreBlue50,textDecoration:"none"},k={paddingTop:h.a.rem(2),height:h.a.rem(15),flexGrow:1},_={marginBottom:h.a.rem(.5)},O={$nest:{"& ul":{paddingLeft:h.a.rem(2)},"& a":{color:m.Color.CoreBlue50,textDecoration:"none"}}},A=h.a.stylesheet({notification:[f],rotateHide:[f,b],rotateShow:[f,y],closeIcon:[{position:"absolute",top:0,right:0}],question:[C],questionText:[v],answerBtn:[S],answer:[{whiteSpace:"normal"}],outcomeIcon:[E],learnMoreLink:[w],completionScreen:[{display:"flex",flexDirection:"column",alignItems:"flex-start"}],completionContent:[k],completionHeader:[_],badExperience:[O]}),T=({viewModel:e,onClose:t})=>n.createElement(i.a.div,{className:A.completionScreen},e.state.view(e=>s.a.isSecondAnswerAboutDissatisfaction(e)?n.createElement(I,{reason:e.answer2}):n.createElement(x,null)),n.createElement(l.a.Primary,{name:"survey.done",onClick:t},"done")),x=()=>{const e=n.useContext(p.a.Context).premiumOnboardingSurvey.completion;return n.createElement(n.Fragment,null,n.createElement(c.d.NotificationInfo,{width:40}),n.createElement("div",{className:A.completionContent},n.createElement(u.H3,{className:A.completionHeader},e.enjoyment.header),n.createElement(u.Base,null,e.enjoyment.sub)))},I=({reason:e})=>{const t=n.useContext(d.a.Context),a=n.useContext(p.a.Context).premiumOnboardingSurvey.completion.badExperience,i=(()=>{switch(e){case s.b.DissatisfactionReason.LowQualitySuggestions:return a.lowQuality;case s.b.DissatisfactionReason.PoorPlagiarismSuggestions:return a.noPlagiarism;case s.b.DissatisfactionReason.NoSupportForDesirableApp:return a.noSupportForDesirableApp(t.extension.chrome.installURL,t.extension.edge.infoURL,t.extension.firefox.installURL,t.extension.safari.installURL,t.funnel.keyboardInstall,t.funnel.desktopAppInstall);case s.b.DissatisfactionReason.AggressivePremiumPromotion:case s.b.DissatisfactionReason.NoPremiumSuggestions:case s.b.DissatisfactionReason.PremiumAndFreeAreIdentical:default:return a.possibleMultipleAccounts}})();return n.createElement("div",null,n.createElement(u.Base,{className:A.badExperience},i),n.createElement("br",null))};var M=a("8P+J");const j=({answerType:e,viewModel:t,children:a})=>n.createElement(l.a.Flat,{className:A.answerBtn,name:`answer.${e}`,onClick:()=>t.answer(e)},n.createElement("span",{className:A.answer},a));var L=s.b.Experience;const N=({viewModel:e})=>{const t=n.useContext(p.a.Context).premiumOnboardingSurvey.firstQuestion;return n.createElement("div",{className:A.question},n.createElement(u.H3,{className:A.questionText},t.question),n.createElement(j,{answerType:L.VerySatisfied,viewModel:e},n.createElement(M.a,null,"😄")," ",t.answers.verySatisfied),n.createElement(j,{answerType:L.SomewhatSatisfied,viewModel:e},n.createElement(M.a,null,"🙂")," ",t.answers.somewhatSatisfied),n.createElement(j,{answerType:L.Neutral,viewModel:e},n.createElement(M.a,null,"😐")," ",t.answers.neutral),n.createElement(j,{answerType:L.SomewhatDissatisfied,viewModel:e},n.createElement(M.a,null,"🙁")," ",t.answers.somewhatDissatisfied),n.createElement(j,{answerType:L.VeryDissatisfied,viewModel:e},n.createElement(M.a,null,"😞")," ",t.answers.veryDissatisfied))};var P=a("hoSD"),F=s.b.SatisfactionReason,D=s.b.DissatisfactionReason;const R=({viewModel:e})=>n.createElement(i.a.div,{className:A.question},e.state.view(s.a.isSecondQuestionAboutDissatisfaction).view(Object(r.c)(n.createElement(B,{viewModel:e}),n.createElement(H,{viewModel:e})))),B=({viewModel:e})=>{const t=n.useContext(p.a.Context).premiumOnboardingSurvey.secondDissatisfactionQuestion;return n.createElement(n.Fragment,null,n.createElement(u.H3,{className:A.questionText},t.question),P.a.shuffle([n.createElement(j,{answerType:D.LowQualitySuggestions,viewModel:e},t.answers.lowQualitySuggestions),n.createElement(j,{answerType:D.PoorPlagiarismSuggestions,viewModel:e},t.answers.poorPlagiarismSuggestions),n.createElement(j,{answerType:D.NoSupportForDesirableApp,viewModel:e},t.answers.noSupportForDesirableApp),n.createElement(j,{answerType:D.AggressivePremiumPromotion,viewModel:e},t.answers.aggressivePremiumPromotion),n.createElement(j,{answerType:D.NoPremiumSuggestions,viewModel:e},t.answers.noPremiumSuggestions),n.createElement(j,{answerType:D.PremiumAndFreeAreIdentical,viewModel:e},t.answers.premiumAndFreeAreIdentical)]))},H=({viewModel:e})=>{const t=n.useContext(d.a.Context),a=n.useContext(p.a.Context).premiumOnboardingSurvey.secondSatisfactionQuestion;return n.createElement(n.Fragment,null,n.createElement(u.H3,{className:A.questionText},a.question),P.a.shuffle([n.createElement(j,{answerType:F.PlagiarismChecker,viewModel:e},a.answers.plagiarismChecker," ",n.createElement(c.d.PlagiarismOutcome,{className:A.outcomeIcon})),n.createElement(j,{answerType:F.ClaritySuggestions,viewModel:e},a.answers.claritySuggestions," ",n.createElement(c.d.ClarityOutcome,{className:A.outcomeIcon})),n.createElement(j,{answerType:F.EngagementSuggestions,viewModel:e},a.answers.engagementSuggestions," ",n.createElement(c.d.EngagementOutcome,{className:A.outcomeIcon})),n.createElement(j,{answerType:F.ToneSuggestions,viewModel:e},a.answers.toneSuggestions," ",n.createElement(c.d.DeliveryOutcome,{className:A.outcomeIcon})),n.createElement(j,{answerType:F.UsingMultipleDevices,viewModel:e},n.createElement(n.Fragment,null,a.answers.usingMultipleDevices," ",n.createElement("a",{href:t.funnel.keyboardInstall,onClick:e=>e.stopPropagation(),className:A.learnMoreLink,target:"_blank"},a.learnMoreLink)))]))};a.d(t,"a",(function(){return W}));const W=({viewModel:e,onClose:t})=>n.createElement($,{viewModel:e},a=>n.createElement(n.Fragment,null,s.a.isFirstQuestion(a)?n.createElement(N,{viewModel:e}):s.a.isSecondQuestion(a)?n.createElement(R,{viewModel:e}):n.createElement(T,{viewModel:e,onClose:t}),n.createElement(l.a,{name:"survey-close",className:A.closeIcon,onClick:t},n.createElement(c.d.Close,null)))),$=({viewModel:e,children:t})=>n.createElement(o.a,{state:e.state,stateToClassMapper:(e,t)=>{const[a,n]=e&&s.a.isFirstQuestion(e)&&s.a.isSecondQuestion(t)||e&&s.a.isSecondQuestion(e)&&s.a.isCompleted(t)?[A.rotateHide,A.rotateShow]:[A.notification,A.notification];return{prev:{start:A.notification,end:a},next:{start:n,end:A.notification}}}},e=>n.createElement(i.a.div,{className:e.view,onTransitionEnd:"prev"===e.type?e.done:r.l},t(e.state)))},Z5Rd:function(e,t,a){"use strict";a.d(t,"b",(function(){return _})),a.d(t,"a",(function(){return O}));var n=a("ERkP"),i=a("9NHN"),r=a("6fbX"),s=a("uO+M"),o=a("6gXa"),l=a("WIwS"),c=a("ps/9"),d=a("nnns"),p=a("tZ26"),u=a("BugA"),m=a("P+uJ");const h={position:"relative",width:o.a.percent(100)},g={position:"relative",margin:`0 0 ${o.a.rem(.5)}`},f={display:"flex",boxSizing:"border-box",padding:`${o.a.rem(1)} ${o.a.rem(2)} ${o.a.rem(1)} ${o.a.rem(.75)}`,width:o.a.percent(100),borderRadius:o.a.rem(c.s),background:s.Color.BackgroundNotification,color:s.Color.CoreNeutral0,textAlign:"left",letterSpacing:0,alignItems:"flex-start"},b={width:o.a.percent(100)},y={display:"inline-block",width:o.a.percent(100)},C={margin:`${o.a.rem(-.5)} ${o.a.rem(.75)} ${o.a.rem(-.5)} 0`},v={position:"absolute",top:0,right:0,marginTop:o.a.rem(.5),marginRight:o.a.rem(.4),marginLeft:o.a.rem(.5)},S={stroke:l.k},E={margin:`0 0 ${o.a.rem(.5)}`,color:s.Color.CoreNeutral0,wordBreak:"break-word",fontWeight:"bold",fontSize:o.a.rem(s.Text.BodySize),lineHeight:o.a.rem(1.25)},w={marginTop:o.a.rem(-.1),marginBottom:o.a.rem(-.25),color:s.Color.CoreNeutral0,fontSize:o.a.rem(s.Text.BodySize),lineHeight:o.a.rem(1.25)},k=o.a.prefixedStylesheet("notifications",{wrapper:[h],notification:[g],flexibleNotification:[g,{display:"flex",width:"auto"}],contentWrapper:[f],miniContentWrapper:[f,{position:"relative",width:"auto"}],fullWidthNotification:[g,f,b],content:[y],miniContent:[{flex:1}],alertIcon:[C],closeIconWrapper:[v],closeIcon:[S],header:[E],description:[w]});var _,O;!function(e){e.Wrapper=({notification:t,onClose:i,children:r,theme:s={}})=>{n.useEffect(()=>t.actions.next("shown"),[]);const o={wrapper:s.wrapper||a.wrapper,content:void 0!==s.content?Object.assign({},a.content,s.content):a.content};return n.createElement("div",{className:o.wrapper},n.createElement(e.Base,{metadata:t.metadata,onClose:i,theme:o.content},r))},e.Base=({metadata:a,onClose:i,theme:r,children:s})=>n.createElement("div",{className:r.wrapper},t(a,r.icon),n.createElement("div",{className:r.content},s),!function(e){return e.priority===m.a.Priority.high||e.priority===m.a.Priority.highest}(a)&&n.createElement(e.CloseButton,{onClick:i,className:r.close}));const t=(t,a)=>{switch(t.icon){case m.a.Icon.sparkles:return n.createElement(p.d.Sparkles,{className:a});case void 0:case m.a.Icon.priority:return n.createElement(e.PriorityIcon,{priority:t.priority,className:a});default:return Object(r.d)(t.icon)}};e.AdHoc=({title:t,children:r,className:s,onClose:o})=>n.createElement("div",Object.assign({},Object(i.c)(a.content.wrapper,s)),n.createElement("div",{className:a.content.content},n.createElement(e.TitledContent,{title:t},r)),n.createElement(e.CloseButton,{onClick:o,className:a.content.close})),e.PriorityIcon=({priority:e,className:t})=>{switch(e){case m.a.Priority.lowest:case m.a.Priority.low:return n.createElement(p.d.NotificationInfo,{className:t});case m.a.Priority.average:return n.createElement(p.d.NotificationWarning,{className:t});case m.a.Priority.high:case m.a.Priority.highest:return n.createElement(p.d.NotificationError,{className:t});default:return Object(r.d)(e)}},e.CloseButton=({onClick:e,className:t})=>n.createElement(d.a,{name:"closeNotification",className:t,onClick:e},n.createElement(p.d.Close,{className:k.closeIcon,width:12})),e.TitledContent=({title:t,children:a})=>a?n.createElement(n.Fragment,null,n.createElement(u.P1,{className:k.header},t),n.createElement(e.Content,null,a)):n.createElement(u.P1,{className:k.description},t),e.Content=({children:e})=>n.createElement(u.Base,{className:k.description},e);const a={wrapper:k.wrapper,content:{wrapper:k.fullWidthNotification,icon:k.alertIcon,content:k.content,close:k.closeIconWrapper}}}(_||(_={})),function(e){e.Wrapper=({notification:e,onClose:t,children:a})=>(n.useEffect(()=>e.actions.next("shown"),[]),n.createElement("div",{className:k.flexibleNotification},n.createElement(_.Base,{metadata:e.metadata,onClose:t,theme:{wrapper:k.miniContentWrapper,icon:k.alertIcon,content:k.miniContent,close:k.closeIconWrapper}},a)))}(O||(O={}))},ZcwV:function(e,t,a){"use strict";var n=a("ERkP"),i=a("9NHN"),r=a("Kt6o"),s=a("6gXa");const o=s.a.keyframes({from:{backgroundPosition:"0 0"},to:{backgroundPosition:`0 ${s.a.px(5096)}`}}),l={width:56,height:56,backgroundImage:`url(${r.a}ai.png)`,animation:`${o} ${s.a.seconds(1)} steps(91) ${s.a.seconds(0)} reverse infinite`},c=Object.assign(Object.assign({},l),{transform:"scale(.5)"}),d=Object.assign(Object.assign({},l),{transform:"scale(.8)"}),p=s.a.style(l),u=s.a.style(c),m=s.a.style(d);a.d(t,"a",(function(){return h}));const h=({size:e="large"})=>n.createElement("div",Object.assign({},Object(i.c)("large"===e?p:void 0,"medium"===e?m:void 0,"small"===e?u:void 0)))},ZvPX:function(e,t,a){"use strict";var n=a("ERkP"),i=a("vOOZ"),r=a("9NHN"),s=a("lrqh"),o=a("6fbX"),l=a("1w6p"),c=a("RNks"),d=a("pKiV"),p=a("3F3p"),u=a("+LKT");const m=e=>l.b.Union.make("kind",{alertCard:u.a.Card(e)});var h=a("rk+4"),g=a("+w1e"),f=a("+5S2"),b=a("NbEL"),y=a("BeBM"),C=a("3zdQ"),v=a("nnns"),S=a("gMRE"),E=a("tZ26"),w=a("zR/0"),k=a("1gzW"),_=a("dCuA"),O=a("2U56"),A=a("2BTG");a.d(t,"a",(function(){return T})),a.d(t,"d",(function(){return x})),a.d(t,"c",(function(){return M})),a.d(t,"b",(function(){return j}));const T=({title:e,cardsVM:t,transition:a,onTransitionEnd:i,scrollEl:r,state:s,cardsListScrollManager:o,isMaster:l,capabilities:d,comparator:p,cardListFlow:u=c.b,checksFeedItem:h=m})=>n.createElement(x,{cardsVM:t,transition:a,onTransitionEnd:i,scrollEl:r,state:s,cardsListScrollManager:o,cardListFlow:u,isMaster:l,capabilities:d,comparator:p,checksFeedItem:h},n.createElement("div",{className:O.a.headerWrapper},n.createElement("div",{className:O.a.header},e))),x=({cardsVM:e,transition:t,onTransitionEnd:a,scrollEl:s,state:o,cardsListScrollManager:l,isMaster:d,capabilities:p,comparator:u,children:h,cardListFlow:g=c.b,checksFeedItem:b=m})=>{const C=o.get().currentLens.meta,v=_.a.Elements.create();return n.createElement(n.Fragment,{key:C.id},n.createElement(j.FixedContent,null,n.createElement(i.a.div,Object.assign({},Object(r.c)(t.pipe(w.a.map(e=>e.title))),{onTransitionEnd:a}),h),n.createElement(j.SeeAlerts,{key:"seeAlerts",cardsViewportState:f.c.getCardsViewportState(o,l,p),actionEvents:e.actionEvents,cardsAmount:o.view("currentLens").view(p.getVisibleAlertsCount)})),n.createElement(_.a,{name:C.id,stateSyncListener:_.a.superScrollListener(l,v),height:f.c.getAssistantHeight(o,l,p),className:t.pipe(w.a.map(e=>e.assistantWrapper)),isMaster:d},n.createElement(I,{elements:v,cardsVM:e,cardsListScrollView:l,scrollEl:s,lensView:o.lens(y.e.Prism.getLens()),transition:t,state:o,cardListFlow:g,onTransitionEnd:a,checksFeedItem:b,capabilities:p,comparator:u})))},I=({elements:e,cardsVM:t,cardsListScrollView:a,scrollEl:o,lensView:u,transition:h,state:g,onTransitionEnd:b,capabilities:y,comparator:C,cardListFlow:v=c.b,checksFeedItem:S=m})=>{const E=new w.a.ReplaySubject;k.a.useEffectOnDidMount(()=>e.lens("scrollProvider").set(o.get())),k.a.useSubscriptionTo(E.pipe(w.a.tap(t=>e.lens("scrollConsumer").set(t))));const _=f.c.getScrollObserver(a).pipe(w.a.startWith(!1));return n.createElement(n.Fragment,null,n.createElement("div",{className:O.a.fakeTop,ref:t=>e.lens("viewport").set(s.g.fromNullable(t))}),n.createElement("div",{className:O.a.viewport},n.createElement(i.a.div,Object.assign({},Object(r.c)(O.a.lensviewContentWrapper,h.pipe(w.a.map(e=>e.content))),{onTransitionEnd:b}),l.b.mount(p.a,()=>f.c.getPlaceholderState(g,a)),l.b.mount(d.a.cardList(S(t.actionEvents)),v(t,u,E,_,y,C)))))},M=A.a.OutcomeContext;var j,L;(L=j||(j={})).Title=A.a.Title,L.SeeAlerts=({cardsViewportState:e,actionEvents:t,cardsAmount:a})=>{const r=n.useContext(h.a.Context).sidebar;return k.a.useSubscriptionTo(e.pipe(w.a.distinctUntilChanged(),w.a.withLatestFrom(a),w.a.tap(([e,a])=>{switch(e){case b.a.above:case b.a.below:t.next({type:g.b.Type.moreAlertsButtonShow,position:e,cardsAmount:a});break;case b.a.hidden:break;default:Object(o.d)(e)}}))),n.createElement(i.a.Fragment,null,e.pipe(w.a.distinctUntilChanged(),w.a.combineLatest(a,(e,a)=>{switch(e){case b.a.above:return n.createElement("div",{className:O.a.seeAlertsContainer},n.createElement(v.a.Primary,{name:"top-see-alerts",className:O.a.topSeeAlerts,onClick:()=>t.next({type:g.b.Type.switchToClosestByViewport,position:e,cardsAmount:a})},r.seeAlerts(a),n.createElement(E.d.Arrow,{width:"12",direction:E.a.up})),n.createElement("div",{className:O.a.topStack}));case b.a.below:return n.createElement("div",{className:O.a.seeAlertsContainer},n.createElement(v.a.Primary,{name:"bottom-see-alerts",className:O.a.bottomSeeAlerts,onClick:()=>t.next({type:g.b.Type.switchToClosestByViewport,position:e,cardsAmount:a})},r.seeAlerts(a),n.createElement(E.d.Arrow,{width:"12",direction:E.a.down})),n.createElement("div",{className:O.a.bottomStack}));case b.a.hidden:return null;default:return Object(o.d)(e)}})))},L.Rechecking=({className:e})=>n.createElement(i.a.div,Object.assign({key:"lensview-loader"},Object(r.c)(e,O.a.rechecking)),n.createElement(C.a,null)),L.FixedContent=({onTransitionEnd:e,children:t})=>n.createElement(S.a.Top,{onTransitionEnd:e,className:O.a.fixedLensContent},t)},aYRv:function(e,t,a){"use strict";var n,i=a("GRZr"),r=a("OA+g"),s=a("I7vG"),o=a("2Jhg"),l=a("LNSM"),c=a("24uI"),d=a("4ae2"),p=a("bYZB"),u=a("NaPV"),m=a("GUi3"),h=a("dE97"),g=a("yA7V"),f=a("8zjg"),b=a("mH/M"),y=a("zR/0"),C=a("1huE"),v=a("aIes"),S=a("gy42"),E=a("AMXJ"),w=a("a5W6"),k=a("lrqh"),_=a("hoSD"),O=a("D9EC"),A=a("UEGg"),T=a("BeBM");(n||(n={})).Mock=class{constructor(){this.alertHovered=new y.a.Subject,this.alertClicked=new y.a.Subject,this.highlightedAlert=l.a.create(k.g.none)}};class x{constructor(e,t,a,n,i){this._ded=e,this._state=t,this._markAlertMapper=a,this._alertsReader=n,this._getActiveItemWithAlert=i,this._focusedItem=this._state.view(T.e.getActiveItem(this._getActiveItemWithAlert)),this._focusedLens=this._state.view("currentLens"),this._marksToAlertTupleArray=e=>Object(s.pipe)(e,k.g.map(Object(r.flow)(w.filterMap(e=>this._markAlertMapper.getAlertByMark(e)),w.sort(k.h.contramap(({alert:{lensType:e,lensPriority:t}})=>({type:e,priority:t}))(m.a.ord))))),this.alertHovered=S.b.Scheduler.inRaf(this._ded.hoveredMarks).pipe(y.a.map(this._marksToAlertTupleArray),y.a.map(k.g.map(w.map(({alert:e})=>e))),y.a.scan((e,t)=>Object(s.pipe)(t,k.g.chain(t=>Object(s.pipe)(e,k.g.filter(e=>-1!==t.indexOf(e)),k.g.fold(()=>k.g.fromNullable(t[0]),k.g.some)))),k.g.none),y.a.map(k.g.filter(e=>this._alertsReader.isInteractable(e.id)&&!A.a.isPlagiarism(e))),y.a.distinctUntilChanged()),this.alertClicked=S.b.Scheduler.inRaf(this._ded.activeMarks).pipe(y.a.map(this._marksToAlertTupleArray),y.a.withLatestFrom(this._focusedItem,this._focusedLens),y.a.scan((e,[t,a,n])=>{const i=t=>Object(s.pipe)(e,k.g.exists(e=>e.alert.id===t.alert.id)),r=e=>Object(s.pipe)(a,k.g.exists(t=>t.activeAlert.id===e.alert.id)),o=e=>n.meta.filter(e.alert);return Object(s.pipe)(t,k.g.chain(e=>Object(s.pipe)(e,_.a.findByPredicateList([Object(O.b)(i,r),r,Object(O.b)(i,o),o,i]),k.g.fold(()=>k.g.fromNullable(e[0]),k.g.some),k.g.map(e=>_.e.update(e,{highlightIndex:e.alert.hasNestedHighlights?0:e.highlightIndex})))))},k.g.empty()),y.a.shareReplay({refCount:!0,bufferSize:1}))}}var I=a("b/mo"),M=a("3gHY"),j=a("Ei+9"),L=a("C53H"),N=a("uqkn"),P=a("IVzZ"),F=a("6fbX"),D=a("PrA7"),R=a("bFfh"),B=a("86p/");const H=(e,t,a,n=(()=>k.g.none))=>i=>{if(!e(i))return t(i);const{currentLens:r}=i;return r.kind===T.f.abstract?k.g.none:Object(s.pipe)(k.g.fromPredicate(T.e.hasItems)(i),k.g.chain(e=>a.findNextAlert(e.currentLens)),k.g.alt(()=>n(i)),k.g.map(B.a.toLensAlert))},W=(e,t,a,n,i,r=R.a.WithSuccess.State.isInGlobalSuccess(i),o=(()=>!0))=>l=>{const{currentLens:c}=l;return c.kind===T.f.abstract?k.g.none:c.kind===T.f.persistent?Object(s.pipe)(T.e.getActiveAlertHighlight(n)(l),k.g.fold(()=>T.e.hasItems(l)?i.findNextAlert(l.currentLens):k.g.none,t=>e.findNextAlertInTextByLens(t,c.id,R.a.WithPriority.nonPriorityAlertsVisible(l))),k.g.alt(()=>o()&&(r(l)||m.a.isOutcomeId(l.currentLens.id)&&e.hasZeroFreeAlerts(a))?e.findPremiumAlert():k.g.none),k.g.map(B.a.toLensAlert)):Object(s.pipe)((r=>Object(s.pipe)(k.g.fromPredicate(T.e.hasItems)(r),k.g.chain(e=>i.findNextAlert(e.currentLens)),k.g.map(B.a.toLensAlert),k.g.alt(()=>Object(s.pipe)(T.e.getActiveAlertHighlight(n)(r),k.g.fold(()=>t(h.a.isRegisteredApplicableAlert,"cursor"),t=>e.findNextAlertInText(t,h.a.isApplicableAlert)),k.g.map(({alert:e,highlightIndex:t})=>({alert:e,highlightIndex:t,lensId:a.get()}))))))(l),k.g.alt(()=>Object(s.pipe)(e.findPremiumAlert(),k.g.map(B.a.toLensAlert))))};const $=e=>e.pipe(y.a.pairwise(),y.a.first(([e,t])=>"idle"!==e&&"idle"===t),y.a.map(()=>void 0)),V=e=>Object(s.pipe)(e,y.a.filter(e=>T.e.hasCards(e)&&k.g.isSome(T.j.getActiveItem(e.currentLens))),y.a.map(()=>void 0));class U{constructor(e,t){this._subs=new C.a.Keeper,this.firstOpeningOfDocumentWithAlerts=l.a.create(!1);const a=$(e),n=V(t);this._subs.push(Object(s.pipe)(t,y.a.first(e=>T.e.hasCards(e)),y.a.switchMap(()=>Object(s.pipe)(y.a.mergeStatic(n,a),y.a.map(r.constFalse),y.a.startWith(!0))),y.a.tap(S.b.toAtom(this.firstOpeningOfDocumentWithAlerts))).subscribe())}dispose(){this._subs.dispose()}}var G;!function(e){const t=Object(O.k)(D.Monitoring.Logging.getLogger);e.focusFirstCardAfterBigCheck=(e,a,n,i,r)=>{const o=$(a),l=(e=>e.pipe(y.a.startWith("idle"),y.a.pairwise(),y.a.first(([e,t])=>"idle"===t),y.a.filter(([e])=>"full"===e),y.a.map(()=>void 0)))(a),c=((e,t)=>{const a=$(e);return t.bigPaste.pipe(y.a.switchMap(()=>a),y.a.map(()=>void 0),y.a.shareReplay({bufferSize:1,refCount:!0}))})(a,i);return Object(s.pipe)(y.a.mergeStatic(o,l,c),y.a.withLatestFrom(e,r,n),y.a.filter(([e,t,a,n])=>n&&!a&&T.e.hasCards(t)&&k.g.isNone(T.j.getActiveItem(t.currentLens))),y.a.map(()=>T.e.Effect.FocusBehavior.focusFirst),y.a.tap(e=>t("AutoFocus.sideEffects.focusFirstCardAfterBigCheck").trace("emit: ",e)))},e.getSideEffect=(e,t)=>{const a=Object(s.pipe)(e,y.a.map((e=>t=>a=>{switch(t.kind){case T.e.Effect.FocusBehaviorType.noFocus:return a;case T.e.Effect.FocusBehaviorType.unFocus:return T.e.Prism.getLensWithItems().modify(e.unselectItem(),a);case T.e.Effect.FocusBehaviorType.focusFirst:return Object(s.pipe)(e.findFirstAlert(a.currentLens),k.g.fold(()=>a,t=>T.e.Prism.getLensWithItems().modify(e.selectItemByAlert(t),a)));case T.e.Effect.FocusBehaviorType.focusNext:return Object(s.pipe)(e.findNextAlert(a.currentLens),k.g.fold(()=>a,t=>T.e.Prism.getLensWithItems().modify(e.selectItemByAlert(t),a)));case T.e.Effect.FocusBehaviorType.focusAlert:return T.e.Prism.getLensWithItems().modify(e.selectItemByAlert(t.alertHighlight),a);default:Object(F.d)(t)}})(t)));return{id:"autoFocusEffect",when:m.a.isWithAlertsId,what:T.e.Effect.ItemsApplicator.create(a)}},e.whenFirstOpeningDocumentWithAlerts=e=>()=>e.firstOpeningOfDocumentWithAlerts.get(),e.whenShouldVerifyCurrentLens=(e,a)=>n=>{const i="AutoFocus.stateValidator.whenShouldVerifyCurrentLens";return!(!T.e.hasItems(n)||!a.shouldVerify(n.currentLens))&&(Object(s.pipe)(T.e.getActiveAlert(e)(n),k.g.filter(h.a.isInDuplicatedState),k.g.fold(()=>t(i).debug("Current alert removed, should verify current lens..."),e=>t(i).info("Current alert removed as it's a duplicate, should verify current lens...",e.toString()))),!0)},e.whenNoActiveCard=e=>e.currentLens.items.size>0&&k.g.isNone(T.j.getActiveItem(e.currentLens)),e.behaviorToEffect=e=>a=>n=>Object(s.pipe)(a(n)?e(n):k.g.none,k.g.tap(e=>t("AutoFocus.stateValidator").debug(`'behavior triggered: ${e.kind}`))),e.getDefaultBehavior=(t,a)=>Object(s.pipe)([Object(s.pipe)(e.whenShouldVerifyCurrentLens(t,a),e.behaviorToEffect(()=>k.g.some(T.e.Effect.FocusBehavior.focusNext)))],Object(i.fold)(Object(i.getFunctionMonoid)(k.g.getFirstMonoid())())),e.getFocusFromCacheBehavior=(t,a,n,o,l,c)=>Object(s.pipe)([Object(s.pipe)(e.whenShouldVerifyCurrentLens(o,l),e.behaviorToEffect(()=>k.g.some(T.e.Effect.FocusBehavior.focusNext))),Object(s.pipe)(Object(O.b)(()=>a.get(),Object(O.b)(Object(O.b)(Object(O.b)(e.whenFirstOpeningDocumentWithAlerts(n),()=>t),e.whenNoActiveCard),Object(s.pipe)(c,k.g.map(e=>Object(r.not)(e.willShowBulkAccept)),k.g.getOrElse(()=>r.constTrue)))),e.behaviorToEffect(()=>k.g.some(T.e.Effect.FocusBehavior.focusFirst)))],Object(i.fold)(Object(i.getFunctionMonoid)(k.g.getFirstMonoid())())),e.getFirstApiAlignmentOverride=function(){const e=l.a.create(!0);return(t,a)=>{let n=a;return e.get()&&a===h.b.api&&(n=h.b.text),e.set(!1),n}},e.getShouldAutoFocus=(e,t,a)=>n=>e.get()&&Object(s.pipe)(n,T.e.getActiveAlert(a),k.g.chain(({id:e})=>t.getById(e)),k.g.filter(Object(O.p)(e=>"APPLIED"===e.state.type&&"ByCard"===e.state.method,h.a.isDuplicated)),k.g.isSome),e.getStateTransformer=(e,a,n,i,r,o,l)=>({state:c,metadata:d})=>{const p=t("AutoFocus.stateTransformer");if(!T.e.hasCards(c)||!T.e.hasItems(c))return p.trace("state has no items, returning original state"),k.b.left({state:c,metadata:d});const u=e(c);if(p.trace("effect: ",{state:c,metadata:d,effect:u}),k.g.isNone(u))return p.trace("no effect selected, returning original state"),k.b.left({state:c,metadata:d});if(o(u.value),u.value.kind===T.e.Effect.FocusBehaviorType.unFocus||u.value.kind===T.e.Effect.FocusBehaviorType.noFocus)return k.b.left({state:T.e.Prism.getLensWithItems().modify(i.unselectItem(),c),metadata:d});const m=r(c);return p.trace("shouldAutoFocus",{alertSource:c.alertSource,shouldAutoFocus:m}),Object(s.pipe)(u,k.g.chain(e=>{switch(e.kind){case T.e.Effect.FocusBehaviorType.noFocus:case T.e.Effect.FocusBehaviorType.unFocus:return k.g.none;case T.e.Effect.FocusBehaviorType.focusFirst:return Object(s.pipe)(i.findFirstAlert(c.currentLens),k.g.map(e=>Object.assign(Object.assign({},e),{lensId:c.currentLens.id})));case T.e.Effect.FocusBehaviorType.focusNext:return a(c);case T.e.Effect.FocusBehaviorType.focusAlert:return k.g.some(Object.assign(Object.assign({},e.alertHighlight),{lensId:c.currentLens.id}));default:Object(F.d)(e)}}),k.g.map(e=>(Object(F.g)(k.g.isSome(n.getRegistered(e.alert.id)),"lens alert should be in registered state",()=>e.alert.toString()),e)),k.g.fold(()=>c.currentLens.kind===T.f.active?k.b.right(k.b.right({lensId:l.get(),alertSource:c.alertSource,options:{order:c.switchOrder,toFocus:T.e.Effect.FocusBehavior.noFocus}})):k.b.left({state:c,metadata:d}),({alert:e,highlightIndex:t,lensId:a})=>c.currentLens.meta.filter(e)?k.b.left(m?{state:T.e.Prism.getLensWithItems().modify(i.selectItemByAlert({alert:e,highlightIndex:t}),c),metadata:{sourceId:"LSM.updateActiveState"}}:{state:c,metadata:d}):k.b.right(m?k.b.left({alertHighlight:{alert:e,highlightIndex:t},alertSource:c.alertSource,options:{lensId:a,order:c.switchOrder,toFocus:T.e.Effect.FocusBehavior.focusFirst}}):k.b.right({lensId:a,alertSource:c.alertSource,options:{order:c.switchOrder,toFocus:T.e.Effect.FocusBehavior.noFocus}}))))}}(G||(G={}));var z,q=a("U75S"),Y=a("Arv5"),X=a("YJiV"),K=a("K4Sz"),Z=a("C7EH");!function(e){let t;e.MIN_ACCEPTABLE_COUNT=4,e.getFocusFirstFilter=(t,a)=>({visibleAlerts:n,alertSource:i,lensId:o,alertHighlight:l})=>Object(s.pipe)(l,k.g.filter(()=>"text"===i||!m.a.isMainLens(o)||Object(s.pipe)(n,k.a.map(e=>Object(s.pipe)(t.getById(e.id),k.g.filter(a.alertIsBulkAcceptable(o)),k.g.map(A.a.fromModel),k.g.filter(Object(O.b)(A.a.isDefault,Object(r.not)(A.a.isBulkApplied))))),k.a.compact).length<e.MIN_ACCEPTABLE_COUNT)),function(t){t.create=(t,a)=>({getBulkAcceptableAlerts:n(a),willShowBulkAccept:Object(r.flow)(T.e.mapper(e=>Object(s.pipe)(t.get(),n(a)(e.currentLens.id))),k.g.map(t=>t.length>=e.MIN_ACCEPTABLE_COUNT),k.g.getOrElse(r.constFalse))})}(t=e.BulkAcceptReader||(e.BulkAcceptReader={}));const a=Object(O.k)(D.Monitoring.Logging.getLogger);e.getStateTransformer=(e,t,i,o,c,d)=>{let p=!1;return u=>{const{state:h,metadata:g}=u,f=a("BulkAccept.stateTransformer");if(p)return k.b.left({state:h,metadata:g});if(!T.e.hasItems(h)||!m.a.isMainLens(h.currentLens.id)||!T.e.isLensview(h))return k.b.left(u);const b=Object(s.pipe)(K.a.find(h.currentLens.items,Z.a.isBulkAcceptItem),k.g.map(_.e.pick("value")));return Object(s.pipe)(b,k.g.exists(e=>"dismissed"===e.visibilityState))?(f.debug("Bulk Accept was dismissed by user. The transformer will skip processing the lens state till the end of the session."),p=!0,k.b.left(u)):Object(s.pipe)(e.get(),n(t)(h.currentLens.id),k.g.map(l(b,i,f)),k.g.map(e=>Object(s.pipe)(b,k.g.fold(()=>{const t=Z.a.create(e,(e=>X.b.toCardRenderOptions(d,e,y.a.of(k.g.none)))(h.currentLens.id));if(Z.a.isInAppliedState(t))return h;f.debug("adding new BulkAcceptItem to the current lens");const a="text"===h.alertSource;return c.onShow(e.length,a),a?T.e.Prism.getLens().compose(R.a.Prism.items).set(h.currentLens.items.add(t),h):T.e.Prism.getLens().set(Object(r.unsafeCoerce)(Object(s.pipe)(h.currentLens,o.unselectItem(),e=>Object.assign(Object.assign({},e),{items:e.items.add(t)}),o.selectItemById(Z.a.id))),h)},t=>{if(Z.a.efficientAlertEq.equals(e,t.alerts))return f.trace("BulkAcceptItem exists and did not change, returning the original state"),h;{const a=Object(s.pipe)(e,Y.L,A.a.isBulkApplied);return Object(s.pipe)(e,Y.L,A.a.isBeingApplied)||a&&Z.a.isInUndoneState(t)?(f.trace("BulkAcceptItem is in undone state, skipping update with applied alerts"),h):Z.a.isInAppliedState(t)?(f.debug("Items changed, removing applied BulkAcceptItem from lens"),T.e.Prism.getLens().compose(R.a.Prism.items).set(h.currentLens.items.remove(t.id),h)):(f.debug("updating BulkAcceptItem with new alerts"),T.e.Prism.getLens().compose(R.a.Prism.items).set(h.currentLens.items.add(Z.a.updateAlerts(t,e)),h))}}))),k.g.getOrElse(()=>Object(s.pipe)(b,k.g.fold(()=>h,e=>Z.a.isInUndoneState(e)?(f.trace("BulkAcceptItem is in undone state, returning original state"),h):(f.debug("removing BulkAcceptItem from the current lens"),T.e.Prism.getLens().compose(R.a.Prism.items).set(h.currentLens.items.remove(e.id),h))))),e=>k.b.left({state:e,metadata:g}))}};const n=t=>a=>n=>Object(s.pipe)(a,k.g.fromPredicate(m.a.isMainLens),k.g.map(e=>Object(s.pipe)(n,g.a.reduce([],(a,n)=>Object(s.pipe)(n,k.g.fromPredicate(a=>t.alertIsBulkAcceptable(e)(a.alert)||h.a.State.isBulkApplied(a.state)||h.a.isBeingAppliedinBulk(a.alert)),k.g.map(_.e.pick("alert")),k.g.map(A.a.fromModel),k.g.filter(A.a.isDefault),k.g.fold(()=>a,e=>(a.push(e),a)))))),k.g.map(k.a.partition(A.a.isBulkApplied)),k.g.chain(({left:t,right:a})=>a.length>0?k.g.some(a):t.length>=e.MIN_ACCEPTABLE_COUNT?k.g.some(t):k.g.none)),i=(e,t)=>a=>Object(s.pipe)(e,k.g.map(_.e.pick("alerts")),k.g.chain(q.S(e=>e.id===a.id)),k.g.chain(_.e.pick("diff")),k.g.alt(()=>t(a))),o=(e,t)=>a=>Object(s.pipe)(a.getTransform(),k.g.map(_.e.pick("content")),k.g.chain(k.g.fromEither),k.g.map(e=>e.alternatives.slice(0,1)),k.g.map(e),k.g.chain(k.b.fold(e=>(t.error("Could not hydrate diff",{e,alert:A.a.snapshot(a)}),k.g.none),q.ib))),l=(t,a,n)=>r=>Object(s.pipe)(r,q.ub(l=>Object.assign(Object.assign({},l),{diff:Object(s.pipe)(l,i(t,o(a,n))),ignoreAllowed:r.length>e.MIN_ACCEPTABLE_COUNT})))}(z||(z={}));var Q,J,ee=a("94k3"),te=a("tn8Q"),ae=a("HqKA"),ne=a("PyeZ"),ie=a("+w1e");!function(e){let t;!function(e){e.apply="apply",e.dismiss="dismiss",e.bulkUndo="bulkUndo",e.ignore="ignore",e.highlight="highlight",e.individualUndo="individualUndo",e.confirmed="confirmed",e.confirmedAll="confirmedAll"}(t=e.Kind||(e.Kind={})),e.isApply=function(e){return e.kind===t.apply},e.isBulkUndo=function(e){return e.kind===t.bulkUndo},e.isConfirmAll=function(e){return e.kind===t.confirmedAll},e.isHighlight=function(e){return e.kind===t.highlight},e.isIndividualUndo=function(e){return e.kind===t.individualUndo},e.create=(e,a)=>y.a.mergeStatic(e.pipe(y.a.filter(ie.b.isBulkAction),y.a.map(e=>{switch(e.type){case ie.b.Type.bulkApply:return{kind:t.apply,alertIds:e.alertIds};case ie.b.Type.bulkDismiss:return{kind:t.dismiss};case ie.b.Type.bulkHighlight:return{kind:t.highlight,alert:e.alert,clickPoint:e.clickPoint};case ie.b.Type.bulkIgnore:return{kind:t.ignore,alertId:e.alertId};case ie.b.Type.bulkIndividualUndo:return{kind:t.individualUndo,alertId:e.alertId};case ie.b.Type.bulkLooksGood:return{kind:t.confirmedAll,alertIds:e.alertIds};case ie.b.Type.bulkUndo:return{kind:t.bulkUndo,alertIds:e.alertIds};default:Object(F.d)(e)}})),a.pipe(y.a.filter(ne.b.isBulkAction),y.a.map(e=>{switch(e.type){case ne.b.Type.confirmed:return{kind:t.confirmed,alertId:e.alertId};case ne.b.Type.undone:return{kind:t.individualUndo,alertId:e.alertHighlight.alert.id};default:Object(F.d)(e)}})))}(Q||(Q={})),function(e){const t=Object(O.k)(D.Monitoring.Logging.getLogger),a=()=>t("BulkAcceptSideEffects"),n=e=>a().error(e),i=e=>n("Bulk accept item not found in lens state on "+e),o=(e,t)=>n(`Alert ${e} does not exist in AlertsCollection on ${t}`);e.selectNextCardOnBulkAcceptConfirmed=(e,t,n,i)=>e.pipe(y.a.filter(Q.isConfirmAll),y.a.withLatestFrom(n,i),y.a.filter(([,e,a])=>a&&T.e.hasCards(e)&&m.a.isMainLens(e.currentLens.id)&&k.g.isNone(t(e.currentLens))),y.a.map(()=>T.e.Effect.FocusBehavior.focusNext),y.a.tap(e=>a().trace("selectNextCardOnBulkAccept emit: ",e)));const l=e=>Object(s.pipe)(e.currentLens.items.find(Z.a.isBulkAcceptItem),k.g.map(e=>e.value)),c=(e,t)=>Object(r.flow)(l,k.g.map(_.e.pick("alerts")),k.g.chain(Object(r.flow)(q.S(t=>t.id===e),k.g.tapLeft(()=>t.error("Alert not found in BulkAcceptItem")))));e.createEffects=function({actions:e,tracking:t,alertService:n,alertsReader:p}){const u=[{actionToHandle:Q.Kind.apply,handler:({kind:e})=>r=>(requestAnimationFrame(()=>Object(s.pipe)(l(r),k.g.map(_.e.pick("alerts")),k.g.map(q.ub(e=>e.id)),k.g.fold(()=>i(e),e=>{t.onAccept(e.length),Object(s.pipe)(n.applyBulk(e,ae.b.getSubTypeFromLens(r.currentLens.id)),te.a.tapFailure(e=>a().error("error calling alert service to apply alerts bulk",e)))}))),r)},{actionToHandle:Q.Kind.dismiss,handler:({kind:e})=>a=>Object(s.pipe)(l(a),k.g.fold(()=>(i(e),a),e=>{t.onDismiss(e.alerts.length);const n=Z.a.dismiss(e);return T.e.Prism.getLens().compose(R.a.Prism.items).set(a.currentLens.items.modifyWith([[e.id,n]],()=>n),a)}))},{actionToHandle:Q.Kind.bulkUndo,handler:({kind:e})=>a=>Object(s.pipe)(l(a),k.g.fold(()=>(i(e),a),e=>{t.onBulkUndo(e.alerts.length),requestAnimationFrame(()=>{n.undoBulk(e.alerts.map(e=>e.id),ae.b.getSubTypeFromLens(a.currentLens.id))});const i=Z.a.undo(e);return T.e.Prism.getLens().compose(R.a.Prism.items).set(a.currentLens.items.modifyWith([[e.id,i]],()=>i),a)}))},{actionToHandle:Q.Kind.ignore,handler:({alertId:e,kind:o})=>l=>Object(s.pipe)(l,c(e,a()),k.g.fold(()=>(i(o),l),i=>(t.onIgnore(i.patternName),Object(s.pipe)(n.applyFeedback(e,{kind:ee.a.AlertFeedbackType.IGNORE,subtype:ae.b.getSubTypeFromLens(l.currentLens.id)},h.b.text),k.b.fold(e=>a().error("error sending ignore feedback",e),r.constVoid)),l)))},{actionToHandle:Q.Kind.individualUndo,handler:({alertId:e,kind:i})=>l=>Object(s.pipe)(p.getById(e),k.g.fold(()=>(o(e,i),l),i=>(t.onRevert(i.patternName),Object(s.pipe)(n.applyFeedback(e,{kind:ee.a.AlertFeedbackType.IGNORE_BULK_ACCEPTED,subtype:ae.b.getSubTypeFromLens(l.currentLens.id)},h.b.text),k.b.fold(e=>a().error("error sending undo feedback",e),r.constVoid)),l)))},{actionToHandle:Q.Kind.confirmed,handler:({alertId:e,kind:i})=>l=>Object(s.pipe)(p.getById(e),k.g.fold(()=>(o(e,i),l),e=>(t.onLooksGood(),Object(s.pipe)(n.confirmApplied([e.id]),k.b.fold(e=>a().error("error during individual confirm",e),r.constVoid)),l)))},{actionToHandle:Q.Kind.confirmedAll,handler:({alertIds:e})=>i=>(t.onAllLooksGood(e.length),Object(s.pipe)(n.confirmApplied(e),k.b.fold(e=>a().error("error during bulk confirm of applied alerts",e),r.constVoid)),i)},{actionToHandle:Q.Kind.highlight,handler:({kind:e,alert:a})=>n=>Object(s.pipe)(l(n),k.g.fold(()=>(i(e),n),e=>{const i=Object(s.pipe)(T.e.Prism.getLens().compose(R.a.Prism.items).set(n.currentLens.items.add(Object(s.pipe)(e,Z.a.selectAlert(a.id))),n),e=>({currentLens:e.currentLens,alertSource:h.b.sidebar}));return t.onSuggestionClick(a.patternName),n.patch(i)}))}];return Object(s.pipe)(u,k.f.map(d(e)))};const d=e=>({actionToHandle:t,handler:a})=>{const n=e.pipe(y.a.map(e=>n=>e.kind===t?a(e)(n):n));return{id:"bulkAcceptSideEffect-"+t,when:m.a.isWithAlertsId,what:T.e.Effect.Applicator.create(n)}}}(J||(J={}));var re,se,oe=a("2GrK"),le=a("+5S2"),ce=a("E0zP"),de=a("s+3N"),pe=a("VwWj"),ue=a("OOrw");(se=re||(re={})).nothing=k.b.left,se.liftLensState=function(e){return t=>k.b.left(Object.assign(Object.assign({},t),{state:e(t.state)}))},se.liftWithItemsState=function(e){return t=>k.b.left(Object.assign(Object.assign({},t),{state:T.e.hasItems(t.state)?T.e.Prism.getLensWithItems().modify(e,t.state):t.state}))},se.liftLensView=function(e){return t=>k.b.left(Object.assign(Object.assign({},t),{state:T.e.hasCards(t.state)?T.e.Prism.getLens().modify(e,t.state):t.state}))};var me,he=a("Z86f"),ge=a("XCjp"),fe=a("7b34");!function(e){const t=2;function a(e){return([t,a])=>Object(s.pipe)(g.a.diff(t,a),fe.a.reduce(!1,r.identity,(t,{alert:a})=>h.a.isApplied(a)&&a.state.undoable.action===ee.a.AlertFeedbackType.IGNORE&&k.g.isSome(e.getAlertMuteCategory(a.id)),r.identity))}e.showCardMuteOnboarding=function(e,n,i,s,o,l){return{id:"mutingAlertDismissed",when:r.constTrue,what:T.e.Effect.Applicator.create(n.state.pipe(y.a.takeUntil(e.pipe(y.a.filter(r.identity))),y.a.pairwise(),y.a.filter(a(i)),y.a.scan(e=>e+1,0),y.a.filter(e=>e===t),y.a.switchMap(s),y.a.tap(e=>{"closedByUser"===e?o():"shown"===e&&l()}),y.a.switchMap(()=>y.a.NEVER)))}}}(me||(me={}));var be=a("LXcl"),ye=a("3hQ2"),Ce=a("FuGm"),ve=a("8Js9");const Se=e=>{const t=e[0];switch(Object(F.g)(void 0!==t,"undoables should had at least one item"),t.action){case ee.a.AlertFeedbackType.IGNORE:return{kind:"ignore"};case ee.a.AlertFeedbackType.ADD_TO_DICTIONARY:return{kind:"addToDictionary",word:t.replacement};case ee.a.AlertFeedbackType.WRONG_SUGGESTION:case ee.a.AlertFeedbackType.OFFENSIVE_CONTENT:return{kind:"report"};case ee.a.AlertFeedbackType.ACCEPTED:return e.length>1?{kind:"bulkAccept",count:e.length}:{kind:"replace",word:t.replacement};case ee.a.SynonymFeedbackType.SYNONYM_ACCEPTED:return{kind:"replaceSynonym"};case ee.a.LensFeedbackType.DISMISS_BY_LENS:return{kind:"ignoreAll",alerts:e.length};case ee.a.AlertFeedbackType.LIKE:return{kind:"markAsHelpful"};case ee.a.AlertFeedbackType.DISLIKE:return{kind:"markAsNotHelpful"};default:throw new Error("Invalid undoable action "+t.action)}};function Ee(e,t,a){return e().pipe(y.a.tap(e=>{"closedByUser"===e&&t()}),y.a.filter(e=>"shown"!==e),y.a.map(e=>["undo","bulkUndo"].includes(e)?e:"commit"),y.a.merge(a().pipe(y.a.mapTo("commit"))),y.a.first())}var we,ke,_e;function Oe(e,t){return[{id:`${e}_showUndoNotifications`,when:r.constTrue,what:T.e.Effect.Applicator.create(t.pipe(y.a.switchMapTo(y.a.NEVER)))},{id:`${e}_changeLensWhenThereWasNoPreviouslyFocusedAlert`,when:e=>e!==m.a.SpecialId.Closed,what:T.e.Effect.SwitchLens.create(t.pipe(y.a.filter(e=>k.g.isNone(e.previouslyFocused)),y.a.map(({lensId:e})=>({lensId:e,alertSource:h.b.sidebar,options:{toFocus:T.e.Effect.FocusBehavior.noFocus}}))))},{id:`${e}_focusPreviouslyActiveAlert`,when:e=>e!==m.a.SpecialId.Closed,what:T.e.Effect.SwitchAlert.create(t.pipe(y.a.map(e=>Object(s.pipe)(e.previouslyFocused,k.g.map(t=>({alertHighlight:t,alertSource:h.b.sidebar,options:{lensId:e.lensId}})))),y.b.compact))}]}function Ae(e,t,a){return Object(s.pipe)(e,k.g.map(e=>{const n=t.find(t=>t.id===e.activeAlert.id);return Object(F.g)(void 0!==n,"Undone alerts should contain previously focused alert",e.activeAlert.id),Object(F.g)(Object(s.pipe)(a.getById(n.id),k.g.isSome),"Undone alerts should exist in alert list",n.id),Object(F.g)(h.a.isRegistered(n),"Undoed alert should be in registered state",()=>String(n)),{alert:A.a.fromModel(n),highlightIndex:e.activeHighlightIndex}}))}(we||(we={})).create=function(e,t,a){return Oe("individual_undo_applied",e.pipe(y.a.filter(Q.isIndividualUndo),y.a.tap(({alertId:e})=>Object(s.pipe)(e,t.getById,k.b.fromOption(()=>new F.b("Could not find alert by id while processing individual undo event",e)),k.b.filterOrElse(h.a.isApplied,e=>new F.b("Alert is not in the applied state",e.toString())),k.b.chain(e=>a.undoApplied([e],h.a.State.Applied.Method.Bulk)()),k.b.getOrElse(e=>D.Monitoring.Logging.getLogger("BulkAcceptedIndividualUndoSideEffect").error("Could not process an individual undo event",e)))),y.a.switchMapTo(y.a.NEVER),y.a.share()))},(ke||(ke={})).create=function(e,t,a,n){return Oe("bulk_undo_applied",e.pipe(y.a.filter(Q.isBulkUndo),y.a.switchMap(S.b.Scheduler.rafScheduler),y.a.map(({alertIds:e})=>e.map(t.getById)),y.a.map(w.compact),y.a.tap(e=>{Object(s.pipe)(a.undoApplied(e,h.a.State.Applied.Method.Bulk)(),k.b.fold(e=>D.Monitoring.Logging.getLogger("BulkUndoSideEffect").error("Could not perform bulk undo",e),()=>n.onBulkUndo(e.length)))}),y.a.switchMapTo(y.a.NEVER),y.a.share()))},(_e||(_e={})).create=function(e,t,a,n,i,o){return Oe("undo_applied",e.state.pipe(y.a.pairwise(),y.a.map(([e,t])=>Object(s.pipe)(g.a.diff(e,t),fe.a.reduce([],r.identity,(e,t)=>(h.a.isApplied(t.alert)&&!h.a.isBulkApplied(t.alert)&&e.push(t.alert),e),r.identity))),y.a.map(w.map(e=>Object(s.pipe)(e.takeReference("undoNotification"),k.b.bimap(t=>Object(r.tuple)(e,t),t=>Object(r.tuple)(e,t))))),y.a.map(w.separate),y.a.map(({left:e,right:t})=>(w.isNonEmpty(e)&&o.warn("can not take alertRef",e),t)),y.a.filter(w.isNonEmpty),y.a.switchMap(r=>{const l=a.get(),c=r.map(([e])=>e),d=c.map(e=>e.state.undoable),p=r.map(ve.d);return i(d).pipe(y.a.map(a=>"undo"===a?Object(s.pipe)(e.undoApplied(c,h.a.State.Applied.Method.ByCard)(),k.b.fold(e=>(o.error("Got error during undo",e),k.g.none),()=>T.e.hasCards(l)?k.g.some({lensId:l.currentLens.id,previouslyFocused:Ae(T.e.getActiveItem(n)(l),c,t)}):k.g.none)):k.g.none),y.a.finalize(()=>p.forEach(e=>e.dispose())),y.b.compact)}),y.a.share()))};var Te,xe,Ie=a("nQSW"),Me=a("Pe9T"),je=a("pYfS"),Le=a("m0pz"),Ne=a("vz4c");!function(e){e.OVERRIDE_NEXT_PAY_DATE_FOR_DEBUG_KEY="OVERRIDE_NEXT_PAY_DATE_FOR_DEBUG_KEY",e.create=function({nextPayDate:a,currentPlan:n},i,r=v.c.DenaliStorage.fromLocalStorage(v.c.ls)){Object(O.r)("gbSatisfactionSurveyModelOverrideNextPayDateForDebug",t=>r.setItem(e.OVERRIDE_NEXT_PAY_DATE_FOR_DEBUG_KEY,t));const o=_.d.Local.parseDate(Object(s.pipe)(r.getItem(e.OVERRIDE_NEXT_PAY_DATE_FOR_DEBUG_KEY),k.g.getOrElse(()=>a)));return n?Object(s.pipe)(k.g.fromEither(o),k.g.map(t),k.g.map(e=>({daysFromInstitutionCreation:e,isAdmin:i.admin,isTrial:!!n.hasTrial}))):k.g.none};const t=e=>{const t=_.d.Local.Timestamp,a=_.d.Local.daysAgo(e,7);return Math.floor(t.subtract(t.now(),a)/_.d.MS_IN_DAY)}}(Te||(Te={})),function(e){let t=null;e.create=function({currentPlan:e,nextPayDate:i,expirationDate:r}){Object(O.r)("premiumSurveyModelOverridePremiumEndDate",e=>t=e);const o=_.d.Local.parseDate(t||i||r);return e?Object(s.pipe)(k.g.fromEither(o),k.g.map(a(e.periodMonths)),k.g.map(t=>({weeksPassedFromLastPayment:t,currentPlanType:n(e)}))):k.g.none};const a=e=>t=>{const a=_.d.Local.Timestamp.toLocal(_.d.Local.monthsAgo(t,e));return _.d.Local.toTimestamp(_.d.Local.subtract(_.d.Local.now(),a))/_.d.MS_IN_WEEK};function n(e){switch(e.periodMonths){case 1:return"Monthly";case 3:return"Quarterly";default:return"Annual"}}}(xe||(xe={}));var Pe=a("CvSs"),Fe=a("Fgeo"),De=a("D8Xd"),Re=a("+ukg"),Be=a("+dDf");const He=2e3;var We;!function(e){e[e.Inactive=0]="Inactive",e[e.ListenCrossSession=1]="ListenCrossSession",e[e.ListenCurrentSession=2]="ListenCurrentSession"}(We||(We={}));const $e=3;var Ve,Ue;!function(e){function t(e,t){return{type:e,currentSessionRules:[y.a.EMPTY,t.pipe(y.a.filter(T.e.isLensview),y.a.pairwise(),y.a.filter(([e,t])=>!Be.a.isInGlobalSuccess(e)&&Be.a.isInGlobalSuccess(t)),y.a.debounceTime(He))],crossSessionRules:e=>y.a.of({counter:e.counter+1}),get defaultData(){return{actual:!0,counter:0,wasClosedAt:k.g.none}},getState(e){const t=Date.now()-Object(s.pipe)(e.wasClosedAt,k.g.fold(()=>0,e=>e.getTime()));return!e.actual||t<7*_.d.MS_IN_DAY?We.Inactive:e.counter>=$e?We.ListenCurrentSession:We.ListenCrossSession},transform:e=>De.a.isCloseAction(e)?{actual:!1}:{wasClosedAt:k.g.some(new Date)}}}e.getClarity=function(e,a,n){const i=[y.a.EMPTY,a.pipe(y.a.filter(Object(r.flow)(T.e.getActiveItem(n),k.g.exists(e=>A.a.isFullSentence(e.activeAlert)))),y.a.debounceTime(He))];return Object.assign(Object.assign({},t(e,a)),{currentSessionRules:i})},e.getMostActiveUsers=function(e){return{type:Fe.n.MostActiveUsers,currentSessionRules:t(Fe.n.MostActiveUsers,e).currentSessionRules,crossSessionRules:e=>y.a.of({lastThreeVisits:e.lastThreeVisits.concat([(new Date).toISOString()]).slice(-3)}),get defaultData(){return{passed:!1,lastThreeVisits:[]}},getState:e=>e.passed?We.Inactive:e.lastThreeVisits.length<3||Date.now()-new Date(e.lastThreeVisits[0]).getTime()>7*_.d.MS_IN_DAY?We.ListenCrossSession:We.ListenCurrentSession,transform:()=>({passed:!0})}},e.getDefault=t;const a=e=>{const t=_.d.Local.toTimestamp(e),a=_.d.Local.daysAgo(_.d.Local.now(),14);return t>=_.d.Local.monthsAgo(_.d.Local.now(),12)&&t<=a};e.getProofit=function(e,t,n,i,r){const s=n.modal.pipe(y.a.first(e=>e.nonEmpty()),y.a.mapTo({actual:!1}));return{type:Fe.n.ProofitPromo,crossSessionRules:()=>y.a.throwError(new F.b("Proofit Survey invalid cross session observable")),get currentSessionRules(){const o=e.textInfo.pipe(y.a.map(k.g.filter(e=>e.wordsCount>=200)),y.a.concatMap(k.g.fold(()=>y.a.EMPTY,()=>n.requestStatistics())),y.a.switchMap(e=>e.fold(()=>y.a.EMPTY,e=>y.a.of(e))),y.a.map(e=>e.lastCompletedJobDate),y.b.compact,y.a.filter(a)),l=t.textChangedAfterPaste.pipe(y.a.filter(e=>"partial"!==e.type),y.a.switchMapTo(o));return[s,r.view(e=>e===Re.o.enabled).pipe(y.a.switchMap(S.b.orEmpty(y.a.mergeStatic(i.isUploaded()?o:y.a.EMPTY,l).pipe(y.a.first()))))]},get defaultData(){return{actual:!0}},getState:e=>e.actual?We.ListenCurrentSession:We.Inactive,transform:e=>("getStarted"===e&&n.showOrderModal(),{actual:!1})}},e.getPremiumOnboarding=function(e){return{type:Fe.n.PremiumOnboarding,crossSessionRules:()=>y.a.throwError(new F.b("Premium Onboarding Survey invalid cross session observable")),defaultData:{afterFirstWeek:!1,afterSecondWeek:!1},currentSessionRules:[y.a.EMPTY,y.a.of(e).pipe(y.a.filter(k.g.exists(e=>e.weeksPassedFromLastPayment>1)),y.a.delay(He))],getState:t=>Object(s.pipe)(e,k.g.fold(()=>We.Inactive,({weeksPassedFromLastPayment:e})=>e>2&&!t.afterSecondWeek?We.ListenCurrentSession:e>1&&!t.afterFirstWeek?We.ListenCurrentSession:We.Inactive)),transform:t=>({[Object(s.pipe)(e,k.g.exists(e=>e.weeksPassedFromLastPayment>2))?"afterSecondWeek":"afterFirstWeek"]:De.a.isCloseAction(t)})}},e.getGBSatisfaction=function(e){return{type:Fe.n.GBSatisfaction,crossSessionRules:()=>y.a.throwError(new F.b("GB Satisfaction Survey invalid cross session observable")),defaultData:{firstAppearance:!1,secondAppearance:!1,surveyCompleted:!1},currentSessionRules:[y.a.EMPTY,y.a.of(e).pipe(y.a.filter(k.g.exists(e=>e.daysFromInstitutionCreation>=3)),y.a.delay(He))],getState:t=>t.surveyCompleted?We.Inactive:Object(s.pipe)(e,k.g.fold(()=>We.Inactive,({daysFromInstitutionCreation:e})=>e>=5&&!t.secondAppearance?We.ListenCurrentSession:e>=3&&!t.firstAppearance?We.ListenCurrentSession:We.Inactive)),transform:t=>De.a.isCloseAction(t)?{[Object(s.pipe)(e,k.g.exists(e=>e.daysFromInstitutionCreation>=5))?"secondAppearance":"firstAppearance"]:!0}:{surveyCompleted:"completeSurvey"===t}}}}(Ve||(Ve={})),(Ue||(Ue={})).create=function(e,t,a,n,i){const r=D.Monitoring.Logging.getLogger("SurveyManager"),s=t.getSurveyModel(e.type).view(k.g.getOrElse(()=>e.defaultData)),l=new y.a.BehaviorSubject(o.e);let c=!1;const d=new y.a.Subject,p=[a.dontFreezeWhen(l.pipe(y.a.map(e=>e.map(Fe.l.isGnar).nonEmpty())),"gnarSurvey"),s.view(t=>[e.getState(t),t]).pipe(y.a.distinctUntilChanged(([e],[t])=>e===t),y.a.tap(()=>l.next(o.e)),y.a.switchMap(([t,a])=>{switch(t){case We.Inactive:return y.a.EMPTY;case We.ListenCrossSession:return e.crossSessionRules(a);case We.ListenCurrentSession:const[r,s]=e.currentSessionRules;return r.pipe(y.a.merge(s.pipe(y.a.switchMapTo(n.state),y.a.filter(e=>e.length<1),y.a.take(1),y.a.switchMap(()=>(l.next(Object(o.h)(e.type)),i(e.type).pipe(y.a.tap(e=>{c="submit"===e}),y.a.map(e.transform),y.a.take(1),y.a.finalize(()=>{l.next(o.e),c&&(c=!1,d.next())})))))));default:return Object(F.d)(t)}})).subscribe(a=>t.setSurveyModel(e.type,_.e.update(s.get(),a)),e=>r.error("Survey error",e)),d.pipe(y.a.switchMapTo(n.enqueue("thanksForFeedback"))).subscribe()];return Object(O.r)("survey",{show:()=>s.get(),clear:()=>t.setSurveyModel(e.type,e.defaultData)}),{dispose:()=>p.forEach(e=>e.unsubscribe())}};var Ge=a("rmZI"),ze=a("bSlT");const qe=e=>t=>({onShow:()=>{e.gnarSpec.premiumOnboardingSurveySurveyShow(t.weeksPassedFromLastPayment>2,e.pageId,t.currentPlanType)},onClose:()=>{e.gnarSpec.premiumOnboardingSurveySurveyClose(t.weeksPassedFromLastPayment>2,e.pageId,t.currentPlanType)},onFirstAnswer:a=>{e.gnarSpec.premiumOnboardingSurveySurveyAnswerFirst(t.weeksPassedFromLastPayment>2,e.pageId,t.currentPlanType,a)},onSecondAnswer:a=>{e.gnarSpec.premiumOnboardingSurveySurveyAnswerSecond(t.weeksPassedFromLastPayment>2,e.pageId,t.currentPlanType,a)}}),Ye=e=>t=>({onShow:()=>{e.gnarSpec.gbSatisfactionSurveySurveyShow(t.daysFromInstitutionCreation,t.isAdmin,t.isTrial,e.pageId)},onClose:()=>{e.gnarSpec.gbSatisfactionSurveySurveyClose(t.daysFromInstitutionCreation,t.isAdmin,t.isTrial,e.pageId)},onFirstAnswer:a=>{e.gnarSpec.gbSatisfactionSurveySurveyAnswerFirst(t.daysFromInstitutionCreation,t.isAdmin,t.isTrial,e.pageId,a)},onSecondAnswer:a=>{e.gnarSpec.gbSatisfactionSurveySurveyAnswerSecond(t.daysFromInstitutionCreation,t.isAdmin,t.isTrial,e.pageId,a)},onThirdAnswer:a=>{e.gnarSpec.gbSatisfactionSurveySurveyAnswerThird(t.daysFromInstitutionCreation,t.isAdmin,t.isTrial,e.pageId,a)}});function Xe(e,t,a,n,i,r,o,l,c,d,p,u){const m=Object(s.pipe)(d.state.get(),e=>Pe.a.isOk(e)?xe.create(e.value):k.g.none),h=Object(s.pipe)(d.state.get(),e=>Pe.a.isOk(e)&&e.value.currentPlan&&k.g.isSome(o.profile.get().institutionInfo)?Te.create(e.value,k.g.unsafeGet(o.profile.get().institutionInfo)):k.g.none),g=function(e,t,a,n,i){return r=>Fe.l.mapBySurveyType(r,()=>e.state.view(k.g.isNone).pipe(y.a.switchMap(S.b.orEmpty(t.enqueue("proofitPromo").pipe(y.a.filter(e=>"shown"!==e))))),e=>t.enqueue("gnarSurvey",{surveyType:e}).pipe(y.a.filter(e=>"shown"!==e)),e=>t.enqueue("externalSurvey",{surveyType:e}).pipe(y.a.filter(e=>"shown"!==e)),()=>Object(s.pipe)(a,k.g.map(qe(i)),k.g.fold(()=>y.a.EMPTY,e=>(e.onShow(),t.enqueue("premiumOnboardingSurvey",{viewModel:new ze.c(e)}).pipe(y.a.filter(e=>"shown"!==e),y.a.tap(e.onClose))))),()=>Object(s.pipe)(n,k.g.map(e=>({isAdmin:e.isAdmin,tracking:Ye(i)(e)})),k.g.fold(()=>y.a.EMPTY,({isAdmin:e,tracking:a})=>(a.onShow(),t.enqueue("gbSatisfactionSurvey",{viewModel:new Ge.c(a,e)}).pipe(y.a.filter(e=>"shown"!==e),y.a.tap(a.onClose))))))}(l,c,m,h,p);switch(e){case Fe.n.ClarityAI:return Ue.create(Ve.getClarity(e,t,u),o.settings,n,c,g);case Fe.n.OutcomesUIGeneral:case Fe.n.OutcomesUINewUsersControl:case Fe.n.FreeClarityAlertsEnabled:case Fe.n.FreeClarityAlertsControl:case Fe.n.OutcomesUINewUsersHalfAlerts:case Fe.n.ClarityAIControl:case Fe.n.PriorityListForExistingUsers:case Fe.n.PriorityToggle:return Ue.create(Ve.getDefault(e,t),o.settings,n,c,g);case Fe.n.ProofitPromo:return Ue.create(Ve.getProofit(a,n,i,r,o.features.proofit),o.settings,n,c,g);case Fe.n.PremiumOnboarding:return Ue.create(Ve.getPremiumOnboarding(m),o.settings,n,c,g);case Fe.n.GBSatisfaction:return Ue.create(Ve.getGBSatisfaction(h),o.settings,n,c,g);case Fe.n.MostActiveUsers:return Ue.create(Ve.getMostActiveUsers(t),o.settings,n,c,g);default:return Object(F.d)(e)}}var Ke=a("wt7H"),Ze=a("i1Da");var Qe=a("O6HF");const Je=D.Monitoring.Logging.getLogger("cardsTelemetry"),et=D.Monitoring.TimeSeries.root.getMetric("card.fullChecking");class tt{constructor(e,t,a,n,i){this._telemetry=e,this._cardActions=t,this._lensState=a,this._mutingAlertsReader=n,this._activeAlertGetter=i,this._subs=new C.a.Keeper,this._focusedCardObservable=this._lensState.pipe(y.a.map(T.e.getActiveItem(this._activeAlertGetter)),y.b.compact,y.a.filter(e=>"focused"===e.visualState.transition.type)),this._cardFeedbackFormDismissed=this._lensState.pipe(y.a.map(T.e.getActiveItem(this._activeAlertGetter)),y.b.compact,y.a.pairwise(),y.a.filter(([e,t])=>"feedback_form"===e.visualState.transition.type&&e.id!==t.id),y.a.map(()=>y.a.from(this._telemetry.gnarSpec.feedbackFormCardFormSkipped((this._telemetry.pageId,this._telemetry.pageSessionId))))),this._subs.push(this._cardActions.pipe(y.a.map(e=>{switch(e.type){case ie.b.Type.alertCardShow:const t=this._lensState.get();return y.a.from(this._telemetry.gnarSpec.alertCardShow(e.cardType,t.currentLens.id,this._telemetry.pageId,t.switchOrder,this._telemetry.pageSessionId));case ie.b.Type.alertMinicardButtonClick:return y.a.from(this._telemetry.gnarSpec.alertMinicardButtonClick(this._telemetry.pageId,this._telemetry.pageSessionId));case ie.b.Type.alertApply:return y.a.from(this._telemetry.gnarSpec.suggestedReplacementButtonClick(this._telemetry.pageId,e.cardType,"assistantOn",this._telemetry.pageSessionId));case ie.b.Type.openSetGoals:return y.a.from(this._telemetry.gnarSpec.cardActionButtonClick(this._telemetry.pageId));case ie.b.Type.alternativeReplacementRadioButtonClick:return y.a.from(this._telemetry.gnarSpec.alternativeReplacementRadioButtonClick(this._telemetry.pageId,e.index));case ie.b.Type.cardMatchesNavigationButtonClick:return y.a.from(this._telemetry.gnarSpec.cardMatchesNavigationButtonClick(e.direction,this._telemetry.pageId,this._telemetry.pageSessionId));case ie.b.Type.switchToClosestByViewport:return y.a.from(this._telemetry.gnarSpec.moreAlertsButtonClick(e.position,e.cardsAmount,this._telemetry.pageId));case ie.b.Type.moreAlertsButtonShow:return y.a.from(this._telemetry.gnarSpec.moreAlertsButtonShow(e.position,e.cardsAmount,this._telemetry.pageId));case ie.b.Type.fullSentenceHighlightChangesToggle:return y.a.from(this._telemetry.gnarSpec.fullSentenceCardHighlightChangesToggled(e.showChanges,this._telemetry.pageId,this._telemetry.pageSessionId));case ie.b.Type.moreActionsButtonToggle:return"open"===e.mode?y.a.from(this._telemetry.gnarSpec.alertCardThreeDotsMenuClick(this._telemetry.pageId,this._telemetry.pageSessionId)):y.a.EMPTY;case ie.b.Type.alertIgnore:return y.a.from(this._telemetry.gnarSpec.alertCardDismissClick(this._telemetry.pageId,Object(s.pipe)(this._mutingAlertsReader,k.g.chain(t=>t.getAlertMuteCategory(e.alertId)),k.g.map(e=>e.id),k.g.getOrElse(()=>void 0)),this._telemetry.pageSessionId));case ie.b.Type.muteAlertCategory:return y.a.from(this._telemetry.gnarSpec.deactivatedSuggestionsCardTurnOffButtonClick(e.categoryId,this._telemetry.pageId,this._telemetry.pageSessionId));case ie.b.Type.mutedAlertSuccessShow:return y.a.from(this._telemetry.gnarSpec.deactivatedSuggestionsCardCategoryDeactivatedShow(this._telemetry.pageId,this._telemetry.pageSessionId));case ie.b.Type.undoMuteAlertCategory:return y.a.from(this._telemetry.gnarSpec.deactivatedSuggestionsTurnBackOnButtonClick(this._telemetry.pageId,this._telemetry.pageSessionId));case ie.b.Type.mutedAlertSuggestionManagementClick:return y.a.from(this._telemetry.gnarSpec.deactivatedSuggestionsSuggestionManagementClick(this._telemetry.pageId,"undoPopup",this._telemetry.pageSessionId));case ie.b.Type.muteQuotedAdviceShow:return y.a.from(this._telemetry.gnarSpec.muteQuotedAlertsNotificationShown(this._telemetry.pageId,this._telemetry.pageSessionId));case ie.b.Type.dismissMuteQuotedAdvice:return y.a.from(this._telemetry.gnarSpec.muteQuotedAlertsNotificationDismissed(this._telemetry.pageId,this._telemetry.pageSessionId));case ie.b.Type.openPreferences:return y.a.from(this._telemetry.gnarSpec.muteQuotedAlertsSettingsOpened((this._telemetry.pageId,this._telemetry.pageSessionId)));case ie.b.Type.alertIgnoreFormSubmit:return e.reason?y.a.EMPTY:y.a.from(this._telemetry.gnarSpec.feedbackFormCardFormSkipped((this._telemetry.pageId,this._telemetry.pageSessionId)));case ie.b.Type.alertIgnoreFeedbackFormShow:return y.a.from(this._telemetry.gnarSpec.feedbackFormCardFormOpened((this._telemetry.pageId,this._telemetry.pageSessionId)));default:return y.a.EMPTY}}),y.a.merge(this._cardFeedbackFormDismissed),y.a.switchMap(e=>e.pipe(y.a.catchError(e=>(Je.warn("Card telemetry request failed",e),y.a.EMPTY))))).subscribe(),this._focusedCardObservable.pipe(y.a.distinctUntilChanged((e,t)=>e.id===t.id),y.a.switchMap(e=>{if(e.meta.checking===Qe.a.CheckingState.Full){const e=performance.now();let t=!1;return this._focusedCardObservable.pipe(y.a.first(e=>e.meta.checking!==Qe.a.CheckingState.Full),y.a.tap(()=>{et.getTimer("finished").recordTime(performance.now()-e),t=!0}),y.a.finalize(()=>{t||et.getTimer("interrupted").recordTime(performance.now()-e)}))}return y.a.EMPTY})).subscribe())}dispose(){this._subs.dispose()}}class at{constructor(e,t,a,n){this._uploadViewModel=e,this._denaliEditorModel=t,this._userAccount=a,this._environment=n,this.visible=this._denaliEditorModel.contentUpdated.pipe(y.a.startWith(void 0),y.a.map(()=>!nt(this._denaliEditorModel)),y.a.distinctUntilChanged()),this.size=this._userAccount.settings.editorPreferences.view("fontSize")}get uploadInputAccept(){return this._environment.has(Ie.b.Flag.acceptUploadByMimeTypes)?Me.e.ACCEPTED_UPLOAD_MIME_TYPES.join(","):Me.e.ACCEPTED_UPLOAD_EXTENSIONS.join(",")}upload(e){this._uploadViewModel.uploadModel.upload({files:e,notify:!1,allowMultiple:!1,isDragNDrop:!1})}}const nt=e=>{return e.getTextLength()>1||(()=>{const t=e.getContents().delta.ops[0];return t&&k.g.isSome(c.a.getAttrs(t))})()};var it,rt=a("4pFY");class st{constructor(e,t){this._documentModel=e,this._notificationsManager=t,this._subs=new C.a.Keeper,this._log=D.Monitoring.Logging.getLogger("downloadViewModel"),this._handleDownloadError=e=>(this._log.error("downloadDocument failed",e),e instanceof rt.a.UnauthorizedError?this._notificationsManager.enqueue("unauthorizedError"):e instanceof rt.a.DocumentNotFoundError?this._notificationsManager.enqueue("downloadDocumentNotFoundError"):e instanceof rt.a.TooManyRequestsError||e instanceof rt.a.ConnectionError?this._notificationsManager.enqueue("isTemporaryDownloadError"):this._notificationsManager.enqueue("error"))}downloadOriginal(){this._subs.push(y.a.from(this._documentModel.downloadOriginal(this._documentModel.rtfMode===Me.e.DocumentFeatures.FormattingMode.on?k.g.some("docx"):k.g.none)).pipe(y.a.catchError(this._handleDownloadError)).subscribe())}downloadProofread(){this._subs.push(y.a.from(this._documentModel.downloadProofread()).pipe(y.a.catchError(this._handleDownloadError)).subscribe())}dispose(){this._subs.dispose()}}(it||(it={})).Mock=class{constructor(){this.dispose=O.l,this.downloadOriginal=O.l,this.downloadProofread=O.l}};var ot,lt,ct=a("6qID"),dt=a("dS2Y"),pt=a("lRnN"),ut=a("hnW1");(lt=ot||(ot={})).switchToDraftAILens=e=>({id:"DraftAISideEffects.switchToDraftAILens",when:m.a.isAllAlerts,what:T.e.Effect.Applicator.create(e.pipe(y.a.filter(dt.b.Event.isMiniCardClick),y.a.map(e=>t=>t.patch({currentLens:R.a.DraftAI.createFromTransitionSource(e.cardPosition)}))))}),lt.switchToAllAlertsLens=Object(r.flow)(y.a.mapTo({lensId:m.a.SpecialId.AllAlerts,alertSource:h.b.api,options:{}}),e=>({id:"DraftAISideEffects.switchToAllAlertsLens",when:r.constTrue,what:T.e.Effect.SwitchLens.create(e)})),lt.switchToDraftAILensFromPlaceholder=Object(r.flow)(y.a.mapTo({lensId:m.a.SpecialId.DraftAI,alertSource:h.b.api,options:{}}),e=>({id:"DraftAISideEffects.switchToDraftAILensFromPlaceholder",when:m.a.isAllAlerts,what:T.e.Effect.SwitchLens.create(e)})),lt.hideDraftAIItem=e=>({id:"hideDraftAIItem",when:m.a.isAllAlerts,what:T.e.Effect.Applicator.create(e.pipe(y.b.compact,y.a.map(()=>e=>T.e.hasItems(e)&&m.a.isMainLens(e.currentLens.id)&&T.e.isLensview(e)?Object(r.pipe)(K.a.find(e.currentLens.items,dt.a.isDraftAIItem),k.g.map(_.e.pick("value")),k.g.fold(()=>{const t=dt.a.createCard(k.g.none)();return T.e.Prism.getLens().compose(R.a.Prism.items).set(e.currentLens.items.add(t),e)},()=>e)):e),y.a.delay(100)))}),lt.selectFirstEmptyWhenOnboardingComplete=(e,t)=>{const a=pt.a.StepId.Step16;return{id:"DraftAISideEffects.switchToDraftAILens",when:m.a.isAllAlerts,what:T.e.Effect.Applicator.create(t.pipe(y.a.switchMap(e=>e.isStepEnabled(a)?e.subscribeForStep(a).state.pipe(y.a.first(),y.a.switchMap(t=>t===ut.a.Passed?y.a.EMPTY:e.subscribeForStep(a).state)):y.a.EMPTY),y.a.switchMap(t=>t===ut.a.Passed?e.getFirstEmptyItem().pipe(y.a.first()):y.a.EMPTY),y.a.switchMap(k.g.fold(()=>y.a.EMPTY,({id:t})=>Object(r.pipe)(e.activeItemId,y.a.first(),y.a.tap(a=>Object(r.pipe)(a,k.g.fold(()=>e.moveCursorToSectionItem(t)(),r.constUndefined)))))),y.a.switchMapTo(y.a.NEVER)))}};var mt,ht=a("wI8h");class gt{constructor(e,t){this._notificationsManager=e,this._sendFeedback=t,this.currentText=l.a.create({brief:"",detailed:""}),this.modalShown=new y.a.Subject,this.sendFeedback=()=>this.currentText.pipe(y.a.first(),y.a.switchMap(this._sendFeedback),y.a.switchMap(()=>this._notificationsManager.enqueue("feedbackSend").pipe(y.a.filter(e=>"shown"===e),y.a.tap(()=>this.currentText.set({brief:"",detailed:""})),y.a.takeUntil(this.modalShown))),y.a.catchError(()=>this._notificationsManager.enqueue("error"))).toPromise()}}(mt||(mt={})).Mock=class{constructor(){this.modalShown=new y.a.Subject,this.currentText=l.a.create({brief:"",detailed:""}),this.sendFeedback=()=>new Promise(O.l)}};var ft,bt=a("ja/V"),yt=a("q9Ib"),Ct=a("+JVj"),vt=a("5o4I"),St=a("8ZZk"),Et=a("E/Yu");function wt(e){const[t,a]=y.a.partitionStatic(e.pipe(y.a.share()),k.g.isSome);return[t.pipe(y.a.map(k.g.unsafeGet)),a.pipe(y.a.mapTo(S.b.voidValue))]}!function(e){let t,a;!function(e){e.idle="idle",e.inlineCard="inline-card",e.synonymsCard="synonyms-card",e.formattingLink="formatting-link",e.upgradeHook="upgrade-hook"}(t=e.Type||(e.Type={})),e.idle={type:e.Type.idle},function(t){t.monoid=i.getStructMonoid({[e.Type.idle]:w.getMonoid(),[e.Type.formattingLink]:w.getMonoid(),[e.Type.upgradeHook]:w.getMonoid(),[e.Type.synonymsCard]:w.getMonoid(),[e.Type.inlineCard]:w.getMonoid()}),t.forCardState=function(t,a,n){const i=wt(t.alertHovered.pipe(y.a.map(k.g.filter(e=>a.isInteractable(e.id))))),r=i[0].pipe(y.a.map((t,a)=>()=>[`fromDed:markAlertHover:set(${a})`,{type:e.Type.inlineCard,alert:t}])),s=i[1].pipe(y.a.map(kt(e.Type.inlineCard,"Ded"))),o=n.pipe(y.a.map(kt(e.Type.inlineCard,"Ext")));return{[e.Type.idle]:[r],[e.Type.formattingLink]:[],[e.Type.upgradeHook]:[],[e.Type.synonymsCard]:[],[e.Type.inlineCard]:[r,s,o]}},t.forSynonymsState=function(t,a,n){const i=wt(a.clickedWord.pipe(y.a.map(k.g.filter(e=>2===e.meta.clicks)),y.a.withLatestFrom(t.alertClicked.pipe(y.a.startWith(k.g.none)),(e,t)=>k.g.isNone(t)?e:k.g.none))),r=i[0].pipe(y.a.map((t,a)=>()=>[`fromDed:synonyms:set(${a})`,{type:e.Type.synonymsCard,word:t}])),s=i[1].pipe(y.a.map(kt(e.Type.synonymsCard,"Ded"))),o=n.pipe(y.a.map(kt(e.Type.synonymsCard,"Ext")));return{[e.Type.idle]:[r],[e.Type.formattingLink]:[r],[e.Type.upgradeHook]:[r],[e.Type.synonymsCard]:[r,s,o],[e.Type.inlineCard]:[r]}},t.forFormattingLink=function(t,a,n){const i=a.pipe(y.a.map((t,a)=>()=>[`fromUI:links:set(${a})`,{type:e.Type.formattingLink,link:t}])),r=wt(Et.b.fromDenaliEditor(t)),s=r[0].pipe(y.a.map((t,a)=>()=>[`fromDed:links:set(${a})`,{type:e.Type.formattingLink,link:t}])),o=r[1].pipe(y.a.map(kt(e.Type.formattingLink,"Ded"))),l=n.pipe(y.a.map(kt(e.Type.formattingLink,"Ext")));return{[e.Type.idle]:[i,s],[e.Type.formattingLink]:[i,s,o,l],[e.Type.upgradeHook]:[i,s,o,l],[e.Type.synonymsCard]:[i],[e.Type.inlineCard]:[i]}},t.forUpgradeHook=function(t,a,n){const[i,r]=wt(t.alertClicked.pipe(y.a.map(k.g.filter(({alert:e})=>a.isRegistered(e.id)&&h.a.isInPremiumLens(e))))),s=i.pipe(y.a.map((t,a)=>()=>[`fromDed:markAlertClick:set(${a})`,{type:e.Type.upgradeHook,alert:t}])),o=r.pipe(y.a.map(kt(e.Type.upgradeHook,"Ded"))),l=n.pipe(y.a.map(kt(e.Type.upgradeHook,"Ext")));return{[e.Type.idle]:[s],[e.Type.formattingLink]:[s],[e.Type.upgradeHook]:[s,o,l],[e.Type.synonymsCard]:[s],[e.Type.inlineCard]:[s]}}}(a=e.Scheme||(e.Scheme={}))}(ft||(ft={}));const kt=(e,t)=>(a,n)=>a=>a.type===e?[`from${t}:${e}:reset(${n})`,ft.idle]:[`from${t}:${e}:skipReset(${n})`,a];var _t;!function(e){let t;!function(e){e.highlightMarkByInlineUpgradeHook=(e,t,a)=>({id:"highlightMarkByInlineUpgradeHook",when:m.a.isPremiumId,what:T.e.Effect.Applicator.create(ge.a.getHighlightSubscribtion(e,t,a).pipe(y.a.switchMapTo(y.a.NEVER)))})}(t=e.Effects||(e.Effects={}))}(_t||(_t={}));class Ot{constructor(e,t,a,n,i,r,o){this._inlineManager=e,this._marksVM=t,this._closeEvent=a,this._checkingDomain=n,this._inlineUpgradeHookClicked=i,this._settings=r,this._upgradeViewModel=o,this._emitCloseWhen=y.b.listenWhenSome(({alert:e})=>this._checkingDomain.state.pipe(y.a.map(g.a.get(e.id)),y.a.filter(k.g.isNone),y.a.merge(this._closeEvent),y.a.tap(this._inlineManager.closeUpgradeHooks))),this._toMarkAndAlert=k.g.chain(e=>Object(s.pipe)(this._marksVM.getMarkByAlert(e),k.g.map(t=>Object.assign(Object.assign({},e),{mark:t})))),this.state=this._inlineManager.upgradeHookState.pipe(y.a.switchMap(this._emitCloseWhen)).pipe(y.a.switchMap(e=>Object(s.pipe)(e,k.g.fold(()=>(this._inlineUpgradeHookClicked.next(k.g.none),y.a.of(k.g.none)),e=>(this._inlineUpgradeHookClicked.next(k.g.some(e.alert)),y.a.of(k.g.some(e)))))),y.a.map(k.g.filter(()=>!this._settings.featuresOnboardingSeen.get().has(b.a.SeenPremiumPreviewUnderlines))),y.a.tap(k.g.tap(e=>{this._settings.markFeatureOnboarded(b.a.SeenPremiumPreviewUnderlines)})),y.a.distinctUntilChanged(k.g.getEq(vt.a.eq).equals),y.a.map(this._toMarkAndAlert),y.a.share())}upgrade(){this._upgradeViewModel.openUpgradeUrl(Me.k.Place.DenaliDocument.editorDenaliUpgradeInline)}}var At=a("RZOd"),Tt=a("fOOC"),xt=a("Z0Em"),It=a("Hr9Y");class Mt{constructor(e,t,a,n,i){this._lensesList=e,this._documentModel=t,this._features=a,this._alertsFilterService=n,this._lensViewMode=i,this._transform=Lt(Nt(this._voxInfo)),this.getLens=Object(O.k)((function(e){switch(e){case m.a.SpecialId.AllAlerts:return this._lensesList.view(jt(m.a.Info.allAlerts,m.a.Meta.group.empty,this._alertsFilterService.getLensesFilter(m.a.SpecialId.AllAlerts)));case m.a.SpecialId.Priority:return this._lensesList.view(jt(m.a.Info.priority,m.a.Meta.group.empty,this._alertsFilterService.getLensesFilter(m.a.SpecialId.Priority)));case m.a.SpecialId.PredictionTakeaways:return this._lensesList.view(jt(m.a.Info.predictionTakeaways,m.a.Meta.group.empty,this._alertsFilterService.getLensesFilter(m.a.SpecialId.PredictionTakeaways)));case m.a.SpecialId.PredictionEmogenie:return this._lensesList.view(jt(m.a.Info.predictionEmogenie,m.a.Meta.group.empty,this._alertsFilterService.getLensesFilter(m.a.SpecialId.PredictionEmogenie)));case m.a.SpecialId.Plagiarism:return this._lensesList.view(this.getPlagiarismLens);case m.a.SpecialId.Premium:return this._lensesList.view(jt(m.a.Info.premium,m.a.Meta.group.empty,this._alertsFilterService.getLensesFilter(m.a.SpecialId.Premium)));case m.a.SpecialId.Correctness:case m.a.SpecialId.Clarity:case m.a.SpecialId.Engagement:case m.a.SpecialId.Delivery:case m.a.SpecialId.Vox:return this._lensesList.view(jt(m.a.Info.createOutcome(e),m.a.Meta.group.empty,this._alertsFilterService.getLensesFilter(e)));case m.a.SpecialId.CorrectnessPriority:case m.a.SpecialId.ClarityPriority:case m.a.SpecialId.EngagementPriority:case m.a.SpecialId.DeliveryPriority:case m.a.SpecialId.VoxPriority:return this._lensesList.view(t=>{const a=Object(s.pipe)(k.e.lookup(m.a.Id.ord)(m.a.OutcomeId.fromPriorityOutcomeId(e),t),k.g.getOrElse(()=>m.a.Meta.group.empty)),n=Object(s.pipe)(k.e.lookup(m.a.Id.ord)(e,t),k.g.getOrElse(()=>m.a.Meta.group.empty));return new m.a.LensImpl(m.a.Info.createOutcome(e),_.e.update(n,{percentile:a.percentile}),this._alertsFilterService.getLensesFilter(e))});case m.a.SpecialId.RealTimeProofit:return this._lensesList.view(jt(m.a.Info.realTimeProofit,m.a.Meta.group.empty,this._alertsFilterService.getLensesFilter(e)));default:return Object(F.d)(e)}})),this._outcomes=[m.a.SpecialId.Correctness,m.a.SpecialId.Clarity,m.a.SpecialId.Engagement,m.a.SpecialId.Delivery,m.a.SpecialId.Vox,m.a.SpecialId.CorrectnessPriority,m.a.SpecialId.ClarityPriority,m.a.SpecialId.EngagementPriority,m.a.SpecialId.DeliveryPriority,m.a.SpecialId.VoxPriority],this._previews=Object(O.k)(()=>At.u(Object(Tt.getFirstSemigroup)(),w.array)(this._outcomes,e=>[e,this._getPreview(e)])),this._isDocumentEmpty=this._documentModel.documentLength.view("full").view(e=>0===e),this._outcomeStatusMask=l.a.combine(this._isDocumentEmpty,this._features.isFree,(e,t)=>{let a=0;return e&&(a|=It.a.IsDocumentEmpty),t&&(a|=It.a.IsFreeUser),a}),this.getPlagiarismLens=Object(r.flow)(jt(m.a.Info.plagiarism,Object.assign(Object.assign({},m.a.Meta.group.empty),{percentile:xt.b.MAX}),this._alertsFilterService.getLensesFilter(m.a.SpecialId.Plagiarism)),m.a.WithAlerts.modifyMeta(e=>Object.assign(Object.assign({},e),{percentile:xt.b.groupSum.concat(xt.b.MAX,xt.b.groupSum.inverse(e.percentile))})))}get _voxInfo(){return this._features.denali.voxInfo}_getPreview(e){return this._transform(Object.assign(Object.assign(Object.assign({},m.a.Info.base),{logo:k.g.none}),this._getOutcomeButtonData(e)))}get lensPreviews(){return this._previews()}_getOutcomeButtonData(e){const t=this.getLens(e),a=t.get().title,n=this._features.isFree.view(t=>m.a.isVox(e)&&k.g.isNone(this._voxInfo)||(m.a.isEngagement(e)||m.a.isDelivery(e))&&t),i=l.a.combine(t.view("count").view(e=>0===e),n,(t,a)=>t&&!a||a&&m.a.isVox(e)),{description:r,stateMessage:s}=Object(It.b)(e),o=l.a.combine(this._isDocumentEmpty,i,t.view("percentile"),(e,t,a)=>e?xt.b.MIN:t?xt.b.MAX:a).view(xt.a.fromRatio),c=l.a.combine(t,o,this._outcomeStatusMask,this._lensViewMode.view(t=>t(e)===T.h.allAlerts),s);return{id:e,title:a,description:r,status:c,progress:o,isUnavailable:n}}}function jt(e,t,a){return n=>new m.a.LensImpl(e,function(e,t){return a=>Object(s.pipe)(k.e.lookup(m.a.Id.ord)(e,a),k.g.getOrElse(()=>t))}(e.id,t)(n),a)}const Lt=e=>t=>m.a.isVox(t.id)?Object.assign(Object.assign({},t),{logo:e()}):t,Nt=e=>()=>Object(s.pipe)(e,k.g.chain(e=>e.logoUrl));var Pt=a("DLWy"),Ft=a("VfH/"),Dt=a("5RoT"),Rt=a("kCgn"),Bt=a("ihUS"),Ht=a("xlCj");function Wt(){return y.a.of(!0)}function $t(){return y.a.of(!0)}function Vt(){return y.a.of(!0)}function Ut(){return y.a.of(!0)}function Gt(e,t,a,n,i,r,o){if(Re.l.isHidden(r))return[];const l={id:pt.a.StepId.Step16,switch:()=>o.pipe(y.b.compact,y.a.first(),y.a.mapTo(!0)),gnarName:"Step 16: DraftAI section",skipDot:!0},c={id:pt.a.StepId.Step14,switch:()=>o.pipe(y.b.compact,y.a.first(),y.a.mapTo(!0)),gnarName:"Step 14: DraftAI card",skipDot:!0},d={id:pt.a.StepId.Step15,switch:()=>o.pipe(y.b.compact,y.a.first(),y.a.mapTo(!0)),gnarName:"Step 15: DraftAI show more",skipDot:!0},p={id:pt.a.StepId.Synfony,switch:()=>a.pipe(y.a.map(T.e.getActiveAlert(i)),y.a.filter(k.g.exists(A.a.isSynfony)),y.a.mapTo(!0)),gnarName:"Synfony drilldown",skipDot:!1};switch(r.content){case Re.l.Content.DraftAIOnly:return[l,c,d];case Re.l.Content.SynfonyOnly:return[p];case Re.l.Content.Full:return[{id:pt.a.StepId.Step11,switch:()=>(function(e,t){return e.view(e=>T.e.isSidebarOpened(e)&&k.g.isNone(T.e.getActiveItem(t)(e))).pipe(y.a.first())})(a,i),gnarName:"Step 1: Select active card",skipDot:!1},{id:pt.a.StepId.Step4,switch:()=>(function(e,t,a){return e.view(e=>T.e.isLensview(e)&&e.currentLens.kind===T.f.persistent&&Object(s.pipe)(e,T.e.getActiveAlert(a),k.g.exists(e=>t.isRegistered(e.id)&&A.a.isDefault(e)&&k.g.isSome(e.getTransform()))))})(a,n,i),gnarName:"Step 2: Apply alert",skipDot:!1},{id:pt.a.StepId.Step1,switch:Wt,gnarName:"Step 3: Open Set Goals",skipDot:!1},{id:pt.a.StepId.Step8,switch:$t,gnarName:"Step 4: Open Performance",skipDot:!1},{id:pt.a.StepId.Step9,switch:()=>(function(e,t){return y.a.from(t.pipe(y.a.filter(e=>"idle"===e),y.a.first(),y.a.mapTo(!0))).pipe(y.a.merge(e.pipe(y.a.first(),y.a.mapTo(!1))))})(e.contentUpdated.pipe(y.a.mapTo(S.b.voidValue)),t.checkingState),gnarName:"Step 5: See synonyms",skipDot:!1},{id:pt.a.StepId.Step10,switch:Vt,gnarName:"Step 6: Open left sidebar",skipDot:!1},{id:pt.a.StepId.DocumentTitle,switch:Ut,gnarName:"Step 7: Edit title",skipDot:!1},p];default:return Object(F.d)(r)}}const zt=1;function qt(e,t,a){e.modify(e=>{const n=e.slice(0);return n[t]=a,n})}class Yt{constructor(e,t,a,n,i,r,s,c,d,p){this._settings=e,this._state=t,this._ded=a,this._sessionChecksModel=n,this._alertsReader=i,this._mode=r,this._telemetry=s,this._userAccount=c,this._draftAIEditorViewModel=d,this._getActiveItemWithAlert=p,this._log=D.Monitoring.Logging.getLogger("OnboardingViewModelImpl",D.Logging.LogLevel.TRACE),this._steps={},this._stepsByIdx=new Array,this._switches=l.a.create([]),this._states=l.a.create([]),this._subs=[],this._stepsSubscriptions=[],this._enableState=l.a.create(!0),this.completionTrigger=this._state.view(T.e.getActiveItem(this._getActiveItemWithAlert)).view(k.g.isSome),this._addStep=(e,t,a)=>{qt(this._switches,t,!1);const n=this._states.lens(Ht.a.index(t).compose(Ht.a.withDefault("dummy")));qt(this._states,t,a.has(e.id)?ut.a.Passed:ut.a.Hidden),this._steps[e.id]={state:n,idx:t,gnarName:e.gnarName},this._stepsByIdx[t]=e,this._stepsSubscriptions.push(e.switch().pipe(y.a.combineLatest(this._enableState,(e,t)=>e&&t)).subscribe(e=>qt(this._switches,t,e),e=>{this._log.error("onboarding malfunction",e),qt(this._states,t,ut.a.Passed)}))};const u=Re.l.isForced(r)?new Set:new Set(this._settings.onboardingPassed.get());this._initSteps(u),this._subs.push(this._switches.subscribe(e=>this._updateStates(e))),this._subs.push(this._states.pipe(y.a.skip(1)).subscribe(e=>this._settings.updateOnboardingPassed(Object.keys(this._steps).filter(t=>e[this._steps[t].idx]===ut.a.Passed)))),this._log.isEnabled(D.Logging.LogLevel.TRACE)&&this._subs.push(this._states.subscribe(e=>this._log.debug("Onboarding states updated: "+e.join(", ")))),Object(O.r)("fireOnboardingStep",(e,t)=>o.f.of(this._steps[e]).fold(()=>console.info("No such step "+e),e=>e.state.set(t))),Object(O.r)("onboardingState",this)}get cpuAndAnimationOptsExperiment(){return this._userAccount.features.denali.cpuAndAnimationOptsExperiment}_initSteps(e=new Set){this._stepsSubscriptions.forEach(e=>e.unsubscribe()),this._stepsSubscriptions=[],Gt(this._ded,this._sessionChecksModel,this._state,this._alertsReader,this._getActiveItemWithAlert,this._mode,this._draftAIEditorViewModel).forEach((t,a)=>this._addStep(t,a,e))}isStepEnabled(e){return void 0!==this._steps[e]}subscribeForStep(e){const{state:t,gnarName:a}=this._steps[e];if(void 0===t)throw new Error("Illegal onboarding step id "+e);return{id:e,state:t,dotShown:()=>{this._telemetry.gnarSpec.onboardingStepDotOnboardingShow(this._telemetry.pageId,a)},dotClicked:()=>{Object(F.g)(t.get()===ut.a.Dot,"Should be in dot state"),this._log.info("Dot clicked for: "+e),t.set(ut.a.Popup),this._telemetry.gnarSpec.onboardingStepOnboardingPass(this._telemetry.pageId,a)},popupIgnored:()=>{Object(F.g)(t.get()===ut.a.Popup,"Should be in popup state"),this._log.info("Popup ignored for: "+e),t.set(ut.a.Hidden),this._updateStates(this._switches.get())},popupClosed:()=>{Object(F.g)(t.get()===ut.a.Popup,"Should be in popup state"),this._log.info("Popup closed for: "+e),t.set(ut.a.Passed),this._updateStates(this._switches.get())},actionTaken:()=>{Object(F.g)(t.get()===ut.a.Popup||t.get()===ut.a.Dot,"Should be in popup or dot state"),this._log.info("Action taken for: "+e),t.set(ut.a.Passed),this._updateStates(this._switches.get()),this._telemetry.gnarSpec.onboardingStepOnboardingPass(this._telemetry.pageId,a)}}}unsubscribe(){this._subs.forEach(e=>e.unsubscribe()),this._stepsSubscriptions.forEach(e=>e.unsubscribe())}getStepCompletionCallback(e){return()=>{if(this.isStepEnabled(e)){const t=this.subscribeForStep(e),a=t.state.get();a!==ut.a.Dot&&a!==ut.a.Popup||t.actionTaken()}}}changeState(e){this._enableState.set(e)}relaunchAllSteps(){this._initSteps()}_updateStates(e){this._log.debug("Onboarding switches updated "+e);const t=this._states.get().slice();e.forEach((e,a)=>{e||t[a]===ut.a.Hidden||t[a]===ut.a.Passed||(t[a]=ut.a.Hidden)});const a=t.filter(e=>e===ut.a.Popup||e===ut.a.Dot).length;let n=Math.max(0,zt-a);for(let a=0;a<t.length&&!(n<=0);++a)t[a]===ut.a.Hidden&&e[a]&&(this._stepsByIdx[a].skipDot?t[a]=ut.a.Popup:t[a]=ut.a.Dot,n--);const i=t.filter(e=>e===ut.a.Popup||e===ut.a.Dot).length;Object(F.g)(i<=zt,`Should be only ${zt} popups and dots visible, now ${i}`),this._states.set(t)}}const Xt=D.Monitoring.Logging.getLogger("pageTelemetry");class Kt{constructor(e,t){this._state=e,this._telemetry=t,this._subs=new C.a.Keeper,this._subs.push(y.a.mergeStatic(this._trackLensChange(),this._trackAdvancedLensOpen(),this._trackSidebarState()).pipe(y.a.catchError(e=>(Xt.warn("Page telemetry error",e),y.a.EMPTY))).subscribe())}dispose(){this._subs.dispose()}_trackLensChange(){return this._state.pipe(y.a.skip(1),y.a.filter(e=>{if(Be.a.isInGlobalSuccess(e))return!1;switch(e.currentLens.type){case T.i.lensview:case T.i.advanced:case T.i.plagiarism:case T.i.draftAI:return!0;case T.i.closed:return!1;default:return Object(F.d)(e.currentLens)}}),y.a.map(e=>_.f.camelize(e.currentLens.meta.title)),y.a.distinctUntilChanged(),y.a.switchMap(e=>y.a.from(this._telemetry.gnarSpec.lensSidebarShow(e,this._telemetry.pageId))))}_trackAdvancedLensOpen(){return this._state.pipe(y.a.distinctUntilChanged((e,t)=>e.currentLens.id===t.currentLens.id),y.a.filter(T.e.is(m.a.SpecialId.Premium)),y.a.switchMap(e=>y.a.from(this._telemetry.gnarSpec.advancedIssuesSidebarShow(e.currentLens.meta.count,this._telemetry.pageId))))}_trackSidebarState(){return this._state.view(T.e.isSidebarOpened).pipe(y.a.skip(1),y.a.switchMap(e=>e?y.a.from(this._telemetry.gnarSpec.assistantSidebarShow(this._telemetry.pageId)):y.a.from(this._telemetry.gnarSpec.assistantSidebarClose(this._telemetry.pageId))))}}var Zt=a("mOEe"),Qt=a("fT1+"),Jt=a("D57K"),ea=a("DMXH");const ta=Object(O.k)(D.Monitoring.Logging.getLogger);var aa;function na(e,t,a,n){const i=e.pipe(y.a.filter(e=>"idle"===e),y.a.mapTo(e=>!T.e.hasItems(e)||k.g.isSome(Be.a.getActiveItemWithAlert(e.currentLens))?e:Object(s.pipe)(n.findNextAlert(e.currentLens),k.g.map(t=>e.patch({currentLens:n.selectItemByAlert(t)(e.currentLens)})),k.g.getOrElse(()=>e))));return{id:"plagiarismSideEffect",when:e=>e===m.a.SpecialId.Plagiarism,what:T.e.Effect.Applicator.create(y.a.Observable.create(()=>t.enable()).pipe(y.a.startWith(S.b.voidValue),y.a.switchMapTo(a.pipe(y.a.switchMap(Object(O.c)(i,i.pipe(y.a.first())))))))}}function ia(e,t,a,n,i,o,l,c){return{id:"successSwitcher",when:m.a.isMainLens,what:T.e.Effect.SwitchLens.create(e.pipe(y.a.combineLatest(Object(s.pipe)(t.checkingState,y.a.map(e=>"full"!==e)),(e,t)=>Be.a.isInGlobalSuccess(e)&&"sidebar"!==e.alertSource&&t),y.a.distinctUntilChanged(),y.a.filter(r.identity),y.a.switchMapTo(t.counters.pipe(y.a.map(e=>e.critical+e.advanced>0),y.a.filter(Boolean),y.a.switchMap(S.b.Scheduler.rafScheduler),y.a.map(()=>{const e=c.get(),t=n.getLens(e).get(),i=n.getLens(m.a.SpecialId.Premium).get();return a(t)?k.g.some(e):a(i)?k.g.some(m.a.SpecialId.Premium):k.g.none}),y.b.compact,y.a.first(),y.a.filter(Object(r.not)(m.a.isMainLens)),y.a.filter(e=>!(e===m.a.SpecialId.Premium&&k.g.isSome(l.denali.gbUpHook.get()))),y.a.map(e=>{ta("sideEffects.successSwitcher").debug("Switching from success to "+e);const t=k.g.isSome(i.state.get());return{lensId:e,alertSource:t?T.c.forceSidebar:T.c.forceText,options:{order:"lensOrder",toFocus:t||!m.a.isMainLens(e)||o.get()?T.e.Effect.FocusBehavior.focusFirst:T.e.Effect.FocusBehavior.noFocus}}})))))}}function ra(e,t){const a=e.pipe(y.a.map(e=>a=>e.type===ge.b.Type.AppliedAlertAnimationFinished&&a.currentLens.meta.filter(e.alert)&&h.a.isApplicableAlert(e.alert)&&T.e.hasItems(a)?a.patch({currentLens:t.finishApplyAnimation([e.alert])(a.currentLens),alertSource:e.alert.state.source}):a));return{id:"onAlertApply",when:aa.isSidebarOpen,what:T.e.Effect.Applicator.create(a)}}function sa(e,t,a){return{id:"textPasteSideEffect",when:e,what:T.e.Effect.Applicator.create(t.pipe(y.a.tap(a),y.a.switchMapTo(y.a.NEVER)))}}!function(e){function t(e){return e===m.a.SpecialId.Closed}e.isSidebarClosed=t,e.isSidebarOpen=Object(r.not)(t),e.always=r.constTrue}(aa||(aa={}));const oa=1e3,la=500;const ca=(e,t)=>({id:"textPasteSideEffect",when:r.constTrue,what:T.e.Effect.Applicator.create(e.changes.pipe(y.a.map(()=>e.getTextLength()),y.a.distinctUntilChanged(),y.a.throttleTime(t),y.a.tap(e=>{D.Monitoring.TimeSeries.root.getTimer("text_length").recordTime(e)}),y.a.switchMapTo(y.a.NEVER)))});const da=1500;function pa(e,{features:t,settings:a},n,i,o,l,c,d){const p=Object(s.pipe)(c,y.a.pairwise(),y.a.filter(([e,t])=>!m.a.isPremiumId(e)&&m.a.isPremiumId(t))),u=Object(s.pipe)(e.getLens(d.get()).pipe(y.a.map(e=>e.count),y.a.pairwise(),y.a.filter(([e,t])=>0===t&&e>0),y.a.delay(da)),y.a.map(()=>t.denali.gbUpHook.get()),y.a.map(k.g.filter(Object(r.not)(e=>e.appearancesInLastThreeDays||e.dismissCount>=2||e.dismissedInLastSevenDays))),y.b.compact,y.a.switchMap(e=>Object(s.pipe)(n.enqueue("gbUpHook",Object.assign({},e)),y.a.map(t=>[t,e]),y.a.takeUntil(p),y.a.takeWhile(Object(r.not)(([e])=>De.a.isCloseAction(e)||"shown"!==e),!0))),y.a.tap(([e,t])=>Object(Jt.__awaiter)(this,void 0,void 0,(function*(){switch(e){case"shown":i.gnarSpec.gbUphookNotificationShow(t.type,i.pageId),yield a.gbUpHookSeen(t.type);break;case"dismiss":i.gnarSpec.gbUphookDismissButtonClick(t.type,i.pageId),yield a.dismissGBUpHook(t.type);break;case"cta":i.gnarSpec.gbUphookCtaButtonClick(t.type,i.pageId),l.actions.openPopup(o.fromGbUpHookNotification(t.type));break;default:return}}))));return{id:"openGBUpHook",when:aa.isSidebarOpen,what:T.e.Effect.Applicator.create(u.pipe(y.a.switchMapTo(y.a.NEVER)))}}var ua,ma;(ma=ua||(ua={})).defaultNextLensPredicate=e=>e.count>0,ma.priorityNextLensPredicate=e=>e.id===m.a.SpecialId.AllAlerts?e.priorityCount>0:e.count>0;var ha=a("wOnQ");const ga=D.Monitoring.Logging.getLogger("synfonyTelemetry"),fa=e=>e.map(e=>e.text).join();class ba{constructor(e,t,a,n){this._telemetry=e,this._cardActions=t,this._lensState=a,this._activeAlertGetter=n,this._subs=new C.a.Keeper,this._subs.push(this._cardActions.pipe(y.a.map(e=>Object(s.pipe)(this._lensState.get(),t=>Object(s.pipe)(t,ie.b.isAlertIgnoreAction(e)?Object(r.flow)(k.g.fromPredicate(T.e.hasItems),k.g.chain(t=>K.a.get(t.currentLens.items,e.id,ce.a.isSynfonyItem)),k.g.map(e=>e.value)):T.e.getActiveItem(this._activeAlertGetter)),k.g.filter(N.a.isSynfonyView),k.g.chain(t=>Object(s.pipe)(t.transform,k.g.map(a=>Object.assign({transform:a,event:e,selection:k.g.getOrElse(()=>[])(t.synfonySelection)},ha.d.getSelectedItems(a,k.g.toUndefined(t.synfonySelection)))))))),y.b.compact,y.a.map(({event:e,selection:t,transform:a,activeLabels:n})=>{switch(e.type){case ie.b.Type.alertApply:return this._telemetry.gnarSpec.synonymAcceptButtonClick(e.alternativeIndex,t.length+1,n.length,fa(a.original),this._telemetry.pageId,fa(Object(s.pipe)(n.filter(t=>t.alternativeId===e.alternativeIndex),k.a.head,k.g.map(e=>e.label),k.g.getOrElse(()=>[]))));case ie.b.Type.alertIgnore:return this._telemetry.gnarSpec.synonymCardDismiss(n.length,fa(a.original),this._telemetry.pageId);case ie.d.Kind.drilldown:return this._telemetry.gnarSpec.synonymDeepDiveClick(t.length+2,fa(a.original),this._telemetry.pageId,fa(n[e.wordIndex].label));default:return null}}),y.a.catchError(e=>(ga.warn("Card telemetry request failed",e),y.a.EMPTY))).subscribe())}dispose(){this._subs.dispose()}}var ya=a("kMag"),Ca=a("Wcgi"),va=a("Lmm7"),Sa=a("wbpH");const Ea=()=>`syn_${_.f.alphanumeric(10)}`,wa=e=>e+"9f2d9601b324bb6c1e36737e59ed3d96";class ka{constructor(e,t,a,n,i,o,c,d,p,u,m,h){this._inlineManager=e,this._positionManager=t,this._synonymsModel=a,this._state=n,this._networkState=i,this._ded=o,this._notificationsManager=c,this._getActiveItemWithAlert=d,this._trackUndoCloseButton=p,this._trackSynonymPopupOpen=u,this._trackSynonymPopupDismiss=m,this._trackSynonymAccept=h,this._log=D.Monitoring.Logging.getLogger("synonymsViewModel"),this.viewState=l.a.create(k.g.none),this.popupShown=this.viewState.view(k.g.fold(()=>!1,e=>e.popupVisible)),this._defaultClassName="defaultSynonymClass",this._subs=[],this.disposeFirstSynonym=e=>{this._ded.changeMarks([Ca.a.Change.getRemoveAction({range:()=>k.b.getOrElse(e=>e)(e.range())},Ca.a.Change.RemoveType.full)(e.id)]),this._deregisterRange(e.id)},this.query=e=>(this._ded.flushChanges(),this._synonymsModel.query(e)),this.close=e=>{"closedByUser"===e&&Object(s.pipe)(this.viewState.get(),k.g.map(e=>e.synonymsState),k.g.filter(Object(O.p)(va.a.isReady,va.a.isEmpty)),k.g.tap(e=>{this._synonymsModel.ignore(e.synonyms.id),this._trackSynonymPopupDismiss(e.pname,e.stats,va.c.getTimeToClose(e.readyAt))})),this._inlineManager.closeSynonyms.next()},this._withRegisteredWord=(e,t)=>y.a.Observable.create(a=>{const n=this._synonymsModel.positionManager.registerRange(Ea(),e),i=t(n).subscribe(a);return()=>{i.unsubscribe(),this._deregisterRange(n.meta.id)}}),this._listenQuery=e=>y.a.Observable.create(t=>(this._request(e).then(a=>{t.closed||Object(s.pipe)(a,k.g.fold(()=>this.close("error"),a=>t.next([e,a])))}),()=>{this._synonymsModel.abortQuery()})),this._createSynonymsState=([e,t])=>y.a.Observable.create(a=>{const n=this._canShowPopup(t),i={synonymsState:t,activeWord:e,activeMark:this._createMark(e,n),popupVisible:n};return a.next(i),()=>{this._removeMark(i)}}),this._removeMark=e=>{try{this._ded.flushChanges(),this._ded.changeMarks([Ca.a.Change.getRemoveAction({range:()=>k.b.getOrElse(e=>e)(e.activeMark.range())},Ca.a.Change.RemoveType.full)(e.activeMark.id)])}catch(e){this._log.error("Cannot remove synonym",e)}},this._createMark=(e,t)=>Object(s.pipe)(this._ded.changeMarks([Ca.a.Change.getCreateAction({range:()=>e,classes:t?[this._defaultClassName,Sa.a.synonym,Sa.a.markSelected]:[this._defaultClassName,Sa.a.markHidden],order:0})(ka.markId)]),e=>e.created.get(ka.markId),k.b.fold(()=>null,r.identity)),this._emitCloseWhen=y.b.listenWhenSome(()=>y.a.mergeStatic(this._ded.contentUpdated,this._state.view(T.e.getActiveAlert(this._getActiveItemWithAlert)).pipe(y.a.skip(1))).pipe(y.a.mapTo(S.b.voidValue),y.a.tap(()=>this.close("closedByUser")))),this._isOnline=()=>"offline"!==this._networkState.getOnlineStatus(),this.scrollToMark=o.scrollToMark.bind(o),this._handleState()}onPopupOpen(){Object(s.pipe)(this.viewState.get(),k.g.map(e=>e.synonymsState),k.g.filter(Object(O.p)(va.a.isReady,va.a.isEmpty)),k.g.map(({stats:e,pname:t})=>({stats:e,pname:t})),k.g.getOrElse(()=>({stats:va.c.emptySynonymsStats,pname:"unknown"})),({pname:e,stats:t})=>void this._trackSynonymPopupOpen(e,t))}getFirstSynonym(){return y.a.Observable.create(e=>{let t=k.g.none;const a=_a(this._ded.getText()),n=a.length?k.g.some(Ct.b.create(a[0].start,a[a.length-1].end)):k.g.none,i=Object(s.pipe)(n,k.g.fold(()=>[],e=>this._positionManager.findRanges(t=>ya.b.isVisible(t)&&Ct.b.isOverlap(t,e)))),o=y.a.from(Promise.all(Oa(a,i).map(this.query))).pipe(y.a.map(Object(r.flow)(Object(w.findFirst)(va.a.isReady),k.g.chain(e=>{const t=wa(e.synonyms.id),a=Ct.b.create(e.query.start,e.query.start+e.query.word.length),n=this._synonymsModel.positionManager.registerRange(t,a);return Object(s.pipe)(this._ded.changeMarks([Ca.a.Change.getCreateAction({range:()=>n,order:0,classes:[]})(t)]),e=>e.created.get(t),k.g.fromEither)}))),y.a.first()).subscribe(a=>{t=a,e.next(a)});return()=>{k.g.map(this.disposeFirstSynonym)(t),o.unsubscribe()}})}apply(e){const t=this.viewState.get();Object(s.pipe)(t,k.g.map(({synonymsState:t,activeWord:a})=>{if(!va.a.isReady(t))throw new F.b("Synonym should exist.");this._trackSynonymAccept(t.pname,Object.assign(Object.assign({},t.stats),va.c.getSynonymStats(e,t.synonyms.synonymsOrGroups)),va.c.getTimeToClose(t.readyAt));const n=this._synonymsModel.applySynonym({id:t.synonyms.id,dispose:O.l,range:a},e);Ee(()=>this._notificationsManager.enqueue("alertUndo",{params:Se([n])}),this._trackUndoCloseButton,()=>(this._ded.flushChanges(),this._ded.contentUpdated)).subscribe(e=>"commit"===e?n.commit():n.undo())})),this.close("apply")}dispose(){this._subs.forEach(e=>e.unsubscribe()),this._subs=[]}_request(e){return this.query({start:e.start,word:e.meta.value}).then(k.g.some).catch(e=>(this._log.error("Error querying synonyms",e),k.g.none))}_canShowPopup(e){return va.a.isReady(e)||va.a.isEmpty(e)}_deregisterRange(e){Object(s.pipe)(this._synonymsModel.positionManager.findById(e),k.g.fold(r.constVoid,t=>this._synonymsModel.positionManager.deregisterRange(e)))}_handleState(){this._subs.push(this._inlineManager.doubleClickedWord.pipe(y.a.switchMap(this._emitCloseWhen),y.a.map(k.g.filter(this._isOnline)),y.b.chain(e=>(this._ded.flushChanges(),this._withRegisteredWord(e,Object(r.flow)(this._listenQuery,y.a.switchMap(this._createSynonymsState),y.a.map(k.g.some)))))).subscribe(S.b.toAtom(this.viewState),e=>this._log.error("can not change syns state",e)))}}ka.markId="64656E616E69";const _a=(e,t=10)=>{const a=/( |^)[a-z]{3,}\b/gim,n=[];let i;for(let r=0;(i=a.exec(e))&&r<t;r++){const e=i[0].replace(" ",""),t=a.lastIndex-e.length,r=t+e.length;n.push({start:t,word:e,end:r})}return n},Oa=(e,t)=>0===t.length||0===e.length?e:(()=>{const a=e[e.length-1].end,n=t.findIndex(e=>e.start>a),i=n>=0?t.slice(0,n):t;return e.filter(e=>i.every(t=>!(e.start<=t.end&&t.start<=e.end)))})();var Aa=a("zN6a"),Ta=a("vLzu");a.d(t,"a",(function(){return Ia})),a.d(t,"c",(function(){return Ta.a})),a.d(t,"b",(function(){return be.a}));const xa=e=>()=>e.getCursor().index;class Ia{constructor(e,t,a,n,$,V,q,Y,K,Z,ee,te,ae,ne,ie,se,ce,fe,be){this._engine=e,this._denaliEditorModel=t,this._userAccount=a,this._upgradeHook=n,this._subscription=$,this._environment=V,this._platformEnvironment=q,this._telemetry=Y,this._remSizeObs=K,this._networkState=Z,this._docId=ee,this._uploadViewModel=te,this._draftAIModel=ae,this._notificationsManager=ne,this._dialectSettings=ie,this._documentLoader=se,this._textResources=ce,this._config=fe,this._router=be,this.formattingViewModel=o.e,this.emotionsViewModel=k.g.none,this._reportViewModel=k.g.none,this._openInlineAlert=new y.a.Subject,this._inlineAlertHovered=new y.a.Subject,this._inlineUpgradeHookClicked=new y.a.Subject,this._hydrateTransforms=Object(L.b)(this._denaliEditorModel.getContents),this._getActiveItemWithAlert=Be.a.getActiveItemWithAlert,this._log=D.Monitoring.Logging.getLogger("view_models"),this._subs=new C.a.Keeper,this._editorWrapperViewport=l.a.create(this._denaliEditorModel.viewport.value.wrapper),this._remSize=l.a.create(16),this._focusFirstAlert=l.a.create(this._userAccount.features.denali.focusFirstCard),this._autoScrollToNextAlert=this._userAccount.settings.editorPreferences.view("autoScrollToNextAlert").view(v.b.O.unwrap(!this._userAccount.features.denali.autoJumpSettings.isDisabledByDefault)),this._openedAfterPaste=new y.a.Subject,this._shouldShowNewLabel=Object(r.flow)(e=>A.a.isFullSentence(e)?k.g.some(b.a.ClarityAICard):k.g.none,e=>this._userAccount.settings.featuresOnboardingSeen.view(t=>Object(s.pipe)(e,k.g.filter(e=>!t.has(e))))),this._subs.push(this._denaliEditorModel.viewport.pipe(y.a.distinctUntilChanged(),y.a.map(e=>e.wrapper)).subscribe(S.b.toAtom(this._editorWrapperViewport)),this._remSizeObs.subscribe(S.b.toAtom(this._remSize)));const ve=this._engine.alertsReader,Oe=l.a.create(f.a.defaultState),Ae=Object(s.pipe)(I.a.defaultTextFilters,e=>this._userAccount.features.denali.priorityListView?_.e.update(e,I.a.priorityTextFilters(e)):e,e=>I.a.create(I.a.defaultLensFilters,e)),Te=Object(s.pipe)(this._userAccount.features.denali.mutedAlerts,k.g.fromPredicate(r.identity),k.g.map(()=>this._engine.mutedAlertsModel));this._engine.alertsList.state.pipe(e=>f.a.get(e,this._engine.alertsList.lensesScores,Ae)).subscribe(S.b.toAtom(Oe));const xe=l.a.create(T.g.getDefault);this.lensPreviewViewModel=new Mt(Oe.view("lenses"),this._engine.documentModel,this._userAccount.features,Ae,xe);const je=Object(X.c)(this._hydrateTransforms,ve,this._userAccount.features.denali.cardsRenderOptions,this._shouldShowNewLabel,this._engine.mutingAlertsReader),Le=P.a.ItemFactory.create(this._hydrateTransforms,this._engine.mutingAlertsReader,this._userAccount.features.denali.cardsRenderOptions,this._shouldShowNewLabel),Pe=ue.a.ItemFactory.create(ve,this._userAccount.features.denali.cardsRenderOptions),Fe=Be.a.getCapabilities(je,Le,Pe,ve,this._hydrateTransforms,this._userAccount.features.denali.cardsRenderOptions),De=Be.a.alertIterator(ve),Re=Be.a.getDefaultNextAlertItemFilter(ve),He=this._userAccount.features.denali.cardBundles?R.a.WithBundles.getHasAlerts(De,Be.a.queries,()=>Re):this._userAccount.features.denali.priorityListView?R.a.WithBundles.getHasAlerts(De,Be.a.queries,e=>R.a.WithPriority.isNonPriorityListOpened(e)&&R.a.WithPriority.onlyNonPriorityAlertsLeft(e,Be.a.draftAITest,Fe)&&!e.items.has(dt.a.id)?Re:Object(O.b)(Re,N.a.isPriority)):Be.a.hasAlerts(De,Be.a.queries,()=>Re);this.capabilities=Object.assign(Object.assign({},Fe),He);const We=new pe.d(Pe,new pe.a(je,Ae,Be.a.equatable.structEq,Be.a.defaultOrd),Be.a.equatable.structEq,Be.a.defaultOrd),$e=Object(i.fold)(k.h.getMonoid())([Object(s.pipe)(k.h.ordBoolean,k.h.contramap(e=>Be.a.isAlertCard(e)&&!A.a.isPriority(e.activeAlert))),R.a.WithPriority.ord]),Ve=this._userAccount.features.denali.cardBundles?new pe.c(Le,Ae,e=>m.a.isAllAlerts(e.id),We,Be.a.equatable.structEq,Be.a.bundlesOrd):this._userAccount.features.denali.priorityListView?new pe.b(je,Ae,We,this.capabilities,Be.a.equatable.structEq,$e):We,Ue=Object(pe.f)(je,Pe,this.capabilities),Ge=Object(pe.e)(Le,this._userAccount.features.denali.cardsRenderOptions,e=>m.a.isAllAlerts(e),Ue,this.capabilities),ze=this._userAccount.features.denali.cardBundles?Ge:Ue,qe=Object(s.pipe)(this._userAccount.features.denali.bulkAccept,k.g.fromPredicate(r.identity),k.g.map(()=>z.getFocusFirstFilter(ve,Ae)),k.g.getOrElse(()=>T.e.FocusFirstFilter.defaultFilter));var Ye,Qe;this.lensStateProvider=new de.a(this._engine.alertsList.state,ve,Oe.view("lenses"),this._engine.positionManager,this.lensPreviewViewModel,Ve,ze,this.capabilities,Ae,qe),this.hotkeyManager=new bt.b(this._environment),this._getAlertClosestToCursor=(Ye=e=>{switch(e){case"cursor":return xa(this._denaliEditorModel)();case"middleOfTheViewport":return Object(s.pipe)(this._denaliEditorModel.getPossibleCursorPosition(k.b.left(p.c.X.middle),k.b.left(p.c.Y.middle)),k.b.getOrElse(xa(this._denaliEditorModel)));default:return Object(F.d)(e)}},Qe=this.lensStateProvider,(e,t)=>Qe.findClosestAlertHighlight(Ye(t),e));const Je=Object(s.pipe)(this._userAccount.features.denali.prioritySwitcher,k.g.getOrElse(()=>he.a.all)),et=Je===he.a.all?m.a.SpecialId.AllAlerts:m.a.SpecialId.Priority;this.lensState=l.a.create(Object(s.pipe)(this._router.locationState,k.g.exists(e=>!0===e.openSidebar))||this._userAccount.features.denali.sidebarOpenedByDefault?this.lensStateProvider.emptyState(et):Object(de.b)()),this._userAccount.features.denali.priorityListView&&this._subs.push(this.lensState.pipe(y.a.map(R.a.WithPriority.LensViewMode.fromLensState)).subscribe(S.b.toAtom(xe))),this.upgradeViewModel=new Aa.b(this._engine.alertsList,this.lensPreviewViewModel,this._docId,this._platformEnvironment,this._upgradeHook,this._config),this.feedbackViewModel=new gt(this._notificationsManager,e=>this._telemetry.gnarSpec.feedbackFormSubmit(e.brief,e.detailed,this._telemetry.pageId)),this._reportViewModel=this._environment.has(Ie.b.Flag.supportsDownloadPDF)?k.g.some(new Zt.a(this._engine,this._userAccount.profile,this._userAccount.features,this._notificationsManager,this._denaliEditorModel.contentUpdated.pipe(y.a.startWith(null),y.a.map(this._denaliEditorModel.getHTML)),this._hydrateTransforms,()=>this.lensState,()=>this.marksViewModel,()=>this.navigationViewModel,Oe.view("lenses"))):k.g.none,this.modalManager=new u.b(new Ke.b(this._userAccount,this._textResources,this._engine.documentModel,this.upgradeViewModel,this._config,this._platformEnvironment,this.feedbackViewModel,this._notificationsManager,this._engine.documentModel,this._reportViewModel,this._telemetry,this._engine.mutedAlertsModel,this._router)),Object(s.pipe)(this._draftAIModel,k.g.tap(()=>this._loadDraftAI())),this.marksViewModel=new Dt.a(this._denaliEditorModel,this.lensState,this._engine.alertsList,ve,this._engine.alertsService,this._engine.alertRangeService,this._environment.has(Ie.b.Flag.highHighlights),new Ft.a(this.lensState,this._getActiveItemWithAlert),Ae,this._getActiveItemWithAlert),this.cardsListScrollManager=new oe.a(()=>k.b.right(void 0));const nt=M.d.getSuperScrollMapper(this.lensState,this.cardsListScrollManager,this._remSize),it=M.e.getMapper(this.marksViewModel,this._denaliEditorModel,this._log.getLogger("getMarkPosition")),rt=Be.a.alignMarkToGetter(it,nt,this._remSize),lt=Be.a.alignItemToMarkGetter(it,nt);this.alignmentViewModel=new M.c(nt,rt,lt);const pt=(ut=this._telemetry,{onShow:(e,t)=>ut.gnarSpec.bulkAcceptPanelShowed(e,t,ut.pageId,ut.pageSessionId),onAccept:e=>ut.gnarSpec.bulkAcceptAcceptAllClicked(e,ut.pageId,ut.pageSessionId),onDismiss:e=>ut.gnarSpec.bulkAcceptDismissClicked(e,ut.pageId,ut.pageSessionId),onBulkUndo:e=>ut.gnarSpec.bulkAcceptAllUndoClicked(e,ut.pageId,ut.pageSessionId),onRevert:e=>ut.gnarSpec.bulkAcceptRevertClicked(ut.pageId,e,ut.pageSessionId),onIgnore:e=>ut.gnarSpec.bulkAcceptIgnoreClicked(ut.pageId,e,ut.pageSessionId),onSuggestionClick:e=>ut.gnarSpec.bulkAcceptPanelAlertClicked(ut.pageId,e,ut.pageSessionId),onLooksGood:()=>ut.gnarSpec.bulkAcceptLooksGoodClicked(ut.pageId,ut.pageSessionId),onAllLooksGood:()=>ut.gnarSpec.bulkAcceptAllLooksGoodClicked(ut.pageId,ut.pageSessionId)});var ut;const mt=Object(L.a)(this._denaliEditorModel.getContents);this.navigationViewModel=new Bt.a(this.modalManager,this.lensState,this.lensPreviewViewModel,this._userAccount.features,this._getAlertClosestToCursor,this._engine.documentModel,Te,e=>e===he.a.priority?Bt.b.priorityOutcomesList.filter(Bt.b.lensPreviewFilter(this._userAccount.features)):Bt.b.outcomesList.filter(Bt.b.lensPreviewFilter(this._userAccount.features)),Je,e=>{const t=this.lensState.get();this._telemetry.gnarSpec.priorityModeToggleButtonClick(t.currentLens.id,e,this._telemetry.pageId,Be.a.isInSuccessWithDraftAI(t)?"success":"lensview",this._telemetry.pageSessionId)}),this.cardsViewModel=new j.c({flush:this._denaliEditorModel.flushChanges},this.navigationViewModel.events,je,this._engine.alertsService,e=>this._userAccount.settings.markFeatureOnboarded(e).then(()=>this._telemetry.gnarSpec.featureOnboardingEventClose(this._telemetry.pageId)),()=>this._userAccount.settings.markFeatureOnboarded(b.a.MuteQuotedAdvice),Object(s.pipe)(Te,k.g.map(e=>({model:e,openSuggestionsManagement:()=>this._platformEnvironment.actions.openPopup(new E.a(this._config.account.suggestions))}))),k.g.some(j.a.Experiments.sendToSignIn(this._platformEnvironment,this._config)),this._userAccount.features.denali.dismissFeedbackFormSuppressed,this._getActiveItemWithAlert,this.capabilities,this.lensState),this._cardsTelemetry=new tt(this._telemetry,this.cardsViewModel.actionEvents,this.lensState,this._engine.mutingAlertsReader,this._getActiveItemWithAlert),this._synfonyTelemetry=new ba(this._telemetry,this.cardsViewModel.actionEvents,this.lensState,this._getActiveItemWithAlert),this.alertUserEvents=new x(this._denaliEditorModel,this.lensState,this.marksViewModel,ve,this._getActiveItemWithAlert);const wt=this._engine.documentModel.rtfMode===Me.e.DocumentFeatures.FormattingMode.on?Object(o.h)(Object(Et.c)(this._denaliEditorModel,this.hotkeyManager,this._textResources,this._telemetry.gnarSpec,this._telemetry.pageId)):o.f.empty();this._inlineManager=function(e,t,a,n){const i=l.a.create(ft.idle),r=l.a.create(new Set([ft.Type.idle])),s=D.Monitoring.Logging.getLogger("inlineManager");s.isEnabled(D.Logging.LogLevel.DEBUG)&&i.subscribe(e=>s.debug("state change to",e));const o=new y.a.Subject,c=new y.a.Subject,d=new y.a.Subject,p=new y.a.Subject,u=n.fold(()=>y.a.EMPTY,e=>Et.b.fromToolbar(e.linkEvents)).pipe(y.a.share()),m={[ft.Type.idle]:ft.Scheme.monoid.empty,[ft.Type.formattingLink]:ft.Scheme.forFormattingLink(e,u,d),[ft.Type.upgradeHook]:ft.Scheme.forUpgradeHook(t,a,p),[ft.Type.synonymsCard]:ft.Scheme.forSynonymsState(t,e,c),[ft.Type.inlineCard]:ft.Scheme.forCardState(t,a,o)},g=r.view(Array.from).view(w.foldMap(ft.Scheme.monoid)(e=>m[e])).pipe(y.a.combineLatest(i.view("type")),y.a.switchMap(([e,t])=>y.a.mergeStatic(...e[t])),y.a.scan((e,t)=>{const[a,n]=t(e);return s.debug("state change",{prevState:e,changeReason:a,nextState:n}),n},ft.idle),y.a.tap(S.b.toAtom(i)),y.a.startWith(ft.idle),y.a.share()),f=e=>y.a.Observable.create(()=>(r.modify(t=>new Set(t).add(e)),()=>r.modify(t=>{const a=new Set(t);return a.delete(e),a}))).pipe(y.a.startWith(S.b.voidValue));return{doubleClickedWord:f(ft.Type.synonymsCard).pipe(y.a.switchMapTo(g.pipe(y.a.map(e=>e.type===ft.Type.synonymsCard?k.g.some(e.word):k.g.none))),y.a.distinctUntilChanged(k.g.getEq(Ct.a.ord).equals),y.a.share()),closeSynonyms:c,hoveredMarkAlert:f(ft.Type.inlineCard).pipe(y.a.switchMapTo(g.pipe(y.a.map(e=>e.type===ft.Type.inlineCard?k.g.some(e.alert):k.g.none))),y.a.distinctUntilChanged(k.g.getEq(h.d.ord).equals),y.a.share()),closeCards:o,formattingLinkState:f(ft.Type.formattingLink).pipe(y.a.switchMapTo(g.pipe(y.a.map(e=>e.type===ft.Type.formattingLink?k.g.some(e.link):k.g.none))),y.a.distinctUntilChanged(k.g.getEq(St.a.LinkState.eq).equals),y.a.share()),closeLinks:d,upgradeHookState:f(ft.Type.upgradeHook).pipe(y.a.switchMapTo(g.pipe(y.a.map(e=>e.type===ft.Type.upgradeHook?k.g.some(e.alert):k.g.none))),y.a.distinctUntilChanged(k.g.getEq(vt.a.eq).equals),y.a.share()),closeUpgradeHooks:p}}(this._denaliEditorModel,this.alertUserEvents,ve,wt);const kt=yt.a.ViewModel.getInlineHighlightFilter(this.lensState);this.inlineCardViewModel=new yt.b(this._inlineManager,this.marksViewModel,y.a.mergeStatic(this._denaliEditorModel.contentUpdated.pipe(y.a.mapTo(S.b.voidValue))),this._engine.alertsList,ve,this._engine.alertsService,this._telemetry,this._openInlineAlert,this._inlineAlertHovered,this._hydrateTransforms,kt),this.inlineUpgradeHookViewModel=new Ot(this._inlineManager,this.marksViewModel,this._denaliEditorModel.contentUpdated.pipe(y.a.mapTo(S.b.voidValue)),this._engine.alertsList,this._inlineUpgradeHookClicked,this._userAccount.settings,this.upgradeViewModel),this.successLensViewModel=new Ce.b(this.lensState,this._engine.documentModel,e=>this._telemetry.gnarSpec.sidebarSuccessStateShow(this.lensState.get().currentLens.id,this._telemetry.pageId,e),this.capabilities,this._userAccount.features.denali.priorityListView?k.g.some({trackNonPriorityToggle:()=>this._telemetry.gnarSpec.toggleNonPriorityButtonClick("expanded",this._telemetry.pageId,"success",this._telemetry.pageSessionId)}):k.g.none,this._userAccount.features.denali.mutedAlertsOnSuccessView?k.g.some(void 0):k.g.none,e=>T.e.isWithPriorityList(e)&&R.a.WithPriority.onlyNonPriorityAlertsLeft(e.currentLens,Be.a.draftAITest,this.capabilities),Be.a.isInSuccessWithDraftAI,this._userAccount.features.denali.showGrammarlyBDGift);const At=Object(s.pipe)(this._userAccount.features.denali.bulkAccept,k.g.fromPredicate(r.identity),k.g.map(()=>Q.create(this.cardsViewModel.actionEvents,this.inlineCardViewModel.events))),Tt=k.g.isSome(this._userAccount.features.denali.prioritySwitcher)?this.navigationViewModel.lensMode.view(he.b.isPriorityMode).view(Object(O.c)(m.a.SpecialId.Priority,m.a.SpecialId.AllAlerts)):l.a.create(m.a.SpecialId.AllAlerts),xt=this._userAccount.features.denali.priorityListView?ua.priorityNextLensPredicate:ua.defaultNextLensPredicate;this.priorityEvents=new y.a.Subject;const It=[na(this._engine.documentModel.asyncChecksState.view("plagiarism"),this._engine.plagiarismModel,this._autoScrollToNextAlert,this.capabilities),ia(this.lensState,this._engine.documentModel,xt,this.lensPreviewViewModel,this.modalManager,this._autoScrollToNextAlert,this._userAccount.features,Tt),..._e.create(this._engine.alertsList,ve,this.lensState,this._getActiveItemWithAlert,e=>Ee(()=>this._notificationsManager.enqueue("alertUndo",{params:Se(e)}),()=>this._telemetry.gnarSpec.notificationCloseButtonClick("alertUndo",this._telemetry.pageId),()=>(this._denaliEditorModel.flushChanges(),this._denaliEditorModel.contentUpdated)),this._log.getLogger("sideEffects.undo")),sa(aa.always,this._denaliEditorModel.textChangedAfterPaste,({type:e,source:t,tags:a,len:n})=>{switch(e){case"initial":D.Monitoring.TimeSeries.root.getTimer("text_paste_initial").recordTime(n);break;case"reset":D.Monitoring.TimeSeries.root.getTimer("text_paste_reset").recordTime(n);break;case"partial":D.Monitoring.TimeSeries.root.getTimer("text_paste_partial").recordTime(n);break;default:Object(F.d)(e)}this._telemetry.gnarSpec.pasteEventFire(n,this._telemetry.pageId,t,a,e)}),sa(aa.isSidebarClosed,this._denaliEditorModel.textChangedAfterPaste,({type:e})=>{"initial"!==e&&"reset"!==e||(this.navigationViewModel.events.next({type:"toggleSidebar",actionSource:h.b.api}),this._openedAfterPaste.next())}),(Wt=this._denaliEditorModel,$t=this._notificationsManager,Vt=()=>this._telemetry.gnarSpec.undoTextRemovedNotificationShow(this._telemetry.pageId),Ut=()=>this._telemetry.gnarSpec.undoTextRemovedHotkeyPress(),Gt=()=>this._telemetry.gnarSpec.undoTextRemovedButtonClick(this._telemetry.pageId),{id:"textRemovedSideEffect",when:r.constTrue,what:T.e.Effect.Applicator.create(Wt.contentUpdated.pipe(y.a.filter(p.b.isTextMaybeWithFormatting),y.a.map(()=>Wt.getTextLength()),y.a.startWith(Wt.getTextLength()),y.a.pairwise(),y.a.filter(([e,t])=>e-t>la),y.a.exhaustMap(()=>y.a.timer(oa).pipe(y.a.takeUntil(Wt.shortcutUsed),y.a.switchMapTo($t.enqueue("textRemoved").pipe(y.a.takeUntil(Wt.shortcutUsed.pipe(y.a.tap(Ut))),y.a.tap(e=>{"shown"===e?Vt():"undo"===e&&(Wt.undo(),Gt())}),y.a.takeWhile(e=>"undo"!==e))),y.a.mapTo(T.e.Effect.Applicator.Source.identity)))))}),(Pt=this._openedAfterPaste,Ht=this._documentLoader.state,{id:"afterPasteLoadingSideEffect",when:aa.isSidebarOpen,what:T.e.Effect.Applicator.create(Pt.pipe(y.a.tap(()=>Ht.set(ea.a.State.lensAndNavigationProcessing)),y.a.switchMapTo(y.a.NEVER)))}),ca(this._denaliEditorModel,5*_.d.MS_IN_MIN),...this.cardsViewModel.getApplicatorEffects(),j.b.changeAlertEffect(this.lensState,this.cardsViewModel,je,this._getActiveItemWithAlert,ve,k.g.none,this._getAlertClosestToCursor,this._log.getLogger("CardsViewModelEffects.changeAlertEffect")),le.b.freezeActiveCardOnCardsListUpdate(this.lensState,this.cardsListScrollManager,this.capabilities),le.b.manageCardsVisibility(this.lensState,this.cardsListScrollManager,this.capabilities,Object(r.unsafeCoerce)(this.cardsViewModel.actionEvents)),M.a.createAlignmentSideEffect(this.lensState,this.cardsViewModel.actionEvents,G.getFirstApiAlignmentOverride(),Be.a.getActiveAlignableItem,this.capabilities,rt,lt),M.a.createAlignmentOnTypingEffect(this.lensState,this.alignmentViewModel,this._denaliEditorModel.contentUpdated,this._getActiveItemWithAlert,this.capabilities),M.a.createAlignOnDisjointedAreasEffect(this.lensState,this.alignmentViewModel,this._denaliEditorModel,this.cardsListScrollManager),M.a.createAlignOnResizeSideEffect(this.lensState,this.alignmentViewModel,this._userAccount.settings.editorPreferences.view("fontSize").pipe(y.a.skip(1)),this._getActiveItemWithAlert,this.capabilities),this.navigationViewModel.lensChangeEffects,this.navigationViewModel.alertChangeEffects,(Lt=this.alertUserEvents,Nt=this.lensState,{id:"alertSwitchingByClickSideEffect",when:aa.isSidebarOpen,what:T.e.Effect.SwitchAlert.create(Lt.alertClicked.pipe(y.a.skip(1),y.b.compact,y.a.filter(e=>h.a.State.isRegistered(e.alert.state)),y.a.withLatestFrom(Nt.pipe(y.a.filter(T.e.hasCards)),(e,t)=>e),y.a.map(({alert:e,highlightIndex:t})=>({alertHighlight:{alert:e,highlightIndex:t},alertSource:h.b.text,options:{order:"textOrder"}}))))}),(jt=this._openInlineAlert,{id:"openInlineAlert",when:aa.isSidebarClosed,what:T.e.Effect.SwitchAlert.create(jt.pipe(y.a.map(e=>({alertHighlight:e,alertSource:h.b.text,options:{order:"textOrder"}}))))}),ge.a.focusMarkByActiveAlert(this.lensState,this.marksViewModel,ve,Be.a.getActiveFocusableItem,this._log.getLogger("MarksEffects.focusMarkByActiveAlert")),ge.a.highlightMarkByHighlightedCard(this.cardsViewModel,this.lensState,this.marksViewModel,ve,this.capabilities,this._log.getLogger("MarksEffects.highlightMarkByHighlightedCard")),yt.a.Effects.highlightMarkByInlineAlert(this._inlineAlertHovered.pipe(y.a.filter(kt)),this.marksViewModel,this._log.getLogger("MarksEffects.highlightMarkByInlineAlert")),_t.Effects.highlightMarkByInlineUpgradeHook(this._inlineUpgradeHookClicked,this.marksViewModel,this._log.getLogger("MarksEffects.highlightMarkByInlineUpgradeHook")),j.b.createSendActiveAlertFeedbacksEffect(this.lensState,this._getActiveItemWithAlert,this._engine.alertsService,ve,this._log.getLogger("CardsViewModelEffects.createSendActiveAlertFeedbacksEffect")),ra(this.marksViewModel.events,this.capabilities),pa(this.lensPreviewViewModel,this._userAccount,this._notificationsManager,this._telemetry,this._upgradeHook,this._platformEnvironment,this.lensState.view("currentLens","id"),Tt),this.successLensViewModel.applicatorEffects,ye.a.SideEffects.toggleNonPriorityCards(this.priorityEvents,this.capabilities,e=>this._telemetry.gnarSpec.toggleNonPriorityButtonClick(e,this._telemetry.pageId,"lensview",this._telemetry.pageSessionId))];var jt,Lt,Nt,Pt,Ht,Wt,$t,Vt,Ut,Gt;Object(s.pipe)(this._engine.mutingAlertsReader,k.g.tap(e=>{It.push(me.showCardMuteOnboarding(this._userAccount.settings.featuresOnboardingSeen.view(e=>e.has(b.a.CardMute)&&!this._userAccount.features.denali.enforceFeaturesOnboarding.has(b.a.CardMute)),this._engine.alertsList,e,()=>this._notificationsManager.enqueue("cardMuteOnboarding"),()=>this._userAccount.settings.markFeatureOnboarded(b.a.CardMute),()=>this._telemetry.gnarSpec.deactivatedSuggestionsOnboardingNotificationShow(this._telemetry.pageId,this._telemetry.pageSessionId)))})),Object(s.pipe)(At,k.g.tap(e=>{It.push(...ke.create(e,ve,this._engine.alertsList,pt),...we.create(e,ve,this._engine.alertsList));const t=J.createEffects({actions:e,alertService:this._engine.alertsService,tracking:pt,alertsReader:ve});It.push(...t)}));const zt=Object(s.pipe)(At,k.g.map(e=>[J.selectNextCardOnBulkAcceptConfirmed(e,this._getActiveItemWithAlert,this.lensState,this._autoScrollToNextAlert)]),k.g.getOrElse(()=>[])),qt=Object(s.pipe)(At,k.g.fold(()=>l.a.create(!1),()=>this.lensState.view(T.e.mapper(e=>Object(s.pipe)(e.currentLens,T.j.getActiveItemOfType(Be.a.isBulkAcceptItem)))).view(k.g.isSome)));this.draftAIItemViewModel=Object(s.pipe)(this._draftAIModel,k.g.map(()=>dt.b.create("Performance review"))),this.draftAIEditorViewModel=Object(s.pipe)(this._draftAIModel,k.g.fold(()=>l.a.create(k.g.none),({model:e,connector:t})=>{const a=new y.a.Subject,n=t.activeItemId.pipe(y.a.skip(1),y.b.compact,y.a.distinctUntilChanged(),y.a.share());return It.push(ot.switchToAllAlertsLens(a),ot.switchToDraftAILens(k.g.unsafeGet(this.draftAIItemViewModel).events),ot.switchToDraftAILensFromPlaceholder(n)),this._subs.push(e.editorState.pipe(y.b.compact).subscribe(()=>this.draftAIEditorViewModel.get())),e.editorState.view(k.g.map(n=>ct.b.create(n,e=>{const a=e.data.reduce((e,t)=>c.a.isInsertString(t)?e.insert(t.insert,Object.assign(Object.assign({},t.attributes),{list:"bullet"})):e.push(t),new d.a);t.insertContent(a)()},()=>a.next(),()=>{t.cleanup(),e.dismiss(),a.next(),this._telemetry.gnarSpec.draftAIBetaCardDismissButtonClicked(this._telemetry.pageId,this._denaliEditorModel.getTextLength(),this._telemetry.pageSessionId)},e.loadPhrases,this._telemetry)))})),It.push(ot.hideDraftAIItem(this.draftAIEditorViewModel)),Object(s.pipe)(this._draftAIModel,k.g.tap(({connector:e})=>{It.push(ot.selectFirstEmptyWhenOnboardingComplete(e,this.draftAIEditorViewModel.pipe(y.b.compact,y.a.map(()=>this.onboardingViewModel))))}));const Xt={bigPaste:this._denaliEditorModel.textChangedAfterPaste.pipe(y.a.filter(e=>"reset"===e.type||"initial"===e.type),y.a.map(()=>void 0))},Jt=Object(s.pipe)(y.a.mergeStatic(...zt,G.focusFirstCardAfterBigCheck(this.lensState,this._engine.documentModel.checkingState,this._focusFirstAlert,Xt,qt)),e=>G.getSideEffect(e,this.capabilities));It.push(Jt),this.autofocusListener=new U(this._engine.documentModel.checkingState,this.lensState);const ta=G.getDefaultBehavior(this._getActiveItemWithAlert,this.capabilities),da=()=>k.g.isNone(this._userAccount.features.denali.gbUpHook.get()),ma=W(this.lensStateProvider,this._getAlertClosestToCursor,Tt,this._getActiveItemWithAlert,this.capabilities,Be.a.isInGlobalSuccess,da),ha=this._userAccount.features.denali.cardBundles?H(e=>m.a.isMainLens(e.currentLens.id),ma,this.capabilities):this._userAccount.features.denali.priorityListView?H(T.e.isWithPriorityList,ma,this.capabilities,e=>da()&&Be.a.isInGlobalSuccess(e)||m.a.isOutcomeId(e.currentLens.id)&&this.lensStateProvider.hasZeroFreeAlerts(Tt)?Object(s.pipe)(this.lensStateProvider.findPremiumAlert(),k.g.map(B.a.toLensAlert)):k.g.none):ma,ga=G.getStateTransformer(ta,ha,ve,this.capabilities,G.getShouldAutoFocus(this._autoScrollToNextAlert,ve,this._getActiveItemWithAlert),e=>e.kind===T.e.Effect.FocusBehaviorType.focusFirst&&this._telemetry.gnarSpec.focusFirstCardShow(this._telemetry.pageId),Tt),fa=R.a.Items.getItemsPositionsUpdateTransformer(this.capabilities),ya=this._userAccount.features.denali.priorityListView?Object(s.pipe)(R.a.WithPriority.getSyncVisibleCardsHandler(this.capabilities),re.liftWithItemsState):re.nothing,Ca=Object(s.pipe)(At,k.g.map(()=>z.getStateTransformer(this._engine.alertsList.state,Ae,mt,this.capabilities,pt,this._userAccount.features.denali.cardsRenderOptions)),k.g.getOrElse(()=>re.nothing)),va=Object(r.flow)(ga,k.b.chainLeft(Ca),k.b.chainLeft(ya),k.b.chainLeft(fa));this._lensStateManager=new B.a(this.lensState,this.lensStateProvider,ve,this._engine.alertsService,It,this._getActiveItemWithAlert,va),Object(O.r)("getLensStateSnapshot",()=>T.e.snapshot(X.a.snapshot,this._getActiveItemWithAlert)(this.lensState.get())),Object(O.r)("getLensState",()=>this.lensState.get()),Object(O.r)("getLensesCollection",()=>Oe.view("lenses").get()),this._pageTelemetry=new Kt(this.lensState,this._telemetry),this.synonymsViewModel=new ka(this._inlineManager,this._engine.positionManager,this._engine.synonymsModel,this.lensState,this._networkState,this._denaliEditorModel,this._notificationsManager,this._getActiveItemWithAlert,()=>this._telemetry.gnarSpec.notificationCloseButtonClick("alertUndo",this._telemetry.pageId),(e,t)=>void this._telemetry.gnarSpec.synonymsPopupShow(t.numberOfMeanings,t.numberOfSynonymsByMeanings,t.numberOfSynonymsTotal,this._telemetry.pageId,e),(e,t,a)=>void this._telemetry.gnarSpec.synonymsPopupClose(t.numberOfMeanings,t.numberOfSynonymsByMeanings,t.numberOfSynonymsTotal,a,this._telemetry.pageId,e),(e,t,a)=>void this._telemetry.gnarSpec.synonymsAcceptButtonClick(t.meaningIndex,t.synonymIndexInGroup,t.synonymIndexAbs,t.numberOfMeanings,t.numberOfSynonymsByMeanings,t.numberOfSynonymsTotal,a,this._telemetry.pageId,e)),this.proofitViewModel=new Ne.b(this._subscription,this._engine.documentModel,this._denaliEditorModel,this._userAccount,this._notificationsManager,this._router,this._config),this.onboardingViewModel=new Yt(this._userAccount.settings,this.lensState,this._denaliEditorModel,this._engine.documentModel,ve,this._userAccount.features.onboardingMode(this._engine.documentModel),this._telemetry,this._userAccount,this.draftAIEditorViewModel,this._getActiveItemWithAlert),this.searchViewModel=new Qt.c(this._denaliEditorModel,this._engine.positionManager,this._editorWrapperViewport,this.hotkeyManager),this.downloadViewModel=new st(this._engine.documentModel,this._notificationsManager),this.surveyManager=Object(s.pipe)(this._userAccount.features.denali.surveyType,k.g.map(e=>Xe(e,this.lensState,this._engine.documentModel,this._denaliEditorModel,this.proofitViewModel,this._uploadViewModel,this._userAccount,this.modalManager,this._notificationsManager,this._subscription,this._telemetry,this._getActiveItemWithAlert))),this.formattingViewModel=wt.map(e=>{const t=St.a.createManager(this._denaliEditorModel,this._engine.formattingLinkModel.get(),this._inlineManager,this.hotkeyManager);return this._subs.push(e,t),{toolbarViewModel:e.viewModel,linksManager:t}}),this.documentSettingsViewModel=Object(Rt.b)(this.hotkeyManager,this._denaliEditorModel,this._router,this._textResources,this._userAccount,this._dialectSettings,this.downloadViewModel,this.upgradeViewModel,this.modalManager,this._uploadViewModel,this._environment,this._notificationsManager,this.searchViewModel,this._telemetry,this._docId,this._engine.documentModel),this.documentPlaceholderViewModel=new at(this._uploadViewModel,this._denaliEditorModel,this._userAccount,this._environment),this.emotionsViewModel=Object(s.pipe)(this._engine.emotionsModel,k.g.map(e=>ht.a.ViewModel.create(e,this._engine.documentModel,this._textResources))),this._subs.push(this._handleFocusUserInputInCards()),this._subs.push(this._engine.documentModel.checkingState.pipe(y.a.first(e=>"idle"===e),y.a.withLatestFrom(this._engine.alertsList.state),y.a.map(([,e])=>Object(s.pipe)(e,g.a.size)),y.a.finalize(Ze.a.docLoad.cleanup)).subscribe(e=>Ze.a.docLoad.end({textLength:this._denaliEditorModel.getTextLength(),alertsCount:e}))),this.showConfetti=l.a.create(!1);const Sa=()=>{const e=this.successLensViewModel.successState.get(),t=this.lensState.get();return Be.a.isInSuccessWithDraftAI(t)&&e.type===Ce.a.SuccessType.zero&&!!e.showBirthday};this._subs.push(this.successLensViewModel.successState.pipe(y.a.debounceTime(2e3),y.a.filter(Sa)).subscribe(()=>{this._userAccount.settings.markBDayGiftSeen(),this._telemetry.gnarSpec.bdayGiftAnimationShow(this._telemetry.pageId),y.a.timer(4e3).subscribe(()=>{Sa()&&this.showConfetti.set(!0)})}))}dispose(){this._engine.shutdown(),this.searchViewModel.dispose(),this.successLensViewModel.dispose(),this._lensStateManager.dispose(),this.marksViewModel.dispose(),this.synonymsViewModel.dispose(),k.g.option.map(this._reportViewModel,e=>e.dispose()),this.downloadViewModel.dispose(),this.navigationViewModel.dispose(),Object(s.pipe)(this.surveyManager,k.g.map(e=>e.dispose())),this.documentSettingsViewModel.dispose(),this.proofitViewModel.dispose(),this._pageTelemetry.dispose(),this._cardsTelemetry.dispose(),this._synfonyTelemetry.dispose(),this.inlineCardViewModel.dispose(),this.cardsViewModel.dispose(),this.autofocusListener.dispose(),this._subs.dispose()}_loadDraftAI(){return Object(s.pipe)(this._draftAIModel,k.g.fold(()=>Promise.reject(new Error("Cannot load Draft AI modal when the model is not present")),({model:e,connector:t})=>k.l.toPromise(e.getGalleryData()).then(a=>{this._engine.documentModel.updateTemplate(k.g.some(je.a.gallery)),Object(Le.c)(e,t)({tactics:a.goals[0].categories[0].tactics.map(e=>e.id)})})))}_handleFocusUserInputInCards(){return this._denaliEditorModel.dontFreezeWhen(this.lensState.pipe(y.a.map(Object(r.flow)(T.e.getActiveItem(this._getActiveItemWithAlert),k.g.filter(Object(O.b)(ce.a.isDefaultItem,N.a.hasOneGapTransform)),k.g.fold(r.constFalse,r.constTrue))),y.a.startWith(!1),y.a.distinctUntilChanged()),"userInput")}createLoaderViewModel(e){return new Pt.b(this._documentLoader.state,this.lensState,this._engine.documentModel,e,this._denaliEditorModel,this._userAccount.features)}}},agjt:function(e,t,a){e.exports=a.p+"files/7f67ab6aeebccf32e1fdc69b4b9a01de/inter-light.woff2"},akIQ:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var n=a("ERkP"),i=a("OA+g"),r=a("I7vG"),s=a("9NHN"),o=a("rk+4"),l=a("nnns"),c=a("tZ26"),d=a("PyeZ"),p=a("aIes"),u=a("1gzW"),m=a("cVtq"),h=a("lrqh"),g=a("PrA7"),f=a("UgFH");const b=({title:e,className:t})=>n.createElement("div",Object.assign({className:t},p.d.setInnerHTML(e.toLowerCase(),{allowedTags:["i","b"]}))),y=({title:e,explanation:t})=>n.createElement("div",null,n.createElement(b,{className:f.bigTitle,title:e}),n.createElement("div",Object.assign({className:f.explanation},p.d.setInnerHTML(t,{allowedTags:["i","b"]})))),C=({alert:e,hydrate:t,onApply:a,onAddToDictionary:s,onIgnore:d,onOpen:p})=>{const u=n.useContext(o.a.Context).inlineCard,C=e=>/Unknown/.test(e.patternName),v=(e,t)=>/Unknown/.test(e.patternName)?"Unknown word":/Misspelled\/General/.test(e.patternName)?"":t;return n.createElement("div",{className:f.card},Object(r.pipe)(e.getTransform(),h.g.chain(Object(i.flow)(t,h.b.fold(t=>(g.Monitoring.Logging.getLogger("InlineCard.hydration").error("Failed to hydrate an inline card",t,{alertId:e.id}),h.g.none),h.g.some))),h.g.fold(()=>!C(e)&&n.createElement(y,{title:e.title,explanation:e.explanation}),t=>n.createElement(m.d,{key:"replacementsLabels",replacementsLabels:t,onClick:a,header:v(e,t.tooltipText),customStyle:f}))),n.createElement(l.a.Group,{align:"vertical"},e.extraProperties.hasAddToDictionary&&n.createElement(l.a.Ghost,{name:"add-to-dictionary",textPosition:"right",className:C(e)?f.footerButtonBig:f.footerButtonShort,onClick:s},C(e)&&n.createElement(b,{className:f.unknownWordTitle,title:e.title}),n.createElement(c.d.Dict,null),u.addToDictionary),n.createElement(l.a.Ghost,{name:"dismiss",className:f.footerButtonShort,onClick:d},n.createElement(c.d.Ignore,null),u.dismiss),n.createElement(l.a.Ghost,{name:"see_more",className:f.footerButtonShort,onClick:p},n.createElement(c.d.Expand,null),u.seeMore)))},v=e=>{const t=n.useRef(null),[a,i]=n.useState(!1);u.a.useEffectOnDidMount(()=>{const e=t.current;e&&e.firstElementChild&&e.firstElementChild.clientWidth>=288&&i(!0)});const{alert:r,hydrate:o,onApply:l,onIgnore:c,onAddToDictionary:d,onOpen:p}=e;return n.createElement("div",Object.assign({onClick:e=>e.stopPropagation(),key:r.id,ref:e=>t.current=e},Object(s.c)(a&&f.maxWidthReached)),n.createElement(C,{alert:r,hydrate:o,onApply:l,onIgnore:c,onAddToDictionary:d,onOpen:p}))},S=({alert:e,events:t,highlightIndex:a,hydrate:i})=>{const r=e=>()=>{t.next(e),(()=>t.next({type:d.b.Type.closed}))()};return n.createElement(v,{alert:e,hydrate:i,onAddToDictionary:r({type:d.b.Type.addedToDictionary,alertId:e.id}),onApply:t=>r({type:d.b.Type.applied,alertId:e.id,alternativeIndex:t}),onIgnore:r({type:d.b.Type.ignored,alertId:e.id}),onOpen:r({type:d.b.Type.opened,alert:{alert:e,highlightIndex:a}})})}},"b/mo":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("OA+g"),i=a("D9EC"),r=a("dE97"),s=a("GUi3");const o=Object(i.b)(r.a.isRegistered,Object(n.not)(r.a.isMuted)),l=e=>t=>Object(i.b)(o,e(t));var c;!function(e){e.create=function(e,t){const a=l(t=>e[t]);return{lensFilters:new Map(Object.entries(e)),alertVisibleInText:(e,a)=>Object(i.b)(l(e=>t[e])(e),(e=>t=>e||r.a.isPriority(t))(a)),alertVisibleInSidebar:a,getLensesFilter:t=>e[t],alertCanBeDisplayed:o,alertIsBulkAcceptable:e=>Object(i.b)(a(e),r.a.isBulkAcceptable)}};const t=e=>t=>e===t.lensId,a=e=>Object(i.b)(t(s.a.OutcomeId.fromPriorityOutcomeId(e)),r.a.isPriority);e.defaultLensFilters={[s.a.SpecialId.Clarity]:t(s.a.SpecialId.Clarity),[s.a.SpecialId.Correctness]:t(s.a.SpecialId.Correctness),[s.a.SpecialId.Delivery]:t(s.a.SpecialId.Delivery),[s.a.SpecialId.Engagement]:t(s.a.SpecialId.Engagement),[s.a.SpecialId.Vox]:t(s.a.SpecialId.Vox),[s.a.SpecialId.ClarityPriority]:a(s.a.SpecialId.ClarityPriority),[s.a.SpecialId.CorrectnessPriority]:a(s.a.SpecialId.CorrectnessPriority),[s.a.SpecialId.DeliveryPriority]:a(s.a.SpecialId.DeliveryPriority),[s.a.SpecialId.EngagementPriority]:a(s.a.SpecialId.EngagementPriority),[s.a.SpecialId.VoxPriority]:a(s.a.SpecialId.VoxPriority),[s.a.SpecialId.Plagiarism]:t(s.a.SpecialId.Plagiarism),[s.a.SpecialId.DraftAI]:n.constFalse,[s.a.SpecialId.Premium]:t(s.a.SpecialId.Premium),[s.a.SpecialId.AllAlerts]:r.a.belongsToAllAlerts,[s.a.SpecialId.Closed]:n.constFalse,[s.a.SpecialId.Priority]:r.a.belongsToPriorityLens,[s.a.SpecialId.PredictionTakeaways]:r.a.belongsToPredictionTakeaways,[s.a.SpecialId.PredictionEmogenie]:r.a.belongsToPredictionEmogenie,[s.a.SpecialId.RealTimeProofit]:t(s.a.SpecialId.RealTimeProofit)},e.defaultTextFilters=Object.assign(Object.assign({},e.defaultLensFilters),{[s.a.SpecialId.Closed]:r.a.isCriticalImpact,[s.a.SpecialId.Premium]:Object(i.p)(e.defaultLensFilters[s.a.SpecialId.Premium],r.a.belongsToAllAlerts)}),e.priorityTextFilters=e=>({[s.a.SpecialId.Premium]:Object(i.b)(e[s.a.SpecialId.Premium],r.a.isPriority)})}(c||(c={}))},b0nb:function(e,t,a){"use strict";var n,i,r=a("a5W6"),s=a("m6JR"),o=a("OA+g"),l=a("I7vG"),c=a("2Jhg"),d=a("1aGC"),p=a("24uI"),u=a("FiSa"),m=a("4ae2"),h=a("bYZB"),g=a("+JVj"),f=a("Ni70"),b=a("hjw9"),y=a("1huE"),C=a("zR/0"),v=a("quYV"),S=a("gy42"),E=a("Bew4"),w=a("lrqh"),k=a("hoSD"),_=a("6fbX"),O=a("D9EC"),A=a("PrA7"),T=a("0lfv");(i=n||(n={})).getPossibleCaretPosition=(e,t)=>w.b.tryCatchError(()=>{if(document.caretPositionFromPoint){const a=document.caretPositionFromPoint(e,t);return{node:a.offsetNode,offset:a.offset}}if(document.caretRangeFromPoint){const a=document.caretRangeFromPoint(e,t);return a?{node:a.startContainer,offset:a.startOffset}:{node:document.elementFromPoint(e,t),offset:0}}throw new Error("Browser doesn't support range API")}),i.fitPositionInViewport=(e,t,a)=>({x:Math.floor(e>=a.right?a.right-1:e<=a.left?a.left+1:e),y:Math.floor(t<=a.top?a.top+1:t>=a.bottom?a.bottom-1:t)}),i.getPositionByNativeCursor=e=>t=>d.find(t.node).offset(e)+t.offset,i.getNativeCursorByPosition=(e,t,a,n,r=!1)=>{const{x:s,y:o}=i.fitPositionInViewport(e,t,a);return r&&k.c.renderDot(s,o,"top"),Object(l.pipe)(i.getPossibleCaretPosition(s,o),w.b.map(({node:e,offset:t})=>{if(k.c.isParent(n,e))return{node:e,offset:t};if(o<=a.top+1)return{node:k.c.getFirstChild(n),offset:0};{const e=k.c.getLastChild(n);return{node:e,offset:e.textContent?e.textContent.length:0}}}))};var x=a("PPsJ"),I=a("hJSx"),M=a("hY4K"),j=a("lg/X"),L=a("2yqQ"),N=a("o5+S"),P=a("GZ3w");const F=1500,D=150,R=250,B=(e,t)=>{const a=d.imports[e]?d.import(e):null;return d.register(e,t,!0),()=>{d.imports[e]===a&&(a?d.register(e,a,!0):delete d.imports[e])}};class H{constructor(e,t,a,i){this._allowedAttrs=t,this._allowedEmbeds=a,this._options=i,this._log=A.Monitoring.Logging.getLogger("DEd",A.Logging.LogLevel.DEBUG),this._freezeFocus=new b.a.Impl("freezeFocus",this._options.freezeFocusFeature?b.a.everyTrue:()=>!1),this._subs=new y.a.Keeper,this._editorEl=document.createElement("div"),this._scrollEl=new C.a.BehaviorSubject(c.e),this._scrollTo=new C.a.Subject,this._textLength=0,this._outgoingChanges=void 0,this._isFlushBlocked=!1,this.shortcutUsed=new C.a.Subject,this._deltaFilter=p.a.cleanDelta(this._allowedEmbeds,this._allowedAttrs),this.flushChanges=()=>{if(!this._isFlushBlocked&&void 0!==this._outgoingChanges){this._log.trace("flushChanges");const e=this._outgoingChanges;this._outgoingChanges=void 0,void 0!==this._changesSyncTimer&&(clearTimeout(this._changesSyncTimer),this._changesSyncTimer=void 0),e.isEmpty||(this._log.debug("emit changes",{textLength:this.getTextLength(),deltaLength:e.length,deltaAmount:e.amount,deltaTargetLen:e.prevLen}),this._changes.next(e))}},this._flush=()=>{this.flushChanges(),this._changes.next(u.a.flush())},this._changes=new C.a.Subject,this.changes=this._changes,this._contentUpdatedInternal=new C.a.Subject,this.contentUpdated=this._contentUpdatedInternal.pipe(C.a.delay(1)),this.activeWord=new C.a.BehaviorSubject(w.g.none),this.selection=new C.a.BehaviorSubject(h.g.empty),this.selectedFormatting=C.a.mergeStatic(this._contentUpdatedInternal.pipe(C.a.filter(e=>e.type===h.b.Type.onlyFormatting),C.a.withLatestFrom(this.selection,(e,t)=>t)),this.selection).pipe(C.a.map(e=>this.getFormatting(h.g.toTextRange(e))),C.a.shareReplay({bufferSize:1,refCount:!0})),this.clickedWord=new C.a.Subject,this.scrollPosition=new C.a.BehaviorSubject(0),this.ongoingSelection=new C.a.BehaviorSubject(!1),this.viewport=new C.a.BehaviorSubject({text:k.c.Rect.empty,wrapper:k.c.Rect.empty}),this.isEditorFocused=new C.a.BehaviorSubject(!0),this._execCommandAfterFocus=new C.a.Subject,this._validateSelection=({index:e,length:t})=>w.b.tryCatchError(()=>(Object(_.g)(e+t>=0,"Selection is less than zero",()=>`index: ${e}, length: ${t}`),Object(_.g)(e+t<this._textLength,"Selection is greater than text length",()=>`index: ${e}, length: ${t}, text length: ${this._textLength}`),{index:e,length:t})),this._documentRangeCache=E.DocumentRange.createCache(5),this._getDocumentRange=Object(o.flow)(this._validateSelection,w.b.chain(e=>Object(l.pipe)(this._documentRangeCache.get(e),w.g.fold(()=>Object(l.pipe)(e,E.DocumentRange.BaundaryPoint.getPoints(e=>Object(N.p)(this.quill.getLeaf(e))),w.b.chain(E.DocumentRange.BaundaryPoint.toNativeRange)),w.b.right),w.b.map(t=>(this._documentRangeCache.set(e,t),t))))),this._setNativeSelection=Object(o.flow)(this._getDocumentRange,w.b.map(e=>{const t=window.getSelection()||document.selection;t.removeAllRanges(),t.addRange(e),this.quill.focus()})),this._restoreFocus=()=>Object(l.pipe)(this.getCursor(),this._setNativeSelection,w.b.getOrElse(e=>this._log.error(`Cannot reset focus ${e}`))),this._getAnimation=(e,t)=>{switch(e.animate){case h.a.none:return C.a.of(e.scrollTop);case h.a.fast:return v.a.createAnimationObservable(t,e.scrollTop,100);case h.a.initial:return v.a.createAnimationObservable(t,e.scrollTop,200);case h.a.fake:return function(e,t,a){return C.a.Observable.create(n=>{const i=Math.abs(e-t)<R?0:e-t>0?Math.min(e-t,R):Math.max(e-t,-R);a.style.transform=`translateY(${i}px)`,a.style.transition="",n.next(e);const r=requestAnimationFrame(()=>{a.style.transition=`transform ${D}ms linear`,a.style.transform=""});return()=>{cancelAnimationFrame(r),a.style.transition="",a.style.transform=""}})}(e.scrollTop,t,this._wrapper);default:return Object(_.d)(e.animate)}},this._applyingExternalChanges=!1,this.pushChanges=(e,t)=>{this._log.trace("pushChanges"),u.a.isFlush(e)?this.flushChanges():u.a.isReset(e)?(this._log.debug("get reset",{source:t,textLength:this.getTextLength(),deltaLength:e.length}),this._outgoingChanges=void 0,this.setContents(e,t)):(this._log.debug("get changes",{source:t,textLength:this.getTextLength(),deltaLength:e.length,deltaAmount:e.amount,deltaTargetLen:e.prevLen}),Object(_.g)(void 0===this._outgoingChanges,"There should be no outgoing changes in the editor when pushChanges() is called. Use flush()"),e.prevLen!==this._textLength&&this._log.error("Incoming change for a wrong text len",{expected:this._textLength,incoming:e.prevLen}),this._ensureSelection(()=>{this._history.commit(()=>{this._applyingExternalChanges=!0,p.a.splitToDeleteThenInsert(e.delta).filter(p.a.nonEmpty).forEach(e=>{this.quill.updateContents(Object(N.s)(e),t)}),this._applyingExternalChanges=!1,this.flushChanges()})}))},this._text=null,this.getText=()=>(null===this._text&&(this._text=this.quill.getText()),this._text),this.getHTML=()=>(this.flushChanges(),this._editorEl.outerHTML),this.getTextLength=()=>this._textLength,this.getContents=(e,t)=>u.a.unsafeRes(this._deltaFilter(Object(N.r)(this.quill.getContents(e,t)))),this.setCursor=(e,t=0,a="api")=>w.b.map(()=>this.quill.setSelection(e,t,a))(this._setNativeSelection({index:e,length:t})),this.scrollToTitle=()=>{this._scrollTo.next(this._getAnimation({scrollTop:0,animate:h.a.initial},this._getScroll()))},this._getScroll=()=>(Object(_.g)(this._scrollEl.getValue().nonEmpty(),"DEd should be attached"),this._scrollEl.getValue().get().scrollTop),this._normalizeScrollOffset=e=>{Object(_.g)(this._scrollEl.getValue().nonEmpty(),"DEd should be attached");const t=this._scrollEl.getValue().get(),a=t.scrollTop,n=t.scrollHeight-t.offsetHeight;return e+a<n?e+a>0?e:-a:n-a},this._setScroll=e=>(Object(_.g)(this._scrollEl.getValue().nonEmpty(),"DEd should be attached"),this._scrollEl.getValue().get().scrollTop=e),this._calculateViewport=e=>{const t=this.quill.root.getBoundingClientRect();return{text:Object(l.pipe)(k.c.Rect.intersection(e,t),w.g.getOrElse(()=>t)),wrapper:e}},this.containsElement=e=>k.c.isParent(this.quill.root,e),this.getPossibleCursorPosition=(e,t,a=!1)=>{const i=this.viewport.value.text,r=Object(l.pipe)(e,w.b.fold(h.c.X.toViewport(i),o.identity)),s=Object(l.pipe)(t,w.b.fold(h.c.Y.toViewport(i),o.identity));return Object(l.pipe)(n.getNativeCursorByPosition(r,s,i,this.quill.root,this._log.isEnabled(A.Logging.LogLevel.TRACE)||a),w.b.map(n.getPositionByNativeCursor(this.quill.root)))},this._getFormattingFn=e=>(N.b.isBlockFormat(e)?this.quill.formatLine:this.quill.formatText).bind(this.quill);const r=i.classes||{};this._allowNavigationTo=i.allowNavigationTo||(()=>!1),this.quill=this._initQuill({editor:k.c.classes(P.editor,r.editor),editorContainer:i.containerClass,scrollWrap:r.scrollWrap},e),this._marker=this.quill.getModule("marks"),this._history=this.quill.getModule("history"),this._clipboard=this.quill.getModule("clipboard"),this.textChangedAfterPaste=this._clipboard.textChangedAfterPaste,this.activeMarks=this._marker.activeMarks,this.hoveredMarks=this._marker.hoveredMarks,this.changeMarks=e=>{this.flushChanges(),this._log.debug("change marks",e);const t=this._marker.changeMarks(e);return this.isEditorFocused.getValue()&&this._restoreFocus(),t},this._quillEditorChange=Object(N.t)(this.quill).pipe(C.a.share()),this._contentChange=this._quillEditorChange.pipe(C.a.filter(Object(N.e)(this._allowedAttrs)),C.a.share()),this._log.isEnabled(A.Logging.LogLevel.DEBUG)&&function(e,t,a,n=c.h){const i=e[t].bind(e);e[t]=(...e)=>(n(...e).forEach(e=>a.debug(`trace call of ${t}`,{args:e,stack:(new Error).stack})),i(...e))}(this.quill,"updateContents",this._log.getLogger("quill.core"),(e,t)=>"user"!==t&&p.a.calcDiffLength(e)<0?Object(c.h)({delta:p.a.anonymizeTextAndStringAttrs(e),source:t}):c.e),this.scrollPercentage=this.scrollPosition.pipe(C.a.combineLatest(this._scrollEl.pipe(C.a.combineLatest(C.a.mergeStatic(C.a.fromEvent(window,"resize"),this._contentChange).pipe(C.a.debounceTime(500),C.a.startWith(S.b.voidValue)),e=>e),C.a.map(e=>Object(l.pipe)(T.a.fromOption(e),w.g.chain(e=>{const t=e.scrollHeight-e.clientHeight;return t>0?w.g.some(t):w.g.none}))),C.a.distinctUntilChanged(w.g.getEq(s.eqNumber).equals))),C.a.map(([e,t])=>Object(l.pipe)(t,w.g.map(t=>e/t))),C.a.distinctUntilChanged(w.g.getEq(s.eqNumber).equals),C.a.shareReplay({bufferSize:1,refCount:!0}));const m=this._quillEditorChange.pipe(C.a.filter(N.g),C.a.map(e=>e.range));this._subs.push(this._contentChange.subscribe(({delta:e,source:t})=>{void 0!==e.ops&&(this._text=null,t===d.sources.USER?this._pushDelta(e):this._log.debug("skip emit",{source:t,textLength:this.getTextLength(),deltaLength:p.a.calcDiffLength(e),delta:p.a.anonymizeTextAndStringAttrs(e)}),this._setTextLength(this._textLength+p.a.calcDiffLength(e)))}),C.a.mergeStatic(this._history.changed.pipe(C.a.filter(({source:e})=>"keyboard"===e)),this._clipboard.clipboardShortcutUsed).pipe(C.a.mapTo(void 0)).subscribe(this.shortcutUsed),this._contentChange.pipe(C.a.map(e=>({type:e.delta.ops.some(e=>!p.a.isRetain(e))?h.b.Type.textMaybeWithFormatting:h.b.Type.onlyFormatting,source:e.source,delta:e.delta}))).subscribe(this._contentUpdatedInternal),m.pipe(C.a.map(e=>c.f.of(e).map(({index:e,length:t})=>({index:e,length:t}))),C.a.filter(e=>e.nonEmpty()),C.a.distinctUntilChanged(T.a.equals(h.g.eq.equals))).subscribe(e=>this.selection.next(e.get())),m.pipe(C.a.map(w.g.fromNullable),C.a.map(e=>Object(l.pipe)(e,w.g.filter(e=>0===e.length),w.g.chain(e=>Object(N.i)(this.quill.getText(),e)),w.g.filter(e=>""!==e.meta.value))),C.a.distinctUntilChanged(w.g.getEq(g.b.ord).equals)).subscribe(this.activeWord),C.a.mergeStatic(C.a.fromEvent(this.quill.root,"mousedown",{passive:!0}).pipe(C.a.mapTo(!0)),C.a.fromEvent(document,"mouseup",{passive:!0}).pipe(C.a.mapTo(!1)),C.a.fromEvent(document,"dragend",{passive:!0}).pipe(C.a.mapTo(!1)),C.a.fromEvent(document,"click",{passive:!0}).pipe(C.a.mapTo(!1))).pipe(C.a.switchMap(Object(O.c)(C.a.fromEvent(document,"mousemove",{passive:!0}).pipe(C.a.auditTime(50),C.a.filter(()=>!window.getSelection().isCollapsed),C.a.first(),C.a.mapTo(!0)),C.a.of(!1)))).subscribe(this.ongoingSelection)),this.viewportRange=this.viewport.pipe(C.a.distinctUntilChanged(),C.a.combineLatest(this.scrollPosition),C.a.debounceTime(300),C.a.map(([{text:e}])=>Object(l.pipe)(Object(o.tuple)(Object(l.pipe)(n.getNativeCursorByPosition(e.left,e.top,this.viewport.value.text,this.quill.root),w.b.map(n.getPositionByNativeCursor(this.quill.root))),Object(l.pipe)(n.getNativeCursorByPosition(e.right,e.bottom,this.viewport.value.text,this.quill.root),w.b.map(n.getPositionByNativeCursor(this.quill.root)))),w.b.map2(g.b.create),w.b.fold(e=>(this._log.error("Cannot calculate viewportRange",e),g.b.empty),o.identity))),C.a.shareReplay({bufferSize:1,refCount:!0}))}_initQuill(e,t){const a=[...Object.entries(t.modules).map(([e,t])=>B(`modules/${e}`,t)),...t.formats.map(e=>B(`formats/${e.blotName}`,e)),B("themes/denali",t.theme)],n=Object.assign(Object.assign({},Object.keys(t.modules).reduce((e,t)=>(e[t]=!0,e),{})),{toolbar:!1,keyboard:!0,clipboard:{className:P.editorClipboard,maxAllowedTextLength:1e5,lengthExceededCallback:()=>alert("Oops, Document size exceeded!"),flush:this._flush,deltaFilter:this._deltaFilter},history:{userOnly:!0,delay:1e3,maxStack:100,flush:this._flush},marks:{scrollPositionChanged:this.scrollPosition.pipe(C.a.distinctUntilChanged(),C.a.mapTo(S.b.voidValue),C.a.skip(1)),contentUpdated:this.contentUpdated,scrollContainer:this._scrollEl,ongoingSelection:this.ongoingSelection.pipe(C.a.distinctUntilChanged()),getOpsHistory:()=>this._history.getAnonymizedOperationsHistory()}}),i=new d(this._editorEl,{modules:n,theme:"denali",classes:e});return a.forEach(e=>e()),i}_pushDelta(e){void 0===this._outgoingChanges?this._outgoingChanges=u.a.delta(this._deltaFilter(e),this._textLength):this._outgoingChanges.delta=this._outgoingChanges.delta.compose(this._deltaFilter(e));const t=p.a.calcAmountLength(e);!this._outgoingChanges.isEmpty&&(t>100||this._textLength-t<=1||void 0!==e.ops.find(e=>Object(N.j)(e)||Object(N.k)(e))||w.g.isSome(this.activeMarks.getValue()))?this._applyingExternalChanges||this.flushChanges():(void 0!==this._changesSyncTimer&&clearTimeout(this._changesSyncTimer),this._changesSyncTimer=setTimeout(this.flushChanges,F))}_setTextLength(e){const t=this._textLength-e;this._textLength=e;const{index:a,length:n}=this.getCursor();a>=e?this.selection.next({index:e-1,length:0}):a+n>=e&&this.selection.next({index:a,length:n-t})}_handleFreezeFocus(){const e=(e,t)=>e===t||this._allowNavigationTo(e),t=C.a.fromEvent(document,"click").pipe(C.a.filter(t=>!e(t.target,this.quill.root)),C.a.observeOn(C.a.asapScheduler),C.a.filter(()=>!e(document.activeElement,this.quill.root)),C.a.tap(this._restoreFocus));return this._freezeFocus.state.pipe(C.a.switchMap(S.b.Scheduler.rafScheduler),C.a.tap(e=>e?this._restoreFocus():this.quill.blur()),C.a.switchMap(S.b.orEmpty(t)),C.a.catchError(e=>(this._log.warn("unexpected exception in freezeFocus",e),C.a.EMPTY))).subscribe()}attach(e,t,a){if(this._wrapper)throw new Error("Editor already attached");this._wrapper=e,this._scrollEl.next(Object(c.h)(t)),this._viewportRect=a,e.appendChild(this._editorEl),this._textLength?w.b.getOrElse(e=>this._log.error(`Failed to reset cursor on ded attach ${e}`))(this.setCursor(0,0)):this.quill.root.focus(),Object(O.r)("dedBlockFlush",()=>this._isFlushBlocked=!0),Object(O.r)("dedAllowFlush",()=>this._isFlushBlocked=!1),Object(O.r)("dedForceFlush",()=>this.flushChanges()),Object(O.r)("dedGetText",this.getText),Object(O.r)("dedSetCursor",(e,t)=>w.b.getOrElse(e=>this._log.error(e))(this.setCursor(e,t,d.sources.USER))),Object(O.r)("dedType",e=>{this.flushChanges(),this.pushChanges(u.a.ins(this.getCursor().index,e,this.getText().length),"user")}),Object(O.r)("dedQuill",this.quill),Object(O.r)("ded",this),Object(O.r)("getPossibleCursorPosition",(e,t,a)=>this.getPossibleCursorPosition("string"==typeof e?w.b.left(e):w.b.right(e),"string"==typeof t?w.b.left(t):w.b.right(t),a)),this._subs.push(this._handleFreezeFocus(),C.a.fromEvent(this.quill.root,"mouseup").pipe(C.a.map(e=>({clicks:e.detail,range:w.g.fromNullable(this.quill.getSelection())})),C.a.map(({clicks:e,range:t})=>Object(l.pipe)(t,w.g.chain(e=>Object(N.i)(this.quill.getText(),e)),w.g.filter(e=>""!==e.meta.value),w.g.map(g.a.create(e))))).subscribe(this.clickedWord),this._scrollTo.pipe(C.a.switchAll()).subscribe(e=>this._setScroll(e)),this._scrollEl.pipe(C.a.switchMap(e=>e.fold(()=>C.a.EMPTY,C.a.of)),C.a.switchMap(e=>C.a.fromEvent(e,"scroll").pipe(C.a.map(()=>this._getScroll())))).subscribe(this.scrollPosition),C.a.combineLatestStatic(this._contentChange.pipe(C.a.filter(({source:e})=>e===d.sources.USER)),this._viewportRect).subscribe(([,e])=>{requestAnimationFrame(()=>{this._getCursorRect().recover(e=>(this._log.warn("Typing enhancer: Cannot get cursor rect",e),c.f.empty())).get().forEach(t=>{const a=Math.ceil(t.top+t.height),n=Math.ceil(.7*Math.max(e.top+e.height));a>n&&this._scrollTo.next(this._getAnimation({scrollTop:this._getScroll()+Math.round(a-n),animate:h.a.initial},this._getScroll()))})})}),C.a.combineLatestStatic(this._scrollEl.pipe(C.a.switchMap(e=>e.fold(()=>C.a.EMPTY,C.a.of))),this._history.changed,(e,t)=>e).subscribe(e=>requestAnimationFrame(()=>{this._getCursorRect().recover(e=>(this._log.warn("Undo/Redo: Cannot get cursor rect",e),c.f.empty())).get().forEach(t=>{const a=e.getBoundingClientRect();(t.top<a.top||t.top>a.bottom)&&this._scrollTo.next(this._getAnimation({scrollTop:this._getScroll()+Math.round(t.top-a.top-a.height/2),animate:h.a.none},this._getScroll()))})})),C.a.combineLatestStatic(this._viewportRect,this.scrollPosition.pipe(C.a.debounceTime(150))).pipe(C.a.map(r.head),C.b.compactMap(Object(o.flow)(this._calculateViewport,C.a.of))).subscribe(this.viewport),C.a.mergeStatic(C.a.fromEvent(this.quill.root,"blur").pipe(C.a.mapTo(!1)),C.a.fromEvent(this.quill.root,"focus").pipe(C.a.mapTo(!0))).subscribe(this.isEditorFocused),this._execCommandAfterFocus.pipe(C.a.withLatestFrom(this.isEditorFocused)).subscribe(([e,t])=>{t||this._restoreFocus(),document.execCommand(e)}))}dispose(){this._subs.dispose(),this._marker.dispose(),this._history.dispose(),this.quill.emitter.removeAllListeners()}setContents(e,t="api"){const a=Object(N.o)(e),n=void 0!==this._outgoingChanges,i=e.delta.compose(a.delta),r=p.a.calcDiffLength(i),s=this._deltaFilter(i),o=p.a.calcDiffLength(s);this._log.debug("reset content",{shouldNormalizeCRLF:!a.isEmpty,hasOutgoingChanges:n,deltaLength:r,deltaWithoutAttrsLength:o,deltaLengthMissmatch:r!==o}),this.quill.setContents(Object(N.s)(s),"api"),this._setTextLength(r),"user"===t?this._changes.next(u.a.unsafeRes(i)):a.isEmpty||this._changes.next(a)}getCursor(){return this.selection.getValue()}getLastPossibleCursorPosition(){return this._textLength-1}getSelectionRect(e){return Object(l.pipe)(this._getDocumentRange(e||this.getCursor()),w.b.map(e=>new N.a(e,()=>this.quill.container.getBoundingClientRect())))}scrollToMark(e,t={animate:h.a.none,paddingTop:0}){return Object(l.pipe)(this._getMarkRect(e),w.b.fold(e=>(this._log.error("Cannot scroll to given mark",e),C.a.throwError(e)),e=>{const a=t.animate||h.a.none,n=this._getScrollTop(),i=this._normalizeScrollOffset(e.top-(t.paddingTop?t.paddingTop:n));return C.a.Observable.create(e=>(e.next(void 0),this._scrollTo.next(this._getAnimation({scrollTop:this._getScroll()+i,animate:a},this._getScroll()).pipe(C.a.finalize(()=>{e.complete()}))),()=>{this._scrollTo.next(this._getAnimation({scrollTop:this._getScroll(),animate:h.a.none},this._getScroll()))}))}))}undo(e="user"){this._history.undo(e)}canUndo(){return this._history.canUndo()}clearHitory(){this._history.clear()}redo(e="user"){this._history.redo(e)}canRedo(){return this._history.canRedo()}cut(){this._execCommandAfterFocus.next("cut")}copy(){this._execCommandAfterFocus.next("copy")}dontFreezeWhen(e,t){return this._options.freezeFocusFeature?this._freezeFocus.watch(S.b.invert(e),t):y.a.EMPTY}_getScrollTop(){return this._scrollEl.getValue().fold(()=>0,e=>e.getBoundingClientRect().top)}_getMarkRect(e){return Object(l.pipe)(e.getRect(),w.b.map(f.b.relativeToViewport),w.b.map(e=>({top:e.top,bottom:e.bottom})))}_getCursorRect(){return c.j.of(()=>{const e=this.quill.getSelection();if(e&&0===e.length){const t=this.quill.container.getBoundingClientRect(),a=this.quill.getBounds(e.index,1);return Object(c.h)({bottom:a.bottom+t.top,height:a.height,left:a.left+t.left,right:a.right+t.left,top:a.top+t.top,width:a.width})}return c.e})}_ensureSelection(e){const t=this.quill.getSelection();e(),t&&t.length>0&&this._clearSelection(()=>{this.quill.setSelection(t.index,t.length,d.sources.API)})}_clearSelection(e){const t=window.getSelection?window.getSelection():document.selection;t&&(t.removeAllRanges?t.removeAllRanges():t.empty&&t.empty()),e&&requestAnimationFrame(e)}getFormatting(e){return N.b.mapQuillFormatsToDenali(this.quill,e)}addFormatting(e,t,a){t===h.e.Type.link?this._applyFormatting(h.e.Type.link,e,a):this._applyFormatting(t,e)}removeFormatting(e,t){t===h.e.Type.link?this._applyFormatting(h.e.Type.link,e,!1):this._applyFormatting(t,e,!1)}clearFormatting(e){this.quill.removeFormat(e.start,g.b.size(e),"user")}_applyFormatting(e,t,a){const{key:n,value:i}=N.b.mapEditorFormatToQuill(e),r=void 0!==a?a:i;if(g.b.isEmpty(t)){if(e===h.e.Type.link)return;this.quill.format(n,r,"user"),this._contentUpdatedInternal.next({type:h.b.Type.onlyFormatting,source:"user",delta:new m.a})}else{this._getFormattingFn(e)(t.start,g.b.size(t),n,r,"user")}}}!function(e){class t extends e{constructor(e=t.DEFAULT_MODULES,a=p.a.skipAny,n=p.a.skipAny,i={}){Object(N.q)(),super(e,a,n,i),this.markChangeApplied=this._marker.markChangeApplied,this.selectedFormatting=new C.a.Subject,this._envSupportsSelection=!!window.getSelection,this._envSupportsSelection||Object.assign(this.quill,{setSelection:(e,t)=>{if(null===e)return;const a="object"==typeof e?e.index:e;Object(_.g)(a>=0,"range selection can not accept negative values")}})}fakeAttach(){this.attach(document.createElement("div"),document.createElement("div"),C.a.of(k.c.Rect.empty))}get mutationObserverPeriod(){return MutationObserver._period||t.defaultMutationObserverPeriod}get container(){return this.quill.root}getCursor(){return this._envSupportsSelection?super.getCursor():{index:0,length:0}}}t.defaultMutationObserverPeriod=100,t.DEFAULT_MODULES={theme:L.a,modules:{history:I.a,clipboard:Object(x.b)(!1,[]),keyboard:M.a.getKeyboardWithBindings(M.a.Bindings.plainTextBindings),marks:j.a},formats:[]},e.Mock=t}(H||(H={}));var W=a("pKPl");a.d(t,"a",(function(){return H})),a.d(t,"b",(function(){return W.a}))},bFfh:function(e,t,a){"use strict";var n,i,r,s,o=a("93Qa"),l=a("OA+g"),c=a("I7vG"),d=a("xlCj"),p=a("lrqh"),u=a("hoSD"),m=a("7b34"),h=a("6fbX"),g=a("dE97"),f=a("GUi3"),b=a("kFFO"),y=a("K4Sz"),C=a("TC4P"),v=a("W39u"),S=a("BeBM");!function(e){let t,a,n,i;e.filterAlertInLens=(e,t)=>p.a.filter(a=>g.a.isNotRemoved(a)||p.g.isSome(e.items.find(e=>t.hasAlert(a.id)(e)))),function(e){e.setVisibleItems=e=>t=>Object.assign(Object.assign({},t),{cardIndex:Object(c.pipe)(S.j.getActiveItem(t),p.g.chain(t=>Object(c.pipe)(e.get(t.id),p.g.map(e=>e.index)))),items:e}),e.getActiveItemIndex=e=>Object(l.flow)(S.j.getActiveItem,p.g.chain(t=>e.get(t.id)),p.g.map(e=>e.index)),e.hideItem=function(e,t){return C.a.isAnimatable(e)&&"removed"!==e.visualState.transition.type&&"hidden"!==e.visualState.transition.type?t.transitionTo({type:"hidden",clockwise:!1})(e):e},e.calculateCardsHeight=e=>Object(c.pipe)(e.getAt(e.size-1),p.g.map(e=>e.positionState.absTop+e.positionState.height),p.g.getOrElse(()=>0));e.getItemsPositionsUpdateTransformer=t=>({state:a,metadata:n})=>{if(!S.e.hasCards(a))return p.b.left({state:a,metadata:n});const i=S.e.Prism.getLens();return p.b.left({state:i.modify(e.updateItemsPositions(t),a),metadata:n})};const t=e=>t=>Object(c.pipe)(t.items.find((e=>t=>a=>a.positionState.watched&&!e.isHidden(a)&&Object(c.pipe)(t,p.g.forAll(e=>e.id!==a.id)))(e)(S.j.getActiveItem(t))),p.g.map(({value:t,index:a})=>({index:a,value:Object(c.pipe)(t,p.g.fromPredicate(t=>t.positionState.isHeightValid&&!e.isScheduledToDispose(t)))})));e.updateItemsPositions=a=>n=>{const i=S.j.getActiveItem(n),r=t(a)(n),s=Object(c.pipe)(r,p.g.chain(u.e.pick("value")),p.g.map(e=>e.positionState.height));let o=0;const l=Object(c.pipe)(i,p.g.forAll(e=>e.positionState.isHeightValid)),d=Object(c.pipe)(r,p.g.map(u.e.pick("index")),p.g.getOrElse(()=>(e=>Object(c.pipe)(e,p.g.map(e=>0===e?1:0),p.g.getOrElse(()=>0)))(n.cardIndex))),m=n.items.map((e,t,i)=>{const r=p.g.contains(i)(n.cardIndex),u=r||i===d,m=a.isScheduledToDispose(e)||(r?e.positionState.isHeightValid:p.g.isSome(s)),h=a.isScheduledToDispose(e)?a.useReferenceHeightOnRemove(e)?Object(c.pipe)(s,p.g.getOrElse(()=>e.positionState.height)):0:r?e.positionState.height:Object(c.pipe)(s,p.g.getOrElse(()=>e.positionState.height)),g={absTop:r||l?o:e.positionState.absTop,height:h,animationInProgress:n.animation(e,i),visible:e.positionState.visible,isHeightValid:m,watched:u};return o+=h,v.a.PositionState.eq.equals(e.positionState,g)?e:a.changePosition(g)(e)}),h=e.calculateCardsHeight(m),g=Object(c.pipe)(i,p.g.forAll(e=>e.positionState.isHeightValid))&&Object(c.pipe)(m.getAt(d),p.g.forAll(e=>e.positionState.isHeightValid));return Object.assign(Object.assign({},n),{items:m,cardsHeight:h,isCardsHeightValid:g})}}(t=e.Items||(e.Items={})),function(e){e.apply=(e,t,a,n)=>i=>Object(c.pipe)(e,m.a.reduce(i,(e,{alert:t})=>n([t])(e),(e,t,{alert:n})=>a([n])(e),(e,{alert:a})=>t([a])(e))),e.applyWithFilter=(e,t)=>(a,n,i,r)=>{const s=Object(l.flow)(p.a.partition(e),e=>Object(l.flow)(r(e.left),i(e.right)));return t(a,t=>n(t.filter(e)),s,r)}}(a=e.ApplyDiff||(e.ApplyDiff={})),function(e){e.items=d.a.create(e=>e.items,(e,a)=>t.setVisibleItems(e)(a)),e.getFeedItems=()=>d.a.create(e=>e.items,(e,a)=>t.setVisibleItems(e)(a))}(n=e.Prism||(e.Prism={})),e.getEq=e=>p.c.fromEquals((t,a)=>{if(t.kind===S.f.abstract||a.kind===S.f.abstract)return t.id===a.id;{const n=t,i=a;return t.id===a.id&&p.g.getEq(e).equals(S.j.getActiveItem(n),S.j.getActiveItem(i))&&n.meta.equals(a.meta)&&n.items.equals(i.items)}}),e.lensHash={hashCode:e=>{if(e.kind===S.f.abstract)return Object(b.b)(e.id);{const t=e;let a=7;return 31*(a=31*(a=31*a+Object(b.b)(e.id))+function(e){return Object(c.pipe)(e,p.g.fold(()=>2433880,e=>null==e?9735524:e.hashCode()<<2))}(S.j.getActiveItem(t)))+e.meta.count}}},function(e){e.getAlertReleaser=e=>({release:t=>a=>{const n=a.items.map(e.removeAlertFromItem([t],a)),i=Object(c.pipe)(a.cardIndex,p.g.chain(t=>Object(c.pipe)(n.findRightFrom(e.isScheduledToDispose,t),p.g.map(e=>e.index))),p.g.isSome)?S.b.skip:S.b.force;return Object.assign(Object.assign({},a),{animation:i,items:n})}}),e.getUnselectable=(e,t)=>({unselectItem:()=>a=>{const n=Object(c.pipe)(a,e,p.g.map(e=>a.items.add(Object(c.pipe)(e,t.unselect(p.g.none,a.itemsOrd)))),p.g.getOrElse(()=>a.items));return Object.assign(Object.assign({},a),{items:n,animation:S.b.force,cardIndex:p.g.none})}}),e.getSelectableByAlert=(e,t)=>({selectItemByAlert:a=>n=>{const i=e(n),r=n.items.find(t.isSelectableByAlert(a));Object(h.g)(p.g.isSome(r),"Can not find card for provided alert. Unknown card or it is already disposed.",()=>a.alert.toString());const{value:s,index:o}=p.g.unsafeGet(r),l=Object(c.pipe)(i,p.g.map(e=>n.items.add(Object(c.pipe)(e,t.unselect(p.g.some(s),n.itemsOrd)))),p.g.getOrElse(()=>n.items)).add(Object(c.pipe)(s,t.selectByAlert(i,a,n.itemsOrd)));return Object.assign(Object.assign({},n),{items:l,animation:S.b.force,cardIndex:p.g.some(o)})}}),e.getSelectableById=(e,t)=>({selectItemById:a=>n=>{const i=e(n),r=n.items.get(a),{value:s,index:o}=p.g.unsafeGet(r),l=Object(c.pipe)(i,p.g.map(e=>n.items.add(Object(c.pipe)(e,t.unselect(p.g.some(s),n.itemsOrd)))),p.g.getOrElse(()=>n.items)).add(Object(c.pipe)(s,t.select(i,n.itemsOrd)));return Object.assign(Object.assign({},n),{items:l,animation:S.b.force,cardIndex:p.g.some(o)})}}),e.getItemReleaser=()=>({removeItemById:t=>a=>e.setVisibleItems(a.items.remove(t))(a)}),e.getMetaUpdatable=function(){return{updateMeta:e=>t=>Object.assign(Object.assign({},t),{meta:f.a.WithAlerts.setMeta(e)(t.meta)})}},e.getAnimatable=function(e,t){return{finishApplyAnimation:a=>n=>{Object(h.g)(a.every(e.shouldAnimateAlertApply),"Tried to finish animation on non-animated state");const i=n.id,r=e=>{const n=e.items.map(t.removeAlertFromItem(a,e));return Object.assign(Object.assign({},e),{items:n})};if(f.a.isOutcomeId(i))return r(n);switch(i){case f.a.SpecialId.Priority:case f.a.SpecialId.AllAlerts:case f.a.SpecialId.PredictionTakeaways:case f.a.SpecialId.PredictionEmogenie:case f.a.SpecialId.RealTimeProofit:return r(n);case f.a.SpecialId.Premium:throw new Error("It's not possible to animate premium alerts");case f.a.SpecialId.Plagiarism:return Object(h.g)(a.every(g.a.isPlagiarism),"tried to finish animation on non plagiarism alert in plagiarism lens"),r(n);default:return Object(h.d)(i)}}}},e.getVerifiable=function(e){return{shouldVerify:t=>Object(c.pipe)(S.j.getActiveItem(t),p.g.exists(t=>e.isScheduledToDispose(t)))||p.g.isNone(t.items.find(t=>!e.isScheduledToDispose(t)))}},e.getHasAlerts=function(e,t,a){const n=e=>e.id===f.a.SpecialId.Premium||e.id===f.a.SpecialId.Plagiarism?e.meta.count:Object(c.pipe)(S.j.getActiveItem(e),p.g.chain(t.hasActiveAlert),p.g.exists(g.a.isCapiDone))&&1===e.items.size?0:e.meta.count;return{getVisibleAlertsCount:n,getActiveAlertsCount:n,findFirstAlert:e=>Object(c.pipe)(e.items.filter(a(e)).find(e=>p.g.isSome(t.hasActiveAlert(e))),p.g.map(({value:e})=>({alert:e.activeAlert,highlightIndex:e.activeHighlightIndex}))),findNextAlert:t=>(Object(h.g)(p.g.isSome(S.j.getActiveItem(t))===p.g.isSome(t.cardIndex),"Lens is in wrong state"),Object(c.pipe)(Object(o.sequenceT)(p.g.option)(S.j.getActiveItem(t),t.cardIndex),p.g.chain(([n,i])=>Object(c.pipe)(e.nextAlert(n),p.g.alt(()=>e.prevAlert(n)),p.g.alt(()=>Object(c.pipe)(u.a.lookAround(t.items.values(),i,a(t)),p.g.map(e=>e.value.activeAlert))))),p.g.orElse(Object(c.pipe)(y.a.find(t.items,a(t)),p.g.map(({value:e})=>e.activeAlert))),p.g.map(e=>({alert:e,highlightIndex:0}))))}},e.setVisibleItems=e=>t=>Object.assign(Object.assign({},t),{cardIndex:Object(c.pipe)(S.j.getActiveItem(t),p.g.chain(t=>Object(c.pipe)(e.get(t.id),p.g.map(e=>e.index)))),items:e})}(i=e.Capabilities||(e.Capabilities={}))}(n||(n={})),function(e){let t;e.create=function(e,a){return t||(t={id:f.a.SpecialId.Closed,kind:S.f.abstract,type:S.i.closed,meta:f.a.createStaticLens({id:f.a.SpecialId.Closed,title:"Closed"},f.a.Meta.group.empty,e),hashCode(){return n.lensHash.hashCode(this)},equals(e){return n.getEq(a).equals(this,e)}}),t}}(i||(i={})),(s=r||(r={})).create=()=>({id:f.a.SpecialId.DraftAI,type:S.i.draftAI,kind:S.f.abstract,meta:f.a.createStaticLens({id:f.a.SpecialId.DraftAI,title:"Draft AI"},f.a.Meta.group.empty,l.constFalse),transitionSource:p.g.none,hashCode(){return Object(b.b)(this.id)},equals(e){return this.id===e.id}}),s.createFromTransitionSource=e=>Object.assign(Object.assign({},s.create()),{transitionSource:p.g.some(e)});var E,w,k,_=a("m6JR"),O=a("aIes"),A=a("UEGg");!function(e){function t(e){return O.a.groupBy("cardId",e)}e.create=function(e,a,i,r,s,o){Object(h.g)(e.id===f.a.SpecialId.Plagiarism,"Cannot create plagiarism lens vm on non-plagiarism lens",e.id);const l=O.a.Sorted.empty(e=>e.id,o.compare),d=t(a),u=Object(c.pipe)(i,p.g.map(({alertIndex:e})=>(Object(h.g)(void 0!==a[e],"Can not find alert for provided alertIndex"),a[e])));let m=p.g.none;const g=Array.from(d.entries()).reduce((e,[t,a])=>Object(c.pipe)(u,p.g.map(e=>a.indexOf(e)),p.g.filter(e=>e>-1),p.g.fold(()=>e.add(r.createRendered(t,a)),n=>{const i=r.createFocused(t,a,n);return m=p.g.some(t),e.add(i)})),l),b=Object(c.pipe)(m,p.g.chain(e=>Object(c.pipe)(g.get(e),p.g.map(e=>e.index))));return{id:f.a.SpecialId.Plagiarism,kind:S.f.persistent,type:S.i.plagiarism,meta:e,cardIndex:b,items:g,itemsOrd:o,animation:S.b.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return n.lensHash.hashCode(this)},equals(e){return n.getEq(s).equals(this,e)}}},e.updateCardsWithLensMeta=function(e){return t=>t.id===f.a.SpecialId.Plagiarism?Object.assign(Object.assign({},t),{items:t.items.map(t=>A.a.isPlagiarism(t.activeAlert)?e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(A.a.isPlagiarism)):t)}):t},e.add=e=>a=>n=>{const i=t(a),r=Array.from(i.entries()).reduce((t,[a,n])=>Object(c.pipe)(t.update(a,t=>e.addPlagiarismAlerts(t,n)),p.b.fold(()=>t.add(e.createAdded(a,n)),l.identity)),n.items),s=Object(c.pipe)(S.j.getActiveItem(n),p.g.map(({id:e})=>p.g.unsafeGet(r.get(e)).index)),o=p.g.getEq(_.eqNumber).equals(s,n.cardIndex)?S.b.force:S.b.skip;return Object.assign(Object.assign({},n),{cardIndex:s,items:r,animation:o})},e.remove=e=>a=>n=>{const i=t(a),r=S.j.getActiveItem(n),s=Array.from(i.entries()).reduce((t,[a,i])=>Object(c.pipe)(t.update(a,t=>{const a=Object(c.pipe)(e.remove(t,i,Object(c.pipe)(r,p.g.map(e=>n.itemsOrd.compare(t,e)>0),p.g.getOrElse(l.constTrue))),t=>e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(A.a.isPlagiarism)));return Object(c.pipe)(r,p.g.exists(e=>e.id===a.id))?e.selectNextAlert(a,n.itemsOrd):a}),p.b.fold(()=>t,l.identity)),n.items);return Object.assign(Object.assign({},n),{items:s,animation:S.b.force})},e.update=t=>a=>n=>e.updateWithAlerts(t)(a.filter(Object(l.not)(t.shouldAnimateAlertApply)))(n),e.updateWithAlerts=a=>n=>i=>{const[r,s]=u.a.partition(n,g.a.isRegistered),o=t(r),d=Array.from(o.entries()).reduce((e,[t,n])=>Object(c.pipe)(e.update(t,e=>a.changePlagiarismMetaWithAlerts(e,e.alerts.filter(A.a.isPlagiarism))),p.b.fold(()=>e.add(a.createAdded(t,n)),l.identity)),e.remove(a)(s)(i).items),m=Object(c.pipe)(S.j.getActiveItem(i),p.g.map(({id:e})=>Object(c.pipe)(d.get(e),p.g.map(({index:e})=>e),p.g.getOrElse(()=>0))));return Object.assign(Object.assign({},i),{cardIndex:m,items:d,animation:S.b.proceed})},e.getAlertsHandler=function(t){return a=>n.ApplyDiff.apply(a,e.add(t),e.update(t),e.remove(t))}}(E||(E={})),(k=w||(w={})).create=function(e,t,a,i,r){const s=O.a.Sorted.create(t.map(a.createFromAlert(f.a.SpecialId.Premium)),e=>e.id,r.compare);return Object(h.g)(s.size>0,"PremiumLensView should have at least one card"),{id:f.a.SpecialId.Premium,kind:S.f.active,type:S.i.advanced,meta:e,items:s,itemsOrd:r,cardIndex:p.g.none,animation:S.b.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return n.lensHash.hashCode(this)},equals(e){return n.getEq(i).equals(this,e)}}},k.getAlertsHandler=function(e,t){return a=>n.ApplyDiff.apply(a,k.add(e),k.update(e,t),k.remove(t))},k.add=e=>t=>a=>{const i=t.map(e.createFromAlert(a.id)),r=a.items.add(i),s=n.Items.getActiveItemIndex(r)(a);return Object.assign(Object.assign({},a),{cardIndex:s,items:r,animation:S.b.proceed})},k.remove=e=>t=>a=>{const i=new Set(t.map(e=>e.id)),r=a.items.filter(Object(l.flow)(e.hasActiveAlert,p.g.exists(e=>i.has(e.id)))).reduce((e,t)=>e.remove(t.id),a.items),s=n.Items.getActiveItemIndex(r)(a);return Object.assign(Object.assign({},a),{cardIndex:s,items:r})},k.update=(e,t)=>a=>n=>{const[i,r]=u.a.partition(a,g.a.isRegistered);return Object(l.pipe)(n,k.remove(t)(r),k.add(e)(i))};var T,x=a("a5W6"),I=a("D9EC"),M=a("IVzZ");!function(e){const t=g.d.ord;function a(e){return e.id}function i(e){const t=e.map(e=>[M.a.getAlertOutcomeBundle(e),e]);return O.a.groupBy(([e,t])=>a(e),t)}function r(e,a,n,r,s){Object(h.g)(Object(c.pipe)(n,p.g.forAll(({alertIndex:e})=>void 0!==a[e])),"Can not find alert for provided alertIndex");const o=i(a),l=Object(c.pipe)(n,p.g.map(({alertIndex:e})=>(Object(h.g)(void 0!==a[e],"Can not find alert for provided alertIndex"),a[e])));let d=p.g.none;const u=O.a.Sorted.empty(M.a.getId,s.compare),m=Array.from(o.entries()).reduce((a,[n,i])=>{const s=i.map(([e,t])=>t),o=i[0][0];return Object(c.pipe)(l,p.g.map(e=>s.indexOf(e)),p.g.filter(e=>e>-1),p.g.fold(()=>a.add(r.createRendered(e)(n,o,s,t)),i=>{const l=r.createFocused(e)(n,o,s,i,t);return d=p.g.some(n),a.add(l)}))},u);return{cardIndex:Object(c.pipe)(d,p.g.chain(e=>Object(c.pipe)(m.get(e),p.g.map(e=>e.index)))),cards:m}}e.getCardId=a,e.initCardsHash=r,e.create=function(e,t,a,i,s,o,l){const{cards:c,cardIndex:d}=r(e,a,i,s,l);return{id:e,type:S.i.lensview,kind:S.f.persistent,meta:t,withPriorityList:!1,cardIndex:d,items:c,itemsOrd:l,animation:S.b.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return n.lensHash.hashCode(this)},equals(e){return n.getEq(o).equals(this,e)}}},e.add=(e,a)=>r=>s=>{if(0===r.length)return s;const o=i(r),d=Array.from(o.entries()).reduce((n,[i,r])=>{const o=r.map(([e,t])=>t),d=r[0][0];return Object(c.pipe)(n.update(i,e=>a.updateWithAlerts(o)(e)),p.b.fold(()=>n.add(e.createAdded(s.id)(i,d,o,t)),l.identity))},s.items),u=Object(c.pipe)(s,n.Items.getActiveItemIndex(d)),m=p.g.getEq(_.eqNumber).equals(u,s.cardIndex)?S.b.force:S.b.skip;return Object.assign(Object.assign({},s),{cardIndex:u,items:d,animation:m})},e.remove=e=>t=>a=>{const r=i(t),s=Array.from(r.entries()).reduce((t,[n,i])=>Object(c.pipe)(t.update(n,t=>e.removeAlertFromItem(i.map(([e,t])=>t),a)(t)),p.b.fold(()=>t,l.identity)),a.items),o=Object(c.pipe)(a,n.Items.getActiveItemIndex(s));return Object.assign(Object.assign({},a),{cardIndex:o,items:s,animation:S.b.force})},e.update=(t,a,n)=>i=>r=>e.updateWithAlerts(t,n)(i.filter(Object(I.m)(a.shouldAnimateAlertApply)))(r),e.updateWithAlerts=(a,r)=>s=>o=>{if(0===s.length)return o;const{left:d,right:u}=Object(c.pipe)(s,n.filterAlertInLens(o,r),x.partition(g.a.isRegistered)),m=i(u),h=Array.from(m.entries()).reduce((e,[n,i])=>{const s=i.map(([e,t])=>t),d=i[0][0];return Object(c.pipe)(e.update(n,e=>r.updateWithAlerts(s)(e)),p.b.fold(()=>e.add(a.createAdded(o.id)(n,d,s,t)),l.identity))},e.remove(r)(d)(o).items),f=Object(c.pipe)(o,n.Items.getActiveItemIndex(h));return Object.assign(Object.assign({},o),{cardIndex:f,items:h,animation:S.b.proceed})},e.getAlertsHandler=function(t,a,i){return(r,s)=>o=>{const l=n.ApplyDiff.applyWithFilter(s,n.ApplyDiff.apply);return Object(c.pipe)(o,l(r,e.add(t,i),e.update(t,a,i),e.remove(i)))}},e.getHasAlerts=function(e,t,a){const i=n.Capabilities.getHasAlerts(e,t,a);return Object.assign(Object.assign({},i),{findNextAlert:t=>Object(c.pipe)(Object(o.sequenceT)(p.g.option)(S.j.getActiveItem(t),t.cardIndex),p.g.chain(([n,i])=>Object(c.pipe)(e.nextAlert(n),p.g.alt(()=>e.prevAlert(n)),p.g.alt(()=>Object(c.pipe)(u.a.findIndexFrom(t.items.values(),i+1,a(t)),p.g.alt(()=>u.a.findIndexFrom(t.items.values(),0,a(t))),p.g.chain(e=>p.g.fromNullable(e.value.alerts)),p.g.map(e=>e[0]))))),p.g.orElse(Object(c.pipe)(y.a.find(t.items,a(t)),p.g.chain(({value:e})=>p.g.fromNullable(e.alerts)),p.g.map(e=>e[0]))),p.g.map(e=>({alert:e,highlightIndex:0})))})}}(T||(T={}));var j,L,N,P,F=a("GRZr"),D=a("uqkn"),R=a("AK7F");!function(e){let t;function a(e,t){return`${e.id}_${t.id}`}function i(e,t,n,i,r,s){Object(h.g)(Object(c.pipe)(i,p.g.forAll(({alertIndex:e})=>void 0!==n[e])),"Can not find alert for provided alertIndex");const o=O.a.Sorted.create(n.map((n,s)=>Object(c.pipe)(i,p.g.exists(({alertIndex:e})=>s===e))?r.createFocused(e)(a(t,n),n,Object(c.pipe)(i,p.g.fold(()=>0,({highlightIndex:e})=>e))):r.createRendered(e)(a(t,n),n)),D.a.getId,s.compare);return{cardIndex:Object(c.pipe)(i,p.g.chain(({alertIndex:e})=>o.find(t=>t.activeAlert.id===n[e].id)),p.g.map(e=>e.index)),hash:o}}e.isInSuccess=function(e,t,a=l.constTrue){return 0===e.meta.count&&(0===e.items.filter(a).size||p.g.isNone(e.items.filter(a).find(e=>!t.isScheduledToDispose(e))))},function(t){t.isInSuccess=t=>a=>S.e.hasSuccess(a)&&S.e.hasItems(a)&&e.isInSuccess(a.currentLens,t),t.isInGlobalSuccess=e=>a=>(S.e.is(f.a.SpecialId.AllAlerts)(a)||S.e.is(f.a.SpecialId.Priority)(a))&&t.isInSuccess(e)(a)}(t=e.State||(e.State={})),e.getCardId=a,e.initCardsHash=i,e.create=function(e,t,a,r,s,o,l){const{hash:c,cardIndex:d}=i(e,t,a,r,s,l);return{id:e,type:S.i.lensview,kind:S.f.persistent,withPriorityList:!1,meta:t,cardIndex:d,items:c,itemsOrd:l,animation:S.b.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return n.lensHash.hashCode(this)},equals(e){return n.getEq(o).equals(this,e)}}},e.add=(e,t,i)=>r=>s=>{const o=r.map(r=>{const o=t.createAdded(s.id)(a(s.meta,r),r);return e(s,r)?o:n.Items.hideItem(o,i)}),l=s.items.add(o),c=n.Items.getActiveItemIndex(l)(s),d=p.g.getEq(_.eqNumber).equals(c,s.cardIndex)?S.b.force:S.b.skip;return Object.assign(Object.assign({},s),{cardIndex:c,items:l,animation:d})},e.remove=e=>t=>a=>{const i=new Set(t.map(e=>e.id)),r=a.items.map(e.remove(Object(l.flow)(e.hasActiveAlert,p.g.fold(l.constFalse,e=>i.has(e.id))),e=>Object(c.pipe)(S.j.getActiveItem(a),p.g.map(t=>a.itemsOrd.compare(e,t)>0),p.g.getOrElse(l.constTrue)))),s=Object(c.pipe)(a.cardIndex,p.g.chain(t=>Object(c.pipe)(r.findRightFrom(t=>e.isScheduledToDispose(t),t),p.g.map(e=>e.index))),p.g.isSome)?S.b.skip:S.b.force,o=Object(c.pipe)(a,n.Items.getActiveItemIndex(r));return Object.assign(Object.assign({},a),{cardIndex:o,items:r,animation:s})},e.update=(t,a,n)=>i=>r=>e.updateWithAlerts(a,t,n)(i.filter(Object(I.m)(a.shouldAnimateAlertApply)))(r),e.updateWithAlerts=(e,t,i)=>r=>s=>{if(0===r.length)return s;const o=Object(c.pipe)(r,n.filterAlertInLens(s,i),x.map(e=>[a(s.meta,e),e]),x.reduce(s.items,(a,[r,o])=>Object(c.pipe)(a.update(r,i.updateWithAlerts([o])),p.b.fold(()=>{const l=e.createAdded(s.id)(r,o);return a.add(t(s,o)?l:n.Items.hideItem(l,i))},l.identity)))),d=n.Items.getActiveItemIndex(o)(s);return Object.assign(Object.assign({},s),{cardIndex:d,items:o,animation:S.b.proceed})},e.getAlertHandler=function(t,a,i=l.constTrue){return(r,s)=>{const o=n.ApplyDiff.applyWithFilter(s,n.ApplyDiff.apply);return n=>Object(c.pipe)(n,o(r,e.add(i,t,a),e.update(i,t,a),e.remove(a)))}}}(j||(j={})),function(e){function t(e,t){return Object(c.pipe)(S.j.getActiveItem(e),p.g.chain(t.hasActiveAlert),p.g.map(e=>!A.a.isPriority(e)),p.g.getOrElse(()=>!1))}function a(e){return Object(c.pipe)(e.items.get(R.a.id),p.g.map(({value:e})=>R.a.isPriorityToggle(e)&&R.a.isExpanded(e)),p.g.getOrElse(()=>!1))}function i(e,t,a){return 0!==e.meta.count&&0===e.meta.priorityCount&&0===e.items.filter(Object(I.b)(t,e=>!a.isScheduledToDispose(e))).size}let r;function s(e,t){return n=>S.e.hasSuccess(n)&&j.isInSuccess(n.currentLens,t)||S.e.isWithPriorityList(n)&&(j.isInSuccess(n.currentLens,t,Object(I.m)(R.a.isPriorityItem))||i(n.currentLens,e,t)&&!a(n.currentLens))}e.ord=Object(F.fold)(p.h.getMonoid())([Object(c.pipe)(p.h.ordBoolean,p.h.contramap(R.b.isPriorityToggleHint)),Object(c.pipe)(p.h.ordBoolean,p.h.contramap(R.a.isPriorityToggle)),D.a.ord]),e.create=function(e,t,a,i,r,s,o,m){const h=Object(c.pipe)(i,p.g.map(({alertIndex:e})=>a[e]),p.g.chain(p.g.fromNullable),p.g.map(e=>"all"===e.view),p.g.getOrElse(()=>!1)),{hash:g}=j.initCardsHash(e,t,a,i,r,m);let f=d(g);f=u(f,h,h,s);const b=Object(c.pipe)(i,p.g.chain(({alertIndex:e})=>f.find(Object(l.flow)(s.hasActiveAlert,p.g.exists(t=>t.id===a[e].id)))),p.g.map(e=>e.index));return{id:e,type:S.i.lensview,kind:S.f.persistent,itemsOrd:m,meta:t,cardIndex:b,items:f,animation:S.b.skip,withPriorityList:!0,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return n.lensHash.hashCode(this)},equals(e){return n.getEq(o).equals(this,e)}}},e.getHasPriorityToggle=function(e){return{toggleNonPriorityList:n=>i=>{const r=a(i);if("collapsed"===n&&!r||"expanded"===n&&r)return i;const s=t(i,e),o=u(i.items,!r,!r&&s,e);return Object.assign(Object.assign({},i),{items:o,cardIndex:s&&r?p.g.none:i.cardIndex,animation:S.b.proceed})}}},e.focusedCardIsNonPriority=t,e.isNonPriorityListOpened=a,e.onlyNonPriorityAlertsLeft=i,e.nonPriorityAlertsVisible=function(e){return!S.e.isWithPriorityList(e)||a(e.currentLens)},function(e){e.fromLensState=e=>t=>e.currentLens.id!==t||S.e.isWithPriorityList(e)&&!a(e.currentLens)?S.h.priorityAlertsOnly:S.h.allAlerts}(r=e.LensViewMode||(e.LensViewMode={})),e.isInSuccess=s,e.isInGlobalSuccess=function(e,t){return a=>(S.e.is(f.a.SpecialId.AllAlerts)(a)||S.e.is(f.a.SpecialId.Priority)(a))&&s(e,t)(a)},e.getSyncVisibleCardsHandler=function(e){return i=>{if(!f.a.isWithSuccessId(i.id))return i;let r=d(i.items);const s=t(i,e);r=u(r,a(i)||s,s,e);const o=n.Items.getActiveItemIndex(r)(i);return Object.assign(Object.assign({},i),{cardIndex:o,items:r,animation:S.b.proceed})}};const o=e=>({transitionTo:t=>a=>C.a.isAnimatable(a)&&a.visualState.transition.type!==t.type?e.transitionTo(t)(a):a});function d(e){return e.has(R.a.id)||0===e.size?e:e=(e=e.add(R.a.create("expanded",v.a.PositionState.empty))).add(R.b.create("visible",v.a.PositionState.empty))}function u(e,t,a,i){const r=o(i),s=0===e.filter(e=>!i.isScheduledToDispose(e)&&Object(c.pipe)(i.hasActiveAlert(e),p.g.exists(Object(I.m)(A.a.isPriority)))).size;return e.map(e=>Object(c.pipe)(i.hasActiveAlert(e),p.g.fold(()=>R.a.isPriorityItem(e)?s?R.a.isPriorityToggle(e)?R.a.transitionTo(e,"hidden"):R.b.transitionTo(e,"hidden"):R.a.isPriorityToggle(e)?t||a?R.a.transitionTo(e,"expanded"):R.a.transitionTo(e,"collapsed"):t||a?R.b.transitionTo(e,"visible"):R.b.transitionTo(e,"hidden"):e,a=>t||A.a.isPriority(a)?C.a.isAnimatable(e)&&C.a.isHidden(e)?r.transitionTo({type:"rendered",clockwise:!0})(e):e:n.Items.hideItem(e,i))))}e.isAlertVisible=function(e,t){return"priority"===t.view||a(e)},e.ensureExpandCardIsPresent=d,e.syncVisibleCards=u,e.getHasAlerts=function(e,t,i){return Object.assign(Object.assign({},n.Capabilities.getHasAlerts(e,t,i)),{getVisibleAlertsCount:e=>Object(c.pipe)(S.j.getActiveItem(e),p.g.chain(t.hasActiveAlert),p.g.exists(g.a.isCapiDone))&&1===e.items.size?0:a(e)?e.meta.count:e.meta.priorityCount})}}(L||(L={})),a.d(t,"a",(function(){return N})),(P=N||(N={})).Prism=n.Prism,P.Items=n.Items,P.Capabilities=n.Capabilities,P.ApplyDiff=n.ApplyDiff,P.filterAlertInLens=n.filterAlertInLens,P.lensHash=n.lensHash,P.getEq=n.getEq,P.Closed=i,P.DraftAI=r,P.Plagiarism=E,P.Premium=w,P.WithBundles=T,P.WithPriority=L,P.WithSuccess=j},bP7Z:function(e,t,a){e.exports=a.p+"files/2126cfb653b81bad8401da0a98c6bd25/inter-bold.woff2"},bSlT:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return s}));var n,i,r=a("LNSM");!function(e){let t,a,n;!function(e){e.VerySatisfied="VerySatisfied",e.SomewhatSatisfied="SomewhatSatisfied",e.Neutral="Neutral",e.SomewhatDissatisfied="SomewhatDissatisfied",e.VeryDissatisfied="VeryDissatisfied"}(t=e.Experience||(e.Experience={})),function(e){e.PlagiarismChecker="PlagiarismChecker",e.ClaritySuggestions="ClaritySuggestions",e.EngagementSuggestions="EngagementSuggestions",e.ToneSuggestions="ToneSuggestions",e.UsingMultipleDevices="UsingMultipleDevices"}(a=e.SatisfactionReason||(e.SatisfactionReason={})),function(e){e.LowQualitySuggestions="LowQualitySuggestions",e.PoorPlagiarismSuggestions="PoorPlagiarismSuggestions",e.NoSupportForDesirableApp="NoSupportForDesirableApp",e.AggressivePremiumPromotion="AggressivePremiumPromotion",e.NoPremiumSuggestions="NoPremiumSuggestions",e.PremiumAndFreeAreIdentical="PremiumAndFreeAreIdentical"}(n=e.DissatisfactionReason||(e.DissatisfactionReason={}))}(n||(n={})),function(e){e.isCompleted=e=>"answer1"in e&&"answer2"in e,e.isFirstQuestion=e=>!("answer1"in e||"answer2"in e),e.isSecondQuestion=e=>"answer1"in e&&!("answer2"in e);const t=[n.Experience.Neutral,n.Experience.SomewhatDissatisfied,n.Experience.VeryDissatisfied];e.isSecondQuestionAboutDissatisfaction=e=>"answer1"in e&&t.includes(e.answer1),e.isSecondAnswerAboutDissatisfaction=t=>e.isCompleted(t)&&Object.keys(n.DissatisfactionReason).includes(t.answer2)}(i||(i={}));class s{constructor(e){this._tracking=e,this.state=r.a.create({})}answer(e){const t=this.state.view(i.isFirstQuestion).get(),a=t?"answer1":"answer2";this.state.modify(t=>Object.assign(Object.assign({},t),{[a]:e})),t?this._tracking.onFirstAnswer(e):this._tracking.onSecondAnswer(e)}}},bYZB:function(e,t,a){"use strict";a.d(t,"g",(function(){return n})),a.d(t,"f",(function(){return i})),a.d(t,"h",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return d}));var n,i,r,s,o,l,c,d,p=a("m6JR"),u=a("6fbX"),m=a("D9EC"),h=a("+JVj");!function(e){e.nonEmpty=function(e){return e.length>0},e.isEmpty=function(e){return 0===e.length},e.toTextRange=function(e){return h.b.create(e.index,e.index+e.length)},e.eq=Object(p.fromEquals)((function(e,t){return e.index===t.index&&e.length===t.length})),e.empty={index:0,length:0}}(n||(n={})),function(e){e.DenaliOtherDocSession="denaliOtherDocSession",e.DenaliSameDocSession="denaliSameDocSession",e.MSOutlook="outlook",e.MSWord="word",e.MSWordOnline="wordOnline",e.MSExcel="excel",e.MSOffice="msoffice",e.ProbablyMSOutlookOnline="probablyMSOutlookOnline",e.GDocs="gdocs",e.GSheets="gsheets",e.ProbablyGMail="probablyGmail",e.CocoaHTMLWriter="cocoaHTMLWriter",e.DropboxPaper="dropbox_paper",e.PlainText="plainText",e.Unknown="unknown",e.Synthetic="synthetic"}(i||(i={})),function(e){e.empty={top:0,bottom:0}}(r||(r={})),function(e){!function(e){e.top="top",e.middle="middle",e.bottom="bottom"}(e.Y||(e.Y={})),function(e){e.left="left",e.middle="middle",e.right="right"}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(a){switch(a){case e.X.left:return t.left;case e.X.middle:return t.left+t.width/2;case e.X.right:return t.right;default:return Object(u.d)(a)}}}}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(a){switch(a){case e.Y.top:return t.top;case e.Y.middle:return t.top+t.height/2;case e.Y.bottom:return t.bottom;default:return Object(u.d)(a)}}}}(e.Y||(e.Y={}))}(s||(s={})),function(e){var t;!function(e){e.textMaybeWithFormatting="text",e.onlyFormatting="formatting"}(t=e.Type||(e.Type={})),e.isTextMaybeWithFormatting=function(e){return e.type===t.textMaybeWithFormatting},e.isOnlyFormatting=function(e){return e.type===t.onlyFormatting}}(o||(o={})),function(e){e.none="none",e.fast="fast",e.initial="initial",e.fake="fake"}(l||(l={})),function(e){var t;!function(e){e.bold="bold",e.italic="italic",e.underline="underline",e.strike="strike",e.header1="header1",e.header2="header2",e.bulletList="bulletList",e.dashedList="dashedList",e.orderedList="orderedList",e.link="link"}(t=e.Type||(e.Type={})),e.is=function(e){return Object(m.v)(t,e)},function(e){e.is=function(e){return void 0!==e[t.link]}}(e.LinkPayload||(e.LinkPayload={}))}(c||(c={})),function(e){e.undo="undo",e.redo="redo",e.cut="cut",e.copy="copy",e.paste="paste",e.selectAll="selectAll"}(d||(d={}))},bZeK:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("ERkP"),r=a("vOOZ"),s=a("D9EC"),o=a("1w6p"),l=a("uO+M"),c=a("6gXa"),d=a("GUi3"),p=a("2qsX"),u=a("tZ26"),m=a("zR/0");!function(e){e.DefaultCounter=o.b.Node.make(({state:e})=>i.createElement(r.a.Fragment,null,e.pipe(m.a.map(({count:e,fontSize:t,lensId:a})=>i.createElement(p.a.OutcomeCounter,{count:e,theme:{counterWrapper:E.get(a),counterContent:S.counterContent},type:"gray",fontSize:t}))))),e.ZeroCounter=o.b.Node.make(()=>i.createElement(u.d.CheckmarkOutcomes,{className:S.zeroCounter})),e.PlagiarismCounter=o.b.Node.make(({state:e})=>i.createElement(r.a.Fragment,null,e.pipe(m.a.map(({count:e,fontSize:t})=>i.createElement(p.a.OutcomeCounter,{count:e,theme:{counterWrapper:S.plagiarismCounterWrapper,counterContent:S.plagiarismCounterContent},suffix:"%",type:"gray",fontSize:t}))))),e.Component=o.b.Union.make("kind",{plagiarism:e.PlagiarismCounter,default:e.DefaultCounter,zero:e.ZeroCounter});const t=e=>!d.a.isPlagiarismId(e);e.createLensCounterFlow=(e,a,n)=>o.a.composeUnion({plagiarism:o.a.fromSideEffect(s.l,a.pipe(m.a.map(e=>({count:e,fontSize:n})))),default:o.a.fromSideEffect(s.l,a.pipe(m.a.combineLatest(e.pipe(m.a.filter(t))),m.a.map(([e,t])=>({count:e,lensId:t,fontSize:n})))),zero:o.a.fromSideEffect(s.l,null)},()=>e.pipe(m.a.combineLatest(a),m.a.map(([e,t])=>({kind:0===t?"zero":e===d.a.SpecialId.Plagiarism?"plagiarism":"default"}))));const a={fill:c.a.important(l.Color.CoreNeutral0)},n={fill:c.a.important(l.Color.CoreNeutral50)},h={fill:c.a.important(l.Color.CoreRed50)},g={fill:c.a.important(l.Color.CoreBlue50)},f={fill:c.a.important(l.Color.CoreGreen50)},b={fill:c.a.important(l.Color.CorePurple50)},y={fill:c.a.important(l.Color.CoreNeutral50)},C={fill:c.a.important(l.Color.CoreCyan50)},v={fill:l.Color.CoreGreen50,minHeight:0,minWidth:c.a.rem(1)},S=c.a.stylesheet({counterWrapper:[],counterContent:[a],zeroCounter:[v],allAlertsCounter:[n],priorityAlertsCounter:[n],correctnessCounter:[h],clarityCounter:[g],engagementCounter:[f],deliveryCounter:[b],voxCounter:[y],plagiarismCounterWrapper:[C],plagiarismCounterContent:[a,{}]}),E=new Map([[d.a.SpecialId.AllAlerts,S.allAlertsCounter],[d.a.SpecialId.Priority,S.priorityAlertsCounter],[d.a.SpecialId.Correctness,S.correctnessCounter],[d.a.SpecialId.Clarity,S.clarityCounter],[d.a.SpecialId.Engagement,S.engagementCounter],[d.a.SpecialId.Delivery,S.deliveryCounter],[d.a.SpecialId.Vox,S.voxCounter],[d.a.SpecialId.CorrectnessPriority,S.correctnessCounter],[d.a.SpecialId.ClarityPriority,S.clarityCounter],[d.a.SpecialId.EngagementPriority,S.engagementCounter],[d.a.SpecialId.DeliveryPriority,S.deliveryCounter],[d.a.SpecialId.VoxPriority,S.voxCounter]])}(n||(n={}))},beGk:function(e,t,a){e.exports=a.p+"files/d5e790be1041e248afed3159b60a25a8/inter-bolditalic.woff2"},cA63:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("I7vG"),r=a("lrqh"),s=a("yA7V"),o=a("dE97");!function(e){e.create=function(e){const t=t=>Object(i.pipe)(e.get(),s.a.get(t),r.g.map(o.a.fromAlertModel)),a=e=>Object(i.pipe)(t(e),r.g.filter(o.a.isInteractable)),n=e=>Object(i.pipe)(t(e),r.g.filter(o.a.isRegistered));return{getById:t,getRegistered:n,getInteractable:a,isRegistered:e=>Object(i.pipe)(n(e),r.g.isSome),isInteractable:e=>Object(i.pipe)(a(e),r.g.isSome)}}}(n||(n={}))},cQVk:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("ERkP"),i=a("vOOZ"),r=a("9NHN"),s=a("rk+4"),o=a("6gXa"),l=a("uO+M");const c=({checked:e,id:t,className:a})=>{const o=n.useContext(s.a.Context);return n.createElement("div",{role:"checkbox","data-name":t},n.createElement(i.a.input,{type:"checkbox",id:t,className:d.switchInput,checked:e,onChange:()=>e.modify(e=>!e)}),n.createElement(i.a.label,Object.assign({htmlFor:t},Object(r.c)(d.switchButton,a)),n.createElement("span",{className:d.on},o.on),n.createElement("span",{className:d.off},o.off)))};var d;!function(e){const t=o.a.rem(1.25),a=e=>({"&:hover":{backgroundColor:e},"&:hover::before":{borderColor:e}}),n=o.a.rem(.15);e.switchButton=o.a.style({$debugName:"switchButton",position:"relative",display:"inline-flex",width:o.a.rem(3),height:o.a.rem(1.25),borderRadius:t,backgroundColor:l.Color.CoreNeutral50,color:l.Color.CoreNeutral0,letterSpacing:o.a.rem(.04625),fontSize:o.a.rem(.625),cursor:"pointer",transition:o.a.seconds(.4),alignItems:"center",userSelect:"none",$nest:Object.assign({"&::before":{position:"absolute",left:0,width:t,height:t,borderWidth:n,borderStyle:"solid",borderColor:l.Color.CoreNeutral50,borderRadius:o.a.percent(50),backgroundColor:l.Color.CoreNeutral0,content:"''",transition:o.a.seconds(.4),boxSizing:"border-box"}},a(l.Color.CoreNeutral40))});const i={position:"relative",textAlign:"center",textTransform:"uppercase",fontWeight:"bold"};e.on=o.a.style(i,{width:o.a.rem(2.125)}),e.off=o.a.style(i,{width:o.a.rem(1.5),marginLeft:t});const r=(t,a)=>({[`& .${e.on}`]:t,[`& .${e.off}`]:a}),s={display:"none"},c={display:"inline-block"};e.switchInput=o.a.style({position:"absolute",opacity:0,$nest:{[`&:checked + .${e.switchButton}`]:{backgroundColor:l.Color.CoreBlue50,$nest:Object.assign(Object.assign(Object.assign({},r(c,s)),{"&::before":{transform:`translateX(${o.a.rem(1.75)})`,borderColor:l.Color.CoreBlue50}}),a(l.Color.CoreBlue40))},[`&:not(:checked) + .${e.switchButton}`]:{$nest:r(s,c)}}})}(d||(d={}))},cVtq:function(e,t,a){"use strict";var n=a("ERkP"),i=a("a5W6"),r=a("OA+g"),s=a("I7vG"),o=a("9NHN"),l=a("LNSM"),c=a("vOOZ"),d=a("zR/0"),p=a("hoSD"),u=a("6fbX"),m=a("D9EC"),h=a("rk+4"),g=a("lRnN"),f=a("wOnQ"),b=a("XxrX"),y=a("9/oM"),C=a("nnns"),v=a("BnIB"),S=a("tZ26"),E=a("FieF"),w=a("BugA"),k=a("uO+M"),_=a("6gXa"),O=a("0Hf4"),A=a("ps/9");const T=e=>({$nest:{[`&[data-indent="${e}"]`]:{marginLeft:_.a.rem(.5*e)}}}),x=(e,t,a,n)=>({$nest:{[`&[data-indent="${t}"]`]:{counterIncrement:`card-list${t}`,counterReset:n,$nest:{"&:before":{content:`'${e}' '\\A\\00a0' counter(card-list${t}, ${a}) '. '`}}}}}),I=e=>[x(e,0,"decimal","card-list1 card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),x(e,1,"lower-alpha","card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),x(e,2,"lower-roman","card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),x(e,3,"decimal","card-list4 card-list5 card-list6 card-list7 card-list8"),x(e,4,"lower-alpha","card-list5 card-list6 card-list7 card-list8"),x(e,5,"lower-roman","card-list6 card-list7 card-list8"),x(e,6,"decimal","card-list7 card-list8"),x(e,7,"lower-alpha","card-list8"),x(e,8,"lower-roman","none")],M="cards-replacements_labels-",j={list:`${M}list`,item:`${M}item`,diff:`${M}diff`,columnList:`${M}columnList`,itemInsert:`${M}itemInsert`,deleteAll:`${M}deleteAll`,crossed:`${M}crossed`,deleteQuote:`${M}deleteQuote`,deletePunctuation:`${M}deletePunctuation`,deleteDoubleComma:`${M}deleteDoubleComma`,deleteApostrophe:`${M}deleteApostrophe`,deleteLetter:`${M}deleteLetter`,deletePunctuationBeforeLetter:`${M}deletePunctuationBeforeLetter`,itemOriginal:`${M}itemOriginal`,itemOriginalStrikeThrough:`${M}itemOriginalStrikeThrough`,itemOriginalContent:`${M}itemOriginalContent`,removeOrContainer:`${M}removeOrContainer`,itemContext:`${M}itemContext`,itemContextShifted:`${M}itemContextShifted`,or:`${M}or`,arrowInsertsList:`${M}arrowInsertsList`,cozyArrowInsertsList:`${M}cozyArrowInsertsList`,inlineHeader:`${M}inlineHeader`,fullSentenceBackground:`${M}fullSentenceBackground`,minimalFullSentenceBackground:`${M}minimalFullSentenceBackground`,fullSentenceDelete:`${M}fullSentenceDelete`,fullSentenceDeleteCollapsed:`${M}fullSentenceDeleteCollapsed`,fullSentenceHidden:`${M}fullSentenceHidden`,fullSentenceListItem:`${M}fullSentenceListItem`,fullSentenceBulletListItem:`${M}fullSentenceBulletListItem`,fullSentenceDashedListItem:`${M}fullSentenceDashedListItem`,fullSentenceOrderedListItem:`${M}fullSentenceOrderedListItem`,fullSentenceOrderedListItemWithFormatting:M+"fullSentenceOrderedListItemWithFormatting",fullSentenceDashedListItemWithFormatting:M+"fullSentenceDashedListItemWithFormatting",fullSentenceBulletListItemWithFormatting:M+"fullSentenceBulletListItemWithFormatting",fullSentenceInsert:`${M}fullSentenceInsert`,fullSentenceInsertPunctuation:`${M}fullSentenceInsertPunctuation`,shortenItBackground:`${M}shortenItBackground`,minimalShortenItBackground:`${M}minimalShortenItBackground`,shortenItDelete:`${M}shortenItDelete`,shortenItDeleteCollapsed:`${M}shortenItDeleteCollapsed`,shortenItInsert:`${M}shortenItInsert`,shortenItInsertPunctuation:`${M}shortenItInsertPunctuation`,itemRemove:`${M}itemRemove`,oneGapInsert:`${M}oneGapInsert`,oneGapInput:`${M}oneGapInput`,smartPhrasesInsert:`${M}smartPhrasesInsert`,smartPhrasesInsertContent:`${M}smartPhrasesInsertContent`,smartPhrasesInsertContentText:`${M}smartPhrasesInsertContentText`,drilldownInsertGroup:`${M}drilldownInsertGroup`,drilldownArrowButton:`${M}drilldownArrowButton`,drilldownIcon:`${M}drilldownIcon`,drilldownOriginalRow:`${M}drilldownOriginalRow`,drilldownBackButton:`${M}drilldownBackButton`,collapsibleDelete:`${M}collapsibleDelete`,collapsibleInsert:`${M}collapsibleInsert`,shortenItCollapsibleDelete:`${M}shortenItCollapsibleDelete`,collapsiblePartContent:`${M}collapsiblePartContent`},L={position:"relative",overflow:"hidden",margin:`0 ${_.a.rem(.5)} ${_.a.rem(.5)} 0`,padding:`${_.a.rem(.25)} ${_.a.rem(.5)}`,borderRadius:_.a.rem(A.s),color:k.Color.CoreNeutral0,textAlign:"left",textOverflow:"ellipsis",whiteSpace:"normal",lineHeight:_.a.rem(1.5),cursor:"pointer",transitionDuration:".2s",overflowWrap:"break-word"},N={position:"relative",fontWeight:"bolder",overflow:"clip",$nest:{"&:after":{position:"absolute",top:"-8%",left:_.a.rem(.3125),width:"1px",height:"120%",background:k.Color.CoreNeutral0,content:"''",opacity:.8}}},P={position:"relative",marginRight:_.a.rem(.5),whiteSpace:"nowrap"},F={overflowX:"hidden",overflowY:"auto",overflowWrap:"anywhere",margin:`${_.a.rem(1)} 0`,padding:_.a.rem(.5),maxHeight:_.a.rem(12),borderRadius:_.a.rem(A.s),background:k.Color.CoreNeutral10,color:k.Color.CoreNeutral90,whiteSpace:"pre-wrap",fontWeight:400,fontStyle:"italic",fontFeatureSettings:`${A.e}, ${A.f}`},D={overflowX:"hidden",overflowY:"auto",overflowWrap:"anywhere",margin:`${_.a.rem(1)} 0`,maxHeight:_.a.rem(12),color:k.Color.CoreNeutral90,whiteSpace:"pre-wrap",fontWeight:400,fontFeatureSettings:`${A.e}, ${A.f}`},R={position:"relative",marginRight:_.a.rem(.5),maxWidth:`calc(100% - ${_.a.rem(.5)})`,overflowWrap:"break-word",$nest:{"&:after":{display:"inline-block",marginLeft:_.a.rem(.5),color:k.Color.CoreNeutral50,content:"'→'",verticalAlign:"middle"}}},B={textDecoration:"line-through",color:k.Color.CoreRed40,textDecorationLine:"line-through"},H=[T(0),T(1),T(2),T(3),T(4),T(5),T(6),T(7),T(8)],W={display:"flex",alignItems:"flex-start",flexWrap:"wrap",fontFeatureSettings:`${A.e}, ${A.f}`},$={background:k.Color.BackgroundCardApply,maxWidth:"100%",$nest:{"&[data-hovered='true']":{background:k.Color.CoreGreen50},"&[data-disabled='true']":{background:k.Color.CoreGreen40}}},V={$nest:{"&:after":{transform:"rotate(-25deg)"}}},U={paddingRight:_.a.rem(.35),$nest:{"&:after":{transform:"rotate(25deg)"}}},G={paddingRight:_.a.rem(.3125),$nest:{"&:before":{content:"' '"},"&:after":{transform:"rotate(25deg)"}}},z={textDecoration:"line-through",whiteSpace:"pre-wrap",$nest:{"&:before":{content:"' '"},"&:after":{background:"transparent !important",content:"' '"}}},q={display:"flex",flexBasis:"100%"},Y={margin:`0 ${_.a.rem(.5)} ${_.a.rem(.5)} 2px`,color:k.Color.CoreNeutral60},X={display:"flex",minWidth:"50%",flexWrap:"wrap",flexBasis:"content"},K={marginBottom:_.a.rem(.25),color:k.Color.CoreNeutral60,fontWeight:400,fontSize:_.a.rem(.8),lineHeight:_.a.rem(1.2),$nest:{"&:first-letter":{textTransform:"capitalize"}}},Z={color:k.Color.CoreRed50,textDecoration:"line-through",fontWeight:600},Q=Object.assign(Object.assign({},Z),{textDecoration:"none"}),J={color:k.Color.CoreNeutral50,textDecoration:"line-through",fontWeight:400},ee=Object.assign(Object.assign({},J),{textDecoration:"none"}),te={background:k.Color.CoreRed50,$nest:{"&[data-hovered='true'], &[data-disabled='true']":{background:k.Color.CoreRed40}}},ae={$nest:{"&:before":{content:"'¶\\A\\00a0-\\00a0'"}}},ne={$nest:{"&:before":{content:"'¶\\A\\00a0\\2022\\00a0'"}}},ie={width:"100%",marginTop:_.a.rem(.5),marginBottom:_.a.rem(.25),boxSizing:"border-box",$nest:{"&[data-disabled='true']":{background:k.Color.CoreNeutral40}}},re={marginTop:_.a.rem(.5),lineHeight:`calc(${_.a.rem(2)} - ${_.a.px(2)})`,padding:`0 ${_.a.rem(.5)}`,border:_.a.important(`${_.a.px(1)} solid ${k.Color.CoreNeutral50}`),color:k.Color.CoreNeutral90,boxSizing:"border-box",$nest:{"&:placeholder-shown":{borderColor:_.a.important(k.Color.CoreNeutral20)}}},se=O.a.style(L,$),oe={position:"relative",margin:`0 ${_.a.rem(.5)} ${_.a.rem(.5)} 0`,padding:`${_.a.rem(.25)} ${_.a.rem(.5)}`,borderRadius:_.a.rem(A.s),cursor:"pointer",transitionDuration:".2s",backgroundColor:k.Color.CoreNeutral10,color:k.Color.CoreGreen60,fontSize:_.a.rem(.875),fontWeight:700,lineHeight:_.a.rem(1.25),width:_.a.percent(100),boxSizing:"border-box",$nest:{"&[data-hovered='true']":{background:k.Color.CoreGreen60,color:k.Color.CoreNeutral0}}},le={display:"flex",justifyContent:"space-between",alignItems:"center",width:_.a.percent(100)},ce={textAlign:"left",textOverflow:"ellipsis",whiteSpace:"normal",overflowWrap:"break-word",overflow:"hidden"},de={margin:`0 ${_.a.rem(.5)} ${_.a.rem(.5)} 0`,$nest:{[`& .${j.itemInsert}`]:{transitionProperty:"background",margin:0},[`& > .${j.itemInsert}:first-child:not(:last-child)`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${j.drilldownArrowButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},pe={boxShadow:"inset 1px 0px 0px rgba(255, 255, 255, 0.3)",paddingLeft:_.a.rem(.1875),paddingRight:_.a.rem(.3125)},ue={width:_.a.rem(1),height:_.a.rem(1),minWidth:_.a.rem(1),minHeight:_.a.rem(1),verticalAlign:"top",marginTop:_.a.rem(.25),$nest:{"& > svg":{transform:"scale(0.75)"},"& > svg *":{fill:_.a.important("white")}}},me={width:_.a.percent(100),marginBottom:_.a.rem(.5),display:"flex",$nest:{"& > *":{marginRight:_.a.rem(.5)}}},he={background:k.Color.CoreNeutral10,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:k.Color.CoreNeutral10}}},ge={display:"inline-block",width:_.a.rem(1),lineHeight:_.a.rem(.625),height:_.a.rem(.625),margin:`0 ${_.a.rem(.25)}`,verticalAlign:"middle",cursor:"pointer",overflowWrap:"normal",textAlign:"center",borderRadius:_.a.rem(A.t)},fe={lineHeight:_.a.rem(.2),verticalAlign:"super",marginLeft:"1px"},be=Object.assign(Object.assign({},ge),{backgroundColor:k.Color.CoreRed10}),ye=Object.assign(Object.assign({},ge),{backgroundColor:k.Color.CoreNeutral10}),Ce=Object.assign(Object.assign({},ge),{backgroundColor:k.Color.CoreGreen10}),ve={list:_.a.joinClasses([j.list,_.a.style(W),O.a.style(W)]),item:_.a.joinClasses([j.item,_.a.style(L),O.a.style(L)]),itemInsert:_.a.joinClasses([j.itemInsert,_.a.style(L,$),se]),deleteAll:_.a.joinClasses([j.deleteAll,_.a.style({textDecoration:"line-through"}),O.a.style({textDecoration:"line-through"})]),crossed:_.a.joinClasses([j.crossed,_.a.style(N)]),deleteQuote:_.a.joinClasses([j.deleteQuote,_.a.style(N,V),O.a.style(N,V)]),deletePunctuation:_.a.joinClasses([j.deletePunctuation,_.a.style(N,U),O.a.style(N,U)]),deleteDoubleComma:_.a.joinClasses([j.deleteDoubleComma,_.a.style({textDecoration:"line-through"}),O.a.style({textDecoration:"line-through"})]),deleteApostrophe:_.a.joinClasses([j.deleteApostrophe,_.a.style(N,G),O.a.style(N,G)]),deleteLetter:_.a.joinClasses([j.deleteLetter,_.a.style(z),O.a.style(z)]),deletePunctuationBeforeLetter:_.a.joinClasses([j.deletePunctuationBeforeLetter,_.a.style({textDecoration:"line-through"}),O.a.style({textDecoration:"line-through"})]),itemOriginal:_.a.joinClasses([j.itemOriginal,_.a.style(R),O.a.style(R)]),itemOriginalStrikeThrough:_.a.joinClasses([j.itemOriginalStrikeThrough,_.a.style(B),O.a.style(B)]),itemOriginalContent:_.a.joinClasses([j.itemOriginalContent,_.a.style({color:k.Color.CoreNeutral90}),O.a.style({color:k.Color.CoreNeutral90})]),removeOrContainer:_.a.joinClasses([j.removeOrContainer,_.a.style(q),O.a.style(q)]),itemContext:_.a.joinClasses([j.itemContext,_.a.style(P)]),itemContextShifted:_.a.joinClasses([j.itemContextShifted,_.a.style(P,{marginRight:"2px"}),O.a.style(P,{marginRight:"2px"})]),or:_.a.joinClasses([j.or,_.a.style(Y),O.a.style(Y)]),arrowInsertsList:_.a.joinClasses([j.arrowInsertsList,_.a.style(X),O.a.style(X)]),columnList:_.a.joinClasses([j.columnList,_.a.style(X,{flexDirection:"column",alignItems:"flex-start",maxWidth:"100%"}),O.a.style(X)]),cozyArrowInsertsList:_.a.joinClasses([j.arrowInsertsList,_.a.style(X,{flex:2,flexBasis:"0%"}),O.a.style(X)]),inlineHeader:_.a.joinClasses([j.inlineHeader,_.a.style(K),O.a.style(K)]),shortenItBackground:_.a.joinClasses([j.shortenItBackground,_.a.style(D),O.a.style(D)]),minimalShortenItBackground:_.a.joinClasses([j.minimalShortenItBackground,_.a.style(D,{lineHeight:_.a.rem(1.3125)}),O.a.style(D,{lineHeight:_.a.rem(1.3125)})]),shortenItDelete:_.a.joinClasses([j.shortenItDelete,_.a.style(J),O.a.style(J)]),shortenItDeleteCollapsed:_.a.joinClasses([j.shortenItDeleteCollapsed,_.a.style(ee),O.a.style(ee)]),shortenItInsert:_.a.joinClasses([j.shortenItInsert]),shortenItInsertPunctuation:_.a.joinClasses([j.shortenItInsertPunctuation]),fullSentenceBackground:_.a.joinClasses([j.fullSentenceBackground,_.a.style(F),O.a.style(F)]),minimalFullSentenceBackground:_.a.joinClasses([j.minimalFullSentenceBackground,_.a.style(F,{lineHeight:_.a.rem(1.3125)}),O.a.style(F,{lineHeight:_.a.rem(1.3125)})]),fullSentenceDelete:_.a.joinClasses([j.fullSentenceDelete,_.a.style(Z),O.a.style(Z)]),fullSentenceDeleteCollapsed:_.a.joinClasses([j.fullSentenceDeleteCollapsed,_.a.style(Q),O.a.style(Q)]),fullSentenceHidden:_.a.joinClasses([j.fullSentenceHidden,_.a.style({display:"none"})]),fullSentenceListItem:_.a.joinClasses([j.fullSentenceListItem,_.a.style(...H),O.a.style(...H)]),fullSentenceBulletListItem:_.a.joinClasses([j.fullSentenceBulletListItem,_.a.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}}),O.a.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}})]),fullSentenceDashedListItem:_.a.joinClasses([j.fullSentenceDashedListItem,_.a.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}}),O.a.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}})]),fullSentenceOrderedListItem:_.a.joinClasses([j.fullSentenceOrderedListItem,_.a.style(...I(""),...H),O.a.style(...I(""),...H)]),fullSentenceOrderedListItemWithFormatting:_.a.joinClasses([j.fullSentenceOrderedListItemWithFormatting,_.a.style(...I("¶"),...H),O.a.style(...I("¶"),...H)]),fullSentenceBulletListItemWithFormatting:_.a.joinClasses([j.fullSentenceBulletListItemWithFormatting,_.a.style(...H,ne),O.a.style(...H,ne)]),fullSentenceDashedListItemWithFormatting:_.a.joinClasses([j.fullSentenceDashedListItemWithFormatting,_.a.style(...H,ae),O.a.style(...H,ae)]),fullSentenceInsert:_.a.joinClasses([j.fullSentenceInsert]),fullSentenceInsertPunctuation:_.a.joinClasses([j.fullSentenceInsertPunctuation]),diff:_.a.joinClasses([j.diff,_.a.style({fontWeight:"bolder"}),O.a.style({fontWeight:"bolder"})]),itemRemove:_.a.joinClasses([j.itemRemove,_.a.style(L,te)]),oneGapInsert:_.a.joinClasses([j.oneGapInsert,_.a.style(L,$,ie),se]),oneGapInput:_.a.joinClasses([j.oneGapInput,_.a.style(re)]),smartPhrasesInsert:_.a.joinClasses([j.smartPhrasesInsert,_.a.style(oe),O.a.style(oe)]),smartPhrasesInsertContent:_.a.joinClasses([j.smartPhrasesInsertContent,_.a.style(le),O.a.style(le)]),smartPhrasesInsertContentText:_.a.joinClasses([j.smartPhrasesInsertContentText,_.a.style(ce),O.a.style(ce)]),drilldownInsertGroup:_.a.joinClasses([j.drilldownInsertGroup,_.a.style(de)]),drilldownArrowButton:_.a.joinClasses([j.drilldownArrowButton,_.a.style(pe)]),drilldownIcon:_.a.joinClasses([j.drilldownIcon,_.a.style(ue)]),drilldownOriginalRow:_.a.joinClasses([j.drilldownOriginalRow,_.a.style(me)]),drilldownBackButton:_.a.joinClasses([j.drilldownBackButton,_.a.style(he)]),collapsibleDelete:_.a.joinClasses([j.collapsibleDelete,_.a.style(be)]),shortenItCollapsibleDelete:_.a.joinClasses([j.shortenItCollapsibleDelete,_.a.style(ye)]),collapsibleInsert:_.a.joinClasses([j.collapsibleInsert,_.a.style(Ce)]),collapsiblePartContent:_.a.joinClasses([j.collapsiblePartContent,_.a.style(fe)])};_.a.cssRule(`.${j.fullSentenceInsert}, .${j.fullSentenceInsertPunctuation}`,{color:k.Color.CoreGreen60,fontWeight:600}),_.a.cssRule(`.${j.shortenItInsert}, .${j.shortenItInsertPunctuation}`,{color:k.Color.CoreBlue50,fontWeight:600}),_.a.cssRule(`.${j.fullSentenceDelete} + .${j.fullSentenceInsert}`,{marginLeft:_.a.rem(.25)}),_.a.cssRule(`.${j.shortenItDelete} + .${j.shortenItInsert}`,{marginLeft:_.a.rem(.25)}),_.a.cssRule(`.${j.fullSentenceOrderedListItemWithFormatting},\n.${j.fullSentenceDashedListItemWithFormatting},\n.${j.fullSentenceBulletListItemWithFormatting}`,{color:k.Color.CoreGreen60,fontWeight:600});var Se=a("StFb");a.d(t,"a",(function(){return Ve})),a.d(t,"c",(function(){return Ue})),a.d(t,"b",(function(){return Ge})),a.d(t,"e",(function(){return qe})),a.d(t,"f",(function(){return Ke})),a.d(t,"d",(function(){return Ze})),a.d(t,"h",(function(){return Qe})),a.d(t,"g",(function(){return Je}));const Ee=({transform:e,title:t,disabled:a,boldifier:i=xe,classes:r=ve,onClick:s})=>n.createElement(C.a,{animationMode:v.a.FromClickPoint,name:"apply-insert",onClick:s,title:t,disabled:a,className:r.itemInsert},e.map((e,t)=>n.createElement(n.Fragment,{key:t},i(e,ve.diff)))),we=({transform:e,theme:t=ve,showOnboarding:a,onClick:i,onExpand:r})=>{const s=n.useContext(h.a.Context),l=e.label.map((e,t)=>n.createElement(n.Fragment,{key:t},e.text)),c=n.createElement(C.a,Object.assign({animationMode:v.a.FromClickPoint,name:"expand-insert",onClick:r,title:s.synfony.drilldownTooltip(l)},Object(o.c)(t.itemInsert,t.drilldownArrowButton)),n.createElement(S.d.Arrow,{direction:S.a.right,className:t.drilldownIcon}));return n.createElement("div",{className:t.drilldownInsertGroup},n.createElement(C.a,{animationMode:v.a.FromClickPoint,name:"apply-insert",onClick:i,title:s.synfony.applyTooltip,className:t.itemInsert},l),Boolean(e.subLabels.length)&&(a?n.createElement(ze,null,c):c))},ke=({transform:e,title:t,classes:a=ve,onClick:i})=>n.createElement(C.a,Object.assign({animationMode:v.a.FromClickPoint,name:"apply-remove"},{onClick:i,title:t,className:a.itemRemove}),e.map((e,t)=>n.createElement(je,{key:t,element:e}))),_e=({transform:e,title:t,classes:a=ve,onClick:i,children:r})=>n.createElement("div",{className:a.removeOrContainer},e.map((r,s)=>"text"===r.type?n.createElement("span",{key:s,className:s===e.length-1?a.itemContextShifted:a.itemContext},r.text):n.createElement(C.a,Object.assign({key:s,animationMode:v.a.FromClickPoint,name:"apply-remove-or"},{onClick:i,title:t,className:a.itemRemove}),n.createElement(je,{element:r}))),r),Oe=()=>n.createElement("span",{className:ve.or},n.useContext(h.a.Context).card.or),Ae=({transform:e,boldifier:t=xe,strikeThrough:a=!0})=>n.createElement("div",Object.assign({},Object(o.c)(ve.itemOriginal,a&&ve.itemOriginalStrikeThrough)),n.createElement("span",{className:ve.itemOriginalContent},e.map((e,a)=>n.createElement(n.Fragment,{key:a},t(e,ve.diff))))),Te=({transform:e,boldifier:t=xe,header:a,classes:i=ve,onClick:r})=>n.createElement(C.a,{name:"apply-insert",onClick:r,className:i.item},a&&n.createElement("div",{className:i.inlineHeader},a),e.map((e,a)=>n.createElement(n.Fragment,{key:a},t(e,ve.diff)))),xe=p.e.pick("text"),Ie=({text:e,type:t},a)=>"text"===t?e:n.createElement("span",{className:a},e);function Me(e,t){return a=>n.createElement(Ve,{index:t,oldText:e,newText:a.text})}const je=({element:e,strikeClass:t})=>"delete"===e.type?n.createElement("span",Object.assign({},Object(o.c)(Se.a.getClass(ve,e.text),t)),e.text):n.createElement(n.Fragment,null,e.text);const Le=/^\W/,Ne=e=>{switch(e.type){case f.l.Delete:return ve.fullSentenceDelete;case f.l.Insert:return Le.test(e.text)?ve.fullSentenceInsertPunctuation:ve.fullSentenceInsert;case f.l.Text:case f.l.List:return"";default:return Object(u.d)(e)}},Pe=e=>{switch(e.type){case f.l.Delete:return ve.fullSentenceHidden;case f.l.List:case f.l.Text:case f.l.Insert:return"";default:return Object(u.d)(e)}},Fe=e=>{switch(e.type){case f.l.Delete:return ve.fullSentenceHidden;case f.l.List:return"bullet"===e.kind?ve.fullSentenceBulletListItemWithFormatting:"dashed"===e.kind?ve.fullSentenceDashedListItemWithFormatting:ve.fullSentenceOrderedListItemWithFormatting;case f.l.Insert:case f.l.Text:return"";default:return Object(u.d)(e)}},De=e=>{switch(e.type){case f.l.Delete:return ve.fullSentenceHidden;case f.l.List:return"bullet"===e.kind?ve.fullSentenceBulletListItem:"dashed"===e.kind?ve.fullSentenceDashedListItem:ve.fullSentenceOrderedListItem;case f.l.Insert:case f.l.Text:return"";default:return Object(u.d)(e)}},Re=({p:e})=>{const t=l.a.create(e.shouldBeCollapsed);return n.createElement(c.a.Fragment,null,t.view(Object(m.c)(n.createElement("span",{className:e.type===f.l.Delete?ve.collapsibleDelete:ve.collapsibleInsert,onClick:()=>t.set(!1)},n.createElement("span",{className:ve.collapsiblePartContent},"…")),n.createElement(n.Fragment,null,e.text))))},Be=({p:e,allEditsCollapsed:t})=>{const a=null!=t?t:l.a.create(!!e.shouldBeCollapsed);return n.createElement(c.a.Fragment,null,a.pipe(d.a.switchMap(t=>{const a=l.a.create(e.shouldBeCollapsed);return a.view(Object(r.flow)(e=>e&&t,Object(m.c)(n.createElement("span",{className:e.type===f.l.Delete?ve.shortenItCollapsibleDelete:ve.collapsibleInsert,onClick:()=>a.set(!1)},n.createElement("span",{className:ve.collapsiblePartContent},"…")),n.createElement(n.Fragment,null,e.text))))})))},He=(e,t)=>{if(!e.shouldBeCollapsed)return e.text;switch(e.type){case f.l.Insert:case f.l.Delete:return t?n.createElement(Re,{p:e}):e.text;case f.l.Text:return n.createElement("span",null," … ");default:Object(u.d)(e)}},We=(e,t)=>{if(!e.shouldBeCollapsed)return e.text;switch(e.type){case f.l.Insert:case f.l.Delete:return n.createElement(Be,{p:e,allEditsCollapsed:t});case f.l.Text:return n.createElement("span",null," … ");default:Object(u.d)(e)}},$e=e=>Object(s.pipe)(t=>Object.assign({children:We(t,e)},Object(o.c)((e=>{switch(e.type){case f.l.Delete:return ve.shortenItDelete;case f.l.Insert:return Le.test(e.text)?ve.shortenItInsertPunctuation:ve.shortenItInsert;case f.l.Text:case f.l.List:return"";default:return Object(u.d)(e)}})(t))),i.map),Ve=({index:e=0,oldText:t,newText:a})=>{const i=Object(Se.b)(t,a);return n.createElement(n.Fragment,null,i?[i[0],n.createElement("span",{key:e,className:ve.diff},i[1]),i[2]]:a)},Ue=e=>n.createElement(w.Base,{className:Object(s.pipe)(e.layoutDensity,b.a.Density.matchOrDefault(b.a.Density.minimal)(()=>ve.minimalFullSentenceBackground,()=>ve.fullSentenceBackground))},Object(s.pipe)(e.replacements.kind===f.f.WithFormatting?(e=>Object(s.pipe)(e,Object(m.c)(Fe,De),t=>a=>a.type===f.l.List?Object.assign(Object.assign({},Object(o.c)(t(a))),{"data-indent":a.indent}):Object.assign({children:He(a,e)},Object(o.c)(t(a))),i.map))(e.showDiff)(e.replacements.labels):(e=>Object(s.pipe)(e,Object(m.c)(Ne,Pe),t=>a=>Object.assign({children:He(a,e)},Object(o.c)(t(a))),i.map))(e.showDiff)(e.replacements.labels),Object(i.mapWithIndex)((e,t)=>n.createElement("span",Object.assign({key:e},t))))),Ge=({replacements:e,layoutDensity:t,selection:a,onClick:i,onDive:r,onBack:s})=>{const o=n.useContext(h.a.Context),{activeLabels:l,original:c}=f.d.getSelectedItems(e,a);return n.createElement(w.Paper,{className:ve.list},n.createElement("div",{className:ve.drilldownOriginalRow},a.length>0&&n.createElement(C.a.Ghost,{name:"go-back",title:o.synfony.back,onClick:s,className:ve.drilldownBackButton},n.createElement(S.d.Arrow,{direction:S.a.left})),n.createElement(Ae,{transform:c,strikeThrough:!a||0===a.length})),n.createElement("div",{className:t===b.a.Density.cozy?ve.cozyArrowInsertsList:ve.arrowInsertsList},l.map((e,t)=>n.createElement(we,{key:t,transform:e,showOnboarding:2===t,onClick:i(e.alternativeId),onExpand:()=>r(t,e.alternativeId)}))))},ze=e=>{const t=n.useContext(h.a.Context);return n.createElement(y.b,{alignment:"topLeft",eventType:"onclick",stepId:g.a.StepId.Synfony,message:t.synfony.onboardingTooltip,dotPosition:{kind:"dotAtPosition",position:y.a.rightCenter}},e.children)},qe=e=>{const t=n.useContext(h.a.Context).card,a=""===e.gapValue;return n.createElement(n.Fragment,null,n.createElement(E.b,{name:"input",placeholder:t.gapCard.placeholder,value:e.gapValue,onChange:t=>e.onChange(t.target.value),onKeyPress:e=>{"Enter"===e.key&&e.currentTarget.nextElementSibling&&e.currentTarget.nextElementSibling.click()},className:ve.oneGapInput}),n.createElement(Ee,{title:a?"":t.todoAction(e.replacements.tooltipText),boldifier:Ie,onClick:e.onApply,classes:{itemInsert:ve.oneGapInsert,inlineHeader:ve.inlineHeader},disabled:a,transform:Ye(e.replacements.labels.left,e.gapValue,e.replacements.labels.right)}))},Ye=(e,t,a)=>[...e,{type:f.l.Insert,text:Xe(e)+(t||"…")+Xe(a)},...a],Xe=e=>e.length?" ":"",Ke=({replacementsLabels:e,layoutDensity:t,onClick:a})=>{const i=n.useContext(h.a.Context).card.todoAction(e.tooltipText);switch(e.type){case f.j.Type.InsertList:return n.createElement(w.Paper,{className:ve.list},e.labels.map((e,t)=>n.createElement(Ee,Object.assign({},{key:t,title:i,onClick:a(t)},{transform:e}))));case f.j.Type.DeleteList:return n.createElement(w.Paper,{className:ve.list},e.labels.map((e,t)=>n.createElement(ke,Object.assign({},{key:t,title:i,onClick:a(t)},{transform:e}))));case f.j.Type.Arrow:return function({labels:e,original:t,onlyReplacements:a},i,r,s){const o=1===t.length,[l]=o?[t[0].text,e[0][0].text].map(Me):[Ie,Ie];return n.createElement(w.Paper,{className:ve.list},!a&&n.createElement(Ae,{transform:t}),n.createElement("div",{className:r===b.a.Density.cozy?ve.cozyArrowInsertsList:e.length>2?ve.columnList:ve.arrowInsertsList},e.map((e,t)=>n.createElement(Ee,Object.assign({},{key:t,title:i,onClick:s(t)},{transform:e,boldifier:l})))))}(e,i,t,a);case f.j.Type.InsertOr:return n.createElement(w.Paper,{className:ve.list},n.createElement(Ee,Object.assign({transform:e.labels[0]},{title:i,onClick:a(0)},{boldifier:Ie})),n.createElement(Oe,null),n.createElement(Ee,Object.assign({transform:e.labels[1]},{title:i,onClick:a(1)},{boldifier:Ie})));case f.j.Type.DeleteOr:return n.createElement(w.Paper,{className:ve.list},e.labels.map((t,r)=>n.createElement(_e,Object.assign({},{key:r,title:i,onClick:a(r)},{transform:t}),r===e.labels.length-2&&n.createElement(Oe,null))));case f.j.Type.FullSentence:case f.j.Type.OneGap:case f.j.Type.Drilldown:case f.j.Type.ShortenIt:case f.j.Type.ToneAI:return null;default:return Object(u.d)(e)}},Ze=({replacementsLabels:e,onClick:t,header:a,customStyle:i})=>{const r=Array.isArray(e.labels)&&1===e.labels.length?i.inlineHeaderOne:i.inlineHeader;switch(e.type){case f.j.Type.DeleteList:return n.createElement("div",{className:i.inlineWrappedList},e.labels.map((e,s)=>n.createElement(Te,Object.assign({},{key:s,onClick:t(s)},{classes:{item:i.itemRemove,inlineHeader:r},boldifier:e=>n.createElement(je,{element:e,strikeClass:i.strike}),transform:e,header:0===s?a:""}))));case f.j.Type.InsertList:case f.j.Type.InsertOr:case f.j.Type.Arrow:return n.createElement("div",{className:i.inlineWrappedList},e.labels.map((e,s)=>n.createElement(Te,Object.assign({},{key:s,onClick:t(s)},{classes:{item:i.itemInsert,inlineHeader:r},transform:e,boldifier:e=>Ie(e,i.diff),header:0===s?a:""}))));case f.j.Type.DeleteOr:case f.j.Type.FullSentence:case f.j.Type.OneGap:case f.j.Type.Drilldown:case f.j.Type.ShortenIt:case f.j.Type.ToneAI:return null;default:return Object(u.d)(e)}},Qe=({replacementsLabels:e,onClick:t})=>{const a=n.useContext(h.a.Context).card.todoAction(e.tooltipText);return n.createElement(n.Fragment,null,e.labels.map((e,i)=>n.createElement(C.a,{key:i,animationMode:v.a.FromClickPoint,name:"apply-smart-phrases-insert",onClick:t(i),title:a,className:ve.smartPhrasesInsert},n.createElement("div",{className:ve.smartPhrasesInsertContent},n.createElement("div",{className:ve.smartPhrasesInsertContentText},e.map((e,t)=>n.createElement(n.Fragment,{key:t},xe(e,ve.diff)))),n.createElement(S.d.SmartPhrases.AddPhraseCirclePlus,null)))))},Je=e=>n.createElement(w.Base,{className:Object(s.pipe)(e.layoutDensity,b.a.Density.matchOrDefault(b.a.Density.minimal)(()=>ve.minimalShortenItBackground,()=>ve.shortenItBackground))},Object(s.pipe)($e(e.collapsed)(e.label.replacement),Object(i.mapWithIndex)((e,t)=>n.createElement("span",Object.assign({key:e},t)))))},cppq:function(e,t,a){e.exports=a.p+"files/6a838499830b0c29490541ffdb6154b7/bg.jpg"},cqAx:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return u})),a.d(t,"d",(function(){return m})),a.d(t,"c",(function(){return h}));var n=a("ERkP"),i=a("I7vG"),r=a("2Jhg"),s=a("lrqh"),o=a("hoSD"),l=a("yAW8"),c=a("Ars8"),d=a("lG5l");const p=e=>n.createElement("div",{className:Object(l.classes)(c.a.akkuratWrapper,e.className),style:e.style},e.children),u=({model:e})=>n.createElement(p,{className:c.a.content},n.createElement("div",{className:c.a.separatorRemover}),n.createElement(d.e,{title:e.title,author:Object(r.h)(e.author)}),n.createElement(d.b,{stats:e.stats}),n.createElement(d.d,{score:e.score,critical:e.criticalIssues,advanced:e.advancedIssues}),Object(i.pipe)(e.plagiarism,s.g.map(e=>n.createElement(d.c,{plagiarismData:e})),s.g.toNullable),!o.e.isEmptyObject(e.issues)&&n.createElement(d.f,{issues:e.issues}),n.createElement(d.a,{stats:e.stats})),m=({title:e})=>n.createElement(p,{style:{width:"100%",marginLeft:"17.4857px",marginRight:"38.4686px",fontFamily:"Akkurat Std",color:"#becafa",letterSpacing:"0.1px",position:"absolute",top:0}},n.createElement("div",{style:{width:"144px",position:"absolute",top:"15.7351px",left:0}},n.createElement("svg",{width:"83.5px",viewBox:"0 0 93 23"},n.createElement("path",{d:"M32.1137999,10.3020362 L32.1137999,10.2761929 C32.1137999,9.3346607 31.3716092,8.67717134 30.4082654,8.67717134 C29.4453916,8.67717134 28.7163619,9.3346607 28.7163619,10.2761929 L28.7163619,10.3020362 C28.7163619,11.2561408 29.4453916,11.9010577 30.4082654,11.9010577 C31.3716092,11.9010577 32.1137999,11.2433355 32.1137999,10.3020362 Z M27.6230525,15.7046709 C27.2846248,15.5761532 27.0632367,15.3053812 27.0632367,14.9440414 C27.0632367,14.5056376 27.4275165,14.1447634 27.8702927,14.1447634 C28.0004933,14.1447634 28.1046069,14.170141 28.1955593,14.2092551 C28.7683012,14.4669891 29.3802912,14.6215829 30.1222469,14.6215829 C31.4757227,14.6215829 32.1137999,13.9771316 32.1137999,12.7389841 L32.1137999,12.4037204 C31.527897,13.1003239 30.8902898,13.5256897 29.8357585,13.5256897 C28.2087204,13.5256897 26.7375,12.352034 26.7375,10.3020362 L26.7375,10.2761929 C26.7375,8.21315707 28.2345725,7.05253935 29.8357585,7.05253935 C30.9159069,7.05253935 31.5539841,7.50398123 32.0874778,8.08394085 L32.0874778,8.07113564 C32.0874778,7.54239686 32.530019,7.10399301 33.0766737,7.10399301 C33.6233284,7.10399301 34.0658696,7.54239686 34.0658696,8.08394085 L34.0658696,12.5327038 C34.0658696,13.7708513 33.7666901,14.6732694 33.1807872,15.2536947 C32.530019,15.8983788 31.527897,16.1821889 30.1744212,16.1821889 C29.2498556,16.1821889 28.4430346,16.0273622 27.6230525,15.7046709 Z M35.5315436,8.05210654 C35.5315436,7.49972039 35.9859169,7.05253935 36.5476701,7.05253935 C37.1089407,7.05253935 37.5633141,7.49972039 37.5633141,8.05210654 L37.5633141,8.36772184 C37.8574624,7.68400743 38.3383791,7.05253935 38.9399473,7.05253935 C39.5680588,7.05253935 39.9285653,7.46053565 39.9285653,8.02574589 C39.9285653,8.55200888 39.5810891,8.8673867 39.1670133,8.9597677 C38.1380977,9.19677603 37.5633141,9.97263396 37.5633141,11.3927841 L37.5633141,13.2608277 C37.5633141,13.8129763 37.1089407,14.2601574 36.5476701,14.2601574 C35.9859169,14.2601574 35.5315436,13.8129763 35.5315436,13.2608277 L35.5315436,8.05210654 Z M39.9285653,12.118996 L39.9285653,12.092591 C39.9285653,10.5651097 41.0750287,9.85971938 42.7113383,9.85971938 C43.406799,9.85971938 43.9094379,9.97736302 44.3988189,10.1471094 L44.3988189,10.0294657 C44.3988189,9.20690326 43.8964126,8.75000271 42.917418,8.75000271 C42.3764007,8.75000271 41.9384233,8.82827463 41.5648749,8.94591827 C41.4488097,8.98505423 41.3713554,8.99825672 41.281341,8.99825672 C40.8303382,8.99825672 40.4695825,8.64556156 40.4695825,8.18842524 C40.4695825,7.8362016 40.6884549,7.53560913 40.997807,7.41796549 C41.6162785,7.18291396 42.2859211,7.05253935 43.2009519,7.05253935 C44.269961,7.05253935 45.042876,7.33992932 45.532257,7.8362016 C46.0476887,8.35817158 46.279819,9.1288671 46.279819,10.0690732 L46.279819,13.2546461 C46.279819,13.7902901 45.8546344,14.2078189 45.3264099,14.2078189 C44.759342,14.2078189 44.3857936,13.8034926 44.3857936,13.3854922 L44.3857936,13.3722897 C43.9094379,13.9079337 43.2523555,14.2601574 42.2989464,14.2601574 C40.997807,14.2601574 39.9285653,13.5029001 39.9285653,12.118996 Z M47.256935,8.09698499 C47.256935,7.54859209 47.7036529,7.10464375 48.2557042,7.10464375 C48.8075183,7.10464375 49.2542362,7.54859209 49.2542362,8.09698499 L49.2542362,8.17549524 C49.713765,7.58772933 50.318483,7.05253935 51.3303003,7.05253935 C52.2498323,7.05253935 52.9463611,7.45711468 53.314079,8.16252808 C53.9316078,7.44414752 54.6675181,7.05253935 55.626906,7.05253935 C57.1117745,7.05253935 58.0052104,7.94043603 58.0052104,9.62498776 L58.0052104,13.2680519 C58.0052104,13.816209 57.5584925,14.2601574 57.0062039,14.2601574 C56.4543898,14.2601574 56.0076719,13.816209 56.0076719,13.2680519 L56.0076719,10.2778252 C56.0076719,9.33758838 55.5875246,8.85426703 54.838329,8.85426703 C54.0893707,8.85426703 53.6298419,9.33758838 53.6298419,10.2778252 L53.6298419,13.2680519 C53.6298419,13.816209 53.183124,14.2601574 52.6308354,14.2601574 C52.0790214,14.2601574 51.6323034,13.816209 51.6323034,13.2680519 L51.6323034,10.2778252 C51.6323034,9.33758838 51.2119188,8.85426703 50.4629605,8.85426703 C49.713765,8.85426703 49.2542362,9.33758838 49.2542362,10.2778252 L49.2542362,13.2680519 C49.2542362,13.816209 48.8075183,14.2601574 48.2557042,14.2601574 C47.7036529,14.2601574 47.256935,13.816209 47.256935,13.2680519 L47.256935,8.09698499 Z M59.4708843,8.09698499 C59.4708843,7.54859209 59.9176023,7.10464375 60.4696536,7.10464375 C61.0214677,7.10464375 61.4681856,7.54859209 61.4681856,8.09698499 L61.4681856,8.17549524 C61.9277144,7.58772933 62.5326696,7.05253935 63.5442497,7.05253935 C64.4637816,7.05253935 65.1603105,7.45711468 65.5280284,8.16252808 C66.1457945,7.44414752 66.8814675,7.05253935 67.8408553,7.05253935 C69.3257239,7.05253935 70.2191598,7.94043603 70.2191598,9.62498776 L70.2191598,13.2680519 C70.2191598,13.816209 69.7724419,14.2601574 69.2201533,14.2601574 C68.6685765,14.2601574 68.2218585,13.816209 68.2218585,13.2680519 L68.2218585,10.2778252 C68.2218585,9.33758838 67.8014739,8.85426703 67.0522784,8.85426703 C66.3033201,8.85426703 65.8437913,9.33758838 65.8437913,10.2778252 L65.8437913,13.2680519 C65.8437913,13.816209 65.3970734,14.2601574 64.8447848,14.2601574 C64.2929707,14.2601574 63.8462528,13.816209 63.8462528,13.2680519 L63.8462528,10.2778252 C63.8462528,9.33758838 63.4261055,8.85426703 62.6769099,8.85426703 C61.9277144,8.85426703 61.4681856,9.33758838 61.4681856,10.2778252 L61.4681856,13.2680519 C61.4681856,13.816209 61.0214677,14.2601574 60.4696536,14.2601574 C59.9176023,14.2601574 59.4708843,13.816209 59.4708843,13.2680519 L59.4708843,8.09698499 Z M70.7077178,12.118996 L70.7077178,12.092591 C70.7077178,10.5651097 71.8542231,9.85971938 73.4903601,9.85971938 C74.1863114,9.85971938 74.6882709,9.97736302 75.1779025,10.1471094 L75.1779025,10.0294657 C75.1779025,9.20690326 74.6757103,8.75000271 73.6964472,8.75000271 C73.1554102,8.75000271 72.7174168,8.82827463 72.3438547,8.94591827 C72.2277853,8.98505423 72.1507933,8.99825672 72.0603103,8.99825672 C71.6092911,8.99825672 71.2487548,8.64556156 71.2487548,8.18842524 C71.2487548,7.8362016 71.4678678,7.53560913 71.776766,7.41796549 C72.3952602,7.18291396 73.0653925,7.05253935 73.979759,7.05253935 C75.0492724,7.05253935 75.8222157,7.33992932 76.3118472,7.8362016 C76.8268326,8.35817158 77.0589714,9.1288671 77.0589714,10.0690732 L77.0589714,13.2546461 C77.0589714,13.7902901 76.6337712,14.2078189 76.10576,14.2078189 C75.538904,14.2078189 75.1653418,13.8034926 75.1653418,13.3854922 L75.1653418,13.3722897 C74.6882709,13.9079337 74.0313971,14.2601574 73.0781857,14.2601574 C71.776766,14.2601574 70.7077178,13.5029001 70.7077178,12.118996 Z M78.5246454,8.05210654 C78.5246454,7.49972039 78.9792601,7.05253935 79.540772,7.05253935 C80.1020425,7.05253935 80.5564159,7.49972039 80.5564159,8.05210654 L80.5564159,8.36772184 C80.8505642,7.68400743 81.3314809,7.05253935 81.9330491,7.05253935 C82.5611606,7.05253935 82.9216671,7.46053565 82.9216671,8.02574589 C82.9216671,8.55200888 82.5741909,8.8673867 82.1603564,8.9597677 C81.1311995,9.19677603 80.5564159,9.97263396 80.5564159,11.3927841 L80.5564159,13.2608277 C80.5564159,13.8129763 80.1020425,14.2601574 79.540772,14.2601574 C78.9792601,14.2601574 78.5246454,13.8129763 78.5246454,13.2608277 L78.5246454,8.05210654 Z M86.930076,16.0926159 C86.6386162,15.9887322 86.293794,15.7541713 86.293794,15.2728277 C86.293794,14.7907791 86.6780997,14.4654962 87.0892063,14.4654962 C87.2480973,14.4654962 87.3407039,14.4915846 87.4203887,14.517438 C87.5926802,14.5696149 87.6986873,14.5957033 87.8446565,14.5957033 C88.2024006,14.5957033 88.374692,14.5305997 88.5601447,14.1789933 L88.6266683,14.0229327 L86.2011873,8.50346419 C86.1483034,8.37349204 86.0951802,8.17794623 86.0951802,8.0482091 C86.0951802,7.48836521 86.5326091,7.09774365 87.0892063,7.09774365 C87.5926802,7.09774365 87.8843792,7.37108473 88.0566707,7.83950155 L89.5941327,11.9010727 L91.0782323,7.85266329 C91.2376019,7.43618832 91.5288223,7.09774365 92.0456967,7.09774365 C92.5628104,7.09774365 93,7.48836521 93,8.00872389 C93,8.16525455 92.9468768,8.38665378 92.9073933,8.47761078 L90.4290285,14.3223623 C89.8324693,15.7412445 89.2361494,16.275 88.0298698,16.275 C87.5792798,16.275 87.2614977,16.2098964 86.930076,16.0926159 Z M83.4102251,5.63428404 C83.4102251,5.09034375 83.8474903,4.65 84.387109,4.65 C84.9274239,4.65 85.364457,5.09034375 85.364457,5.63428404 L85.364457,13.2761072 C85.364457,13.8198136 84.9274239,14.2601574 84.387109,14.2601574 C83.8474903,14.2601574 83.4102251,13.8198136 83.4102251,13.2761072 L83.4102251,5.63428404 Z M44.4248696,11.6618596 L44.4248696,11.3091645 C44.0896995,11.1526206 43.6517221,11.0481795 43.1749012,11.0481795 C42.3373247,11.0481795 41.8223582,11.3876722 41.8223582,12.0145548 L41.8223582,12.0404883 C41.8223582,12.5761323 42.2603356,12.88922 42.8913673,12.88922 C43.8063981,12.88922 44.4248696,12.379981 44.4248696,11.6618596 Z M75.2037215,11.6618596 L75.2037215,11.3091645 C74.8687717,11.1526206 74.4307782,11.0481795 73.9544051,11.0481795 C73.1167979,11.0481795 72.6013474,11.3876722 72.6013474,12.0145548 L72.6013474,12.0404883 C72.6013474,12.5761323 73.0393408,12.88922 73.6708608,12.88922 C74.5854599,12.88922 75.2037215,12.379981 75.2037215,11.6618596 Z",fill:"#2B2D38"}),n.createElement("path",{d:"M22.0875,11.04375 C22.0875,17.1430211 17.1430211,22.0875 11.04375,22.0875 C4.94447894,22.0875 0,17.1430211 0,11.04375 C0,4.94447894 4.94447894,0 11.04375,0 C17.1430211,0 22.0875,4.94447894 22.0875,11.04375 Z M13.08629,12.2595253 C12.6265316,12.2595253 12.2634378,12.6652216 12.3492818,13.1315014 C12.4146868,13.4862794 12.7551774,13.72932 13.1230803,13.72932 L14.2820947,13.72932 L14.9536979,13.6369127 C13.8790847,15.1833207 12.0128791,15.8947626 9.9720999,15.5805306 C8.31100614,15.3247604 6.88387942,14.2231805 6.28200946,12.684316 C4.91523805,9.19122567 7.51749002,5.8563121 10.9086894,5.8563121 C12.6758257,5.8563121 14.2253463,6.86996364 15.1140844,8.09483187 L15.1143248,8.09483187 C15.1145653,8.09483187 15.1148058,8.12076249 15.1152867,8.12123396 C15.3509369,8.45479604 15.8181496,8.55026787 16.1583997,8.31924961 C16.4820581,8.0993108 16.5710281,7.68206354 16.3764964,7.35392332 L16.381546,7.35392332 C15.1523174,5.47301038 12.9436975,4.26912238 10.4599921,4.43224956 C7.22581273,4.64488065 4.60817136,7.23959285 4.42253668,10.4120864 C4.20636365,14.1034282 7.19335071,17.1175092 10.9086894,17.1175092 C12.8600177,17.1175092 14.6069554,16.2844291 15.7974701,14.9365083 L15.6565609,15.7094765 L15.6565609,16.4081889 C15.6565609,16.7688602 15.9044745,17.1026581 16.266366,17.1667774 C16.7419947,17.2509341 17.1558254,16.8949774 17.1558254,16.444256 L17.1558254,12.2595253 L13.08629,12.2595253 Z",fill:"#15C39A"}))),n.createElement("p",{style:{position:"absolute",left:"111.05px",width:"823px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",borderBottom:"2px solid #e4e6f2",transform:"scale(0.563)",transformOrigin:"top left",paddingBottom:"21px",top:0,fontSize:"19px"}},"Report: ",e)),h=()=>n.createElement(p,{style:{marginLeft:"128.8807px",marginRight:"25.4686px",width:"100%",fontFamily:"Akkurat Std",fontSize:"19px",color:"#becafa",letterSpacing:"0.1px",lineHeight:"90px"}},n.createElement("div",{style:{position:"relative",top:"-19px",transform:"scale(0.563)",transformOrigin:"top left",width:"180%",borderTop:"1px solid #e4e6f2"}},n.createElement("div",{style:{position:"absolute",top:0,width:"100%",zIndex:1e3}},"Report was generated on ",(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),n.createElement("span",{style:{float:"right"}},"Page ",n.createElement("span",{className:"pageNumber"})," of ",n.createElement("span",{className:"totalPages"})))))},czBP:function(e,t,a){"use strict";var n=a("ERkP"),i=a("vOOZ"),r=a("D9EC"),s=a("rmZI"),o=a("Sfi4"),l=a("nnns"),c=a("tZ26"),d=a("rk+4"),p=a("BugA"),u=a("uO+M"),m=a("6gXa"),h=a("ps/9");const g={position:"fixed",bottom:m.a.rem(1),right:m.a.rem(1),zIndex:h.j,width:m.a.rem(20),padding:m.a.rem(2),background:u.Color.CoreNeutral0,transition:`transform ${m.a.seconds(.1)} linear ${m.a.seconds(.1)}`,transform:"perspective(100)",borderRadius:m.a.rem(h.r),boxShadow:"0 12px 48px 0 rgba(96, 101, 123, .24)"},f={transitionDelay:m.a.seconds(0),transform:"perspective(100) rotateY(90deg)"},b={transform:"perspective(100) rotateY(-90deg)"},y={paddingBottom:m.a.rem(1)},C={marginBottom:m.a.rem(1)},v={width:m.a.percent(100),borderRadius:m.a.rem(h.s),padding:`${m.a.rem(.5)} 0 ${m.a.rem(.5)} ${m.a.rem(.5)}`,lineHeight:m.a.rem(1.3125),margin:"0 2px"},S={width:m.a.rem(1),height:m.a.rem(1),minHeight:m.a.rem(1),display:"inline-block",verticalAlign:"top",marginLeft:m.a.rem(.25)},E={color:u.Color.CoreBlue50,textDecoration:"none"},w={paddingTop:m.a.rem(2),height:m.a.rem(15),flexGrow:1},k={marginBottom:m.a.rem(.5)},_={$nest:{"& p":{marginTop:m.a.rem(1),marginBottom:m.a.rem(1)},"& p:last-child":{marginBottom:0},"& ul":{paddingLeft:m.a.rem(2)},"& a":{color:u.Color.CoreBlue50,textDecoration:"none"}}},O={marginTop:m.a.rem(1),marginBottom:m.a.rem(1)},A={marginTop:m.a.rem(1)},T=m.a.stylesheet({notification:[g],rotateHide:[g,f],rotateShow:[g,b],closeIcon:[{position:"absolute",top:0,right:0}],question:[y],questionText:[C],answerBtn:[v],answer:[{whiteSpace:"normal"}],outcomeIcon:[S],learnMoreLink:[E],completionScreen:[{display:"flex",flexDirection:"column",alignItems:"flex-start"}],completionContent:[w],completionHeader:[k],badExperience:[_],openQuestion:[O],contactSupport:[A]}),x=({onComplete:e})=>{const t=n.useContext(d.a.Context).gbSatisfactionSurvey.thankYou;return n.createElement(i.a.div,{className:T.completionScreen},n.createElement(c.d.NotificationInfo,{width:40}),n.createElement("div",{className:T.completionContent},n.createElement(p.H3,{className:T.completionHeader},t)," "),n.createElement(l.a.Primary,{name:"survey.done",onClick:e},"done"))};var I=a("8P+J");const M=({answerType:e,viewModel:t,children:a})=>n.createElement(l.a.Flat,{className:T.answerBtn,name:`answer.${e}`,onClick:()=>t.answer(e)},n.createElement("span",{className:T.answer},a));var j=s.b.Experience;const L=({viewModel:e})=>{const t=n.useContext(d.a.Context).premiumOnboardingSurvey.firstQuestion;return n.createElement("div",{className:T.question},n.createElement(p.H3,{className:T.questionText},t.question),n.createElement(M,{answerType:j.VerySatisfied,viewModel:e},n.createElement(I.a,null,"😄")," ",t.answers.verySatisfied),n.createElement(M,{answerType:j.SomewhatSatisfied,viewModel:e},n.createElement(I.a,null,"🙂")," ",t.answers.somewhatSatisfied),n.createElement(M,{answerType:j.Neutral,viewModel:e},n.createElement(I.a,null,"😐")," ",t.answers.neutral),n.createElement(M,{answerType:j.SomewhatDissatisfied,viewModel:e},n.createElement(I.a,null,"🙁")," ",t.answers.somewhatDissatisfied),n.createElement(M,{answerType:j.VeryDissatisfied,viewModel:e},n.createElement(I.a,null,"😞")," ",t.answers.veryDissatisfied))};var N=s.b.dissatisfactionReasons,P=s.b.adminSatisfactionReasons,F=s.b.teamMemberSatisfactionReasons;const D=({viewModel:e})=>n.createElement(i.a.div,{className:T.question},e.state.view(s.a.isSecondQuestionAboutDissatisfaction).view(Object(r.c)(n.createElement(R,{viewModel:e}),n.createElement(B,{viewModel:e})))),R=({viewModel:e})=>{const t=n.useContext(d.a.Context).gbSatisfactionSurvey.secondDissatisfactionQuestion,a=t.answers[e.isAdmin?"admin":"teamMember"];return n.createElement(n.Fragment,null,n.createElement(p.H3,{className:T.questionText},t.question),N.map(t=>n.createElement(M,{key:t,answerType:t,viewModel:e},a[t])))},B=({viewModel:e})=>{const t=n.useContext(d.a.Context).gbSatisfactionSurvey.secondSatisfactionQuestion,a=e.isAdmin?P.map(a=>n.createElement(M,{key:a,answerType:a,viewModel:e},t.answers.admin[a])):F.map(a=>n.createElement(M,{key:a,answerType:a,viewModel:e},t.answers.teamMember[a]));return n.createElement(n.Fragment,null,n.createElement(p.H3,{className:T.questionText},t.question),a)};var H=a("LNSM"),W=a("rmLU"),$=a("eTAx"),V=a("FieF"),U=a("AMXJ");const G=({viewModel:e,onComplete:t})=>n.createElement(i.a.div,{className:T.question},e.state.view(s.a.isSecondQuestionAboutDissatisfaction).view(Object(r.c)(n.createElement(Y,{viewModel:e,onComplete:t}),n.createElement(X,{viewModel:e})))),z=({onComplete:e})=>{const t=n.useContext(W.a.Context),a=n.useContext($.a.Context),i=n.useContext(d.a.Context).gbSatisfactionSurvey.thirdDissatisfactionQuestion;return n.createElement(n.Fragment,null,n.createElement(p.Base,{className:T.badExperience},i.admin.TechnicalDifficulties),n.createElement(l.a.Primary,{className:T.contactSupport,name:"survey.done",onClick:()=>{e(),a.actions.openPopup(new U.a(t.support.newRequest))}},"Contact support"))},q=({viewModel:e})=>{const t=n.useContext(d.a.Context).gbSatisfactionSurvey.thirdDissatisfactionQuestion[e.isAdmin?"admin":"teamMember"].DidntFindItValuable,{title:a,answers:i}=t;return n.createElement(n.Fragment,null,n.createElement(p.H3,{className:T.questionText},a),Object.keys(i).map(t=>{const a=i[t];return n.createElement(M,{key:t,answerType:t,viewModel:e},a)}))},Y=({viewModel:e,onComplete:t})=>{const a=n.useContext(W.a.Context),i=[a.extension.chrome.installURL,a.extension.edge.infoURL,a.extension.firefox.installURL,a.extension.safari.installURL,a.funnel.keyboardInstall,a.funnel.desktopAppInstall],r=n.useContext(d.a.Context).gbSatisfactionSurvey.thirdDissatisfactionQuestion,o=H.a.create(""),c=e.state.view(s.a.getSecondQuestionAnswer).get();return e.isAdmin&&"TechnicalDifficulties"===c?n.createElement(z,{onComplete:t}):"DidntFindItValuable"===c?n.createElement(q,{viewModel:e}):n.createElement(n.Fragment,null,n.createElement(p.Base,{className:T.badExperience},(()=>{if(e.isAdmin){if("DoesntIntegrateWithAnAppIUse"===c)return r.admin.DoesntIntegrateWithAnAppIUse(...i)}else{if("DoesntIntegrateWithAnAppIUse"===c)return r.teamMember.DoesntIntegrateWithAnAppIUse(...i);if("NotSureWhatGrammarlyBusinessDoes"===c)return r.teamMember.NotSureWhatGrammarlyBusinessDoes(...i)}return r[e.isAdmin?"admin":"teamMember"][c]})()),n.createElement(V.c,{name:"survey-feedback-disliked",className:T.openQuestion,autofocus:!0,value:o}),n.createElement(l.a.Primary,{name:"survey.done",disabled:o.view(e=>!e),onClick:()=>e.answer(o.get())},"Share feedback"))},X=({viewModel:e})=>{const t=n.useContext(d.a.Context).gbSatisfactionSurvey.thirdSatisfactionQuestion,a=H.a.create("");return n.createElement(n.Fragment,null,n.createElement(p.H3,{className:T.questionText},t.title),n.createElement(p.Base,null,t.question),n.createElement(V.c,{name:"survey-feedback-liked",className:T.openQuestion,autofocus:!0,value:a}),n.createElement(l.a.Primary,{name:"survey.done",disabled:a.view(e=>!e),onClick:()=>e.answer(a.get())},"Share feedback"))};a.d(t,"a",(function(){return K}));const K=({viewModel:e,onClose:t,onComplete:a})=>n.createElement(Z,{viewModel:e},i=>n.createElement(n.Fragment,null,s.a.isFirstQuestion(i)?n.createElement(L,{viewModel:e}):s.a.isSecondQuestion(i)?n.createElement(D,{viewModel:e}):s.a.isThirdQuestion(i)?n.createElement(G,{viewModel:e,onComplete:a}):n.createElement(x,{onComplete:a}),n.createElement(l.a,{name:"survey-close",className:T.closeIcon,onClick:s.a.isThirdQuestion(i)?a:t},n.createElement(c.d.Close,null)))),Z=({viewModel:e,children:t})=>n.createElement(o.a,{state:e.state,stateToClassMapper:(e,t)=>{const[a,n]=e&&s.a.isFirstQuestion(e)&&s.a.isSecondQuestion(t)||e&&s.a.isSecondQuestion(e)&&s.a.isThirdQuestion(t)||e&&s.a.isThirdQuestion(e)&&s.a.isCompleted(t)?[T.rotateHide,T.rotateShow]:[T.notification,T.notification];return{prev:{start:T.notification,end:a},next:{start:n,end:T.notification}}}},e=>n.createElement(i.a.div,{className:e.view,onTransitionEnd:"prev"===e.type?e.done:r.l},t(e.state)))},dCuA:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a("ERkP"),i=a("vOOZ"),r=a("LNSM"),s=a("lrqh"),o=a("hoSD"),l=a("PrA7"),c=a("NW9S"),d=a("1huE"),p=a("zR/0"),u=a("gy42");class m extends n.Component{constructor(){super(...arguments),this._log=l.Monitoring.Logging.getLogger("CardsListConnectorView",l.Logging.LogLevel.DEBUG),this._subs=new d.a.Keeper}componentDidMount(){this.props.isMaster&&this._setMaster()}componentDidUpdate(e){const t=this.props.name;this._log.debug("lensview did update",{wasMaster:e.isMaster,nowMaster:this.props.isMaster,name:t}),this.props.isMaster?!1===e.isMaster?(this._log.info("reuse released view",t),this.forceUpdate(()=>{this._setMaster(),this._log.trace("view force update complete",t)})):(this._log.trace("set master view",t),this._setMaster()):(this._log.trace("release master view",t),this._clearSubs())}componentWillUnmount(){this._clearSubs()}render(){const{className:e,children:t,height:a}=this.props;return n.createElement(i.a.div,{"data-purpose":"card-list-connector",style:a.pipe(p.a.map(e=>({height:e}))),className:e},t)}_setMaster(){this._setSubs()}_setSubs(){this._clearSubs(),this._subs.push(this.props.stateSyncListener.subscribe())}_clearSubs(){this._subs.dispose()}}!function(e){let t;!function(e){e.create=()=>r.a.create({scrollProvider:s.g.none,scrollConsumer:s.g.none,viewport:s.g.none,title:s.g.none})}(t=e.Elements||(e.Elements={})),e.boundedScrollListener=(e,t)=>p.a.mergeStatic(p.a.defer(()=>{e.paddingTop.set(0)}),t.view("viewport").pipe(p.a.switchMap(s.g.fold(()=>p.a.EMPTY,e=>u.a.getResizeObservable(e).pipe(p.a.map(t=>Object.assign(Object.assign({},t),{top:e.offsetTop,height:e.offsetHeight}))))),p.a.tap(t=>e.viewport.set({top:c.b.FromWindowTop.ISO.wrap(t.top),height:t.height}))),t.view("scrollProvider").pipe(p.a.switchMap(s.g.fold(()=>p.a.EMPTY,t=>p.a.fromEvent(t,"scroll").pipe(p.a.map(()=>t.scrollTop),p.a.startWith(t.scrollTop),p.a.tap(t=>e.scrollTop.set(t)),p.a.mapTo(u.b.voidValue))))),t.view("title").pipe(p.a.switchMap(s.g.fold(()=>p.a.of(o.c.Rect.empty),e=>u.a.getResizeObservable(e))),p.a.map(e=>e.height),p.a.shareReplay({bufferSize:1,refCount:!0}),p.a.tap(t=>e.paddingTop.set(t))),t.view("scrollConsumer").pipe(p.a.switchMap(s.g.fold(()=>p.a.EMPTY,t=>e.scrollOffset.pipe(p.a.tap(e=>{t.scrollTop+=e})))))).pipe(p.a.mapTo(void 0)),e.superScrollListener=(e,t)=>{const a=t.view("title").pipe(p.a.switchMap(s.g.fold(()=>p.a.of(o.c.Rect.empty),e=>u.a.getResizeObservable(e))),p.a.map(e=>e.height),p.a.shareReplay({bufferSize:1,refCount:!0}));return p.a.mergeStatic(p.a.defer(()=>{e.paddingTop.set(0)}),t.view("viewport").pipe(p.a.switchMap(s.g.fold(()=>p.a.EMPTY,e=>u.a.getResizeObservable(e).pipe(p.a.map(t=>Object.assign(Object.assign({},t),{top:e.offsetTop,height:e.offsetHeight}))))),p.a.tap(t=>e.viewport.set({top:c.b.FromWindowTop.ISO.wrap(t.top),height:t.height}))),t.view("scrollProvider").pipe(p.a.switchMap(s.g.fold(()=>p.a.EMPTY,t=>p.a.fromEvent(t,"scroll").pipe(p.a.map(()=>t.scrollTop),p.a.startWith(t.scrollTop),p.a.tap(t=>e.scrollTop.set(t)),p.a.mapTo(u.b.voidValue))))),t.view("scrollConsumer").pipe(p.a.switchMap(s.g.fold(()=>p.a.EMPTY,t=>e.scrollOffset.pipe(p.a.scan((e,t)=>e-t,0),p.a.tap(e=>{t.style.transform=`translateY(${e}px)`})))),p.a.combineLatest(a),p.a.tap(([t,a])=>e.paddingTop.set(t+a)))).pipe(p.a.mapTo(void 0))}}(m||(m={}))},"dP+m":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("ERkP");function i({href:e,children:t,className:a}){return n.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:a,href:e},t)}},dS2Y:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n,i,r=a("OA+g"),s=a("I7vG"),o=a("LNSM"),l=a("zR/0"),c=a("kFFO"),d=a("W39u"),p=a("XxrX"),u=a("lrqh"),m=a("6fbX");!function(e){e.id="DraftAIItemId",e.Kind="DraftAIItem",e.eq=u.c.fromEquals((e,t)=>d.a.PositionState.eq.equals(e.positionState,t.positionState)&&e.visibilityState===t.visibilityState),e.isDraftAIItem=function(t){return t.id===e.id},e.changePosition=e=>t=>new h(e.visibilityState,t),e.createCard=e=>()=>Object(s.pipe)(e,u.g.fold(()=>new h("visible",d.a.PositionState.changeWatched(d.a.PositionState.empty,!0)),e=>new h(e.visibilityState,e.positionState)))}(n||(n={}));class h{constructor(e,t){this.visibilityState=e,this.positionState=t,this.kind=n.Kind,this.id=n.id,this.renderOptions=p.a.defaultOptions}equals(e){return n.eq.equals(this,e)}hashCode(){return Object(c.a)({positionState:JSON.stringify(this.positionState),visibilityState:this.visibilityState})}}!function(e){let t;!function(e){let t,a;!function(e){e.draftAIMiniCardClick="draftAIMiniCardClick",e.draftAIMiniCardMount="draftAIMiniCardMount"}(t=e.Kind||(e.Kind={})),function(e){let t;!function(e){e.collapsed="collapsed",e.expanded="expanded"}(t=e.NextState||(e.NextState={}))}(a=e.ToggleNonPriorityCards||(e.ToggleNonPriorityCards={})),e.match=e=>a=>{switch(a.kind){case t.draftAIMiniCardMount:return e.onMount(a);case t.draftAIMiniCardClick:return e.onCardClick(a);default:return Object(m.d)(a)}},e.isMiniCardClick=function(t){return t.kind===e.Kind.draftAIMiniCardClick}}(t=e.Event||(e.Event={})),e.create=e=>{const n=new l.a.Subject,i=o.a.create({node:u.g.none,title:e});return n.subscribe(Object(r.flow)(t.match({onMount:a,onCardClick:()=>r.identity}),i.modify.bind(i))),{state:i,events:n}};const a=e=>t=>({node:e.node,title:t.title})}(i||(i={}))},dgw0:function(e,t,a){"use strict";var n=a("ERkP"),i=a("I7vG"),r=a("LNSM"),s=a("9NHN"),o=a("vOOZ"),l=a("zR/0"),c=a("hoSD"),d=a("lrqh"),p=a("6fbX"),u=a("D9EC"),m=a("Urso"),h=a("eTAx"),g=a("By/D"),f=a("Sfi4"),b=a("gy42"),y=a("uO+M"),C=a("6gXa"),v=a("ps/9");const S={position:"absolute",zIndex:v.i,display:"flex",flexDirection:"column",margin:`${C.a.rem(.5)} 0`,padding:`${C.a.rem(.5)} 0`,minWidth:C.a.percent(100),borderRadius:C.a.rem(v.r),background:y.Color.CoreNeutral0,boxShadow:y.Elevation.Z200,opacity:1,transition:"opacity .2s"},E={margin:C.a.rem(.5),height:C.a.px(1),backgroundColor:y.Color.CoreNeutral20},w={wrapper:C.a.style({position:"relative"}),list:C.a.style(S),transparent:C.a.style({opacity:0}),hidden:C.a.style({display:"none"}),delimiter:C.a.style(E)};a.d(t,"a",(function(){return _})),a.d(t,"b",(function(){return O}));class k extends f.a{}class _ extends n.PureComponent{constructor(){super(...arguments),this._uuid=c.f.alphanumeric(12),this._initialState=!1,this._hovered=r.a.create(this._initialState),this._hidden=r.a.create(!this._initialState),this._listPosState=r.a.create({}),this._dropdownEl=null,this._subs=[],this._viewport=r.a.create(c.c.Rect.empty),this.hovered=this._hovered.pipe(l.a.pairwise(),l.a.switchMap(([e,t])=>t?l.a.timer(this.props.showDelay).pipe(l.a.mapTo(!0)):e?l.a.timer(void 0===this.props.closeDelay?_.defaultProps.closeDelay:this.props.closeDelay).pipe(l.a.mapTo(!1)):l.a.of(!1)),l.a.merge(_._hoveredForce.pipe(l.a.map(d.g.exists(e=>e===this._uuid)))),l.a.distinctUntilChanged(),l.a.tap(e=>e&&_._hoveredForce.next(d.g.some(this._uuid))),l.a.tap(e=>e&&this._hidden.set(!1)),l.a.share(),l.a.startWith(this._initialState)),this._handleClickForAppearanceHover=e=>{const t=e.target;if(c.c.isDisabled(t)||this.props.dontCloseOnClickInside)return;const a=!c.c.hasParentWithClassName(t,w.list);_._hoveredForce.next(a?d.g.some(this._uuid):d.g.none),this._hovered.set(a)},this._handleMouseEnterForAppearanceHover=()=>{this._hovered.set(!0)},this._handleClickForAppearanceClick=(e,t)=>{t&&!e.isTrusted||this._hovered.modify(e=>!e)},this._handleMouseEnterForAppearanceClick=e=>{const t=e.target;c.c.hasParentWithClassName(t,w.list)&&(_._hoveredForce.next(d.g.some(this._uuid)),this._hovered.set(!0))}}_getHAlign(e){switch(e){case"left":case"auto":return{left:"0"};case"right":return{right:"0"};case"center":return{right:"50%",marginRight:`-${(this._dropdownEl?this._dropdownEl.offsetWidth:0)/2}px`};default:return Object(p.d)(e)}}_getVAlign(e){switch(e){case"top":return{bottom:"100%"};case"bottom":case"auto":return{top:"100%"};default:return Object(p.d)(e)}}calcDropdownPosition(){const e=this.props.align,t=this.props.vAlign;this._listPosState.set(Object.assign(Object.assign({},this._getHAlign(e)),this._getVAlign(t)));const a="auto"===e,n="auto"===t;(a||n)&&requestAnimationFrame(()=>{if(this._dropdownEl){const i=this._viewport.get(),r=this._dropdownEl.getBoundingClientRect();this._listPosState.set(Object.assign(Object.assign({},this._getHAlign(a?i.right<r.right?"right":"left":e)),this._getVAlign(n?i.bottom<r.bottom?"top":"bottom":t)))}})}componentDidMount(){this._subs.push(this.hovered.pipe(l.a.tap(e=>{this.props.onVisibilityChange&&this.props.onVisibilityChange(e)}),l.a.switchMapTo(Object(i.pipe)(d.g.fromNullable(this.props.customPosition),d.g.fold(()=>l.a.of(d.g.none),({top:e,left:t})=>l.a.combineLatestStatic(b.b.toObservable(e),b.b.toObservable(t)).pipe(l.a.map(d.g.some)))))).subscribe(d.g.fold(()=>this.calcDropdownPosition(),([e,t])=>this._listPosState.set({top:e,left:t}))),this.context.pipe(l.a.pluck("rect")).subscribe(b.b.toAtom(this._viewport))),this.props.forceHide&&this._subs.push(this._hidden.pipe(l.a.switchMap(b.b.orEmptyRight(this.props.forceHide.pipe(l.a.first())))).subscribe(()=>this._hidden.set(!0)))}componentWillUnmount(){this._subs.forEach(e=>e.unsubscribe()),this._subs=[]}componentWillReciveProps(){this.calcDropdownPosition()}mapStateToClass(e,t){const a={start:"",end:""};return t?{prev:a,next:{start:w.transparent,end:""}}:{prev:{start:"",end:w.transparent},next:a}}_behaviour(e){return"mouseClick"===this.props.appearanceBehavior?{onClickCapture:t=>this._handleClickForAppearanceClick(t,e),onMouseEnter:this._handleMouseEnterForAppearanceClick,onMouseLeave:()=>this._hovered.set(this._initialState)}:{onClickCapture:this._handleClickForAppearanceHover,onMouseEnter:this._handleMouseEnterForAppearanceHover,onMouseLeave:()=>this._hovered.set(this._initialState)}}render(){const{label:e,theme:t={}}=this.props;return n.createElement(h.a.Context.Consumer,null,a=>n.createElement(m.a.Context.Consumer,null,i=>n.createElement(m.a.Context.Provider,{value:m.a.withValue(i,{hovered:this._hovered})},n.createElement("div",Object.assign({},Object(s.c)(w.wrapper,t.dropdownContainer),this._behaviour(a.has(h.a.Flag.onlyTrustedEvents))),e,n.createElement(k,{state:this.hovered,stateToClassMapper:this.mapStateToClass},e=>e.state?n.createElement(O,Object.assign({key:"list",name:this.props.name,onTransitionEnd:"prev"===e.type?()=>this._hidden.set(!0):u.l},Object(s.c)(t.dropdownList,e.view,this._hidden.view(e=>e?w.hidden:"")),{mount:e=>this._dropdownEl=e,style:this._listPosState}),this.props.children):null)))))}}_.defaultProps={align:"auto",vAlign:"auto",showDelay:500,closeDelay:500,appearanceBehavior:"mouseHover"},_.Delimiter=()=>n.createElement("div",{className:w.delimiter}),_._hoveredForce=new l.a.Subject,_.contextType=g.a.Context;class O extends n.Component{constructor(){super(...arguments),this._elementState=m.a.emptyWithName(`${void 0!==this.context.name?`${this.context.name}/`:""}dropdown-${this.props.name}`)}render(){return n.createElement(m.a.Context.Provider,{value:this._elementState},n.createElement(o.a.div,Object.assign({},Object(s.c)(this.props.className,w.list),{style:this.props.style,mount:this.props.mount,role:"dropdown-list","data-name":"dropdown-"+this.props.name,onTransitionEnd:this.props.onTransitionEnd}),this.props.children))}}O.displayName="DropdownList",O.contextType=m.a.Context},dx6p:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("uO+M"),i=a("6gXa");const r=(e,t,a,r,s,o)=>Object.assign({position:"absolute",right:e,left:e,zIndex:t,display:"block",height:i.a.rem(2),borderRadius:s,backgroundColor:n.Color.CoreNeutral0,boxShadow:r,content:"' '"},o&&"bottom"!==o?{top:a}:{bottom:a})},eLeT:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a("uO+M"),i=a("6gXa"),r=a("ps/9"),s=a("dx6p");const o=`0 ${i.a.rem(.25)} ${i.a.rem(1.625)} 0 rgba(198, 203, 222, .25)`,l={marginRight:i.a.rem(1),flexShrink:0,maxWidth:i.a.percent(100)},c={padding:`0 ${i.a.rem(1)}`},d={padding:`0 ${i.a.rem(1.9)} 0 ${i.a.rem(1)}`},p={position:"absolute",top:i.a.rem(.27),right:i.a.rem(.5)},u={display:"grid",width:i.a.percent(100),gridGap:i.a.rem(.5),gridTemplateColumns:"fit-content(60%) auto min-content"},m={minWidth:i.a.rem(7)},h={marginLeft:i.a.rem(.5)},g={color:n.Color.CoreNeutral90,whiteSpace:"nowrap",fontWeight:300,lineHeight:i.a.rem(1.5)},f={$nest:{"&:before":Object(s.a)(i.a.rem(.5),-10,i.a.rem(-.5),o,i.a.rem(r.r)),"&:after":Object(s.a)(i.a.rem(1),-20,i.a.rem(-1),o,i.a.rem(r.r))}},b={transition:"opacity .2s"},y=i.a.prefixedStylesheet("super",{updateAllBtnCommon:[l],updateAllBtn:[l,c],updateAllBtnLoading:[l,d],updateBtnSpinner:[p],optionsContainer:[u],optionLabel:[m],optionRadio:[h],optionSecondaryAttribute:[g],optionExample:[g,{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontStyle:"italic"}],superWrapper:[f],loadingWrapper:[b],loadingWrapperInvisible:[b,{opacity:0,pointerEvents:"none"}]})},eZux:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("LNSM"),r=a("prnJ"),s=a("lrqh"),o=a("aIes");!function(e){e.create=function(e,t,a,n){const l=o.b.O.unwrap(t.style),c=o.b.O.unwrap(t.audience),d=o.b.O.unwrap(t.domain),p=i.a.create(e),u=p.lens("style").lens(l),m=p.lens("domain").lens(d),h={audience:{items:r.a.audiences,current:p.lens("audience").lens(c),default:s.g.some(t.audience)},formality:{items:r.a.formalityLevels,current:u,default:s.g.some(t.style),shouldDisable:e=>m.view(t=>!!t&&!r.a.isStyleValidWithDomain(t,e))},domain:{items:r.a.domains,current:m,default:s.g.some(t.domain),shouldDisable:e=>u.view(t=>a.isFree?"general"!==e:!r.a.isStyleValidWithDomain(e,t))},intent:{items:r.a.goals,current:p.lens("goals")},tone:{items:r.a.tone,current:p.lens("emotions")}};return{localContext:p,blocks:h,showSetGoalsLoader:i.a.create(!a.demoMode&&n)}}}(n||(n={}))},eihE:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("ERkP"),r=a("07Tf"),s=a("BwCH");!function(e){e.Context=i.createContext(r.a.invariantContent("CopyToClipboard")),e.ContextMock=({children:t})=>i.createElement(e.Context.Provider,{value:e=>s.a.copy(e,!1),children:t})}(n||(n={}))},es5d:function(e,t,a){"use strict";a.d(t,"a",(function(){return _}));var n=a("uO+M"),i=a("6gXa"),r=a("ps/9");const s={$nest:{"&:before":{position:"absolute",width:i.a.px(10),height:i.a.px(10),borderRadius:i.a.percent(50),content:"''",transform:"scale(.5)"}}},o={opacity:1,transition:"opacity .3s"},l={color:n.Color.CoreNeutral50,textTransform:"uppercase",letterSpacing:n.Text.SubheadingLetterSpacing,fontSize:i.a.rem(n.Text.SubheadingSize),lineHeight:i.a.rem(n.Text.SubheadingLineHeight),$nest:{"&:not(:last-child)":{marginRight:i.a.rem(.25)}}},c={position:"relative",display:"inline-block",$nest:{"&:before":{top:0,bottom:i.a.px(2),left:i.a.rem(-1.1),margin:"auto 0"}}},d={$nest:{"&:before":{top:0,bottom:0,left:i.a.rem(-1.1),margin:`${i.a.rem(.25)} 0 auto 0`}}},p={margin:`0 ${i.a.rem(.4)} 0 ${i.a.rem(.2)}`,width:i.a.rem(.85),height:i.a.rem(.85),objectFit:"contain"},u={position:"absolute",top:0,bottom:0,left:i.a.rem(-1),margin:"auto",background:n.Color.CoreNeutral0,transform:"translateX(-50%)"},m={minWidth:"initial",minHeight:"initial",padding:`${i.a.rem(.3)} ${i.a.rem(.25)}`,cursor:"pointer",borderRadius:i.a.percent(100),marginLeft:i.a.rem(.5),$nest:{"&:hover":{background:n.Color.CoreNeutral10}}},h={display:"flex",alignItems:"center",padding:`0 ${i.a.rem(.25)}`,borderRadius:i.a.rem(r.s),cursor:"pointer",background:n.Color.CoreYellow20,color:n.Color.CoreYellow80,marginLeft:i.a.rem(.5),$nest:{"&:hover":{background:n.Color.CoreYellow10}}},g={minWidth:"initial",minHeight:"initial",fill:n.Color.CoreYellow80,marginLeft:i.a.rem(.3)},f={display:"flex",alignItems:"flex-start",top:i.a.rem(.125),minWidth:"initial",minHeight:"initial",background:n.Color.CoreNeutral0},b={color:n.Color.CoreNeutral90,textTransform:"none",letterSpacing:n.Text.SmallLetterSpacing,fontWeight:n.Text.SmallWeight,fontSize:i.a.rem(n.Text.SmallSize),lineHeight:i.a.rem(n.Text.SmallLineHeight),$nest:{"&:first-letter":{textTransform:"uppercase"}}},y={color:n.Color.CoreNeutral50,textTransform:"none"},C={width:i.a.rem(1),height:i.a.rem(1)},v={display:"inline-flex",padding:`0 ${i.a.rem(.25)}`,borderRadius:i.a.rem(r.s),background:"linear-gradient(269.73deg, rgba(215, 248, 240, .8) .02%, rgba(202, 235, 250, .8) 99.98%)",textTransform:"uppercase"},S={display:"inline-flex",marginLeft:i.a.rem(.1),minWidth:0,minHeight:0},E={color:n.Color.CoreNeutral80,textTransform:"none"},w={width:i.a.rem(1),height:i.a.rem(1),marginRight:i.a.rem(.375)},k={color:n.Color.CoreRed60},_=i.a.stylesheet({lessIcon:[{transform:"rotate(180deg)"}],more:[o],moreHidden:[o,{position:"absolute",overflow:"hidden",height:0,opacity:0,transition:"none"}],commonLabel:[l],labelContainer:[{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"start"}],lens:[l,c],lensMinimal:[d],voxLogo:[p],cardLogo:[u],dualItemLabel:[{display:"inline-flex",alignItems:"center"}],premiumPersistentTooltipIcon:[m],newPremiumLabel:[h],newPremiumLabelIcon:[g],takeawayIcon:[f],minimalTitle:[b],voxTitle:[{display:"flex",alignItems:"center"}],toneTitle:[y],toneLogo:[u,C],fluencyLabel:[l,v],fluencyInfo:[S],dot:[s],smartPhrasesLabel:[{textTransform:"none"}],sentenceLevelBrandTonesLabel:[E],sentenceLevelBrandTonesLabelImage:[w],sentenceLevelBrandTonesOffBrand:[k]})},ev6t:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("yrKE"),i=a("6gXa"),r=a("uO+M");const s=i.a.rem(1),o={paddingLeft:i.a.rem(2),paddingRight:s},l=i.a.rem(1.5),c={height:i.a.rem(2.5),borderRadius:i.a.rem(2.125),display:"flex",flexDirection:"row",alignItems:"center",transition:"opacity .2s, background-color .3s",opacity:1,$nest:{"&[data-textpos='right']":{padding:`${i.a.rem(.5)} ${i.a.rem(1)} ${i.a.rem(.5)} ${i.a.rem(.5)}`}}},d=i.a.prefixedStylesheet("draft_ai_card",{blue:[{background:r.Color.CoreNeutral10}],titleIcon:[{display:"block",position:"absolute",left:i.a.rem(-1.625),top:i.a.rem(.375),width:i.a.rem(1.25),height:i.a.rem(1.25)}],cardWrapper:[{background:r.Color.CoreNeutral0,borderRadius:i.a.rem(.5),paddingBottom:i.a.rem(.5)},o],cardHeader:[{position:"relative",paddingTop:i.a.rem(.5),paddingBottom:i.a.rem(.5),paddingLeft:i.a.rem(2),paddingRight:i.a.rem(.5)},o],cardHeaderSpan:[{lineHeight:i.a.rem(2)}],cardSectionsRow:[{position:"relative"}],cardActionsRow:[{display:"flex",height:i.a.rem(2.5),marginTop:i.a.rem(.25),marginBottom:i.a.rem(.5)}],cardActionsSeparator:[{flex:1}],cornerButton:[{position:"absolute",top:i.a.rem(.5),right:s}],generateMoreIdle:[c,{$nest:{[`& .${n.b.swoosh}`]:{animation:"none"}}}],generateMoreLoading:[c,{pointerEvents:"none",backgroundColor:"currentColor"}],generateMoreHidden:[c,{pointerEvents:"none",backgroundColor:"currentColor",opacity:0,$nest:{[`& .${n.b.swoosh}`]:{animationPlayState:"paused"}}}],generateMoreAnimationContainer:[{display:"flex"}],generateMoreLogo:[{width:l,height:l,marginRight:i.a.rem(.5)}]})},f3nf:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("93Qa"),r=a("a5W6"),s=a("OA+g"),o=a("I7vG"),l=a("94k3"),c=a("24uI"),d=a("4ae2"),p=a("lrqh"),u=a("6fbX"),m=a("Z0Em"),h=a("wOnQ");function g(e,{text:t,ops:a}){a.reduce((t,a,n)=>l.a.AlternativeOperation.isInsertString(a)?(e.insertString(a.insert,a,n),t):l.a.AlternativeOperation.isInsertGap(a)?(e.insertGap("",a,n),t):l.a.AlternativeOperation.isInsert(a)?t:l.a.AlternativeOperation.isDelete(a)?(e.remove(t.slice(0,a.delete),a,n),t.slice(a.delete)):l.a.AlternativeOperation.isRetain(a)?(e.retain(t.slice(0,a.retain),a,n),t.slice(a.retain)):Object(u.d)(a),t)}function f(e){return 0===e.replace(/ /g,"").length}function b(e,t){Object(o.pipe)(e,r.last,p.g.fold(()=>{f(t.text)||e.push(t)},a=>{a.type===t.type?a.text+=t.text:e.push(t)}))}function y(e){return Object(o.pipe)(p.b.tryCatchError(()=>Object(o.pipe)(e,p.f.map(t=>{const a=[];return g({insertString(t,{type:a}){if(a===l.a.AlternativeOperation.Type.Main)throw new L("Remove transform contains main insert",e)},insertGap(){throw new L("Remove transform contains gap insert",e)},retain(e,{type:t}){l.a.AlternativeOperation.isOptionalType(t)||b(a,{type:h.l.Text,text:e})},remove(e,{type:t}){b(a,{type:t!==l.a.AlternativeOperation.Type.Main||f(e)?h.l.Text:h.l.Delete,text:e})}},t),a}),r.flatten)),p.b.chain(Object(s.flow)(p.b.fromPredicate(e=>e.length>0,()=>new L("Remove transform contains no data",e)),p.b.map(e=>({type:n.Type.Remove,remove:e})))))}function C(e){return Object(o.pipe)(p.b.tryCatchError(()=>Object(o.pipe)(e,p.f.map(t=>{const a=[];return g({insertString(t,{type:a}){if(a===l.a.AlternativeOperation.Type.Main)throw new L("Multi-remove transform contains main insert",e)},insertGap(){throw new L("Multi-remove transform contains gap insert",e)},retain(e,{type:t}){l.a.AlternativeOperation.isOptionalType(t)||b(a,{type:h.l.Text,text:e})},remove(e,{type:t}){b(a,{type:t!==l.a.AlternativeOperation.Type.Main||f(e)?h.l.Text:h.l.Delete,text:e})}},t),a}))),p.b.chain(Object(s.flow)(p.b.fromPredicate(e=>e.length>=2&&e.every(e=>e.length>=2),()=>new L("Incomplete multi-remove",e)),p.b.map(e=>({type:n.Type.RemoveOr,removes:e})))))}function v(e){return Object(o.pipe)(p.b.tryCatchError(()=>Object(o.pipe)(e,p.f.map(t=>{const a=[];return g({insertString(e,{type:t}){b(a,{type:l.a.AlternativeOperation.isOptionalType(t)?h.l.Text:h.l.Insert,text:e})},insertGap(){throw new L("Insert transform contains gap insert",e)},retain(e,{type:t}){(!l.a.AlternativeOperation.isOptionalType(t)||a.length>0)&&b(a,{type:h.l.Text,text:e})},remove(t,{type:a}){if(a===l.a.AlternativeOperation.Type.Main)throw new L("Insert transform contains main delete",e)}},t),a}))),p.b.chain(Object(s.flow)(p.f.fromArray,p.b.fromOption(()=>new L("Incomplete insert",e)),p.b.map(e=>({type:n.Type.Insert,inserts:e})))))}function S(e){const{substitutions:t,longestSubstitution:a,inserts:i}=e.reduce((e,[t,a])=>{const n=t.map(e=>e.text).join("");return e.substitutions.push(n),e.inserts.push(a),n.length>e.longestSubstitution.length&&(e.longestSubstitution=n),e},{substitutions:[],inserts:[],longestSubstitution:""}),s=Object(o.pipe)(t,p.f.map(e=>a.split(e).join("")));return Object(o.pipe)(r.zipWith(i,s,(e,t)=>(t&&e.push({type:h.l.Text,text:t}),e)),p.f.fromArray,p.b.fromOption(()=>new Error("Substitution processing error")),p.b.map(e=>({type:n.Type.Substitution,remove:[{type:h.l.Delete,text:a}],inserts:e})))}function E(e,t){return Object(o.pipe)(w(e),p.b.chain(a=>Object(o.pipe)(p.b.tryCatchError(()=>{return Object(u.g)(t.length>0,"Drilldown transform - empty drilldown tree"),{inserts:Object(o.pipe)(t,p.f.map((function e([t,n]){Object(u.g)(void 0!==a.inserts[t],"Drilldown transform - alternative insert not found");return{alternativeId:t,label:a.inserts[t],subLabels:n.map(e)}}))),remove:a.remove,type:n.Type.Drilldown}}),p.b.mapLeft(L.fromError(e)))))}function w(e){return Object(o.pipe)(p.b.tryCatchError(()=>Object(o.pipe)(e,p.f.map(t=>{const a=[[],[]];return g({insertString(e){b(a[1],{type:h.l.Insert,text:"\n"===e?"¶ ":e})},insertGap(){throw new L("Substitution transform contains gap insert",e)},remove(e){b(a[0],{type:h.l.Delete,text:e})},retain(e,{type:t}){if(!l.a.AlternativeOperation.isOptionalType(t)||0!==a[0].length){const t={type:h.l.Text,text:e};a[0].push(t),a[1].push(t)}}},t),Object(u.g)(a[0].length>0,"Substituted part is empty"),Object(u.g)(a[1].length>0,"Inserts are empty"),a}))),p.b.chain(S),p.b.mapLeft(L.fromError(e)))}function k(e){if(!("list"in e))return p.g.none;switch(e.list){case"bullet":case"dashed":case"ordered":return p.g.some({kind:e.list,indent:"number"==typeof e.indent&&Number.isInteger(e.indent)?e.indent:0});default:return p.g.none}}function _(e){return Object(o.pipe)(e,p.b.fromPredicate(e=>1===e.length,()=>new L("Expected full-sentence transform to have 1 alternative",e)),p.b.map(Object(s.flow)(p.f.head,t=>{let a={blockStart:0,ops:[],kind:h.f.PlainText};return g({insertString(e,t){const n=e.split("\n");if(1===n.length)a.ops.push({type:h.l.Insert,text:e,shouldBeCollapsed:!1});else{const e=Object(o.pipe)(t.attributes,k,p.g.fold(()=>s.constVoid,({kind:e,indent:t})=>()=>{a.ops.splice(a.blockStart,1,{type:h.l.List,kind:e,indent:t}),a={kind:h.f.WithFormatting,ops:a.ops,blockStart:a.blockStart}}));for(let t=0,i=n.length-1;t<=i;t++){const r=n[t];r&&a.ops.push({type:h.l.Insert,text:r}),t<i&&(e(),a.blockStart=a.ops.length,a.ops.push({type:h.l.Insert,text:"\n"}))}}},insertGap(){throw new L("Full sentence transform contains gap insert",e)},retain(e,t){a.ops.push({type:h.l.Text,text:e,shouldBeCollapsed:O(t.type,e)})},remove(e,t){a.ops.push({type:h.l.Delete,text:e,shouldBeCollapsed:O(t.type,e)})}},t),a})),p.b.chain(Object(s.flow)(p.g.fromPredicate(e=>e.ops.length>0),p.b.fromOption(()=>new L("Got empty full sentence transform",e)),p.b.map(({ops:e,kind:t})=>({type:n.Type.FullSentence,ops:e,kind:t})))))}!function(e){let t;!function(e){e[e.Remove=0]="Remove",e[e.RemoveOr=1]="RemoveOr",e[e.Insert=2]="Insert",e[e.Substitution=3]="Substitution",e[e.Drilldown=4]="Drilldown",e[e.FullSentence=5]="FullSentence",e[e.SmartPhrases=6]="SmartPhrases",e[e.OneGap=7]="OneGap",e[e.ShortenIt=8]="ShortenIt",e[e.ToneAI=9]="ToneAI"}(t=e.Type||(e.Type={})),function(e){e.parse=function(t,a){const n=t[0];if(n.isFullSentence)return e.FullSentence;if(n.isSmartPhrases)return e.SmartPhrases;if(p.g.isSome(a.drilldown))return e.Drilldown;if(n.isShortenIt)return e.ShortenIt;if(n.isToneAI)return e.ToneAI;switch(n.type){case l.a.Alternative.Type.Insert:return e.Insert;case l.a.Alternative.Type.Remove:return t.length>1?e.RemoveOr:e.Remove;case l.a.Alternative.Type.Substitution:return n.ops.find(l.a.AlternativeOperation.isInsertGap)?e.OneGap:e.Substitution;default:return Object(u.d)(n.type)}}}(t=e.Type||(e.Type={})),e.create=function(t){return a=>{const n=e.Type.parse(a,t);switch(n){case e.Type.Remove:return y(a);case e.Type.RemoveOr:return C(a);case e.Type.Insert:return v(a);case e.Type.Substitution:return w(a);case e.Type.Drilldown:return E(a,Object(o.pipe)(t.drilldown,p.g.getOrElse(()=>l.a.Drilldown.empty)));case e.Type.FullSentence:return _(a);case e.Type.SmartPhrases:return A(a);case e.Type.OneGap:return T(a);case e.Type.ShortenIt:return x(a);case e.Type.ToneAI:return I(a);default:return Object(u.d)(n)}}}}(n||(n={}));const O=(e,t)=>e===l.a.AlternativeOperation.Type.Optional&&t.length>3;function A(e){return Object(o.pipe)(p.b.tryCatchError(()=>Object(o.pipe)(e,p.f.map(t=>{const a=c.a.normalizeDelta(new d.a(t.ops));if(2!==a.ops.length)throw new L("SmartPhrases transform must contain exactly 2 operations",e);if(!c.a.isRetain(a.ops[0]))throw new L("SmartPhrases transform first operation must be a retain",e);if(!c.a.isInsertString(a.ops[1]))throw new L("SmartPhrases transform second operation must be an insert",e);const n=[];return g({insertString(t,{type:a}){if(a!==l.a.AlternativeOperation.Type.Main)throw new L("SmartPhrases transform insert operation must be of type MAIN",e);b(n,{type:h.l.Insert,text:t})},insertGap(){throw new L("SmartPhrases transform contains gap insert",e)},retain(){},remove(){throw new L("SmartPhrases transform contains delete",e)}},t),n}))),p.b.chain(Object(s.flow)(p.f.fromArray,p.b.fromOption(()=>new L("Incomplete SmartPhrases transform",e)),p.b.map(e=>({type:n.Type.SmartPhrases,inserts:e})))))}function T(e){return Object(o.pipe)(p.b.tryCatchError(()=>(Object(u.g)(1===e.length,"One gap transform does not contain exactly one alternative"),Object(o.pipe)(e,p.f.head,e=>{const t=[],a=[];let n=!1;return g({insertString(e,{type:i}){b(n?a:t,{type:l.a.AlternativeOperation.isOptionalType(i)?h.l.Text:h.l.Insert,text:e})},insertGap(){Object(u.g)(!n,"One gap transform does not contain exactly one gap insert"),n=!0},retain(e,{type:i}){const r=n?a:t;(!l.a.AlternativeOperation.isOptionalType(i)||r.length>0)&&b(r,{type:h.l.Text,text:e})},remove:s.constVoid},e),Object(u.g)(n,"One gap transform does not contain exactly one gap insert"),Object(u.g)(t.length>0||a.length>0,"One gap transform does not contain at least one text insert"),{left:t,right:a}}))),p.b.bimap(L.fromError(e),({left:e,right:t})=>({type:n.Type.OneGap,left:e,right:t})))}function x(e){return Object(o.pipe)(e,p.b.fromPredicate(e=>1===e.length||3===e.length,()=>new L("Expected shorten-it transform to have 1 or 3 alternatives",e)),p.b.chain(p.f.traverse(p.b.either)(j)),p.b.map(e=>({type:n.Type.ShortenIt,summaries:e})))}function I(e){return Object(o.pipe)(p.b.tryCatchError(()=>Object(o.pipe)(e,p.f.map(t=>{const a=[];return g({insertString(e){b(a,{type:h.l.Insert,text:e})},insertGap(){throw new L("ToneAI transform should not include gap insert",e)},retain(e){b(a,{type:h.l.Text,text:e})},remove(){}},t),a}))),p.b.chain(Object(s.flow)(p.f.fromArray,p.b.fromOption(()=>new L("Incomplete ToneAI transform",e)),p.b.map(e=>({type:n.Type.ToneAI,insertOrTextParts:e})))))}function M(e){const t=e.reduce((e,t)=>t.type===h.l.Text||t.type===h.l.Delete?e+t.text:e,""),a=e.reduce((e,t)=>t.type===h.l.Text||t.type===h.l.Insert?e+t.text:e,""),n=Math.max(t.length-a.length,0);return Object(o.pipe)(m.b.fromNumber(n/t.length),p.b.mapLeft(e=>new Error(e)))}function j(e){const t=[];return g({insertString(e){t.push({type:h.l.Insert,text:e,shouldBeCollapsed:!1})},insertGap(){throw new L("ShortenIt transform contains gap insert",[e])},retain(e){t.push({type:h.l.Text,text:e,shouldBeCollapsed:!1})},remove(e){t.push({type:h.l.Delete,text:e,shouldBeCollapsed:!0})}},e),i.sequenceS(p.b.either)({replacement:Object(o.pipe)(t,p.b.fromPredicate(e=>e.length>0,()=>new L("Got empty ShortenIt transfrom",[e]))),compressionRatio:M(t)})}class L extends u.a{constructor(e,t){super(e),this.alternatives=t}static fromError(e){return t=>{const a=new L(t.message,e);return a.stack=t.stack,a}}toString(){return`Hydration error: ${this.message}\n  ops: ${this.alternatives.map(e=>e.ops.map(l.a.AlternativeOperation.anonymize))}`}}},fHRq:function(e,t,a){"use strict";var n={};a.r(n),a.d(n,"FloatingContainer",(function(){return f})),a.d(n,"CardBase",(function(){return b})),a.d(n,"fromNode",(function(){return y})),a.d(n,"cardTransition",(function(){return T}));var i={};a.r(i),a.d(i,"create",(function(){return F}));var r=a("ERkP"),s=a("vOOZ"),o=a("9NHN"),l=a("lrqh"),c=a("1w6p"),d=a("uO+M"),p=a("6gXa"),u=a("WIwS"),m=a("ps/9"),h=a("zR/0"),g=a("PyeZ");const f=c.b.Grid.make(({view:e,notify:t,slots:a})=>r.createElement(s.a.div,Object.assign({tabIndex:-1,"data-name":"inline-card",mount:e=>t({type:g.b.Type.mounted,element:l.g.fromNullable(e)})(),style:e("position")},Object(o.c)(A.container,e("direction").pipe(h.a.map(e=>e===g.a.Direction.Up&&A.directionUp))),{onMouseEnter:t({type:g.b.Type.hovered}),onMouseLeave:t({type:g.b.Type.unhovered})}),a.body)),b=c.b.Grid.make(({slots:e})=>r.createElement("div",{tabIndex:-1,"data-name":"inline-card",className:A.card},e.card)),y=e=>c.b.Animated.make(T,c.b.Union.asOption(c.b.Knot.make(f,{body:c.b.Composite.make(b,e)}))),C=p.a.keyframes({from:{opacity:0,transform:"scale(1, .8)"}}),v=p.a.keyframes({to:{opacity:0,transform:"scale(1, .8)"}}),S={position:"absolute",zIndex:m.l,minWidth:"fit-content",outline:"none",transformOrigin:"top",willChange:"opacity, transform",$nest:{"@media print":{visibility:"hidden"}}},E={marginTop:p.a.rem(.5),transformOrigin:"bottom"},w={$nest:{"& > div[data-name=inline-card]":{animation:`${v} ${p.a.seconds(.1)} linear forwards`,pointerEvents:"none"}}},k={$nest:{"& > div[data-name=inline-card]":{animation:`${C} ${p.a.seconds(.1)} linear forwards`}}},_={display:"flex",flexDirection:"column",overflow:"hidden",marginLeft:p.a.rem(-1),paddingBottom:p.a.rem(.5),minWidth:p.a.rem(12),maxWidth:p.a.rem(20),width:"fit-content",outline:"none",borderRadius:p.a.rem(m.r),background:d.Color.CoreNeutral0,boxShadow:u.o,color:u.m,fontSize:p.a.rem(.8),"-webkit-font-smoothing":"antialiased",$nest:{"&:before":{position:"absolute",marginTop:p.a.px(-2),width:p.a.percent(100),height:p.a.px(2),border:"1px solid transparent",content:"''"}}},O={$nest:{"& .itemInsert, .itemRemove":{paddingBottom:p.a.rem(.3),whiteSpace:"normal",lineHeight:p.a.rem(1.5)}}},A=p.a.prefixedStylesheet("inline-card",{container:[S],directionUp:[E],invisible:[w],visible:[k],card:[_],maxWidthReached:[O]}),T=c.b.Transition.make({visible:A.visible},{invisible:A.invisible});var x=a("OA+g"),I=a("I7vG"),M=a("LNSM"),j=a("Ni70"),L=a("PrA7"),N=a("dE97");const P=8;function F(e,t,a,n,i=(()=>"left")){return c.a.animatingFlow(function(e,t,a,n,i){const r=M.a.create(l.g.none);return c.a.fromSideEffect(e=>{Object(I.pipe)(e.action.action.action,l.g.fromPredicate(g.b.isMountAction),l.g.tap(e=>r.set(e.element))),t.next(e.action.action.action)},e.pipe(h.a.map(l.g.chain(e=>N.a.State.isBulkApplied(e.alert.state)?l.g.some(e):l.g.none)),h.a.withLatestFrom(a,r),h.a.map(function(e,t){return([a,n,i])=>Object(I.pipe)(a,l.g.map(e=>({alert:e.alert,highlightIndex:e.highlightIndex,rect:Object(I.pipe)(e.mark.getRect(),l.b.map(j.b.relativeAndAbs),l.g.fromEither)})),l.g.chain(({alert:a,rect:r})=>Object(I.pipe)(r,l.g.map(({abs:r,relative:s})=>{const o=Object(I.pipe)(i,l.g.fold(()=>0,e=>e.offsetHeight)),c=r.height+r.top+o>n.height+n.top&&s.height<n.height?g.a.Direction.Up:g.a.Direction.Down,d=c===g.a.Direction.Up?s.top-o-P:s.top+s.height;return{root:{position:"right"===t(r,n)?{top:d,right:0}:{top:d,left:s.left},direction:c},body:{alert:a,replacementLabels:D(e,a)}}}))))}(n,i)),h.a.startWith(l.g.none)))}(e,t,a,n,i),(e,t)=>Object(I.pipe)(t,l.g.chain(()=>Object(I.pipe)(e,l.g.map(()=>l.m.both("invisible","visible")),l.g.alt(()=>l.g.some(l.m.right("visible"))))),l.g.alt(()=>Object(I.pipe)(e,l.g.map(()=>l.m.left("invisible"))))))}function D(e,t){return Object(I.pipe)(t.getTransform(),l.g.chain(Object(x.flow)(e,l.b.fold(e=>(L.Monitoring.Logging.getLogger("InlineCard.hydration").error("Failed to hydrate an inline card",e,{alertId:t.id}),l.g.none),l.g.some))))}var R,B;a.d(t,"a",(function(){return R})),(B=R||(R={})).UI=n,B.Flow=i},fK7l:function(e,t,a){e.exports=a.p+"files/8c35c38451d802f149fcbc7e9004193e/inter-lightitalic.woff"},"fT1+":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return O}));var n,i,r,s=a("OA+g"),o=a("I7vG"),l=a("2Jhg"),c=a("LNSM"),d=a("+JVj"),p=a("Ni70"),u=a("bYZB"),m=a("D6Vf"),h=a("3s0z"),g=a("zR/0"),f=a("gy42"),b=a("D9EC"),y=a("lrqh"),C=a("PrA7"),v=a("Wcgi"),S=a("0lfv"),E=a("SfQc");!function(e){e.focus="focus",e.next="next",e.previous="previous"}(n||(n={})),function(e){e.KEY_Enter=13,e.SEARCH_INPUT_NAME="search-input",e.isSearchInput=function(t){return t&&t.name===e.SEARCH_INPUT_NAME};e.Mock=class{constructor(e){this.visible=c.a.create(!1),this.term=c.a.create(""),this.hotkeysActions=new g.a.Subject,this.dispose=b.l,this.result=c.a.create(l.f.of(e).map(e=>Object.assign(Object.assign({},e),{next:b.l,prev:b.l})))}select(){throw new Error("Method not implemented.")}}}(i||(i={}));class w{constructor(e,t,a){this._ops=e,this._term=t,this.count=a.ranges.length,this.current=a.selected.getOrElse(0)+1,this._ops._highlightSelectedRange()}next(){this._ops._forceSearch(),this._ops._selectedPos.modify(e=>e.map(e=>e+1).map(e=>e>this.count-1?0:e).orElse(Object(l.h)(0))),this._ops._highlightSelectedRange(1===this.count)}prev(){this._ops._forceSearch(),this._ops._selectedPos.modify(e=>e.map(e=>e-1).map(e=>e<0?this.count-1:e).orElse(Object(l.h)(this.count-1))),this._ops._highlightSelectedRange()}equals(e){return null!=e&&this.count===e.count&&this.current===e.current&&this._term===e._term}hashCode(){return Object(l.k)(this._term)+this.count+(this.current<<4)}}!function(e){const t="searchRange";e.create=(e,a)=>d.b.create(e,a,{type:t}),e.is=function(e){return typeof e.meta.type===t}}(r||(r={}));const k=500,_=50;class O{constructor(e,t,a,n){this._ded=e,this._rangeManager=t,this._editorViewport=a,this._hotkeyManager=n,this._log=C.Monitoring.Logging.getLogger("SearchViewModel"),this._subs=[],this._forceSearchSubject=new g.a.Subject,this._rangesState=c.a.create({ranges:[],selected:l.f.empty()}),this._selectedRange=this._rangesState.view(e=>e.selected.map(t=>e.ranges[t])),this._activeMark=c.a.create(l.f.empty()),this.visible=c.a.create(!1),this.term=c.a.create(""),this.result=c.a.create(l.f.empty()),this.hotkeysActions=new g.a.Subject,this.select=()=>{this._forceSearch(),this._rangesState.modify(({ranges:e,selected:t})=>({ranges:e,selected:t.orElse(Object(l.h)(0)).filter(()=>Object(b.n)(e))})),this._highlightSelectedRange()},this.dispose=()=>{this.term.set(""),this._subs.forEach(e=>e.unsubscribe()),this._subs=[]},this._selectedPos=this._rangesState.lens("selected"),this._forceSearch=()=>this._forceSearchSubject.next(),this._highlightSelectedRange=(e=!1)=>{const t=this._selectedRange.get();e&&S.a.compare(this._activeMark.get(),t,(e,t)=>e.meta.id===t.meta.id)&&this._ensureMarkInViewport(this._currentMark).subscribe({error:e=>this._log.error("Cannot scroll to mark",e)}),this._activeMark.set(t)},this._removeRanges=e=>{this._activeMark.get().filter(t=>e.has(t.meta.id)).forEach(()=>this._activeMark.set(l.e)),this._rangesState.modify(t=>{const a=t.ranges.filter(({meta:{id:t}})=>!e.has(t)||(this._rangeManager.deregisterRange(t),!1));return{ranges:a,selected:t.selected.filter(e=>e<a.length)}})},this._findRanges=e=>Object(b.n)(e)?this._searchTerm(this._ded.getText().toLowerCase(),e.toLowerCase()):[],this._changeActiveMark=({prev:e,next:t})=>{this._currentMark=null,e.forEach(e=>{this._ded.changeMarks([v.a.Change.getRemoveAction({range:()=>e})(e.meta.id)])}),t.forEach(e=>{this._currentMark=Object(o.pipe)(this._ded.changeMarks([v.a.Change.getCreateAction({range:()=>e,order:0,classes:[E.mark]})(e.meta.id)]),t=>t.created.get(e.meta.id),y.b.fold(()=>null,s.identity)),this._ensureMarkInViewport(this._currentMark).subscribe({error:e=>this._log.error("Cannot scroll to mark",e)})})},this._subs.push(this._listenOpenEvents(),this._listenCloseEvents(),this._listenHotkeysActions(),g.a.mergeStatic(this.term.pipe(g.a.filter(e=>e.length>3),g.a.debounceTime(300)),this.term.pipe(g.a.filter(e=>e.length<=3),g.a.mapTo("")),this._forceSearchSubject.pipe(g.a.withLatestFrom(this.term,(e,t)=>t))).pipe(g.a.distinctUntilChanged(),g.a.map(this._findRanges)).subscribe(e=>{this._activeMark.set(l.e),this._replaceRanges(e)}),this._rangesState.pipe(g.a.map(e=>Object(l.h)(e).filter(e=>Object(b.n)(e.ranges)).map(e=>new w(this,this.term.get(),e)))).subscribe(e=>this.result.set(e)),this._rangesState.pipe(g.a.switchMap(({ranges:e})=>Object(b.n)(e)?this._rangeManager.rangeChanged.pipe(g.a.pluck("affected"),g.a.filter(b.n)):g.a.EMPTY),g.a.map(e=>e.filter(r.is)),g.a.map(e=>new Set(e.map(e=>e.meta.id)))).subscribe(this._removeRanges),this._activeMark.pipe(g.a.scan(({next:e},t)=>({prev:e,next:t}),{prev:l.f.empty(),next:l.f.empty()})).subscribe(this._changeActiveMark)),this._subs.push(this._ded.dontFreezeWhen(this.visible,"search"),this.visible.pipe(g.a.skip(1),g.a.filter(e=>!e)).subscribe(()=>{this.term.set("")})),Object(b.r)("searchVM",this)}_searchTerm(e,t){let a=-1;const n=[];for(;(a=e.indexOf(t,a+1))>-1;)n.push(r.create(a,a+t.length));return n}_listenOpenEvents(){const e=new Set([h.a.short]),t=g.a.from([this._hotkeyManager.createHotkey(e,"f"),this._hotkeyManager.createHotkey(e,"g"),this._hotkeyManager.createHotkey(new Set([h.a.short,h.a.shift]),"g")]).pipe(g.a.mergeMap(e=>this._hotkeyManager.bindHotkey(e)));return m.b.activeCount.pipe(g.a.map(e=>e<1),g.a.merge(this.visible.pipe(g.a.map(e=>!e)))).pipe(g.a.switchMap(f.b.orEmpty(t)),g.a.mapTo(!0)).subscribe(f.b.toAtom(this.visible))}_listenCloseEvents(){const e=this._hotkeyManager.bindHotkey(this._hotkeyManager.createHotkey(new Set,"ESCAPE"));return this.visible.pipe(g.a.switchMap(f.b.orEmpty(e)),g.a.merge(m.b.activeCount.pipe(g.a.filter(e=>e>0))),g.a.mapTo(!1)).subscribe(f.b.toAtom(this.visible))}_listenHotkeysActions(){const e=new Set([h.a.short]),t=this._hotkeyManager.bindHotkey(this._hotkeyManager.createHotkey(e,"f")).pipe(g.a.mapTo(n.focus)),a=this._hotkeyManager.bindHotkey(this._hotkeyManager.createHotkey(e,"g")).pipe(g.a.mapTo(n.next)),i=this._hotkeyManager.bindHotkey(this._hotkeyManager.createHotkey(new Set([h.a.short,h.a.shift]),"g")).pipe(g.a.mapTo(n.previous)),r=t.pipe(g.a.merge(a),g.a.merge(i));return this.visible.pipe(g.a.switchMap(f.b.orEmpty(r))).subscribe(this.hotkeysActions)}_replaceRanges(e){this._rangesState.modify(t=>(t.ranges.forEach(e=>this._rangeManager.deregisterRange(e.meta.id)),{ranges:e.map(e=>this._rangeManager.registerRange(`search_${this.term.get().replace(/\s*/g,"_")}_${O.searchMarkCount++}`,e)),selected:e.length>0?Object(l.h)(0):l.e}))}_ensureMarkInViewport(e){return Object(o.pipe)(e,y.b.fromNullable(new Error("Mark should not be null at this point")),y.b.chain(e=>e.getRect()),y.b.map(p.b.relativeToViewport),y.b.fold(g.a.throwError,t=>{const{top:a,bottom:n}=this._editorViewport.get();return t.top<a+_||t.top>n-_?this._ded.scrollToMark(e,{paddingTop:k,animate:u.a.fast}):g.a.EMPTY}))}}O.searchMarkCount=0},g7Ig:function(e,t,a){e.exports=a.p+"files/de9b0866cf73188ae7ca0292a439d6a4/inter-mediumitalic.woff"},gMRE:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("ERkP"),r=a("vOOZ"),s=a("9NHN"),o=a("6gXa");!function(e){e.Top=e=>i.createElement(r.a.div,Object.assign({role:"fixed",onTransitionEnd:e.onTransitionEnd},Object(s.c)(e.className,l.fixed)),e.children)}(n||(n={}));const l=o.a.stylesheet({fixed:[{position:"fixed",top:0,height:0}]})},hJSx:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a("1aGC"),i=a("24uI"),r=a("4ae2"),s=a("1huE"),o=a("zR/0"),l=a("D9EC"),c=a("PrA7"),d=a("rlNc"),p=a("o5+S"),u=a("7FJK");const m=n.import("core/module"),h=n.import("parchment");class g extends m{constructor(e,t){super(e,t),this.quill=e,this._options=t,this._subs=new s.a.Keeper,this._log=c.Monitoring.Logging.getLogger("DEd.Histor"),this._lastRecorded=0,this._ignoreChange=!1,this._stack={undo:[],redo:[]},this._anonymizedOperationsCache=new d.a(20,!0),this._changed=new o.a.Subject,this.changed=this._changed,this.clear();const a=Object(p.t)(this.quill).pipe(o.a.share());this._subs.push(a.subscribe(e=>{e.name===n.events.TEXT_CHANGE&&this._anonymizedOperationsCache.push({ops:i.a.anonymizeTextAndStringAttrs(e.delta).ops,source:e.source})}),a.subscribe(e=>{e.name!==n.events.TEXT_CHANGE||this._ignoreChange||(t.userOnly&&e.source!==n.sources.USER?this._transform(b(e.delta)):this._record(b(e.delta),b(e.oldDelta)))})),Object(l.r)("dedOpsHistory",()=>this._anonymizedOperationsCache.toArray())}clear(){this._stack={undo:[],redo:[]}}cutoff(){this._lastRecorded=0}commit(e){this.cutoff(),e(),this.cutoff()}redo(e){try{this._log.info("History action: redo"),this._change("redo","undo",e)}catch(e){this._log.error("History action: redo error",e)}}canRedo(){return this._stack.redo.length>0}canUndo(){return this._stack.undo.length>0}undo(e){try{this._log.info("History action: undo"),this._change("undo","redo",e)}catch(e){this._log.error("History action: undo error",e)}}getAnonymizedOperationsHistory(){return this._anonymizedOperationsCache.toArray()}dispose(){this._subs.dispose()}_flush(){this._options.flush()}_change(e,t,a){if(0===this._stack[e].length)return;this._flush();const r=this._stack[e].pop();this._lastRecorded=0,this._ignoreChange=!0,i.a.splitToDeleteThenInsert(r[e]).filter(i.a.nonEmpty).forEach(e=>{this.quill.updateContents(Object(p.s)(e),n.sources.USER)}),this._ignoreChange=!1;const s=f(r[e]);this.quill.setSelection(s,0),this._stack[t].push(r),this._changed.next({source:a})}_record(e,t){if(e.ops&&0===e.ops.length)return;this._stack.redo=[];let a=b(Object(p.r)(this.quill.getContents())).diff(t,f(e));const n=Date.now();if(this._lastRecorded+this._options.delay>n&&this._stack.undo.length>0){const t=this._stack.undo.pop();a=a.compose(t.undo),e=t.redo.compose(e)}else this._lastRecorded=n;this._stack.undo.push({redo:e,undo:a}),this._stack.undo.length>this._options.maxStack&&this._stack.undo.shift()}_transform(e){e.ops&&0===e.ops.length||(this._stack.undo.forEach(t=>{t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}),this._stack.redo.forEach(t=>{t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}))}}function f(e){const t=e.reduce((e,t)=>e+(i.a.isDelete(t)?t.delete:0),0);let a=e.length()-t;return function(e){const t=e.ops[e.ops.length-1];return null!=t&&(i.a.isInsert(t)?"string"==typeof t.insert&&t.insert.endsWith("\n"):!(i.a.isDelete(t)||!t.attributes)&&Object.keys(t.attributes).some(e=>null!=h.query(e,h.Scope.BLOCK)))}(e)&&(a-=1),a}function b(e){if(e.ops&&e.ops.length){const t=e.reduce((e,t)=>i.a.match(t=>e.insert(t.insert,t.attributes&&C(t.attributes)),t=>e.delete(t.delete),t=>e.retain(t.retain,t.attributes&&C(t.attributes)))(t),new r.a),a=t.ops[0];return t.ops&&1===t.ops.length&&i.a.isRetain(a)&&!a.attributes?new r.a:t}return e}const y=new RegExp(`^${u.b}_`);function C(e){return Object.keys(e).reduce((t,a)=>y.test(a)?t:Object.assign(Object.assign({},t),{[a]:e[a]}),{})}},hOiz:function(e,t,a){"use strict";a.d(t,"c",(function(){return y})),a.d(t,"d",(function(){return v})),a.d(t,"a",(function(){return S})),a.d(t,"b",(function(){return E}));var n=a("ERkP"),i=a("I7vG"),r=a("vOOZ"),s=a("rk+4"),o=a("kED/"),l=a("nnns"),c=a("BugA"),d=a("6gXa"),p=a("lrqh"),u=a("ot6E"),m=a("Lmm7"),h=a("/Yt+"),g=a("HeG+");const f=({word:e,apply:t})=>n.createElement(l.a.Primary,{name:"accept-synonym",className:g.item,onClick:t(e)},e),b=({synonyms:e,apply:t})=>n.createElement("div",{className:g.row},e.map((e,a)=>n.createElement(f,Object.assign({},{word:e,key:a,apply:t})))),y=({result:{synonymsOrGroups:e},apply:t})=>{const a=n.useContext(u.a.Context);return n.createElement(r.a.div,{className:g.wrapper},n.createElement(c.Base,{className:g.title},a.synonyms.title),Object(i.pipe)(e,p.b.fold(e=>n.createElement(b,Object.assign({key:"single"},{synonyms:e,apply:t})),e=>n.createElement("ol",{className:g.list},e.map(({meaning:e,words:a},i)=>n.createElement(c.Typography,{key:i,styleType:c.Typography.Type.Base,nodeType:"li",className:g.group},n.createElement(c.Base,{className:g.groupTitle},e),n.createElement(b,Object.assign({key:"single"},{synonyms:a,apply:t}))))))))},C=d.a.style({position:"absolute",top:d.a.rem(.8),right:d.a.rem(1),margin:0}),v=({result:{synonymsOrGroups:e},apply:t})=>{const a=n.useContext(s.a.Context),l=n.useContext(u.a.Context);return n.createElement(r.a.div,{className:g.wrapper},n.createElement(c.Base,{className:g.title},l.synonyms.symfony.title),n.createElement(o.a.Regular,{className:C},a.beta),Object(i.pipe)(e,p.b.fold(e=>n.createElement(b,Object.assign({key:"single"},{synonyms:e,apply:t})),e=>n.createElement(b,Object.assign({key:"single"},{synonyms:e.reduce((e,{words:t})=>[...e,...t],[]),apply:t})))))},S=({synonymsInfo:e,apply:t})=>m.a.isEmpty(e.synonymsState)?n.createElement(h.a,{activeWord:e.activeWord.meta.value}):n.createElement(y,{key:"synonymsCard",apply:t,result:e.synonymsState.synonyms}),E=({synonymsInfo:e,apply:t})=>m.a.isEmpty(e.synonymsState)?n.createElement(h.b,{activeWord:e.activeWord.meta.value}):n.createElement(v,{key:"synonymsCard",apply:t,result:e.synonymsState.synonyms})},"hQF/":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("ERkP"),r=a("vOOZ"),s=a("9NHN"),o=a("uO+M"),l=a("6gXa"),c=a("WIwS");!function(e){e.Item=({className:e,children:t,onChange:a,checked:n,tabIndex:o,id:l})=>i.createElement(r.a.label,Object.assign({},Object(s.c)(u.radio,e)),n.view(e=>i.createElement(i.Fragment,{key:`radio-${l}`},i.createElement("input",{onChange:a,tabIndex:o||-1,type:"radio",checked:e,className:u.radioInputHidden}),i.createElement("span",{className:d}))),t),e.Group=({items:t,selectedItemIndex:a,itemWrapperClassName:n,onChange:s})=>i.createElement(r.a.Fragment,null,t.map((t,r)=>i.createElement(e.Item,{id:r,key:r,onChange:()=>{a.set(r),s&&s(r)},checked:a.view(e=>r===e),className:n},t)))}(n||(n={}));const d=l.a.joinClasses(["radioInput",l.a.style({display:"inline-block",boxSizing:"border-box",minWidth:l.a.rem(1),width:l.a.rem(1),height:l.a.rem(1),border:`${l.a.rem(.125)} solid ${c.k}`,borderRadius:l.a.percent(50),backgroundColor:o.Color.CoreNeutral0,content:"' '"})]),p={outline:"none",appearance:"none",$nest:{"&:checked + .radioInput":{border:`${l.a.rem(.25)} solid ${o.Color.CoreBlue50}`}}},u=l.a.stylesheet({radioInputHidden:[p],radio:[{display:"inline-flex",cursor:"default",alignItems:"center"}]})},hY4K:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a("1aGC"),i=a("4ae2"),r=a("D9EC"),s=a("hoSD"),o=a("o5+S"),l=a("2xe6");const c=n.import("modules/keyboard"),d=c.DEFAULTS.bindings,p=r.l;class u extends c{addBinding(e,t,a){this.removeBinding(e,p),super.addBinding(e,t,a)}removeBinding(e,t){this.bindings[e.key]&&this.bindings[e.key].length&&(this.bindings[e.key]=this.bindings[e.key].filter(({handler:e})=>t!==e))}}function m(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:p}}var h;!function(e){e.shiftArrowDownBeforeSection={key:"Down",collapsed:!1,empty:!1,shiftKey:!0,handler:function(e){const[t,a]=this.quill.getLeaf(e.index+e.length);return a>0||(!Object(o.h)(t,e=>e instanceof l.a)||(this.quill.setSelection(e.index,e.length+1),!1))}},e.shiftArrowDown={key:"Down",offset:0,empty:!0,shiftKey:!0,format:["template_section"],handler:function(e,t){return!t.empty||(this.quill.setSelection(e.index,e.length+1),!1)}},e.arrowDown={key:"Down",collapsed:!0,shiftKey:!1,format:["template_section"],handler:function(e,t){return!t.empty||(this.quill.setSelection(e.index+1,0),!1)}},e.enter={key:"Enter",collapsed:!0,format:["template_section"],handler:function(e,t){return!t.empty||(this.quill.updateContents(Object(o.s)((new i.a).retain(e.index).insert("\n")),"user"),this.quill.setSelection(e.index+1,0,"user"),!1)}}}(h||(h={}));const g={key:" ",collapsed:!0,shiftKey:!1,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*)$/,handler:function(e,t){const a=t.prefix.length,[r,l]=this.quill.getLine(e.index);if(l>a)return!0;const[c,d]=(e=>{switch(e){case"-":return["dashed",/^\s*?-/];case"*":return["bullet",/^\s*?\*/];default:return["ordered",/^\s*?\d+\./]}})(t.prefix.trim());if(r.prev&&!s.c.Guardians.isUL(r.prev.domNode)&&!s.c.Guardians.isOL(r.prev.domNode)&&r.prev.domNode.textContent&&d.test(r.prev.domNode.textContent))return!0;this.quill.insertText(e.index," ",n.sources.USER),this.quill.history.cutoff();const p=(new i.a).retain(e.index-l).delete(a+1).retain(r.length()-2-l).retain(1,{list:c});return this.quill.updateContents(Object(o.s)(p),n.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-a,0,n.sources.SILENT),!1}};var f;!function(e){let t;!function(e){e.plainTextBindings={indent:d.indent,outdent:d.outdent,"outdent backspace":d["outdent backspace"],tab:d.tab,"remove tab":d["remove tab"],bold:m("bold"),italic:m("italic"),underline:m("underline")},e.rtfBindings={indent:d.indent,outdent:d.outdent,"outdent backspace":d["outdent backspace"],tab:d.tab,"remove tab":d["remove tab"],"list empty enter":d["list empty enter"],"list autofill":g,"list autofill with shift":Object.assign(Object.assign({},g),{shiftKey:!0}),"header enter":d["header enter"]},e.templateSectionBindings={"shift down before template_section":h.shiftArrowDownBeforeSection,"template_section down":h.arrowDown,"template_section shift down":h.shiftArrowDown,"template_section enter":h.enter}}(t=e.Bindings||(e.Bindings={})),e.getKeyboardWithBindings=e=>{var t;return(t=class extends u{}).DEFAULTS={bindings:e},t}}(f||(f={}))},hnW1:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.Hidden="hidden",e.Dot="dot",e.Popup="popup",e.Passed="passed"}(n||(n={}))},i1Da:function(e,t,a){"use strict";var n=a("I7vG"),i=a("zR/0"),r=a("lrqh"),s=a("PrA7");const o=s.Monitoring.Logging.getLogger("performance.RUM"),l=Object(n.pipe)(window.performance,r.b.fromPredicate(e=>e&&e.getEntriesByType&&e.now&&!!e.mark,()=>new Error("Browser does not support performance API"))),c=r.g.fromNullable(window.PerformanceObserver),d=Object(n.pipe)(c,r.g.chain(e=>Object(n.pipe)(r.g.fromNullable(window.PerformanceLongTaskTiming),r.g.map(()=>e)))),p=(e,t)=>`performance_${e}_start_${t}`,u=(e,t)=>`performance_${e}_end_${t}`,m={DocLoad:r.g.none};var h,g;(g=h||(h={})).isUntouched=e=>void 0!==e.start,g.isFinished=e=>void 0!==e.reset,g.isStarted=e=>void 0!==e.finish,g.retrieveMetric=e=>Object(n.pipe)(l,r.b.map(t=>Object(n.pipe)(m[e],r.g.getOrElse(()=>(function e(t,a){return{start:i=>{const s=(new Date).getTime(),l=p(a,s),c=[],d=Object(n.pipe)(i,r.g.map(e=>e.subscribe(e=>c.push(e)))),h=()=>Object(n.pipe)(d,r.g.map(e=>e.unsubscribe()));t.mark(l);const g={finish:()=>{const n=u(a,s);t.mark(n),h(),t.measure(a,l,n);const d=t.getEntriesByName(a),p=d.length>0&&d[d.length-1],g={additionalInfo:r.g.map(()=>c)(i),duration:p&&"measure"===p.entryType?Math.round(p.duration):-1,reset:()=>{h(),t.clearMarks(l),t.clearMarks(n),t.clearMeasures(a),o.info(`Metrics measurement ${a} reset`),m[a]=r.g.some(e(t,a))}};return m[a]=r.g.some(g),o.info(`Metrics measurement ${a} finished`),g}};return m[a]=r.g.some(g),o.info(`Metrics measurement ${a} started`),g}}})(t,e))))),g.longTaskObservable=Object(n.pipe)(d,r.g.map(e=>new i.a.Observable(t=>{const a=new e(e=>{t.next(e)});return a.observe({entryTypes:["longtask"]}),()=>{a.disconnect()}})));const f=s.Monitoring.Logging.getLogger("performance.RUM");var b;!function(e){e.docLoad={start:()=>(function(e){Object(n.pipe)(h.retrieveMetric(e),r.b.chain(r.b.fromPredicate(h.isUntouched,()=>new Error(`Metric ${e} is already measured`))),r.b.fold(t=>f.warn(`Performance issue while starting measuring ${e}. `,t),e=>e.start(Object(n.pipe)(h.longTaskObservable,r.g.map(i.a.switchMap(e=>i.a.from(e.getEntries())))))))})("DocLoad"),cleanup:()=>(function(e){Object(n.pipe)(h.retrieveMetric(e),r.b.map(e=>{h.isStarted(e)?e.finish().reset():h.isFinished(e)&&e.reset()}))})("DocLoad"),end(e){!function(e,{textLength:t,alertsCount:a}){Object(n.pipe)(h.retrieveMetric(e),r.b.chain(r.b.fromPredicate(h.isStarted,()=>new Error(`Metric ${e} is not started or already finished`))),r.b.map(i=>{const s=i.finish();return f.info(e,{duration:s.duration,longtasks:Object(n.pipe)(s.additionalInfo,r.g.map(e=>({count:e.length,list:e.map(({name:e,duration:t,startTime:a})=>({name:e,duration:t,startTime:a}))})),r.g.toNullable),textLength:t,alertsCount:a}),s}),r.b.fold(t=>f.warn(`Performance issue while measuring ${e}. `,t),e=>e.reset()))}("DocLoad",e)}}}(b||(b={})),a.d(t,"a",(function(){return b}))},iEw6:function(e,t,a){"use strict";var n,i,r=a("1w6p"),s=a("rq0W"),o=a("zR/0"),l=a("lrqh"),c=a("OA+g"),d=a("gy42");function p(e,t,a,n){return r.a.composeUnion({Some:r.a.composeKnot({value:r.a.composeKnot({root:()=>e.pipe(o.a.map(e=>Object(c.pipe)(u(n)(e),l.g.map(t=>({item:e,key:a(e),className:t})))),o.b.compact),shadeItem:t})}),None:()=>o.a.of(l.g.none)},t=>o.a.mergeStatic(e.pipe(o.a.map(u(n))),t.pipe(o.a.switchMap(d.b.Scheduler.rafScheduler),o.a.mapTo(l.g.none))))}function u(e){return t=>Object(c.pipe)(t.visualState.from,l.g.chain(()=>e(t.visualState).shade))}function m(e,t,a,n,i){return r.a.composeKnot({root:()=>e.pipe(o.a.map(e=>{const{main:t,shade:a}=i(e.visualState);return{item:e,className:t,hasAnimation:l.g.isSome(t)||l.g.isSome(a)}})),shade:p(e,a,n,i),item:t})}function h(e,t){return r.a.composeKnot({root:()=>e.pipe(o.a.map(e=>e.visualState.transition.type)),staticItemChild:t})}a.d(t,"a",(function(){return n})),(i=n||(n={})).flow=function(e,t,a,n=(e=>e.id),i=s.a.toOption(s.c)){return r.a.composeKnot({root:()=>e,animatedItem:r.a.composeUnion({static:h(e,t),animating:m(e,t,a,n,i)},()=>e.pipe(o.a.map(e=>({animatedItemKind:e.visualState.incomplete?"animating":"static"}))))})},i.extend=function(e){return r.a.extendActions(o.a.tap(t=>{const a=t.action;if("animating"===a.key)if("root"===a.action.key)e(a.action.action);else if("shade"===a.action.key){const t=a.action.action.action.action;"root"===t.key&&e(t.action)}}))}},ihUS:function(e,t,a){"use strict";a.d(t,"a",(function(){return S})),a.d(t,"b",(function(){return n}));var n,i=a("OA+g"),r=a("I7vG"),s=a("LNSM"),o=a("NaPV"),l=a("GUi3"),c=a("dE97"),d=a("Uwwq"),p=a("zR/0"),u=a("1huE"),m=a("BeBM"),h=a("Z86f"),g=a("4lva"),f=a("lrqh"),b=a("D9EC"),y=a("6fbX"),C=a("+ukg"),v=a("wt7H");class S{constructor(e,t,a,n,o,l,c,h,y,v){this._modalManager=e,this._state=t,this._lensPreviewVM=a,this._features=n,this._getAlertClosestToCursor=o,this._documentModel=l,this._getOutcomes=h,this.defaultLensMode=y,this._trackLensModeChange=v,this.popover=s.a.create(f.g.none),this.events=new p.a.Subject,this.lensModeEvents=new p.a.Subject,this._subs=new u.a.Keeper,this.activeLensId=this._state.view("currentLens","id"),this.documentActions=s.a.combine(this._features.plagiarism,this._features.proofit,this._documentModel.documentLength.view("full").view(e=>0===e),(e,t,a)=>({plagiarism:e===C.o.enabled?a?g.b.plagiarismDisabled(g.c.EmptyDocument):g.b.documentActionAvailable:e===C.o.upgradeIsNeeded?g.b.documentActionAvailable:g.b.plagiarismDisabled(g.c.NotAvailable),proofit:t===C.o.enabled?a?g.b.proofitDisabled(g.d.EmptyDocument):g.b.documentActionAvailable:t===C.o.upgradeIsNeeded?g.b.documentActionAvailable:g.b.proofitDisabled(g.d.NotAvailable)})),this._lensSwitch=new p.a.Subject,this._alertSwitch=new p.a.Subject,this.lensChangeEffects={id:"focusFirstOnLensChange",when:i.constTrue,what:m.e.Effect.SwitchLens.create(this._lensSwitch.pipe(p.a.map(({lensId:e,focusFirst:t,actionSource:a})=>({lensId:e,alertSource:a,options:{order:"lensOrder",toFocus:t?m.e.Effect.FocusBehavior.focusFirst:m.e.Effect.FocusBehavior.noFocus}}))))},this.alertChangeEffects={id:"highlightOnAlertChange",when:i.constTrue,what:m.e.Effect.SwitchAlert.create(this._alertSwitch.pipe(p.a.map(({alertHighlight:e,actionSource:t})=>({alertHighlight:e,alertSource:t,options:{order:"lensOrder"}}))))},this.premiumButtonData=this._premiumButtonData,this._listenNavigationEvent(),this._listenLensModeEvents(),this.showMuteControl=Object(r.pipe)(c,f.g.fold(()=>s.a.create(!1),e=>e.mutedCategories.view(d.a.BaseMutedCategories.filter(Object(b.m)(d.a.Category.isSpecial))).view(e=>e.size>0))),this.lensMode=s.a.create(y),this.lensTitleType=f.g.isSome(this._features.denali.prioritySwitcher)?g.b.LensTitleType.priority:g.b.LensTitleType.default,this.lensPreviews=this.lensMode.view(this._getOutcomes).view(e=>e.reduce((e,t)=>(e[t]=this._lensPreviewVM.lensPreviews[t],e),{}))}_switchToLens(e,t){const a=this.activeLensId.get(),n=a===e?E(this.lensMode.get()):e;if(a!==n)return l.a.isEngagement(n)&&this._features.isFree.get()?this.popover.set(f.g.some(g.a.EngagementHook)):l.a.isDelivery(n)&&this._features.isFree.get()?this.popover.set(f.g.some(g.a.DeliveryHook)):l.a.isVox(n)&&this._features.denali.gbVoxLensUphook?this.popover.set(f.g.some(g.a.GbVoxHook)):l.a.isVox(n)&&this._features.denali.gbAdminVoxLensUphook?this.popover.set(f.g.some(g.a.GbEnableVoxHook)):n===l.a.SpecialId.Plagiarism&&this._features.plagiarism.get()!==C.o.enabled?this.popover.set(f.g.some(g.a.PlagiarismHook)):void this._lensSwitch.next({lensId:n,focusFirst:t.focusFirst,actionSource:t.actionSource})}_listenNavigationEvent(){this._subs.push(this.events.pipe(p.a.switchMap(e=>{switch(e.type){case"setGoals":return this._modalManager.show(o.c.setGoals("user"));case"preferences":return this._modalManager.show(v.a.preferences);case"performance":return this._modalManager.show(o.c.performance);case"switchToLens":return this._switchToLens(e.id,{focusFirst:e.focusFirst,actionSource:e.actionSource}),p.a.EMPTY;case"toggleSidebar":return this.activeLensId.get()===l.a.SpecialId.Closed?this._focusClosestAlert(e.actionSource):this._switchToLens(l.a.SpecialId.Closed,{focusFirst:!0,actionSource:e.actionSource}),p.a.EMPTY;case"switchToCritical":return this._features.isFree.get()?this._focusClosestAlert(e.actionSource):this._focusClosestAlertByPredicate(c.a.isCriticalImpact,e.actionSource),p.a.EMPTY;case"switchToAdvanced":return this._features.isFree.get()?this._switchToLens(l.a.SpecialId.Premium,{focusFirst:!0,actionSource:c.b.sidebar}):this._focusClosestAlertByPredicate(Object(b.m)(c.a.isCriticalImpact),e.actionSource),p.a.EMPTY;case"switchToAll":return this._switchToLens(E(this.lensMode.get()),{actionSource:e.actionSource,focusFirst:e.focusFirst}),p.a.EMPTY;default:return Object(y.d)(e)}})).subscribe())}_listenLensModeEvents(){this._subs.push(this.lensModeEvents.pipe(p.a.tap(e=>{switch(e.type){case"changeLensMode":this.lensMode.set(e.lensMode);const t=function(e,t){switch(t){case h.a.priority:return l.a.isMainOutcomeId(e)?l.a.OutcomeId.toPriorityOutcomeId(e):l.a.SpecialId.Priority;case h.a.all:return l.a.isPriorityOutcomeId(e)?l.a.OutcomeId.fromPriorityOutcomeId(e):l.a.SpecialId.AllAlerts;default:return Object(y.d)(t)}}(this.activeLensId.get(),e.lensMode);this._trackLensModeChange(e.lensMode),this._switchToLens(t,{actionSource:c.b.sidebar,focusFirst:!0});break;default:Object(y.d)(e.type)}})).subscribe())}_focusClosestAlert(e){Object(r.pipe)(this._getAlertClosestToCursor(c.a.isRegisteredApplicableAlert,"cursor"),f.g.fold(()=>this._switchToLens(E(this.lensMode.get()),{focusFirst:!0,actionSource:e}),t=>this._alertSwitch.next({alertHighlight:t,actionSource:e})))}_focusClosestAlertByPredicate(e,t){Object(r.pipe)(this._getAlertClosestToCursor(Object(b.b)(c.a.isRegisteredApplicableAlert,e),"cursor"),f.g.fold(()=>this._focusClosestAlert(t),e=>this._alertSwitch.next({alertHighlight:e,actionSource:t})))}get _premiumButtonData(){const e=this._lensPreviewVM.getLens(l.a.SpecialId.Premium),t=e.get().title,a=e.view("count");return s.a.combine(this._features.isFree,a.view(e=>e>0),(e,n)=>e&&n?f.g.some({id:l.a.SpecialId.Premium,title:t,alerts:a}):f.g.none)}dispose(){this._subs.dispose()}}function E(e){return e===h.a.all?l.a.SpecialId.AllAlerts:l.a.SpecialId.Priority}!function(e){e.outcomesList=[l.a.SpecialId.Correctness,l.a.SpecialId.Clarity,l.a.SpecialId.Engagement,l.a.SpecialId.Delivery,l.a.SpecialId.Vox],e.priorityOutcomesList=[l.a.SpecialId.CorrectnessPriority,l.a.SpecialId.ClarityPriority,l.a.SpecialId.EngagementPriority,l.a.SpecialId.DeliveryPriority,l.a.SpecialId.VoxPriority],e.lensPreviewFilter=({denali:{voxInfo:e,gbVoxLensUphook:t,gbAdminVoxLensUphook:a}})=>n=>!l.a.isVox(n)||(t||a||Object(r.pipe)(e,f.g.isSome))}(n||(n={}))},jAb7:function(e,t,a){"use strict";var n,i,r=a("OA+g"),s=a("I7vG"),o=a("lrqh"),l=a("7b34"),c=a("QxMx"),d=a("GUi3"),p=a("+X10"),u=a("v0pb");(n||(n={})).modelToCounters=function(e){return u.a.isRegistered(e)?e.counters:p.a.empty},a.d(t,"a",(function(){return i})),function(e){e.monoid=o.e.getMonoid(d.a.Id.ord,d.a.Meta.group),e.eq=o.e.getEq(d.a.Id.ord,d.a.Meta.eq),e.isEmpty=o.e.isEmpty,e.lookup=o.e.lookup(d.a.Id.ord),e.applyDiff=t=>n=>u=>Object(s.pipe)(n,l.a.foldMap(e.monoid)(i(t),p(t),a(t)),Object(c.a)(e.monoid.concat)(u),o.e.filter(Object(r.not)(d.a.Meta.isEmpty))),e.updatePercentiles=e=>t=>{let a=t;return e.forEach((e,t)=>{a=Object(s.pipe)(a,o.e.modifyAt(d.a.Id.ord)(t,d.a.Meta.ratioToPercentile(e)),o.g.fold(()=>Object(s.pipe)(a,o.e.insertAt(d.a.Id.ord)(t,d.a.Meta.fromPercentile(e))),r.identity))}),a};const t=Object(r.flow)(n.modelToCounters,d.a.Meta.fromAlertCounters),a=e=>a=>u(e)(a,t),i=e=>a=>u(e)(a,Object(r.flow)(t,d.a.Meta.group.inverse)),p=t=>(n,r)=>e.monoid.concat(a(t)(r),i(t)(n)),u=e=>(t,a)=>Object(s.pipe)(e,o.e.filter(e=>e(t.alert)),o.e.map(()=>a(t)))}(i||(i={}))},jSKJ:function(e,t,a){"use strict";var n,i=a("ERkP"),r=a("OA+g"),s=a("I7vG"),o=a("LNSM"),l=a("vOOZ"),c=a("lrqh"),d=a("D9EC"),p=a("uO+M"),u=a("PrA7"),m=a("6gXa"),h=a("rk+4"),g=a("uqkn"),f=a("+w1e"),b=a("E0zP"),y=a("XxrX"),C=a("Sfi4"),v=a("kED/"),S=a("nnns"),E=a("uZT5"),w=a("tZ26"),k=a("BugA"),_=a("aIes"),O=a("1gzW"),A=a("zR/0"),T=a("yZqL"),x=a("hoSD"),I=a("ps/9"),M=a("dE97"),j=a("8P+J"),L=a("H9T+"),N=a("HUX/");!function(e){e.Full=({card:e,actions:n})=>i.createElement(T.a,{footer:null,visualState:e.visualState,onFocus:()=>n.next({type:f.b.Type.alertCardShow,cardType:f.b.getCardType(e),alertId:e.activeAlert.id}),theme:Object(N.b)(e.renderOptions),body:i.createElement(a,{card:e}),mainActions:i.createElement(L.h,{card:e,feedbackActions:n}),subActions:null,extra:i.createElement(t,{card:e,actions:n})});const t=({card:e,actions:t})=>{const a=i.useContext(h.a.Context).card.sentenceLevelBrandTones;return i.createElement(k.Small,{className:$.sentenceLevelBrandTonesFooter},a.helpfulFeedbackQuestion(e.activeAlert.emotion),i.createElement("div",{className:$.sentenceLevelBrandTonesFooterHelpfulFeedback},i.createElement(S.a.Ghost,{name:`sentence-level-brand-tones-${e.activeAlert.emotion}-helpful-feedback-yes`,title:a.helpfulFeedbackYes,active:c.g.getEq(c.c.eqStrict).equals(e.activeAlert.feedback,c.g.some(M.j.accurate)),disabled:c.g.isSome(e.activeAlert.feedback),onClick:()=>{t.next({type:f.b.Type.sentenceLevelBrandTonesFeedback,alertId:e.activeAlert.id,feedbackType:M.j.accurate})}},i.createElement(w.d.VoteYes,null)),i.createElement(S.a.Ghost,{name:`sentence-level-brand-tones-${e.activeAlert.emotion}-helpful-feedback-no`,title:a.helpfulFeedbackNo,active:c.g.getEq(c.c.eqStrict).equals(e.activeAlert.feedback,c.g.some(M.j.inaccurate)),disabled:c.g.isSome(e.activeAlert.feedback),onClick:()=>{t.next({type:f.b.Type.sentenceLevelBrandTonesFeedback,alertId:e.activeAlert.id,feedbackType:M.j.inaccurate}),t.next({type:f.b.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForDismissSurvey:g.a.isEligibleForDismissSurvey(e)})}},i.createElement(w.d.VoteNo,null))))},a=({card:e})=>{const t=i.useContext(h.a.Context),a=c.g.fromNullable(e.activeAlert.highlightTexts[0]);return i.createElement("div",null,i.createElement(L.k,{alert:e.activeAlert,options:e.renderOptions}),i.createElement("div",null,i.createElement("div",{className:$.sentenceLevelBrandTonesHeaderWrapper},i.createElement("div",{className:$.sentenceLevelBrandTonesHeader},i.createElement(j.a,{className:$.sentenceLevelBrandTonesHeaderEmoji},e.activeAlert.emoji),x.f.capitalize(e.activeAlert.emotion)),i.createElement(v.a.Regular,{className:$.offBrandBadge},t.card.sentenceLevelBrandTones.offBrandBadge)),i.createElement(k.Base,{className:$.sentenceLevelBrandTonesDescription},e.activeAlert.description),Object(s.pipe)(a,c.g.fold(r.constNull,t=>i.createElement(L.j,{text:t,layoutDensity:e.renderOptions.layoutDensity})))))}}(n||(n={}));const P={display:"flex",alignItems:"center",justifyContent:"space-between",background:p.Color.CoreNeutral10,borderRadius:`${I.q} ${I.q} ${m.a.rem(I.r)} ${m.a.rem(I.r)}`,padding:`${m.a.rem(.3)} ${m.a.rem(1)}`,color:p.Color.CoreNeutral50,fontSize:m.a.rem(.64)},F={display:"flex",alignItems:"center",$nest:{'& div[role="button"]:first-child':{marginRight:m.a.rem(.125)}}},D={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:m.a.rem(1),marginBottom:m.a.rem(.625)},R={fontWeight:"bold",fontSize:m.a.rem(.875),lineHeight:m.a.rem(1)},B={marginRight:m.a.rem(.5),lineHeight:m.a.rem(1)},H={background:p.Color.CoreRed1,color:p.Color.CoreRed60,fontWeight:"bold",fontSize:m.a.rem(.6),lineHeight:m.a.rem(1)},W={marginBottom:m.a.rem(1)},$=m.a.stylesheet({offBrandBadge:[H],sentenceLevelBrandTonesHeaderWrapper:[D],sentenceLevelBrandTonesHeader:[R],sentenceLevelBrandTonesHeaderEmoji:[B],sentenceLevelBrandTonesFooter:[P],sentenceLevelBrandTonesFooterHelpfulFeedback:[F],sentenceLevelBrandTonesDescription:[W]});var V,U=a("wOnQ"),G=a("cVtq"),z=a("6fbX"),q=a("Z0Em"),Y=a("IdhR");function X(e){return e===V.brief?0:e===V.focused?1:e===V.detailed?2:Object(z.d)(e)}!function(e){e.brief="brief",e.focused="focused",e.detailed="detailed"}(V||(V={}));const K=({activeSummary:e})=>{const t=i.useContext(h.a.Context);return i.createElement(S.a.Group,{sticky:!0},i.createElement(S.a.White,{title:t.card.shortenIt.selectorTooltip(V.brief),name:V.brief,key:V.brief,active:e.view(e=>e===V.brief),onClick:()=>e.set(V.brief),className:se.textButton},i.createElement(w.d.TextShort,{className:se.textIcon})),i.createElement(S.a.White,{title:t.card.shortenIt.selectorTooltip(V.focused),name:V.focused,key:V.focused,active:e.view(e=>e===V.focused),onClick:()=>e.set(V.focused),className:se.textButton},i.createElement(w.d.TextMedium,{className:se.textIcon})),i.createElement(S.a.White,{title:t.card.shortenIt.selectorTooltip(V.detailed),name:V.detailed,key:V.detailed,active:e.view(e=>e===V.detailed),onClick:()=>e.set(V.detailed),className:se.textButton},i.createElement(w.d.TextLong,{className:se.textIcon})))},Z=({activeSummary:e,showSelector:t,transform:a})=>{const n=i.useContext(h.a.Context),r=e.view(e=>n.card.shortenIt.compressionHint(q.a.fromRatio(a.labels[X(e)].compressionRatio)));return i.createElement("div",{className:se.summarySelector},i.createElement("div",{className:se.labelContainer},i.createElement(k.Base,{className:se.label},t?e:r),t&&i.createElement(k.Lawyer,{className:se.hint},r)),t&&i.createElement(K,{activeSummary:e}))},Q=({card:e,actions:t})=>{const a=i.useContext(h.a.Context);return i.createElement(i.Fragment,null,i.createElement(L.k,{alert:e.activeAlert,options:e.renderOptions,badge:i.createElement(v.a.Regular,null,a.beta)}),i.createElement(J,{sentenceCount:e.activeAlert.sentenceCount}),i.createElement(L.g,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))},J=({sentenceCount:e})=>i.createElement(k.H3,{className:se.sentenceCount},e," ",i.createElement(k.Base,{className:se.sentences},"sentences")),ee=({card:e,feedbackActions:t})=>i.createElement(i.Fragment,null,i.createElement(L.o,{card:e,feedbackActions:t}),i.createElement(L.h,{card:e,feedbackActions:t})),te=({card:e,actions:t})=>Object(L.A)(e.activeAlert,e.renderOptions.layoutDensity)?i.createElement(Y.a,{key:"card-actions-button",mode:"default",actions:t,card:e}):null,ae={color:p.Color.CoreRed50},ne={$nest:{"&:not([data-disabled='true'])[data-active='true']":{stroke:p.Color.CoreNeutral0}}},ie={padding:m.a.important(0)},re={color:p.Color.CoreNeutral50,lineHeight:m.a.rem(1.125)},se=m.a.stylesheet({sentenceCount:[ae],sentences:[{display:"inline-block"}],textIcon:[ne],textButton:[ie],summarySelector:[{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}],labelContainer:[{display:"flex",flexDirection:"column"}],label:[{fontWeight:"bold",textTransform:"capitalize"}],hint:[re]}),oe=({card:e,actions:t,isChecking:a,isCheckingGlobal:n})=>{const s=i.useContext(h.a.Context);return i.createElement(L.x,{card:e,actions:t,isChecking:a,isCheckingGlobal:n,cardBody:Object(r.constant)(i.createElement(Q,{card:e,actions:t})),mainActions:Object(r.constant)(i.createElement(ee,{card:e,feedbackActions:t})),cardFooter:a=>i.createElement(i.Fragment,null,i.createElement(L.i,{card:e}),i.createElement(L.w,{title:s.card.todoAction(e.activeAlert.todoAction),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:a,onClick:_.d.callOnce(()=>{t.next({type:f.b.Type.requestShortenItReplacements,alertId:e.activeAlert.id,itemId:e.id})})})),subActions:Object(r.constant)(i.createElement(te,{card:e,actions:t}))})},le=({card:e,actions:t,isChecking:a,isCheckingGlobal:n,transform:c})=>{const d=i.useContext(h.a.Context),p=o.a.create(V.brief),u=o.a.create(!0);return i.createElement(L.x,{card:e,actions:t,isChecking:a,isCheckingGlobal:n,mainActions:Object(r.constant)(i.createElement(L.f,{card:e,feedbackActions:t})),subActions:Object(r.constant)(i.createElement(te,{card:e,actions:t})),cardBody:Object(r.constant)(i.createElement(i.Fragment,null,i.createElement(L.k,{alert:e.activeAlert,options:e.renderOptions,badge:i.createElement(v.a.Regular,null,d.beta)}),Object(s.pipe)(e.renderOptions.layoutDensity,y.a.Density.matchOrDefault(y.a.Density.minimal)(()=>null,()=>i.createElement(L.g,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))),i.createElement(Z,{activeSummary:p,showSelector:3===c.labels.length,transform:c}),i.createElement(C.b,{classes:{rendered:ue.replacement,removing:ue.replacementHidden},timeout:250,content:p.view(t=>i.createElement(G.g,{label:c.labels[X(t)],collapsed:u,layoutDensity:e.renderOptions.layoutDensity}))}),i.createElement(L.m,{card:e,isChecking:a}))),cardFooter:a=>i.createElement(i.Fragment,null,i.createElement(L.i,{card:e}),i.createElement("div",{className:ue.footerBtns},i.createElement(L.w,{title:d.card.todoAction(c.tooltipText),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:a,onClick:_.d.callOnce(()=>{t.next({type:f.b.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:X(p.get()),cardType:f.b.getCardType(e)})})}),i.createElement(S.a.Ghost,{name:"expand-edits-btn",onClick:()=>u.modify(e=>!e),className:ue.expandEditsBtn},i.createElement(l.a.Fragment,null,u.view(d.card.shortenIt.expandEdits)))))})};var ce;(ce||(ce={})).Full=e=>{const{isChecking:t,isCheckingGlobal:a}=function(e,t,a){const n=O.a.useAtomOf({isWaiting:e.activeAlert.summariesRequestState===M.k.SummariesRequestState.requested,cardIsOpen:"focused"===e.visualState.transition.type||"expanded"===e.visualState.transition.type});return O.a.useMemoOnDidMount(()=>({isChecking:A.a.combineLatestStatic([t,n]).pipe(A.a.map(([e,t])=>e||t.isWaiting&&t.cardIsOpen),A.a.distinctUntilChanged()),isCheckingGlobal:A.a.combineLatestStatic([a,n]).pipe(A.a.map(([e,t])=>e||t.isWaiting&&!t.cardIsOpen),A.a.distinctUntilChanged())}))}(e.card,e.isChecking,e.isCheckingGlobal);return Object(s.pipe)(e.card.transform,c.g.filter(U.j.isShortenIt),c.g.map(e=>Object.assign(Object.assign({},e),{labels:Object(s.pipe)(e.labels,c.f.sort(U.k.ord))})),c.g.fold(Object(r.constant)(i.createElement(oe,Object.assign({},e,{isChecking:t,isCheckingGlobal:a}))),t=>i.createElement(le,Object.assign({},e,{transform:t}))))};const de={transition:`opacity ${m.a.seconds(L.y)}`},pe={padding:`0 ${m.a.rem(1)}`},ue=m.a.stylesheet({replacement:[de],replacementHidden:[de,{opacity:0}],footerBtns:[{display:"flex"}],expandEditsBtn:[pe]});var me=a("0Z6w"),he=a("CxAE");a.d(t,"a",(function(){return we}));const ge=({card:e,actions:t,isChecking:a,isCheckingGlobal:n})=>{const s=i.useContext(h.a.Context);return i.createElement(ve,{card:e,actions:t,isChecking:a,isCheckingGlobal:n,cardBody:Object(r.constant)(i.createElement(L.l,{card:e,actions:t,isChecking:a})),cardFooter:a=>i.createElement(i.Fragment,null,i.createElement(L.i,{card:e}),i.createElement("div",{className:xe.fullSentenceCardFooterBtns},i.createElement(L.w,{title:s.card.todoAction(e.activeAlert.todoAction),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:a,onClick:_.d.callOnce(()=>{t.next({type:f.b.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,cardType:f.b.getCardType(e)})})})))})},fe=({card:e,actions:t,isChecking:a,isCheckingGlobal:n,transform:d})=>{const p=i.useContext(h.a.Context),m=o.a.create(!0);return O.a.useSubscriptionTo(Object(s.pipe)(m,A.a.skip(1),A.a.tap(e=>t.next({type:f.b.Type.fullSentenceHighlightChangesToggle,showChanges:e})))),i.createElement(ve,{card:e,actions:t,isChecking:a,isCheckingGlobal:n,cardBody:Object(r.constant)(i.createElement(l.a.Fragment,null,i.createElement(L.k,{alert:e.activeAlert,options:e.renderOptions,badge:i.createElement(v.a.Regular,null,p.beta)}),i.createElement(ke,{isNew:e.renderOptions.isNew,actions:t}),Object(s.pipe)(e.renderOptions.layoutDensity,y.a.Density.matchOrDefault(y.a.Density.minimal)(()=>null,()=>i.createElement(L.g,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))),i.createElement(C.b,{classes:{rendered:xe.replacement,removing:xe.replacementHidden},timeout:250,content:m.pipe(A.a.combineLatest(d,(t,a)=>Object(s.pipe)(a,c.g.fold(()=>(u.Monitoring.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable in full-sentence card",{cardId:e.id}),null),a=>i.createElement(G.c,{replacements:a,showDiff:t,layoutDensity:e.renderOptions.layoutDensity})))))}),i.createElement(L.m,{card:e,isChecking:a}))),cardFooter:a=>i.createElement(i.Fragment,null,i.createElement(L.i,{card:e}),i.createElement(l.a.div,{className:xe.fullSentenceCardFooterBtns},i.createElement(L.w,{title:d.pipe(A.a.map(c.g.fold(()=>"",e=>p.card.todoAction(e.tooltipText)))),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:a,onClick:_.d.callOnce(()=>{t.next({type:f.b.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,cardType:f.b.getCardType(e)})})}),i.createElement(E.a,{className:xe.fullSentenceCardCheckbox,checked:m,name:"set-goals"},p.card.showChangesToggle)))})},be=({card:e,actions:t,isChecking:a,isCheckingGlobal:n,transform:o})=>{const p=i.useContext(h.a.Context),m=Object(s.pipe)(e.userInput,c.g.getOrElse(Object(r.constant)("")));return i.createElement(ve,{card:e,actions:t,isChecking:a,isCheckingGlobal:n,cardBody:n=>i.createElement(i.Fragment,{key:"content"},i.createElement(L.k,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(ke,{isNew:e.renderOptions.isNew,actions:t}),i.createElement(l.a.div,{className:n.pipe(A.a.map(Object(d.c)(xe.transformContainerInvisible,xe.transformContainer)))},i.createElement(C.b,{classes:{rendered:xe.replacement,removing:xe.replacementHidden},timeout:250,content:o.pipe(A.a.map(c.g.fold(()=>(u.Monitoring.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null),a=>i.createElement(G.e,{key:"label",gapValue:m,replacements:a,layoutDensity:e.renderOptions.layoutDensity,onFocus:()=>t.next({type:f.b.Type.focusUserInput,id:e.id,kind:"focus"}),onChange:a=>t.next({type:f.b.Type.changeUserInput,alertId:e.activeAlert.id,cardId:e.id,userInput:a}),onApply:_.d.callOnce(()=>t.next({type:f.b.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,cardType:f.b.getCardType(e)}))}))))})),i.createElement(k.Paper,{className:n.pipe(A.a.map(Object(d.c)(xe.transformHint,xe.transformHintInvisible)))},p.card.updatingSuggestion),i.createElement(L.m,{card:e,isChecking:a}),Object(s.pipe)(e.renderOptions.layoutDensity,y.a.Density.matchOrDefault(y.a.Density.minimal)(()=>null,()=>i.createElement(L.g,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})))),cardFooter:Object(r.constant)(i.createElement(L.i,{card:e}))})},ye=({card:e,actions:t,isChecking:a,isCheckingGlobal:n,transform:o})=>{const p=i.useContext(h.a.Context);return i.createElement(ve,{card:e,actions:t,isChecking:a,isCheckingGlobal:n,cardBody:n=>i.createElement(i.Fragment,null,i.createElement(l.a.Fragment,null,i.createElement(L.k,{alert:e.activeAlert,options:e.renderOptions,badge:i.createElement(v.a.Regular,null,p.beta)})),i.createElement(l.a.div,{className:n.pipe(A.a.map(Object(d.c)(xe.transformContainerInvisible,xe.transformContainer)))},i.createElement(C.b,{classes:{rendered:xe.replacement,removing:xe.replacementHidden},timeout:250,content:o.pipe(A.a.map(c.g.fold(()=>(u.Monitoring.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null),a=>{const n=Object(s.pipe)(e.synfonySelection,c.g.getOrElse(()=>[]));return i.createElement(G.b,{replacements:a,onClick:a=>_.d.callOnce(()=>{t.next({type:f.b.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:a,cardType:f.b.getCardType(e),drilldownSuggestionIds:n})}),onDive:(a,i)=>t.next({type:f.d.Kind.drilldown,alertId:e.activeAlert.id,wordIndex:a,cardId:e.id,alternativeId:i,drilldownSuggestionIds:n}),onBack:()=>t.next({type:f.d.Kind.back,cardId:e.id}),selection:n,layoutDensity:e.renderOptions.layoutDensity})})))})),i.createElement(k.Paper,{className:n.pipe(A.a.map(Object(d.c)(xe.transformHint,xe.transformHintInvisible)))},p.card.updatingSuggestion),i.createElement(L.m,{card:e,isChecking:a}),Object(s.pipe)(e.renderOptions.layoutDensity,y.a.Density.matchOrDefault(y.a.Density.minimal)(()=>null,()=>i.createElement(L.g,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})))),cardFooter:Object(r.constant)(i.createElement(L.i,{card:e}))})},Ce=({card:e,actions:t,isChecking:a,isCheckingGlobal:n,transform:o})=>{const p=i.useContext(h.a.Context);return i.createElement(ve,{card:e,actions:t,isChecking:a,isCheckingGlobal:n,cardBody:n=>i.createElement(i.Fragment,null,i.createElement(L.k,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(l.a.div,{className:n.pipe(A.a.map(Object(d.c)(xe.transformContainerInvisible,xe.transformContainer)))},i.createElement(C.b,{classes:{rendered:xe.replacement,removing:xe.replacementHidden},timeout:250,content:o.pipe(A.a.map(c.g.fold(()=>(u.Monitoring.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null),a=>i.createElement(L.n,{rl:a,onClick:a=>_.d.callOnce(()=>{t.next({type:f.b.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:a,cardType:f.b.getCardType(e)})}),layoutDensity:e.renderOptions.layoutDensity}))))})),i.createElement(k.Paper,{className:n.pipe(A.a.map(Object(d.c)(xe.transformHint,xe.transformHintInvisible)))},p.card.updatingSuggestion),i.createElement(L.m,{card:e,isChecking:a}),Object(s.pipe)(e.renderOptions.layoutDensity,y.a.Density.matchOrDefault(y.a.Density.minimal)(()=>null,()=>i.createElement(L.g,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})))),cardFooter:Object(r.constant)(i.createElement(L.i,{card:e}))})},ve=e=>{var t,a,n;return i.createElement(L.x,Object.assign({},e,{cardExtra:null!==(t=e.cardExtra)&&void 0!==t?t:Object(r.constant)(i.createElement(L.b,{card:e.card,actions:e.actions})),mainActions:null!==(a=e.mainActions)&&void 0!==a?a:Object(r.constant)(i.createElement(L.f,{card:e.card,feedbackActions:e.actions})),subActions:null!==(n=e.subActions)&&void 0!==n?n:Object(r.constant)(i.createElement(L.s,{card:e.card,actions:e.actions}))}))},Se=({card:e,actions:t,isChecking:a})=>i.createElement(T.a,{visualState:e.visualState,onFocus:()=>t.next({type:f.b.Type.alertCardShow,cardType:f.b.getCardType(e),alertId:e.activeAlert.id}),theme:Object(N.b)(e.renderOptions),body:i.createElement(L.l,{card:e,actions:t,isChecking:a}),mainActions:i.createElement(L.f,{card:e,feedbackActions:t}),footer:i.createElement(L.i,{card:e}),subActions:i.createElement(L.s,{card:e,actions:t}),extra:i.createElement(L.b,{card:e,actions:t})}),Ee=({card:e,actions:t,isChecking:a,isCheckingGlobal:n,transform:s})=>{const o=i.useContext(h.a.Context),c=i.useMemo(()=>new A.a.BehaviorSubject(!0),[]);return i.useEffect(()=>{"focused"===e.visualState.transition.type&&t.next({type:f.b.Type.smartPhrasesShowFullCard,alertId:e.activeAlert.id})},[t,e.activeAlert.id,e.visualState.transition.type]),O.a.useSubscriptionTo(c.pipe(A.a.filter(Boolean),A.a.delay(1e3),A.a.tap(()=>c.next(!1)))),i.createElement(L.e,{title:i.createElement(L.r,{title:e.activeAlert.title,emoji:e.activeAlert.emoji})},i.createElement(l.a.Fragment,null,c.pipe(A.a.map(l=>i.createElement(L.x,{card:e,actions:t,isChecking:a,isCheckingGlobal:n,cardTheme:l?{contentBody:xe.smartPhrasesCardBodyLoading}:void 0,cardBody:a=>i.createElement(L.q,{card:e,actions:t,isLoading:l,transform:s,classes:{transformContainer:a.pipe(A.a.map(Object(d.c)(xe.transformContainerInvisible,xe.transformContainer))),renderedReplacement:xe.replacement,hiddenReplacement:xe.replacementHidden}}),mainActions:Object(r.constant)(e.activeAlert.usedReplacementsIndexes.length>0?i.createElement(S.a.Ghost,{name:`smart-phrases-${e.activeAlert.intent}-done`,onClick:_.d.callOnce(()=>t.next({type:f.b.Type.smartPhrasesDone,alertId:e.activeAlert.id,source:"user"})),disabled:l},o.done):i.createElement(L.h,{card:e,feedbackActions:t,onClick:()=>t.next({type:f.b.Type.smartPhrasesDismiss,alertId:e.activeAlert.id}),disabled:l})),subActions:()=>e.activeAlert.replacementsLength>5||e.activeAlert.hideReplacements?i.createElement(S.a.Tertiary,{name:`smart-phrases-${e.activeAlert.intent}-show-more-ideas`,onClick:()=>{t.next({type:f.b.Type.smartPhrasesShowMoreIdeas,cardId:e.id,alertId:e.activeAlert.id}),c.next(!0)},disabled:l},i.createElement(w.d.SmartPhrases.ShowMore,null),o.card.smartPhrases.showMoreIdeas):null,cardExtra:()=>l?null:i.createElement(L.p,{card:e,actions:t})})))))},we=({card:e,actions:t,isChecking:a,isCheckingGlobal:r,transform:s})=>b.a.isSmartPhrasesItem(e)?i.createElement(Ee,{card:e,actions:t,isChecking:a,isCheckingGlobal:r,transform:s}):b.a.isSentenceLevelBrandTonesItem(e)?i.createElement(n.Full,{card:e,actions:t}):b.a.isTakeawayItem(e)?i.createElement(me.a.Full,{card:e,actions:t}):b.a.isShortenItItem(e)?i.createElement(ce.Full,{card:e,actions:t,isChecking:a,isCheckingGlobal:r}):b.a.isToneAIItem(e)?i.createElement(he.a.Full,{card:e,actions:t}):g.a.hasTransform(e)?g.a.hasFullSentenceTransform(e)?i.createElement(fe,{card:e,actions:t,isChecking:a,isCheckingGlobal:r,transform:s}):g.a.hasOneGapTransform(e)?i.createElement(be,{card:e,actions:t,isChecking:a,isCheckingGlobal:r,transform:s}):g.a.hasSynfonyTransform(e)?i.createElement(ye,{card:e,actions:t,isChecking:a,isCheckingGlobal:r,transform:s}):i.createElement(Ce,{card:e,actions:t,isChecking:a,isCheckingGlobal:r,transform:s}):g.a.isSimple(e)?i.createElement(ge,{card:e,actions:t,isChecking:a,isCheckingGlobal:r}):i.createElement(Se,{card:e,actions:t,isChecking:a}),ke=e=>i.createElement(l.a.Fragment,null,e.isNew.pipe(A.a.map(c.g.fold(r.constNull,t=>i.createElement(L.d,{type:t,actions:e.actions,key:"new-notification"}))),A.a.startWith(null))),_e={transition:`opacity ${m.a.seconds(L.y)}`,transitionDelay:m.a.seconds(L.y)},Oe={position:"absolute",top:m.a.rem(2),color:p.Color.CoreNeutral40,lineHeight:m.a.rem(2),transition:`opacity ${m.a.seconds(L.y)}`,transitionDelay:m.a.seconds(L.y)},Ae={transition:`opacity ${m.a.seconds(L.y)}`},Te={fontSize:m.a.rem(p.Text.BodySize),lineHeight:m.a.rem(2.0625)},xe=Object.assign({},m.a.stylesheet({invisible:[L.B],transformContainer:[_e],transformContainerInvisible:[_e,L.B,{transitionDelay:"initial"}],transformHint:[Oe],transformHintInvisible:[Oe,L.B,{transitionDelay:"initial"}],replacement:[Ae],replacementHidden:[Ae,{opacity:0}],fullSentenceCardFooterBtns:[{display:"flex",flexWrap:"wrap"}],fullSentenceCardCheckbox:[Te],smartPhrasesCardBodyLoading:[{padding:0}]}))},jW1I:function(e,t,a){"use strict";var n=a("D57K"),i=a("ERkP"),r=a("rk+4"),s=a("6gXa"),o=a("0Hf4"),l=a("uO+M"),c=a("Ov/9"),d=a("3BTE");const p="report-sections-document_insights-",u={insightsSection:`${p}insightsSection`,insightTable:`${p}insightTable`,insightHeader:`${p}insightHeader`,insightBody:`${p}insightBody`,insightTextCell:`${p}insightTextCell`,insightTextHeader:`${p}insightTextHeader`,insightScoreCell:`${p}insightScoreCell`,insightScore:`${p}insightScore`},m={paddingRight:s.a.px(32*c.a),width:s.a.px(321*c.a)},h={width:s.a.px(191*c.a),verticalAlign:"top",textTransform:"lowercase"},g={insightsSection:s.a.joinClasses([u.insightsSection,o.a.style(d.d,{$nest:{"&:not(:first-child)":{marginTop:s.a.px(24*c.a)}}})]),insightTable:s.a.joinClasses([u.insightTable,o.a.style(d.b,{marginTop:s.a.px(24*c.a),width:s.a.px(512*c.a)})]),insightHeader:s.a.joinClasses([u.insightHeader,o.a.style({letterSpacing:0,fontWeight:"bold",fontSize:s.a.px(18*c.a),lineHeight:s.a.px(32*c.a)})]),insightBody:s.a.joinClasses([u.insightBody,o.a.style({color:l.Color.CoreNeutral50,letterSpacing:s.a.px(.11*c.a),fontSize:s.a.px(13*c.a),lineHeight:s.a.px(20*c.a)})]),insightTextCell:s.a.joinClasses([u.insightTextCell,o.a.style(m)]),insightTextHeader:s.a.joinClasses([u.insightTextHeader,o.a.style(m,{textTransform:"capitalize"})]),insightScoreCell:s.a.joinClasses([u.insightScoreCell,o.a.style(h)]),insightScore:s.a.joinClasses([u.insightScore,o.a.style(h,{color:l.Color.CoreBlue50,letterSpacing:s.a.px(-.1*c.a)})])};a.d(t,"c",(function(){return b})),a.d(t,"a",(function(){return y})),a.d(t,"b",(function(){return C}));const f=({header:e,description:t,measure:a,score:n})=>i.createElement("section",{className:g.insightsSection},i.createElement("table",{className:g.insightTable},i.createElement("tbody",null,i.createElement("tr",{className:g.insightHeader},i.createElement("td",{className:g.insightTextHeader},e),i.createElement("td",{className:g.insightScore},n)),i.createElement("tr",{className:g.insightBody},i.createElement("td",{className:g.insightTextCell},t),i.createElement("td",{className:g.insightScoreCell},a))))),b=e=>{var{score:t}=e,a=Object(n.__rest)(e,["score"]);return i.createElement(f,Object.assign({},a,{score:`${"number"!=typeof t||t<0?0:t>100?100:Math.round(t)}%`}))},y=e=>{var{score:t}=e,a=Object(n.__rest)(e,["score"]);return i.createElement(f,Object.assign({},a,{score:`${"number"!=typeof t?0:Math.round(10*t)/10}`}))},C=({stats:e})=>{const t=i.useContext(r.a.Context);return i.createElement("div",null,i.createElement(b,{header:t.performance.uniqueWordsTitle,description:t.performance.report.uniqueWordsDescription,measure:t.performance.uniqueWordsTitle,score:e.uniqueWords}),i.createElement(b,{header:t.performance.rareWordsTitle,description:t.performance.rareWords,measure:t.performance.rareWordsTitle,score:e.rareWords}),i.createElement(y,{header:t.performance.wordLengthTitle,description:t.performance.report.wordLengthDescription,measure:t.performance.report.wordLengthMeasure,score:e.wordLength}),i.createElement(y,{header:t.performance.sentenceLengthTitle,description:t.performance.report.sentenceLengthDescription,measure:t.performance.report.sentenceLengthMeasure,score:e.sentenceLength}))}},"ja/V":function(e,t,a){"use strict";a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return m}));var n=a("3s0z"),i=a("zR/0"),r=a("1huE"),s=a("gy42"),o=a("6fbX"),l=a("D9EC"),c=a("PrA7"),d=a("nQSW");class p{constructor(e){this._environment=e,this._registeredHotkeys=new Map,this._hotkeyEvents=new i.a.Subject,this._subs=new r.a.Keeper,this._logger=c.Monitoring.Logging.getLogger("hotkeyManager"),this._handleGlobalEvent=(e,t)=>{const a=Array.from(this._registeredHotkeys.values()).filter(t);if(0===a.length)return;if(a.length>1)return void this._logger.error(`Multiple hotkeys registered in the same context: ${a}`);const n=a[0];this._hotkeyEvents.next(n.id),n.preventDefault&&e.preventDefault()},this._listenGlobalInput=()=>i.a.fromEvent(document,"input").subscribe(e=>{const t=e;if("historyUndo"===t.inputType){const t=e=>"undo"===e.key;this._handleGlobalEvent(e,t)}else if("historyRedo"===t.inputType){const t=e=>"redo"===e.key;this._handleGlobalEvent(e,t)}}),this._listenGlobalKeydown=e=>i.a.fromEvent(document,"keydown").subscribe(t=>{const a=function(e){return t=>t.modifiers.has(n.a.short)===e.short&&t.modifiers.has(n.a.alt)===e.alt&&t.modifiers.has(n.a.shift)===e.shift&&(t.key===e.key||t.modifiers.size>0&&t.key===String.fromCharCode(e.keyCode))}({short:e?t.metaKey&&!t.ctrlKey:t.ctrlKey&&!t.metaKey,alt:t.altKey,shift:t.shiftKey,key:void 0!==t.key?t.key.toLowerCase():"Unknown",keyCode:t.which||t.keyCode});this._handleGlobalEvent(t,a)}),this._subs.push(this._listenGlobalKeydown(this._environment.has(d.b.Flag.isAppleSystem))),this._environment.platform===d.b.Platform.IPAD&&this._subs.push(this._listenGlobalInput())}createHotkey(e,t,a=n.b.Keydown,i=!0){return{id:u(),key:t.toLowerCase(),modifiers:e,source:a,preventDefault:i,toString:()=>(function(e,t,a){return Array.from(e).reduce((e,t)=>e+function(e,t){const a=t.has(d.b.Flag.isAppleSystem);switch(e){case n.a.alt:return a?"Option+":"Alt+";case n.a.shift:return"Shift+";case n.a.short:return a?"⌘+":"Ctrl+";default:return Object(o.d)(e)}}(t,a),"")+t})(e,t,this._environment)}}dispose(){this._subs.dispose()}bindHotkey(e){return i.a.defer(()=>(this._registeredHotkeys.set(e.id,e),this._hotkeyEvents.pipe(i.a.filter(t=>t===e.id),i.a.mapTo(s.b.voidValue)))).pipe(i.a.finalize(()=>{this._registeredHotkeys.delete(e.id)}))}}const u=(()=>{let e=1;return()=>e++})();var m;!function(e){e.Mock=class{constructor(){this.dispose=l.l}bindHotkey(e){return i.a.EMPTY}createHotkey(e,t){return{id:0,key:t,modifiers:e,source:n.b.Keydown,preventDefault:!0,toString:()=>"mockHotkey"}}}}(m||(m={}))},jcJZ:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a("ERkP"),i=a("vOOZ"),r=a("0vvr"),s=a("dE97"),o=a("GUi3"),l=a("4lva"),c=a("hoSD"),d=a("XaD9"),p=a("BM24"),u=a("/by5"),m=a("47ib");const h=({lensPreview:e,navigationVM:t})=>{const{gnarSpec:a,pageId:i}=n.useContext(d.a.Context);return n.createElement(u.c,{lens:e,activeLensId:t.activeLensId,tooltipAlignment:"left",onClick:()=>{t.events.next({type:"switchToLens",id:e.id,focusFirst:!0,actionSource:s.b.sidebar}),a.openLensButtonClick(c.f.camelize(e.title),i)}})},g=({navigationViewModel:e})=>n.createElement(i.a.div,{className:e.documentActions.view(e=>{const t="available"===e.proofit.kind||e.proofit.reason===l.d.EmptyDocument,a="available"===e.plagiarism.kind||e.plagiarism.reason===l.c.EmptyDocument;return t&&a?m.wrapper:t?m.wrapperProofitOnly:a?m.wrapperPlagiarismOnly:m.wrapperNoActions})},n.createElement(p.a,{isActive:e.activeLensId.view(o.a.isMainLens),onClick:()=>{e.events.next({type:"switchToAll",focusFirst:!0,actionSource:s.b.sidebar})},className:m.allAlertsBtn}),n.createElement(r.a,{name:"lenses",className:m.itemList},n.createElement(i.a.Fragment,null,e.lensPreviews.view(t=>Object.values(t).map(t=>n.createElement(h,{key:t.id,lensPreview:t,navigationVM:e})))),n.createElement(u.b,{navigationVM:e})))},joH1:function(e,t,a){"use strict";var n,i=a("ERkP"),r=a("rk+4"),s=a("Z5Rd"),o=a("czBP"),l=a("1nqz"),c=a("VRL6"),d=a("YnIn"),p=a("tZ26"),u=a("o79T"),m=a("4Edb");!function(e){const t={content:{wrapper:m.wrapper,icon:m.icon}};e.View=({notification:e,savedPrice:a,onClose:n,onChangePlan:o})=>{const l=i.useContext(r.a.Context).changePlan.hook;return i.createElement(s.b.Wrapper,{notification:e,onClose:n,theme:t},i.createElement(s.b.Content,null,i.createElement("div",{className:m.content},i.createElement(p.d.Paid,{width:18,className:m.iconPremium}),i.createElement("div",{className:m.text},l.title,i.createElement(u.a,{onClick:o,name:"changePlanNotification",className:m.changePlanBtn},i.createElement("b",null,l.button.switchTo,i.createElement("span",{className:m.price},l.button.price(a.price))))))))}}(n||(n={}));var h=a("nnns"),g=a("BugA"),f=a("1gzW"),b=a("6gXa"),y=a("WIwS"),C=a("ps/9"),v=a("uO+M");b.a.style({display:"flex",flexDirection:"column",width:"100vw",height:"100vh",background:v.Color.CoreNeutral1,justifyContent:"center",alignItems:"center"});const S=b.a.style({padding:b.a.rem(1.5),width:b.a.rem(C.u-C.b),borderRadius:b.a.rem(C.r),background:v.Color.CoreNeutral0,boxShadow:y.o,transform:`translateX(${b.a.rem(-1*(C.o-C.c+C.b))})`,$nest:{[`@media (${C.x})`]:{width:b.a.rem(C.v-C.b)}}}),E=b.a.style({display:"flex",marginBottom:b.a.rem(1)}),w=(b.a.style({marginBottom:b.a.rem(1)}),b.a.style({marginBottom:b.a.rem(1),fontWeight:700})),k=(b.a.style({marginLeft:b.a.rem(.5)}),b.a.style({maxWidth:"100%"})),_=b.a.style({paddingRight:b.a.rem(.5),paddingLeft:b.a.rem(.5)}),O=b.a.joinClasses([b.a.style({marginRight:b.a.rem(.5),marginLeft:b.a.rem(-.5),textTransform:"none",letterSpacing:"normal",fontSize:b.a.rem(v.Text.BodySize)}),_]);var A;(A||(A={})).View=({name:e,title:t,description:a,cta:n,dismiss:r,topPart:s,rightPart:o,onCTA:l,onDismiss:c,onShow:d})=>(f.a.useEffectOnDidMount(()=>d&&d()),i.createElement("section",{className:S},s,i.createElement("div",{className:E},i.createElement("div",null,i.createElement(g.Base,{className:w},t),i.createElement(g.Base,null,a)),o),i.createElement("div",{className:k},i.createElement(h.a.Ghost,{name:e,className:O,onClick:l},n),i.createElement(h.a.Flat,{name:`dismiss.${e}`,className:_,onClick:c},r))));var T=a("kED/");const x=({className:e})=>i.createElement("svg",{viewBox:"0 0 68 68",width:"68",height:"68",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e},i.createElement("path",{d:"M12.965 22.107c3.688-6.33 10.104-10.96 17.954-11.942 4.466-.621 8.752.094 12.604 1.714.68.292 1.411.648 2.027.994.616.346 1.284.755 1.9 1.102a23.872 23.872 0 016.326 6.12c.467.686.987 1.435 1.391 2.175.35.676.701 1.352.998 1.965.872 2.073 1.552 4.305 1.808 6.678.831 6.42-1.022 12.61-4.636 17.478-.806 1.107-1.718 2.088-2.683 3.006-1.484 1.461-3.18 2.67-4.92 3.698-2.662 1.48-5.578 2.526-8.793 2.96-5.77.745-11.235-.6-15.809-3.338a18.989 18.989 0 01-3.523-2.65",stroke:"#8383EF"}),i.createElement("path",{d:"M31.985 18.544c.297-.034.594-.067.827-.048M34.467 18.401c1.995.051 3.841.443 5.592 1.238M40.791 19.995c.223.136.51.22.733.356.392.21.838.482 1.23.692 1.55 1.071 3.015 2.43 4.109 3.992.308.496.68.94.87 1.426.255.433.457.803.648 1.289a16.01 16.01 0 011.202 4.275c.565 4.163-.621 8.178-2.964 11.33-.53.66-1.124 1.374-1.707 1.972A16.193 16.193 0 0141.7 47.7c-1.24.718-2.64 1.246-4.083 1.594",stroke:"#00B18F"}),i.createElement("path",{d:"M34.82 41.18a7.096 7.096 0 01-4.615-.978c-.392-.21-.721-.473-1.05-.736-.16-.19-.436-.39-.595-.579-.85-1.012-1.497-2.302-1.657-3.785-.138-1.07-.044-2.12.274-3.033.021-.234.159-.457.233-.627.138-.224.223-.51.36-.734 1.05-1.851 2.937-3.22 5.26-3.552 1.305-.125 2.589-.016 3.66.486.17.073.393.21.563.283.17.073.392.21.562.283a6.731 6.731 0 011.837 1.801",stroke:"#1CA6D0"}),i.createElement("path",{d:"M8.764 63.084h18.649c3.813 0 6.933-3.139 6.933-6.974V32.818c0-3.835-3.12-6.973-6.933-6.973H8.764c-3.812 0-6.932 3.138-6.932 6.973V56.11c.07 3.836 3.12 6.974 6.932 6.974z",fill:"#F2F3FA",stroke:"#1C1E33"}),i.createElement("path",{d:"M18.123 54.297c6.012 0 10.885-4.902 10.885-10.949 0-6.046-4.873-10.948-10.884-10.948-6.012 0-10.885 4.902-10.885 10.948 0 6.047 4.873 10.949 10.884 10.949z",fill:"#AFE4F4",stroke:"#1C1E33"}),i.createElement("path",{d:"M8.14 47.672c-2.148-4.951-.277-10.67 4.091-13.529 1.872 0 4.16-.558 9.498 6.346a482.407 482.407 0 012.426 3.627c-1.11.627-2.218 1.045-2.218 1.045.97 2.093 3.05 5.37 1.317 7.88l-.832.42c-5.477 2.3-11.924-.21-14.281-5.789z",fill:"#fff",stroke:"#1C1E33"}),i.createElement("path",{d:"M19.302 36.096c-2.08-2.72-3.605-2.86-4.853-3.138-.277.14-.554.209-.901.348h-.07l-.831.419h-.07c-.277.14-.485.349-.762.488-1.248.907-2.288 2.022-3.05 3.347 0 .07-.07.07-.07.14-.138.209-.208.348-.277.558-.07.14-.139.209-.139.348-.069.14-.138.349-.208.558-.069.21-.138.349-.208.488-.069.14-.138.35-.138.489-.07.139-.07.348-.139.488-.07.14-.07.348-.139.488-.069.21-.069.349-.069.558-.07.14-.07.279-.07.418 0 .21 0 .419-.069.628V44.186c0 .348.07.697.14 1.045a11.92 11.92 0 001.039 3.138c.139.35.347.628.555.907.97 1.534 2.287 2.72 3.812 3.626.14-1.604-.623-3.696-1.317-5.37-1.109-2.72 1.317-3.068 2.565-1.882 1.248 1.116.902-.349.763-2.86-.07-3.556 2.773-5.509 4.506-6.694z",fill:"#1C1E33"}),i.createElement("path",{d:"M47.605 40.74H28.956c-3.813 0-6.932-3.139-6.932-6.974V10.474c0-3.835 3.12-6.973 6.932-6.973h18.649c3.813 0 6.932 3.138 6.932 6.973v23.292c0 3.835-3.12 6.974-6.932 6.974z",fill:"#fff",stroke:"#1C1E33"}),i.createElement("path",{d:"M38.246 31.954c-6.011 0-10.884-4.902-10.884-10.949s4.873-10.948 10.884-10.948c6.01 0 10.884 4.901 10.884 10.948 0 6.047-4.873 10.949-10.884 10.949z",fill:"#B9CDFF",stroke:"#1C1E33"}),i.createElement("path",{d:"M48.991 22.888c.971-5.37-2.149-10.46-7.07-12.204-1.803.419-4.16.419-7.835 8.438-.554 1.534-1.525 4.045-1.525 4.045 1.248.349 2.427.488 2.427.488-.486 2.232-1.803 5.928.485 7.95.277.07.555.14.901.21 5.893 1.045 11.578-2.93 12.617-8.927z",fill:"#fff",stroke:"#1C1E33"}),i.createElement("path",{d:"M45.04 24.84c1.178-2.37-1.179-3.975-1.872-2.58-.693 1.464-2.01 1.813-1.664.628.486-2.371 1.525-5.37-2.149-6.137-3.674-.697-3.882-3.975-2.98-6.555.831-.14 1.663-.21 2.564-.14 6.032.349 10.607 5.58 10.191 11.646-.208 3.417-1.941 6.346-4.506 8.229-.901-1.186-.416-3.487.416-5.09z",fill:"#1C1E33"}));var I,M=a("Qr4B");(I||(I={})).View=({type:e,dismissCount:t,onShow:a,onCTA:n,onDismiss:s})=>{const o=i.useContext(r.a.Context).gbUpHook;return i.useEffect(a,[]),i.createElement("section",{className:M.container},i.createElement(T.a.Regular,null,o.proTipBadge),i.createElement("div",{className:M.content},i.createElement("div",null,i.createElement(g.Base,{className:M.title},o[e].title),i.createElement(g.Base,null,o[e].description)),i.createElement(x,{className:M.image})),i.createElement("div",{className:M.buttonsContainer},i.createElement(h.a.Ghost,{name:e,className:M.ctaButton,onClick:n},o[e].cta),i.createElement(h.a.Flat,{name:`dismiss.${e}`,className:M.dismissButton,onClick:s},1===t?o.dontShowAgain:o.dismiss)))};var j=a("zNQL"),L=a("hoSD");const N=({expiryDate:e,notification:t,onShow:a,onDismiss:n,onUpdateBilling:o})=>{const l=i.useContext(r.a.Context).gbBillingMigration,c=L.d.Local.fullDate(L.d.Local.Timestamp.toLocal(e.getTime()));return i.useEffect(a),i.createElement(s.b.Wrapper,{notification:t,onClose:n},i.createElement("div",null,i.createElement(g.H4,{className:P.title},l.title),i.createElement(j.a,null),i.createElement(g.Base,{className:P.description},l.description(c)),i.createElement(j.a,null),i.createElement(u.a,{name:"addBillingInformation",onClick:o,className:P.cta},l.cta)))},P=b.a.prefixedStylesheet("gb_billing_migration_notification",{title:[{color:v.Color.CoreNeutral0,lineHeight:b.a.rem(1.5)}],description:[{color:v.Color.CoreNeutral0}],cta:[{fontWeight:600}]});var F,D=a("WiMv");(F||(F={})).CardMute=({onClose:e,onShow:t})=>{const n=a("PDwX"),s=a("s9lZ"),o=i.useContext(r.a.Context).mutedAlerts.onboarding.cardMute;return i.useEffect(()=>t()),i.createElement("div",{className:D.wrapper},i.createElement("video",{className:D.media,muted:!0,autoPlay:!0,loop:!0,src:n,poster:s}),i.createElement(g.Base,{className:D.description},o.description),i.createElement(u.a,{name:"gotItMutedOnboarding",className:D.btn,onClick:e},o.buttonText))};var R,B=a("OA+g"),H=a("karx");!function(e){const t={content:{wrapper:H.wrapper,icon:H.icon}};e.View=({trialEndDate:e,notification:a,onManageSubscription:n,onClose:o})=>{const l=i.useContext(r.a.Context).premiumUngatingRenewalNotification,c=L.d.Local.fullDate(L.d.Local.Timestamp.toLocal(e.getTime())),d=Object(B.flow)(n,o);return i.createElement(s.b.Wrapper,{notification:a,onClose:o,theme:t},i.createElement(s.b.Content,null,i.createElement("div",{className:H.content},i.createElement(p.d.Info,{width:18,className:H.iconInfo}),i.createElement("div",{className:H.message},i.createElement("div",{className:H.title},l.title),l.message(c),i.createElement(u.a,{onClick:d,name:"manageSubscription",className:H.manageSubscriptionBtn},l.cta)))))}}(R||(R={}));const W=()=>i.createElement("svg",{width:"300",height:"120",viewBox:"0 0 200 100",xmlns:"http://www.w3.org/2000/svg"},i.createElement("defs",null,i.createElement("radialGradient",{cy:"51.039%",fx:"50%",fy:"51.039%",r:"53.934%",gradientTransform:"matrix(0 1 -.99155 0 1.006 .01)",id:"a"},i.createElement("stop",{stopColor:"#03C1E2",offset:"0%"}),i.createElement("stop",{stopColor:"#0279D8",offset:"100%"}))),i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("path",{d:"M180.34 114.801c0 25.152-20.564 45.544-45.933 45.544-25.366 0-45.932-20.392-45.932-45.544 0-25.154 20.566-45.544 45.932-45.544 25.369 0 45.933 20.39 45.933 45.544",fill:"#15C39A"}),i.createElement("path",{d:"M143.47 120.973c-1.91 0-3.417 1.705-3.06 3.662.272 1.49 1.686 2.513 3.214 2.513h4.813l2.79-.389c-4.464 6.493-12.214 9.481-20.688 8.163-6.898-1.074-12.823-5.701-15.323-12.165-5.676-14.67 5.13-28.678 19.211-28.678 7.34 0 13.774 4.259 17.465 9.403.002 0 .004.107.004.111.98 1.4 2.92 1.802 4.333.83a3.03 3.03 0 0 0 .905-4.053h.022c-5.105-7.901-14.277-12.957-24.592-12.272-13.43.893-24.298 11.79-25.07 25.115-.898 15.505 11.506 28.164 26.933 28.164 8.104 0 15.36-3.499 20.302-9.16l-.585 3.247v2.935c0 1.513 1.029 2.917 2.533 3.186 1.975.352 3.692-1.143 3.692-3.036v-17.576H143.47",fill:"#FFF",fillRule:"nonzero"}),i.createElement("g",{transform:"translate(3 69.257)"},i.createElement("ellipse",{stroke:"#FFF",strokeWidth:"2.649",fill:"url(#a)",cx:"45.765",cy:"45.378",rx:"47.089",ry:"46.703"}),i.createElement("path",{fill:"#EDEDED",d:"M40.217 39.83l33.05-21.955-21.955 33.05-33.05 21.956z"}),i.createElement("path",{fill:"#FE4E4D",d:"M40.217 39.83l33.05-21.955-21.955 33.05z"}),i.createElement("path",{fillOpacity:".199",fill:"#1C1E29",d:"M73.268 17.875l-21.956 33.05-33.05 21.956z"}),i.createElement("path",{d:"M46.637 77.791v6.483H45.11V77.79h1.526zm-17.783-4.666l1.321.756-3.269 5.614-1.32-.756 3.268-5.614zm33.822 0l3.269 5.614-1.322.756-3.268-5.614 1.32-.756zM17.128 61.023l.763 1.31-5.662 3.242-.763-1.31 5.662-3.242zm57.273 0l5.662 3.242-.762 1.31-5.662-3.242.762-1.31zm10.59-16.293v1.513h-6.537V44.73h6.538zm-71.915 0v1.513H6.538V44.73h6.538zM79.41 25.369l.762 1.31-5.662 3.241-.762-1.31 5.662-3.241zm-67.29 0l5.662 3.241-.763 1.31-5.662-3.241.763-1.31zm52.692-14l1.321.757-3.269 5.614-1.32-.756 3.268-5.615zm-38.094 0l3.268 5.615-1.32.756-3.27-5.614 1.322-.757zm19.919-4.886v6.482H45.11V6.483h1.526z",fill:"#F3F5FA"})),i.createElement("g",null,i.createElement("path",{d:"M76.732 36.02h35.03a2.55 2.55 0 0 0 2.205-3.833L96.452 2.074a2.55 2.55 0 0 0-4.409 0L74.528 32.187a2.55 2.55 0 0 0 2.204 3.832z",fill:"#EA1537"}),i.createElement("path",{d:"M95.86 17.988l-.695 6.792h-1.859l-.694-6.792v-5.483h3.247v5.483zm.024 12.028h-3.272v-3.285h3.272v3.285z",fill:"#FFF",fillRule:"nonzero"}))));var $=a("JbXn"),V=a("2Jhg"),U=a("xlCj"),G=a("LNSM"),z=a("D8Xd"),q=a("zR/0"),Y=a("XaD9"),X=a("Fgeo"),K=a("vXpH"),Z=a("0sKd");const Q=U.a.create(e=>e.isEmpty(),e=>e?V.e:Object(V.h)("closedByUser")),J=({onClose:e,onGetStarted:t})=>{const a=i.useContext(r.a.Context).survey.proofitPromo,{gnarSpec:n,pageId:s}=i.useContext(Y.a.Context),o=G.a.create(V.e);return i.useEffect(()=>void n.surveyPopupShow(s,X.n.ProofitPromo),[]),f.a.useSubscriptionTo(o.pipe(q.a.switchMap(e=>e.fold(()=>q.a.EMPTY,q.a.of)),q.a.tap(a=>z.a.isCloseAction(a)?e():"getStarted"===a?t():void 0))),i.createElement(K.c.WithOverlay,{key:"proofit-modal-notification",position:K.b.BottomRight,isVisibleAtom:o.lens(Q),title:a.title,content:a.content,icon:i.createElement("picture",null,i.createElement("div",{className:Z.proofitIconBig})),iconPosition:K.a.Right,isCloseButton:!1,buttons:i.createElement(i.Fragment,null,i.createElement(h.a.Primary,{name:"getStartedBtn",className:Z.getStartedBtn,onClick:()=>{o.set(Object(V.h)("getStarted")),n.professionalProofreadingButtonClick(s,"proofitPromo")}},a.actions.view),i.createElement(h.a.Caps,{name:"closeBtn",className:Z.closeBtn,onClick:()=>o.set(Object(V.h)("closedByUser"))},a.actions.close))})};a.d(t,"a",(function(){return ee}));const ee=Object.assign(Object.assign({},l.a),{alertUndo:(e,t)=>i.createElement(c.a.Flexible,{notification:e,onClose:t("closedByUser"),action:t("undo"),params:e.args.params}),textRemoved:(e,t)=>i.createElement(ae,{action:t("undo")}),cardMuteOnboarding:(e,t)=>i.createElement(F.CardMute,{onShow:t("shown"),onClose:t("closedByUser")}),gnarSurvey:(e,t)=>i.createElement($.b,{surveyType:e.args.surveyType,onClose:t("closedByUser"),onRemindLater:t("remindLater"),onSubmit:t("submit")}),externalSurvey:(e,t)=>i.createElement($.a,{surveyType:e.args.surveyType,onClose:t("closedByUser"),onRemindLater:t("remindLater")}),proofitPromo:(e,t)=>i.createElement(J,{onClose:t("closedByUser"),onGetStarted:t("getStarted")}),premiumOnboardingSurvey:(e,t)=>i.createElement(d.a,{viewModel:e.args.viewModel,onClose:t("closedByUser")}),changePlanCta:(e,t)=>i.createElement(n.View,{notification:e,savedPrice:e.args.model.savedPrice,onClose:t("closedByUser"),onChangePlan:t("changePlan")}),gbUpHook:(e,t)=>i.createElement(I.View,{type:e.args.type,dismissCount:e.args.dismissCount,onShow:t("shown"),onCTA:t("cta"),onDismiss:t("dismiss")}),gbBillingMigration:(e,t)=>i.createElement(N,{notification:e,expiryDate:e.args.expiryDate,onShow:t("shown"),onUpdateBilling:t("cta"),onDismiss:t("closedByUser")}),changePlanSuccess:e=>i.createElement(ne,{planName:e.args.planName}),premiumUngatingRenewal:(e,t)=>i.createElement(R.View,{trialEndDate:e.args.trialEndDate,notification:e,onClose:t("closedByUser"),onManageSubscription:t("ctaManageSubscription")}),gbSatisfactionSurvey:(e,t)=>i.createElement(o.a,{viewModel:e.args.viewModel,onClose:t("closedByUser"),onComplete:t("completeSurvey")}),safariExtActivation:(e,t)=>i.createElement(te,{cta:t("activate"),close:t("closedByUser"),onShow:t("shown")})}),te=({cta:e,close:t,onShow:a})=>{const{safariExtActivationNotification:n,actions:s}=i.useContext(r.a.Context);return i.createElement(A.View,{title:n.title,description:n.description,cta:n.cta,dismiss:s.close,name:"safariExtActivationNotification",onCTA:e,onDismiss:t,onShow:a,rightPart:i.createElement(W,null)})},ae=({action:e})=>{const t=i.useContext(r.a.Context);return i.createElement(s.b.Content,null,i.createElement(c.a.Content,{action:e,content:t.textRemoved}))},ne=({planName:e})=>{const t=i.useContext(r.a.Context).changePlan;return i.createElement(s.b.Content,null,t.successfulNotificationCopy(e))}},kCgn:function(e,t,a){"use strict";var n=a("bYZB"),i=a("3s0z"),r=a("1huE"),s=a("zR/0"),o=a("i+T4"),l=a("lrqh"),c=a("6fbX"),d=a("D9EC"),p=a("PrA7"),u=a("nQSW"),m=a("+ukg"),h=a("zGI0"),g=a("I7vG"),f=a("T/5E"),b=a("Pe9T"),y=a("Fgeo"),C=a("wt7H"),v=a("GqpD");function S(e,t,a){const{appRouter:i,ded:r,userAccount:o,downloadViewModel:u,upgradeViewModel:m,modalManager:S,notificationsManager:E,docId:w,telemetry:k}=t,_=()=>a.visualState.set({type:v.a.Collapsed}),O=e.name;switch(O){case v.b.myGrammarly:return()=>{k.gnarSpec.backToMyGrammarlyButtonClick(k.pageId,"documentSetting"),i.navigate(f.a.routes.documents.href())};case v.b.newDocument:return()=>i.navigate(f.a.routes.new_document.href());case v.b.download:return()=>{_(),u.downloadOriginal()};case v.b.print:return()=>{_(),setTimeout(window.print,200)};case n.d.undo:return()=>{_(),r.undo()};case n.d.redo:return()=>{_(),r.redo()};case n.d.cut:return()=>{_(),r.cut()};case n.d.copy:return()=>{_(),r.copy()};case n.d.paste:return(t,a)=>(_(),a===h.a.Source.View?E.enqueue("clipboardNotSupported",{hotkey:Object(g.pipe)(e.hotkey,l.g.map(e=>e[0]),l.g.fold(()=>"hotkeys",e=>e.toString()))}):s.a.EMPTY);case n.d.selectAll:return()=>{_(),l.b.getOrElse(e=>p.Monitoring.Logging.getLogger("documentSettings").error(`Failed to execute 'Select all'. ${e}`))(r.setCursor(0,r.getLastPossibleCursorPosition()))};case v.b.editorSettings:return()=>(_(),S.show(C.a.preferences));case v.b.upgradeToPremium:return()=>{_(),m.openUpgradeUrl(b.k.Place.DenaliDocument.editorDenaliDocumentSettings)};case v.b.logout:return()=>o.logout();case v.b.feedback:return()=>(_(),S.show(C.a.feedback));case v.b.switchToClassicEditor:return()=>s.a.from(o.settings.setDocumentMode(w,y.d.EditorTs)).pipe(s.a.catchError(e=>(p.Monitoring.Logging.getLogger("documentSettings").error(`Switch to classic editor failed ${e}`),s.a.EMPTY)),s.a.finalize(()=>{i.navigate(f.a.routes.editor.href({docId:w}),{showSwitchUINotification:!0})}));case v.b.whatsNew:return()=>(_(),S.show(C.a.news));case v.b.language:return d.l;case v.b.close:case v.b.documentHeader:case v.b.uploadFile:case v.b.editHeader:case v.b.accountHeader:case v.b.userName:case v.b.email:case v.b.subscription:case v.b.support:case v.b.privacyPolicy:case v.b.termsOfService:return _;default:return Object(c.d)(O)}}var E=a("5p8x"),w=a("gy42");function k(e,t,a,i,r){const o=a.visualState.pipe(s.a.tap(e=>{e.type===v.a.Expanded?t.gnarSpec.docSettingsSidebarShow(t.pageId):t.gnarSpec.docSettingsSidebarClose(t.pageId)})),l=r.bindHotkey(r.createHotkey(new Set,"ESCAPE")),c=e.contentUpdated.pipe(s.a.merge(i.visible.pipe(s.a.filter(Boolean))),s.a.merge(l),s.a.first());return a.visualState.pipe(s.a.filter(e=>e.type===v.a.Expanded),s.a.tap(()=>{a.itemsState.modify(Object(E.j)((t,a)=>(function(e,t,a){switch(e){case n.d.undo:return Object.assign(Object.assign({},t),{disabled:!a.canUndo()});case n.d.redo:return Object.assign(Object.assign({},t),{disabled:!a.canRedo()});case n.d.cut:case n.d.copy:return Object.assign(Object.assign({},t),{disabled:n.g.isEmpty(a.getCursor())});case n.d.selectAll:return Object.assign(Object.assign({},t),{disabled:a.getTextLength()<=1});default:return t}})(t,a,e))),i.visible.set(!1)}),s.a.switchMap(()=>c.pipe(s.a.tap(()=>a.visualState.set({type:v.a.Collapsed})))),s.a.merge(o),s.a.mapTo(w.b.voidValue))}a.d(t,"a",(function(){return O})),a.d(t,"b",(function(){return A}));const _=e=>{const t=new Set([i.a.short]),a={active:!1,disabled:!0};return[{name:n.d.undo,hotkey:o.a.array([e.createHotkey(t,"Z")]),initialState:a},{name:n.d.redo,hotkey:o.a.array([e.createHotkey(t,"Y"),e.createHotkey(new Set([i.a.short,i.a.shift]),"Z")]),initialState:a}]};function O(e,t,a){const r=new Set([i.a.short]),s={active:!1,disabled:!1},d={active:!1,disabled:!0},p=[{name:v.b.close,hotkey:l.g.none,initialState:s},"separator",{name:v.b.myGrammarly,hotkey:l.g.none,initialState:s},"separator",{name:v.b.documentHeader,hotkey:l.g.none,initialState:s},{name:v.b.newDocument,hotkey:"desktop"===a.platform?o.a.array([e.createHotkey(r,"N")]):l.g.none,initialState:s},{name:v.b.uploadFile,hotkey:l.g.none,initialState:s},{name:v.b.download,hotkey:l.g.none,initialState:s},{name:v.b.print,hotkey:o.a.array([e.createHotkey(r,"P")]),initialState:s},"separator",{name:v.b.editHeader,hotkey:l.g.none,initialState:s},{name:n.d.undo,hotkey:o.a.array([e.createHotkey(r,"Z")]),initialState:d},{name:n.d.redo,hotkey:o.a.array([e.createHotkey(r,"Y"),e.createHotkey(new Set([i.a.short,i.a.shift]),"Z")]),initialState:d},"separator",{name:n.d.cut,hotkey:o.a.array([e.createHotkey(r,"X")]),initialState:d},{name:n.d.copy,hotkey:o.a.array([e.createHotkey(r,"C")]),initialState:d},{name:n.d.paste,hotkey:o.a.array([e.createHotkey(r,"V",i.b.Keydown,!1)]),initialState:s},{name:n.d.selectAll,hotkey:o.a.array([e.createHotkey(r,"A")]),initialState:s},"separator",{name:v.b.editorSettings,hotkey:l.g.none,initialState:s},"separator",{name:v.b.accountHeader,hotkey:l.g.none,initialState:s},{name:v.b.userName,hotkey:l.g.none,initialState:s},{name:v.b.email,hotkey:l.g.none,initialState:s},{name:v.b.upgradeToPremium,hotkey:l.g.none,initialState:s},{name:v.b.language,hotkey:l.g.none,initialState:s},{name:v.b.subscription,hotkey:l.g.none,initialState:s},{name:v.b.logout,hotkey:l.g.none,initialState:s},"separator",{name:v.b.support,hotkey:l.g.none,initialState:s},{name:v.b.whatsNew,hotkey:l.g.none,initialState:s},{name:v.b.feedback,hotkey:l.g.none,initialState:s},{name:v.b.switchToClassicEditor,hotkey:l.g.none,initialState:s},"separator",{name:v.b.privacyPolicy,hotkey:l.g.none,initialState:s},{name:v.b.termsOfService,hotkey:l.g.none,initialState:s}],u=function(e){const t=e.isPremium.get();return a=>{if(!h.a.isItem(a))return!0;const i=a.name;switch(i){case v.b.upgradeToPremium:return!t&&!e.demoMode;case v.b.switchToClassicEditor:return e.hasSwitchToDenaliUI&&!e.demoMode;case v.b.subscription:return!e.disableAppsPromotion&&!e.demoMode&&!m.g.isBusinessTeamMember(e.denaliUserType);case v.b.myGrammarly:case v.b.newDocument:case v.b.language:case v.b.editorSettings:case v.b.uploadFile:case v.b.support:case v.b.feedback:return!e.demoMode;case v.b.close:case v.b.documentHeader:case v.b.uploadFile:case v.b.download:case v.b.print:case v.b.editHeader:case v.b.accountHeader:case v.b.userName:case v.b.email:case v.b.logout:case v.b.support:case v.b.whatsNew:case v.b.feedback:case v.b.privacyPolicy:case v.b.termsOfService:case n.d.undo:case n.d.redo:case n.d.cut:case n.d.copy:case n.d.paste:case n.d.selectAll:return!0;default:return Object(c.d)(i)}}}(t);return p.filter(u).filter((e,t,a)=>a[t-1]!==e)}function A(e,t,a,l,c,g,f,b,y,C,E,w,A,T,x,I){const M=new r.a.Keeper,j=c.features.denali.documentToolbar===m.d.documentSettings?O(e,c.features,E):E.platform===u.b.Platform.IPAD?function(e,t,a){const r=new Set([i.a.short]),s={active:!1,disabled:!0};return[...O(e,t,a),"separator",{name:n.d.undo,hotkey:o.a.array([e.createHotkey(r,"UNDO",i.b.Input)]),initialState:s},{name:n.d.redo,hotkey:o.a.array([e.createHotkey(r,"REDO",i.b.Input)]),initialState:s}]}(e,c.features,E):_(e),{viewModel:L,events:N}=Object(v.d)(j,l,c,g,C,E,w,T,I,a),P=function(e,t,a){return e.filter(h.a.isItem).reduce((e,n)=>Object.assign(Object.assign({},e),{[n.name]:S(n,a,t)}),{})}(j,L,{appRouter:a,ded:t,userAccount:c,downloadViewModel:f,upgradeViewModel:b,modalManager:y,notificationsManager:w,docId:x,telemetry:T}),F=j.filter(h.a.isItem),D=h.a.toMenuEvents(t,{events:N}),R=t.isEditorFocused.pipe(s.a.combineLatest(L.visualState.pipe(s.a.map(e=>e.type===v.a.Expanded)),d.o)),B=h.a.bindHotkeys(t,F,e,R),H=s.a.mergeStatic(D,B).pipe(s.a.tap(([e,t,a])=>void T.gnarSpec.docSettingsEventFire(e,T.pageId,a))),W=p.Monitoring.Logging.getLogger("documentSettings"),$=h.a.linkEvents(H,P).pipe(s.a.catchError((e,t)=>(W.error("Error handling document settings event",e),t)));return M.push($.pipe(s.a.merge(k(t,T,L,A,e))).subscribe(),t.dontFreezeWhen(L.visualState.view("type").view(e=>e===v.a.Expanded),"documentSettings")),{viewModel:L,dispose:()=>M.dispose()}}},"kED/":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("ERkP"),r=a("9NHN"),s=a("uO+M"),o=a("6gXa"),l=a("ps/9"),c=a("tZ26");!function(e){e.Regular=e=>i.createElement("span",Object.assign({},Object(r.c)(h.badge,e.className)),e.children),e.New=({className:t})=>i.createElement(e.Regular,{className:t},"New"),e.NewWrapper=({children:t})=>i.createElement("div",null,i.createElement(e.New,null),t),e.Premium=({className:t})=>i.createElement(e.Regular,Object.assign({},Object(r.c)(h.premiumBadge,t)),i.createElement(c.d.PaidLink,{className:h.premiumBadgeIcon,width:12}),"PREMIUM"),e.Business=({className:t})=>i.createElement(e.Regular,Object.assign({},Object(r.c)(t)),"BUSINESS")}(n||(n={}));const d={display:"inline-block",padding:`${o.a.rem(s.Padding.BadgeY)} ${o.a.rem(s.Padding.BadgeX)}`,height:o.a.rem(s.LineHeight.Badge),borderRadius:o.a.rem(l.t),background:s.Color.CoreGreen10,color:s.Color.CoreGreen70,verticalAlign:"middle",textAlign:"center",textTransform:s.TextTransform.Badge,letterSpacing:s.LetterSpacing.Badge,fontWeight:s.FontWeight.Badge,fontSize:o.a.rem(s.FontSize.Badge),lineHeight:o.a.rem(s.LineHeight.Badge)},p={marginRight:s.Padding.BadgeX,maxWidth:o.a.rem(s.LineHeight.Badge),maxHeight:o.a.rem(s.LineHeight.Badge),minWidth:o.a.rem(s.LineHeight.Badge),minHeight:o.a.rem(s.LineHeight.Badge),verticalAlign:"top"},u={background:s.Color.CoreYellow20,color:s.Color.CoreYellow80},m={fill:s.Color.CoreYellow80},h=o.a.stylesheet({badge:[d],badgeIcon:[p],premiumBadge:[d,u],premiumBadgeIcon:[p,m]})},kHl6:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a("ERkP"),i=a("LNSM"),r=a("vOOZ"),s=a("9NHN"),o=a("6gXa"),l=a("WIwS"),c=a("ps/9"),d=a("rk+4"),p=a("BugA"),u=a("zR/0"),m=a("gy42");function h({value:e,className:t,leftCustomClass:a,rightCustomClass:o}){const l=i.a.create(!1);requestAnimationFrame(()=>requestAnimationFrame(()=>l.set(!0)));const c=u.a.combineLatestStatic(m.b.toObservable(e),l,(e,t)=>t?`${Math.max(5,Math.abs(e-50))}%`:0),d=(e,t,a)=>m.b.toObservable(e).pipe(u.a.map(e=>e<50?t:a));return n.createElement(r.a.div,Object.assign({},Object(s.c)((e=>m.b.toObservable(e).pipe(u.a.map(e=>e<50?C.leftSideWrapper:C.rightSideWrapper)))(e),t)),n.createElement(r.a.div,Object.assign({},Object(s.c)(d(e,C.leftSideProgress,C.rightSideProgress),a&&o&&d(e,a,o)),{style:{width:c}})))}!function(e){e.Label=({value:e,className:t})=>{const a=n.useContext(d.a.Context).performance,i=e>66?a.aboveAverage:e>50?a.average:a.belowAverage;return n.createElement(p.Small,{className:t},i)}}(h||(h={}));const g={position:"relative",zIndex:1,display:"flex",width:o.a.percent(100),height:o.a.rem(.25),borderRadius:o.a.rem(c.s)},f={height:o.a.percent(100),backgroundColor:l.k,transition:"width .8s ease-in-out 0s"},b={marginRight:o.a.percent(50),borderTopLeftRadius:o.a.rem(.25),borderBottomLeftRadius:o.a.rem(.25)},y={marginLeft:o.a.percent(50),borderTopRightRadius:o.a.rem(.25),borderBottomRightRadius:o.a.rem(.25)},C=o.a.stylesheet({wrapper:[g],leftSideWrapper:[g,{justifyContent:"flex-end"}],rightSideWrapper:[g,{justifyContent:"flex-start"}],progress:[f],leftSideProgress:[f,b],rightSideProgress:[f,y]})},kQ5X:function(e,t,a){"use strict";a.r(t);var n=a("ERkP"),i=a("OA+g"),r=a("2Jhg"),s=a("vOOZ"),o=a("LNSM"),l=a("lrqh"),c=a("Z+UA"),d=a("x7eB"),p=a("8NES"),u=a("BBZl"),m=a("5GxT"),h=a("6gXa"),g=a("1gzW"),f=a("zR/0"),b=a("gy42"),y=a("PrA7"),C=a("mEc7"),v=a("XaD9"),S=a("Pe9T"),E=a("pYfS"),w=a("vLzu"),k=a("i1Da"),_=a("joH1"),O=a("1aGC"),A=a("24uI"),T=a("bYZB"),x=a("BugA"),I=a("D9EC"),M=a("hoSD"),j=a("b0nb"),L=a("PPsJ"),N=a("2xe6");const P=O.import("formats/list");class F extends P{static create(e){const t=super.create(e);return t.setAttribute("data-type",e),t}static formats(e){if(M.c.Guardians.isOL(e))return"ordered";if(M.c.Guardians.isUL(e)){switch(e.getAttribute("data-type")){case"dashed":return"dashed";default:return"bullet"}}}}var D=a("hJSx"),R=a("hY4K"),B=a("lg/X"),H=a("2yqQ"),W=a("o5+S"),$=a("nQSW"),V=a("Fgeo"),U=a("q9Ib"),G=a("fT1+"),z=a("LOBD"),q=a("m0pz"),Y=a("I7vG"),X=a("9NHN"),K=a("rk+4"),Z=a("SN1b"),Q=a("1huE"),J=a("BeBM"),ee=a("9/oM"),te=a("sDKV"),ae=a("AI7b"),ne=a("QwZm"),ie=a("aYRv"),re=a("nnns"),se=a("dgw0"),oe=a("tZ26"),le=a("6fbX"),ce=a("pKPl"),de=a("/LZ8");const pe=({position:e,children:t,className:a})=>{const i="top"===e;return n.createElement("div",Object.assign({},Object(X.c)(de.container,a)),n.createElement("div",{className:de.scrollWrap},n.createElement("div",{className:i?de.editorTopContentWrap:de.editorContentWrap},n.createElement("div",{className:i?de.editorTopContent:de.editorContent},t))))},ue=({children:e,selectionEffect:t})=>{const{withSelectionEffect:a}=n.useContext(te.a.Context),i=a(ce.b,t);return n.createElement(i,{theme:{editorContent:de.editorContentFullWidth,editorContentWrap:de.editorContentWrapFullWidth}},e)};var me=a("ttzm");const he=(e,{footer:t})=>{switch(e[0]){case V.b.wordsCount:return`${e[1].toLocaleString()} ${M.f.pluralize(e[1],t.word,t.words)}`;case V.b.charsCount:return`${e[1].toLocaleString()} ${M.f.pluralize(e[1],t.character,t.characters)}`;case V.b.readingTime:return`${M.d.convertTimeToShortString(e[1])} ${t.readingTime}`;case V.b.speakingTime:return`${M.d.convertTimeToShortString(e[1])} ${t.speakingTime}`;case V.b.readabilityScore:return Object(Y.pipe)(e[1],l.g.fold(()=>t.disabledReadabilityScore,e=>`${e} ${t.readabilityScore}`));default:return Object(le.d)(e[1])}},ge=(e,t)=>t===V.b.readabilityScore&&l.g.isNone(e[t]);class fe extends n.Component{componentWillUnmount(){this.props.footerElement.set(r.e)}render(){const{state:e,footerElement:t,className:a,children:i}=this.props;return n.createElement(s.a.div,Object.assign({},Object(X.c)(e.view(J.e.isSidebarOpened).view(Object(I.c)(me.footerSqueezed,me.footerWrapper)),a),{mount:e=>t.set(r.f.of(e))}),n.createElement(ue,{selectionEffect:te.a.Effect.collapse},i))}}!function(e){e.Container=({children:e})=>n.createElement("div",Object.assign({},Object(X.c)(me.footerContainer,me.fContainer)),e),e.Item=({children:e,order:t,className:a})=>n.createElement("div",Object.assign({style:{zIndex:t}},Object(X.c)(a,me.fItem)),e),e.IconCounters=({counterTuple:e})=>n.createElement(s.a.div,null,e.view(Object(i.flow)(l.g.map(e=>n.createElement(oe.d.WordCounter,{key:e[0],className:me.footerWordCounter})),l.g.toNullable))),e.Counters=({counterTuple:e})=>{const t=n.useContext(K.a.Context);return n.createElement(s.a.div,null,e.view(Object(i.flow)(l.g.map(e=>n.createElement("div",{key:e[0],className:me.counterContainer},n.createElement("div",{className:me.footerLabel},he(e,t)),n.createElement(oe.d.TriangleArrow,{className:me.footerArrow}))),l.g.toNullable)))};class t extends n.Component{constructor(){super(...arguments),this._subs=[],this._counters=o.a.create(l.g.none),this._currentCounter=this.props.settingsModel.footerCounterType,this._setCounter=e=>this.props.settingsModel.updateFooterCounterType(e)}componentDidMount(){this._subs.push(this.props.documentModel.checkingState.pipe(f.a.filter(e=>"idle"===e),f.a.first(),f.a.switchMapTo(this.props.documentModel.score),f.a.combineLatest(this.props.documentModel.textInfo)).subscribe(([e,t])=>this._counters.set(Object(Y.pipe)(t,l.g.map(t=>({wordsCount:t.wordsCount,charsCount:t.charsCount,readingTime:t.readingTime,speakingTime:t.speakingTime,readabilityScore:Object(Y.pipe)(e,l.g.map(()=>t.readabilityScore))}))))))}componentWillUnmount(){this._subs.forEach(e=>e.unsubscribe()),this._subs=[]}render(){const{renderLabel:e,theme:t}=this.props;return n.createElement(K.a.Context.Consumer,null,a=>n.createElement(se.a,{name:"footer-stats",customPosition:{top:"auto",left:"auto"},showDelay:300,theme:t,label:e(o.a.combine(this._counters,this._currentCounter,(e,t)=>Object(Y.pipe)(e,l.g.map(e=>[t,e[t]]))))},this._counters.view(Object(i.flow)(l.g.map(e=>Object.keys(e).map(t=>n.createElement(re.a.Flat,{key:t,name:t,className:me.listItem,disabled:ge(e,t),onClick:()=>this._setCounter(t)},!ge(e,t)&&this._currentCounter.view(e=>e===t?n.createElement(oe.d.Helpfull,{key:"helpfull-icon"}):null),he([t,e[t]],a)))),l.g.toNullable))))}}e.WordCounter=t}(fe||(fe={}));var be=a("a7fj");const ye=({isSaved:e,className:t})=>n.createElement(x.Small,Object.assign({key:"saved-wrapper","data-name":"save-status"},Object(X.c)(e.pipe(f.a.audit(e=>f.a.timer(e?1e3:0)),f.a.startWith(!1),f.a.map(e=>e?be.saved:be.notSaved)),t)),n.createElement(s.a.span,{"data-saved":e.pipe(f.a.startWith(!0))}),"Saved");var Ce=a("BnIB"),ve=a("8P+J"),Se=a("wI8h"),Ee=a("uth1");const we=({view:e})=>{const{emogenie:{popup:{title:t,subtitle:a}}}=n.useContext(K.a.Context);return n.createElement(s.a.Fragment,null,e.view(i=>Se.a.View.isReport(i)?n.createElement(se.a,{key:"emogenie-dropdown",name:"emotions",align:"right",appearanceBehavior:"mouseHover",dontCloseOnClickInside:!0,theme:{dropdownList:Ee.wrapper},label:n.createElement(s.a.Fragment,null,e.view(e=>e).view(({primaryItem:e})=>n.createElement("div",{className:Ee.primaryItemWrapper},n.createElement(ve.a,{className:Ee.primaryItem},e.emoji))))},n.createElement(n.Fragment,null,n.createElement(x.H3,null,t),n.createElement(x.Base,null,a),n.createElement(s.a.div,{className:Ee.report},e.view(e=>e).view(({primaryItem:e,secondaryItems:t})=>n.createElement(n.Fragment,null,n.createElement(ke,{item:e}),t.map(e=>n.createElement(ke,{item:e,key:e.name}))))))):n.createElement(re.a.Ghost,{name:"emogenie-zero",disabled:!0,title:Object(Y.pipe)(i.tooltipText,l.g.map(e=>n.createElement("div",{className:Ee.zeroStateTooltip},e)),l.g.orUndefined)},n.createElement(oe.d.NoTone,{className:Ee.primaryItemIcon}))))},ke=({item:e})=>n.createElement("div",{className:Ee.reportItem},n.createElement(ve.a,{className:Ee.reportItemEmoji},e.emoji),n.createElement(x.Base,{className:Ee.reportItemName},e.name),n.createElement(_e,{className:Ee.reportItemIntensity,intensity:e.intensity,caption:e.intensityCaption}),n.createElement("div",{className:Ee.reportItemActions},n.createElement(re.a.Ghost,{className:Ee.button,animationMode:Ce.a.None,title:e.actions.like.tooltip,name:e.actions.like.name,onClick:e.actions.like.handler,disabled:e.actions.like.disabled,active:e.actions.like.active},n.createElement(oe.d.VotedUp,null)),n.createElement(re.a.Ghost,{className:Ee.button,animationMode:Ce.a.None,disabled:e.actions.dislike.disabled,title:e.actions.dislike.tooltip,name:e.actions.dislike.name,onClick:e.actions.dislike.handler,active:e.actions.dislike.active},n.createElement(oe.d.VotedDown,null)))),_e=({intensity:e,caption:t,className:a})=>n.createElement("span",{className:a},n.createElement(Z.a,{title:t,align:"topCenter"},n.createElement("span",null,Se.a.intensitiesOrder.map(t=>n.createElement("span",Object.assign({key:t},Object(X.c)(Ee.intensityItem,t<=e?Ee.intensityColor:Ee.intensityNoColor)))))));var Oe=a("rmLU"),Ae=a("Hj4v");const Te=({officeAddinSupported:e})=>{const{footer:{rtfCompatibilityInfo:t}}=n.useContext(K.a.Context),a=n.useContext(Oe.a.Context),{gnarSpec:i,pageId:r}=n.useContext(v.a.Context);return n.useEffect(()=>{i.rtfCompatibilityViewBlockShow(r)}),n.createElement(x.Small,null,n.createElement(ve.a,null,t.message.plainText),n.createElement(Z.a,{align:"topCenter",title:n.createElement("div",{className:Ae.rtfTooltip},t.tooltip)},n.createElement("span",{className:Ae.rtfDisabled},t.message.textWithTooltip)),".",e&&n.createElement(n.Fragment,null,t.officeAddinPromo.part1,n.createElement("a",{target:"_blank",href:a.officeAddin.infoURL,onClick:()=>{i.rtfOfficeAddinPromoButtonClick(r)}},t.officeAddinPromo.part2)))};var xe=a("ythQ"),Ie=a("3sgk");const Me="header-title-input";var je;!function(e){e.isTitleInput=function(e){return e&&e.name===Me};class t extends n.Component{constructor(){super(...arguments),this._footerEl=o.a.create(r.e),this._subs=new Q.a.Keeper}componentDidMount(){this._subs.push(this._footerEl.pipe(f.a.combineLatest(this.context)).subscribe(([e])=>{this.props.viewportPadding.set({top:this._titleEl.offsetHeight,bottom:e.fold(()=>0,e=>e.offsetHeight)})}))}componentWillUnmount(){this._subs.dispose()}render(){const{denaliEditor:e,documentModel:t,state:r,settingsModel:o,formattingViewModel:l,clientsState:c,emotionsViewModel:d}=this.props;return n.createElement(s.a.div,{className:Ie.toolbarWrapperTier},n.createElement(i.Component,{key:"toolbar-title",isOpened:r.view(J.e.isSidebarOpened),className:de.overlayClickableEl,denaliEditor:e,documentModel:t,remSize:this.context,onMount:e=>this._titleEl=e}),n.createElement(s.a.div,{className:Ie.toolbarContainer},n.createElement(a,{footerEl:this._footerEl,state:r,formattingViewModel:l,documentModel:t,settingsModel:o,emotionsViewModel:d,clientsState:c})))}}t.contextType=d.a.Context,e.Component=t;const a=({footerEl:e,state:t,formattingViewModel:a,documentModel:i,settingsModel:r,emotionsViewModel:o,clientsState:d})=>n.createElement(fe,{className:de.overlayClickableEl,footerElement:e,state:t},n.createElement(fe.Container,null,n.createElement(c,{officeAddinSupported:ae.a.isSupported(d.officeAddin),rtfMode:i.rtfMode,toolbarViewModel:a.map(({toolbarViewModel:e})=>e)}),n.createElement(fe.Item,{className:Ie.bigWordCounter,order:2},n.createElement(fe.WordCounter,{theme:{dropdownContainer:Ie.dropdownContainer,dropdownList:i.rtfMode!==ne.DocumentFeatures.FormattingMode.off?Ie.dropdownListLeft:Ie.dropdownListRight},documentModel:i,settingsModel:r,renderLabel:e=>n.createElement(fe.Counters,{counterTuple:e})})),i.rtfMode!==ne.DocumentFeatures.FormattingMode.off&&n.createElement(fe.Item,{className:Ie.smallWordCounter,order:1},n.createElement(fe.WordCounter,{theme:{dropdownContainer:Ie.dropdownContainer,dropdownList:Ie.dropdownListLeft},documentModel:i,settingsModel:r,renderLabel:e=>n.createElement(fe.IconCounters,{counterTuple:e})})),n.createElement(s.a.Fragment,null,Object(Y.pipe)(o,l.g.map(e=>n.createElement(fe.Item,{className:Ie.footerEmotions,order:2},n.createElement(we,{view:e.visualState}))),l.g.orNull))));let i;!function(e){e.Component=({denaliEditor:e,isOpened:t,documentModel:a,remSize:i,onMount:r,className:o})=>{const{gnarSpec:l,pageId:c}=n.useContext(v.a.Context),d=n.useContext(K.a.Context),{withSelectionEffect:p}=n.useContext(te.a.Context),[u,m]=(e=>{const{ref:t,onMount:a}=g.a.useElWatcher();return[t.pipe(f.b.compactMap(t=>e.pipe(f.a.scan((e,t)=>[e[1],t?t.length:0],[0,0]),f.a.switchMap(([e,a])=>f.a.timer(0,500).pipe(f.a.map(n=>({width:t.offsetWidth+(n||!a||e>a?0:10)})),f.a.take(2))))),f.a.startWith({width:0})),a]})(a.title),h=((e,t)=>{const a=new f.a.BehaviorSubject(!1),n=f.a.combineLatestStatic(e.scrollPosition,e.viewport.pipe(f.a.map(({text:e})=>e)),(e,t)=>t.top-e).pipe(f.a.combineLatest(t),f.a.auditTime(100),f.a.skip(1),f.a.map(([e,t])=>e<3.45*t),f.a.startWith(!1),f.a.distinctUntilChanged(),f.a.tap(e=>e||a.next(!1)));return{titleFocused:a.asObservable(),titleVisible:n,setFocus:e=>()=>a.next(e)}})(e,i),y=b.b.chooseWhen(t),C=b.b.chooseWhen(h.titleFocused),S=p(te.a.Effect.PlainContainer,te.a.Effect.collapse);return n.createElement(n.Fragment,null,n.createElement(S,Object.assign({},Object(X.c)(Ie.toolbarTitleContainer,o),{onMount:r})),n.createElement("div",{className:Ie.absoluteWrapper},n.createElement(ue,{selectionEffect:te.a.Effect.prevent},n.createElement(s.a.div,Object.assign({},Object(X.c)(t.view(e=>e?Ie.headerWrapperSqueezed:Ie.headerWrapper),o)),n.createElement("div",{className:Ie.headerContainer},n.createElement("div",{className:Ie.titleWrapper},n.createElement(s.a.div,Object.assign({},Object(X.c)(Ie.headerTitleHighlight,y(Ie.headerTitleContainer,Ie.headerTitleContainerFull),C(Ie.headerTitleContainerFocused,void 0))),n.createElement(ee.b,{alignment:"bottom",eventType:"onclick",themes:{containerWrapperClassName:Ie.headerOnboardingWrapper},stepId:ie.b.StepId.DocumentTitle,title:d.toolbar.title.onboarding.title,message:d.toolbar.title.onboarding.message},n.createElement(Z.a,{title:d.toolbar.title.rename,align:"bottomCenter",duration:2e3},n.createElement(x.Typography,Object.assign({style:u,name:Me,styleType:x.Typography.Type.Base,nodeType:"input",type:"text",autoComplete:"off",maxLength:5e3,key:Me,spellCheck:!1,onClick:()=>{l.newTitleButtonClick(c)},onFocus:h.setFocus(!0),onBlur:h.setFocus(!1),placeholder:d.toolbar.title.untitledDocument,className:Ie.headerTitle},Object(X.b)({value:a.title})))))),n.createElement(s.a.span,{"data-name":"saved-container",className:Ie.savedContainer},n.createElement(ye,{className:Ie.savedIndicator,isSaved:a.saved}))))))),n.createElement("span",{ref:m,className:Ie.shadow},n.createElement(s.a.Fragment,null,a.title.view(e=>e||d.toolbar.title.untitledDocument))))}}(i||(i={}));const c=({rtfMode:e,officeAddinSupported:t,toolbarViewModel:a})=>{const{withSelectionEffect:i}=n.useContext(te.a.Context),r=i(te.a.Effect.PlainContainer,te.a.Effect.resetAsap),s=e===ne.DocumentFeatures.FormattingMode.compatibility;return n.createElement(n.Fragment,null,s?n.createElement(fe.Item,{order:0},n.createElement(Te,{officeAddinSupported:t})):a.map(e=>n.createElement(fe.Item,{className:Ie.formattingShiftedLeft,order:0},n.createElement(r,null,n.createElement(xe.b,{viewModel:e})))).orNull())}}(je||(je={}));const Le=(e,t,a)=>{const n=q.b.isDraftAIMode(e.features.denali,a),i=a.rtfMode===S.e.DocumentFeatures.FormattingMode.on,r=t.has($.b.Flag.pasteAsPlainTextInSafariFromMSWord)?[T.f.MSWord]:[],s=O.import("formats/link");s.className=z.a.rtfLink;const o=O.import("formats/indent");o.className="ql-indent";const l=[F,s,o];return n&&l.push(N.a),new j.a({theme:H.a,modules:{history:D.a,clipboard:Object(L.b)(i,r),keyboard:R.a.getKeyboardWithBindings(i?Object.assign(Object.assign({},R.a.Bindings.rtfBindings),n?R.a.Bindings.templateSectionBindings:{}):R.a.Bindings.plainTextBindings),marks:B.a},formats:l},i?n?Object(I.p)(W.b.QuillFormatNames.is,e=>e===N.a.blotName):W.b.QuillFormatNames.is:A.a.skipAny,A.a.skipAny,{classes:{editorContainer:z.a.editorContainer},containerClass:e.settings.editorPreferences.view("fontSize").pipe(f.a.map(V.g.match("",z.a.bigSize)),f.a.map(e=>M.c.classes(e,x.style.paper,z.a.editorContainer))),freezeFocusFeature:!0,allowNavigationTo:e=>G.b.isSearchInput(e)||je.isTitleInput(e),shouldFocusEditor:U.a.isInlineCard})};var Ne=a("94k3"),Pe=a("QshB");class Fe{constructor(e,t,a,n,r){this._docModel=e,this._doxInit=t,this._doxEvents=a,this._features=n,this._log=y.Monitoring.Logging.getLogger("DoxSyncManager"),this._counter=y.Monitoring.TimeSeries.root.getCounter("dox.denali"),this.changes=Object(Y.pipe)(this._doxEvents.dox,f.a.filter(e=>"change"===e.kind),f.a.map(e=>e.change),f.a.startWith(this._doxInit.initialDelta)),this._log.debug("Got initial text, len: "+t.initialDelta.length),this._settingsHolder=t.meta.settings,this._title=t.meta.title;const s=Object(Y.pipe)(a.dox,f.a.filter(e=>"metadata_change"===e.kind),f.a.map(e=>e));this._subs=[r.contentUpdated.pipe(f.a.filter(T.b.isTextMaybeWithFormatting),f.a.debounceTime(200),f.a.map(r.getText),f.a.map(e=>({full:e.length-1,trimmed:e.trim().length}))).subscribe(b.b.toAtom(e.documentLength)),this._docModel.title.pipe(f.a.filter(e=>e!==this._title),f.a.tap(e=>this._docModel.saved.next(!1)),f.a.debounceTime(1e3)).subscribe(e=>{this._updateTitle(e||"")}),this._docModel.context.pipe(f.a.skip(1)).subscribe(e=>{const t=this._settingsHolder.changeContext(e);this._updateSettings(t)}),this._docModel.extraSettings.changes.subscribe(e=>{const t=this._settingsHolder.changeExtra(e);this._updateSettings(t)}),this._docModel.checkingState.pipe(f.a.combineLatest(this._docModel.counters),f.a.filter(([e,t])=>"idle"===e&&Pe.b.isValid(t)),f.a.map(([e,t])=>t),f.a.skip(1),f.a.debounceTime(1e3),f.a.distinctUntilChanged()).subscribe(e=>{l.l.toPromise(this._doxInit.remoteDocument.updateMetadata({errors:e.advanced+e.critical}))}),s.subscribe(({documentMetadata:e})=>{this._settingsHolder=e.settings,Object(Y.pipe)(e.proofit,l.g.fold(i.constVoid,e=>this._docModel.proofit.updateState(e))),this._title=e.title,this._docModel.title.set(e.title)}),this._doxEvents.acceptedMessage.subscribe(e=>{Ne.b.ChangesQueue.isCmd(e)||this._incCounter(e.kind,"accepted"),this._docModel.saved.next(this._doxInit.remoteDocument.inSync)}),this._doxEvents.droppedMessages.subscribe(({messages:e,reason:t})=>{const a=this._groupMessages(e);void 0!==a.change&&this._incCounter("change","dropped",a.change),void 0!==a.meta&&this._incCounter("meta","dropped",a.meta),a.change&&this._log.warn("got dropped messages",{counts:a,reason:t}),this._docModel.saved.next(this._doxInit.remoteDocument.inSync)})]}static createDoxEventsCollector(){return{dox:new f.a.Subject,acceptedMessage:new f.a.Subject,droppedMessages:new f.a.Subject}}pushChanges(e){this._features.demoMode||(this._incCounter("change","sent"),this._docModel.saved.next(!1),l.l.toPromise(this._doxInit.remoteDocument.pushChanges(e)))}dispose(){this._subs.forEach(e=>e.unsubscribe())}_updateSettings(e){this._incCounter("meta","sent"),this._docModel.saved.next(!1),this._settingsHolder=e,l.l.toPromise(this._doxInit.remoteDocument.updateMetadata({settings:e}))}_updateTitle(e){this._incCounter("meta","sent"),this._docModel.saved.next(!1),this._title=e,l.l.toPromise(this._doxInit.remoteDocument.updateMetadata({title:e}))}_incCounter(e,t,a=1){this._counter.getCounter(`message.${e}.${t}`).increment(a)}_groupMessages(e){return e.reduce((e,t)=>(void 0===e[t.kind]&&(e[t.kind]=0),e[t.kind]++,e),{})}}var De=a("D57K"),Re=a("NSdk"),Be=a("hUf6"),He=a("E3+O"),We=a("prnJ"),$e=a("WOlp"),Ve=a("SGhz"),Ue=a("FYFc"),Ge=a("4Gi8"),ze=a("rWEN"),qe=a("cA63"),Ye=a("HqKA"),Xe=a("PzR3"),Ke=a("FiSa");class Ze{constructor(e,t,a,n){this._events=e,this._capi=t,this._ded=a,this._capiConnection=n,this._log=y.Monitoring.Logging.getLogger("CapiSyncManager"),this._subs=[],this._isReady=!1,this.connectFromIdleSource=()=>{this._ded.flushChanges();const e=this._ded.getContents();return this._log.debug("sending ded current delta",A.a.anonymizeTextAndStringAttrs(e.delta)),e},this.connectFromResetSource=()=>{const e=this._initialDelta?this._initialDelta:this._ded.getContents();return this._initialDelta=void 0,e},this.setSessionOption=e=>Object(Y.pipe)(l.l.rightIO(()=>this._checkConnected()),l.l.chain(()=>this._capi.setSessionOption(e))),this.sendFeedback=e=>Object(Y.pipe)(this._capi.sendFeedback(e),l.l.fold(()=>l.l.rightIO(()=>this._checkConnected()),()=>l.l.right(void 0))),this.requestDocStats=Object(Y.pipe)(l.l.rightIO(()=>this._checkConnected()),l.l.chain(()=>this._capi.requestDocStats)),this.requestSynonyms=(e,t)=>Object(Y.pipe)(l.l.rightIO(()=>this._checkConnected()),l.l.chain(()=>this._capi.requestSynonyms(e,t))),this.shortenItSubmit=e=>Object(Y.pipe)(l.l.rightIO(()=>this._checkConnected()),l.l.chain(()=>this._capi.shortenItSubmit(e))),this.enablePlagiarismSearch=Object(Y.pipe)(l.l.rightIO(()=>this._checkConnected()),l.l.chain(()=>this._capi.enablePlagiarismSearch)),this.disablePlagiarismSearch=Object(Y.pipe)(l.l.rightIO(()=>this._checkConnected()),l.l.chain(()=>this._capi.disablePlagiarismSearch)),this.realtimeProofitSubmit=e=>Object(Y.pipe)(l.l.rightIO(()=>this._checkConnected()),l.l.chain(()=>this._capi.realtimeProofitSubmit(e))),this.realtimeProofitCancel=Object(Y.pipe)(l.l.rightIO(()=>this._checkConnected()),l.l.chain(()=>this._capi.realtimeProofitCancel)),this.boomerangGetSharedLink=Object(Y.pipe)(l.l.rightIO(()=>this._checkConnected()),l.l.chain(()=>this._capi.boomerangGetSharedLink)),this.boomerangCheckReviewersFeedback=e=>Object(Y.pipe)(l.l.rightIO(()=>this._checkConnected()),l.l.chain(()=>this._capi.boomerangCheckReviewersFeedback(e))),this.submitRecipients=e=>Object(Y.pipe)(l.l.rightIO(()=>this._checkConnected()),l.l.chain(()=>this._capi.submitRecipients(e))),this.ping=Object(Y.pipe)(l.l.rightIO(()=>this._checkConnected()),l.l.chain(()=>this._capi.ping)),this.getText=()=>this._capi.getText(),this.close=e=>this._capi.close(e),this.isClosed=()=>this._capi.isClosed(),this._subs.push(this._events.pipe(f.a.filter(Ne.a.CAPIEvent.is("ready")),f.a.switchMapTo(this._events.pipe(f.a.filter(Ne.a.CAPIEvent.is("disconnect")),f.a.first(),f.a.mapTo(!1),f.a.startWith(!0))),f.a.startWith(!1)).subscribe(e=>{this._isReady=e}))}pushChanges(e){return()=>Ke.a.isReset(e)&&!this._capiConnection.wasStarted?(this._log.debug("Got new Reset, triggering connection"),this._initialDelta=e,this._capiConnection.connect(this.connectFromResetSource).then(([e,t])=>l.b.right(l.g.some(t))).catch(e=>(this._log.warn("failed to connect to CAPI",e),l.b.left(e)))):this._capiConnection.wasStarted?this._isReady?this._capi.pushChanges(e)():(this._log.debug("Skipped sending change to CAPI as it is not ready yet"),this._initialDelta&&Ke.a.isDelta(e)&&(this._log.debug("Got change while establishing new CAPI connection, appending to initial Delta"),Object(Y.pipe)(this._initialDelta.compose(e),l.b.fold(()=>{this._log.error("Got invalid change while establishing new CAPI connection, skiping")},e=>{this._initialDelta=e}))),this._capiConnection.isIdle?(this._log.debug("received new change while CAPI is idle, connecting"),this._capiConnection.connect(this.connectFromIdleSource).catch(e=>this._log.warn("failed to connect to CAPI",e)).then(()=>l.b.right(l.g.none))):(this._log.debug("capi is not idle, skip capi reconnect"),Promise.resolve(l.b.right(l.g.none)))):(this._log.debug("Skipped sending change to CAPI as it is not started yet, triggering new connection"),this._capiConnection.connect(this.connectFromIdleSource).catch(e=>this._log.warn("failed to connect to CAPI",e)).then(()=>l.b.right(l.g.none)))}get checkingState(){return this._capi.checkingState}get asyncChecksState(){return this._capi.asyncChecksState}_checkConnected(){this._capiConnection.isIdle?(this._log.debug("received new command while CAPI connection is idle, connecting"),this._capiConnection.connect(this.connectFromIdleSource).catch(e=>this._log.warn("failed to connect to CAPI",e))):this._log.trace("already connected or cannot connect, skipping")}dispose(){this._subs.forEach(e=>e.unsubscribe())}}class Qe{constructor(e,t=new Set){this._events=e,this._debugTools=t,this._subs=new Q.a.Keeper,this._allMessages=[],this._debugTools.has("captureCapiMessages")&&(this._subs.push(this._events.subscribe(e=>{Ne.a.CAPIEvent.is("message_sent")(e)&&this._allMessages.push({direction:"SENT",data:e.message}),Ne.a.CAPIEvent.is("message_received")(e)&&this._allMessages.push({direction:"RECEIVED",data:e.message})})),Object(I.r)("popAllMessages",()=>JSON.stringify(this._allMessages.splice(0,this._allMessages.length))))}dispose(){this._subs.dispose()}}class Je{constructor(e,t,a,n,i,r=0){this._capi=e,this.events=t,this._sessionChecksState=a,this._log=y.Monitoring.Logging.getLogger("CheckingStateCAPIClient"),this._subs=[],this._checkingStateInt=new f.a.Subject,this.pushChanges=e=>Object(Y.pipe)(this._capi.pushChanges(e),l.l.map(e=>(this._checkingStateInt.next(this._capi.checkingState),this._updateAsyncChecksState(),e))),this.setSessionOption=e=>Object(Y.pipe)(l.l.fromIOEither(()=>(e.kind===Ne.a.CAPISessionOptionType.Context&&(this._sessionChecksState.score.set(l.g.none),this._checkingStateInt.next(this._capi.checkingState)),l.b.right(null))),l.l.chain(()=>this._capi.setSessionOption(e))),this.sendFeedback=e=>this._capi.sendFeedback(e),this.requestDocStats=()=>this._capi.requestDocStats(),this.requestSynonyms=(e,t)=>this._capi.requestSynonyms(e,t),this.shortenItSubmit=e=>this._capi.shortenItSubmit(e),this.enablePlagiarismSearch=()=>this._capi.enablePlagiarismSearch(),this.disablePlagiarismSearch=()=>this._capi.disablePlagiarismSearch(),this.realtimeProofitSubmit=e=>this._capi.realtimeProofitSubmit(e),this.realtimeProofitCancel=()=>this._capi.realtimeProofitCancel(),this.boomerangGetSharedLink=()=>this._capi.boomerangGetSharedLink(),this.boomerangCheckReviewersFeedback=e=>this._capi.boomerangCheckReviewersFeedback(e),this.submitRecipients=e=>this._capi.submitRecipients(e),this.ping=()=>this._capi.ping(),this.getText=()=>this._capi.getText(),this.close=e=>this._capi.close(e),this.isClosed=()=>this._capi.isClosed(),this._log.debug("Constructing client with _hasAlertsCache = "+n);const s=Ne.a.CAPIEvent.is("session_started"),o=Ne.a.CAPIEvent.is("session_started","queue_msgs_dropped");this._subs.push(this.events.subscribe(e=>{"finish"===e.kind&&this._checkingStateInt.next(this._capi.checkingState)}),this.events.pipe(f.a.filter(o),f.a.map(s),f.a.switchMap(b.b.orEmptyRight(f.a.of(void 0).pipe(f.a.delay(1e3)))),f.a.map(()=>this._capi.checkingState)).subscribe(this._checkingStateInt));const c=t.pipe(f.a.filter(s),f.a.skip(1),f.a.switchMapTo(t.pipe(f.a.filter(Ne.a.CAPIEvent.is("finish")),f.a.first(),f.a.mapTo(!1),f.a.startWith(!0))),f.a.startWith(!1)),d=this._checkingStateInt.pipe(f.a.withLatestFrom(c,(e,t)=>t&&"full"===e?"checking":e),f.a.share()),p=d.pipe(f.a.takeWhile(e=>"full"!==e)),u=d.pipe(f.a.filter(e=>"full"===e),f.a.switchMap(()=>p.pipe(f.a.combineLatest(f.a.timer(r),e=>e),f.a.startWith("full"))));this._subs.push(t.subscribe(e=>{"text_info"===e.kind?a.textInfo.set(l.g.some(e.data)):"finish"===e.kind?a.score.set(e.score):"async_check_finished"===e.kind&&this._updateAsyncChecksState()})),this._subs.push(f.a.mergeStatic(p,u).pipe(f.a.skipWhile(e=>n&&"idle"!==e),f.a.startWith(i>1?n?"checking":"full":"idle"),f.a.distinctUntilChanged()).subscribe(e=>{this._log.debug("Switching checking state to "+e),a.checkingState.set(e),"full"===e&&l.l.toPromise(this.sendFeedback({kind:Ne.a.SystemFeedbackType.RECHECK_SHOWN})).catch(e=>{Ve.b.isNotConnectedError(e)?this._log.error("tried to send RECHECK_SHOWN event to Capi when not connected and failed to wait for new connection",e):this._log.error("Failed to send RECHECK_SHOWN event on Capi",e)})}))}get checkingState(){return this._capi.checkingState}get asyncChecksState(){return this._capi.asyncChecksState}dispose(){this._subs.forEach(e=>e.unsubscribe())}_updateAsyncChecksState(){this._sessionChecksState.asyncChecksState.set(this._capi.asyncChecksState)}}var et=a("NNUY"),tt=a("aVfF");const at=1e4,nt=200;class it{constructor(e,t){this._events=e,this._capi=t,this.retryCommandWhen=Object(I.p)(Ve.a.isDroppedError,Ve.d.isTimeoutError),this.pushChanges=e=>this._capi.pushChanges(e),this.setSessionOption=e=>this._capi.setSessionOption(e),this.sendFeedback=e=>{switch(e.kind){case Ne.a.MutedFeedbackType.MUTE:case Ne.a.MutedFeedbackType.UNMUTE:case Ne.a.SystemFeedbackType.RECHECK_SHOWN:return Object(Y.pipe)(l.l.tryDelay(this._capi.sendFeedback(e),e=>this._untilWaitingForOT(e),at),Object(Ve.h)([tt.limitRetries(2),tt.exponentialBackoff(nt)],this.retryCommandWhen));default:return this._capi.sendFeedback(e)}},this.requestSynonyms=(e,t)=>Object(Y.pipe)(l.l.tryDelay(this._capi.requestSynonyms(e,t),e=>this._untilFinished(e),at),Object(Ve.h)([tt.limitRetries(2),tt.exponentialBackoff(nt)],this.retryCommandWhen)),this.shortenItSubmit=e=>Object(Y.pipe)(l.l.tryDelay(this._capi.shortenItSubmit(e),e=>this._untilFinished(e),at),Object(Ve.h)([tt.limitRetries(2),tt.exponentialBackoff(nt)],this.retryCommandWhen)),this.requestDocStats=Object(Y.pipe)(l.l.tryDelay(this._capi.requestDocStats,e=>this._untilFinished(e),at),Object(Ve.h)([tt.limitRetries(2),tt.exponentialBackoff(nt)],this.retryCommandWhen)),this.enablePlagiarismSearch=Object(Y.pipe)(l.l.tryDelay(this._capi.enablePlagiarismSearch,e=>this._untilFinished(e),at),Object(Ve.h)([tt.limitRetries(2),tt.exponentialBackoff(nt)],this.retryCommandWhen)),this.disablePlagiarismSearch=()=>this._capi.disablePlagiarismSearch(),this.realtimeProofitSubmit=e=>this._capi.realtimeProofitSubmit(e),this.realtimeProofitCancel=()=>this._capi.realtimeProofitCancel(),this.boomerangGetSharedLink=()=>this._capi.boomerangGetSharedLink(),this.boomerangCheckReviewersFeedback=e=>this._capi.boomerangCheckReviewersFeedback(e),this.submitRecipients=e=>Object(Y.pipe)(l.l.tryDelay(this._capi.submitRecipients(e),e=>this._untilFinished(e),at),Object(Ve.h)([tt.limitRetries(2),tt.exponentialBackoff(nt)],this.retryCommandWhen)),this.ping=()=>this._capi.ping(),this.getText=()=>this._capi.getText(),this.close=e=>this._capi.close(e),this.isClosed=()=>this._capi.isClosed()}get checkingState(){return this._capi.checkingState}get asyncChecksState(){return this._capi.asyncChecksState}_untilWaitingForOT(e){return this._untilEvent(e,"wait_for_ot")}_untilFinished(e){return this._untilEvent(e,"finish")}_untilEvent(e,t){return Ve.b.isNotConnectedError(e)?Object(Y.pipe)(this._events,f.a.filter(e=>e.kind===t),f.a.take(1),f.a.map(I.l),b.b.toTask,l.g.some):l.g.none}}var rt,st,ot,lt;(st=rt||(rt={})).noopSync={pushChanges:I.l},st.ignoreResult=function(e){return{pushChanges:t=>{e.pushChanges(t)}}},st.ignoreTEResult=function(e){return{pushChanges:Object(i.flow)(e.pushChanges,l.l.map(I.l))}},st.pushDeleteThenInsert=function(e){return{pushChanges:t=>{(Ke.a.isDelta(t)?Ke.a.fromArrayOfDeltas(A.a.splitToDeleteThenInsert(t.delta).filter(A.a.nonEmpty),t.prevLen):[t]).forEach(t=>e.pushChanges(t))}}},(ot||(ot={})).merge=function(e){return{changes:f.a.mergeStatic(...e.map(e=>e.changes))}},function(e){!function(e){e.echo="echo",e.silent="silent"}(e.Mode||(e.Mode={}))}(lt||(lt={}));class ct{constructor(e,t,a,n,i,r,s,o){const l=ct.NamedChangesSink.factory(o),c={pm:l(ct.Receiver.PM,i),dm:l(ct.Receiver.PM,r),capi:l(ct.Receiver.CAPI,n),dox:l(ct.Receiver.DOX,a),userTextSilent:l(ct.Receiver.UserText,ct._duplexToSync(e,lt.Mode.silent)),userTextEcho:l(ct.Receiver.UserText,ct._duplexToSync(e,lt.Mode.echo))};ct.Producer.create(ct.Producer.UserText,{changes:e.changes})(c.dm,c.pm,c.capi,c.dox),ct.Producer.create(ct.Producer.ALERT_APPLY,s)(c.userTextEcho),ct.Producer.create(ct.Producer.DOX,a)(c.dm,c.pm,c.userTextSilent,c.capi),t.subscribe(t=>{"before_alert"===t.kind&&e.flushChanges()})}static init(e,t,a,n,i,r,s){const o=new f.a.Subject;return new ct(e,t,a,n,i,r,s,o),o}}ct._duplexToSync=(e,t)=>({pushChanges:a=>{e.pushChanges(a,t)}}),function(e){let t,a,n;!function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.ALERT_APPLY="alert_synonyms_manager"}(t=e.Producer||(e.Producer={})),function(e){e.create=function(e,t){return(...a)=>t.changes.subscribe(t=>{a.forEach(a=>a.pushChanges(e,t))})}}(t=e.Producer||(e.Producer={})),function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.CAPI="checking_service",e.PM="position_manager"}(a=e.Receiver||(e.Receiver={})),function(e){function t(e,t,a){return{pushChanges:(n,i)=>{try{let r=t.pushChanges(i);"function"==typeof r&&(r=l.l.toPromise(r)),void 0!==r&&r.catch(t=>a.next({exception:t,details:{from:n,to:e}}))}catch(t){a.next({exception:t,details:{from:n,to:e}})}}}}e.factory=function(e){return(a,n)=>t(a,n,e)},e.create=t}(n=e.NamedChangesSink||(e.NamedChangesSink={}))}(ct||(ct={}));var dt,pt,ut,mt,ht,gt,ft,bt=a("5E2i"),yt=a("SYKK"),Ct=a("4ae2"),vt=function(){function e(e){var t=this;this._primarySourceChangeProcessor=e,this._log=y.Monitoring.Logging.getLogger("DuplexImpl",y.Logging.LogLevel.DEBUG),this._maybePrimarySourceContent=l.g.none,this._secondarySourceContent=Ke.a.unsafeRes(new Ct.a),this._syncFlash=new f.a.Subject,this._syncTimer=mt.getImmediateTimer(),this.state=new f.a.BehaviorSubject("idle"),this._changesToSecondarySource=new f.a.Subject,this._changesToSecondarySourceSync=new f.a.Subject,this.changesToPrimarySource=new f.a.Subject,this.changesToSecondarySource=this._changesToSecondarySource.pipe(f.a.switchMap((function(e){switch(e.kind){case"reset":return t._maybePrimarySourceContent=l.g.some(e.reset),f.a.mergeStatic(t._syncTimer.timer,t._syncFlash).pipe(f.a.first(),f.a.map((function(){var a=t._secondarySourceContent.delta.diff(e.reset.delta);return{fullText:e.reset,change:Ke.a.delta(a,t._secondarySourceContent.length)}})));case"change":return t._syncTimer.reset(),f.a.of({fullText:e.fullText,change:e.change});default:return Object(le.d)(e)}})),f.a.tap((function(e){var a=e.fullText;"syncing"===t.state.getValue()&&(t._log.debug("Back to consistent state"),t.state.next("idle")),t._maybePrimarySourceContent=l.g.none,t._secondarySourceContent=a})),f.a.map((function(e){return e.change})),f.a.filter((function(e){return e.delta.ops.length>0})),f.a.merge(this._changesToSecondarySourceSync),f.a.tap((function(){t._log.debug("Emit change to secondary source")})),f.a.publish(),f.a.refCount())}return Object.defineProperty(e.prototype,"flush",{get:function(){return this._flush(),yt.of(void 0)},enumerable:!1,configurable:!0}),e.prototype._flush=function(){this._syncFlash.next(void 0)},e.prototype.getSecondarySourceContents=function(){return this._secondarySourceContent},e.prototype.getPrimarySourceContents=function(){var e=this;return Object(Y.pipe)(this._maybePrimarySourceContent,l.g.getOrElse((function(){return e._secondarySourceContent})))},e.prototype.pushChanges=function(e){switch(e.from){case"primary":return this._pushChangesFromPrimarySource(e.change);case"secondary":return this._pushChangesFromSecondarySource(e.change,e.mode);default:Object(le.d)(e)}},e.prototype._pushChangesFromPrimarySource=function(e){var t=this;return this._log.debug("Got change from primary source"),Object(Y.pipe)(this._primarySourceChangeProcessor(this._secondarySourceContent,this._maybePrimarySourceContent,e),l.b.map((function(e){"flush"===e.kind?(t._flush(),t._changesToSecondarySourceSync.next(Ke.a.flush())):t._changesToSecondarySource.next(e)})))},e.prototype._pushChangesFromSecondarySource=function(e,t){var a=this;switch(this._log.debug("Got change from secondary source",{source:t}),e.kind){case"delta":return l.g.isNone(this._maybePrimarySourceContent)&&(this._log.debug("Enter inconsistent state"),this.state.next("syncing"),this._maybePrimarySourceContent=l.g.some(this._secondarySourceContent)),Object(Y.pipe)(this._secondarySourceContent,(function(t){return e.prevLen===t.length?Object(Y.pipe)(Ke.a.res(t.delta.compose(e.delta)),l.b.fold((function(){return l.b.left(new Error("Got non-document delta after apply"))}),(function(t){return l.b.right([e,t])}))):l.b.left(new Error("Got delta for wrong text, document length: "+t.length+", got change for "+e.prevLen))}),l.b.fold((function(e){return a._changesToSecondarySourceSync.next(a._secondarySourceContent),l.b.left(e)}),(function(e){var n=e[0],i=e[1];return a._secondarySourceContent=i,t===lt.Mode.echo&&a._changesToSecondarySourceSync.next(n),a.changesToPrimarySource.next(n),l.b.right(void 0)})));case"reset":return l.g.isNone(this._maybePrimarySourceContent)&&(this._log.debug("Enter inconsistent state"),this.state.next("syncing"),this._maybePrimarySourceContent=l.g.some(this._secondarySourceContent)),this._secondarySourceContent=e,"echo"===t&&this._changesToSecondarySourceSync.next(e),this.changesToPrimarySource.next(e),l.b.right(void 0);case"flush":return this.changesToPrimarySource.next(e),l.b.right(void 0);default:Object(le.d)(e)}},e}();pt=dt||(dt={}),function(e){e.reset=function(e){return l.b.right({kind:"reset",reset:e})},e.change=function(e){return l.b.right(Object(De.__assign)({kind:"change"},e))},e.error=function(e){return l.b.left(new Error(e))}}(ut||(ut={})),pt.deltaChangeProcessor=function(e,t,a){if(Ke.a.isFlush(a))return l.b.right(a);if(0===e.length)return Ke.a.isReset(a)?ut.change({fullText:a,change:a}):0===a.prevLen?Object(Y.pipe)(Ke.a.res(a.delta),l.b.fold((function(){return ut.error("Cannot apply non-document delta to an empty text")}),(function(e){return ut.change({fullText:e,change:a})}))):ut.error("Cannot apply delta to text. Expected change for len 0, but got "+a.prevLen);if(l.g.isNone(t))return Ke.a.isDelta(a)&&e.length!==a.prevLen?ut.error("Cannot apply delta for wrong text length, expected "+e.length+", but got "+a.prevLen):Object(Y.pipe)(Ke.a.res(e.delta.compose(a.delta)),l.b.fold((function(){return ut.error("Cannot apply invalid delta")}),(function(e){return ut.change({fullText:e,change:a})})));if(Ke.a.isDelta(a)&&l.g.unsafeGet(t).length!==a.prevLen)return ut.error("Cannot apply delta for wrong text length");var n=Ke.a.isReset(a)?a.delta:l.g.unsafeGet(t).delta.compose(a.delta);return A.a.deltaEq.equals(n,e.delta)?ut.change({fullText:e,change:Ke.a.delta(new Ct.a,e.length)}):Object(Y.pipe)(Ke.a.res(n),l.b.fold((function(){return ut.error("Cannot apply invalid delta")}),ut.reset))},pt.fullTextProcessor=function(e,t,a){var n=Ke.a.unsafeRes((new Ct.a).insert(a));if(0===e.length)return ut.change({fullText:n,change:n});if(l.g.isNone(t)){var i=e.delta.diff(n.delta);return ut.change({fullText:n,change:Ke.a.delta(i,e.length+A.a.calcDiffLength(i))})}return A.a.deltaEq.equals(n.delta,e.delta)?ut.change({fullText:n,change:Ke.a.delta(new Ct.a,e.length)}):ut.reset(n)},(ht=mt||(mt={})).getImmediateTimer=function(){return{timer:f.a.of(void 0),reset:f.a.noop}},ht.getAuditTimer=function(e){var t=l.g.none;return{timer:f.a.defer((function(){var a=Object(Y.pipe)(t,l.g.fold((function(){return e}),(function(t){var a=Date.now()-t;return a>e?0:a})));return t=Object(Y.pipe)(t,l.g.orElse(l.g.some(Date.now()))),f.a.of(void 0).pipe(f.a.delay(a),f.a.tap((function(){t=l.g.none})))})),reset:function(){return t=l.g.none}}},(ft=gt||(gt={})).connectAsPrimarySourceToDuplex=e=>{const t=new f.a.Subject,a=y.Monitoring.Logging.getLogger("DenaliEditorToDuplexConnector",y.Logging.LogLevel.DEBUG),n=new vt(dt.deltaChangeProcessor),i=ct.NamedChangesSink.factory(t),r=ct.Producer.create(ct.Producer.UserText,{changes:n.changesToPrimarySource})(i(ct.Receiver.DEd,{pushChanges:t=>{e.pushChanges(t,"user")}})),s=ct.Producer.create(ct.Producer.DEd,e)(i(ct.Receiver.UserText,{pushChanges:t=>{const i=n.pushChanges({from:"primary",change:t});Object(Y.pipe)(i,l.b.chainLeft(i=>(a.error("Cannot pass invalid change from master",i,t),n.pushChanges({from:"primary",change:e.getContents()}))),l.b.fold(e=>{a.fatal("Cannot reset duplex with full context",e)},bt.a))}}));return{duplex:n,fails:t,dispose:()=>{r.unsubscribe(),s.unsubscribe()}}},ft.duplexAsUserSource=e=>({changes:e.changesToSecondarySource,pushChanges:(t,a)=>e.pushChanges({from:"secondary",change:t,mode:a}),flushChanges:I.l,getContents:()=>e.getSecondarySourceContents()}),ft.connectAsPrimarySourceWithoutDuplex=e=>({changes:e.changes,pushChanges(t,a){e.pushChanges(t,a===lt.Mode.echo?"user":"api")},getContents:()=>e.getContents(),flushChanges:()=>e.flushChanges()});var St=a("Uwwq"),Et=a("9ZtS"),wt=a("mHcA"),kt=a("aIes"),_t=a("XfOk"),Ot=a("CrFT"),At=a("a5W6"),Tt=a("MMoU"),xt=a("8Js9"),It=a("GUi3"),Mt=a("dE97"),jt=a("yA7V");const Lt=3e3,Nt=1500,Pt="mutedCategoriesDocumentId",Ft="mutedCategoriesContextId";class Dt{constructor(e,t,a,n,r,s,o,c,d,p){this._documentId=e,this._checkingDomain=a,this._mutedCategoriesModel=n,this._context=s,this._isFree=o,this._alertCache=c,this._scoresCache=d,this._mutedCategoriesCache=p,this._log=y.Monitoring.Logging.getLogger("CacheManager"),this.saveScores=e=>this._scoresCache.save(this._documentId,this._context.get(),this._isFree,e),this._saveMutedCategories=e=>{this._mutedCategoriesCache.save(Pt,Ft,this._isFree,Array.from(e.values()))},this._subs=[t.view(e=>"idle"===e).pipe(f.a.switchMap((e,t)=>e?f.a.mergeStatic(f.a.of("update"),r.pipe(f.a.skip(1),f.a.mapTo("update"),f.a.auditTime(Nt))):0===t?f.a.EMPTY:f.a.of("clear"))).subscribe(e=>{switch(e){case"clear":return this._alertCache.remove(this._documentId);case"update":return this.saveAlerts(this._getCacheableAlerts());default:return Object(le.d)(e)}}),this._checkingDomain.lensesScores.pipe(f.a.auditTime(Lt),f.a.map(Object(i.flow)(Tt.toArray(It.a.Id.ord),At.filterMap(Object(i.flow)(l.g.fromPredicate(([e])=>e!==It.a.SpecialId.Plagiarism),l.g.map(([e,t])=>({lensId:e,score:t}))))))).subscribe(this.saveScores),this._mutedCategoriesModel.events.pipe(f.a.filter(St.a.CategoriesModel.Events.isChangedEvent),f.a.tap(()=>{this._saveMutedCategories(this._mutedCategoriesModel.mutedCategories.get())})).subscribe()]}getCorrectAlerts(e,t){return Object(Y.pipe)(this._alertCache.load(this._documentId,this._context.get(),this._isFree),l.g.fromNullable,l.g.tap(e=>this._log.isEnabled(y.Logging.LogLevel.TRACE)&&this._log.trace("loaded alerts from cache: ",e)),l.g.map(t=>t.filter(t=>Ge.a.isHighlightValid(t,e))),l.g.map(e=>[e,e.map(Rt(t))]),l.g.tap(([e,t])=>{this._logChangedOfMutedState(e,t),this._logDuplicates(e,"save")}),l.g.map(xt.d))}getScores(){return Object(Y.pipe)(l.g.fromNullable(this._scoresCache.load(this._documentId,this._context.get(),this._isFree)),l.g.filter(I.n),l.g.map(e=>new Map(e.map(({lensId:e,score:t})=>[e,t]))))}getMutedCategories(){const e=this._mutedCategoriesCache.load(Pt,Ft,this._isFree);return Object(Y.pipe)(l.g.fromNullable(e),l.g.map(e=>new Map(e.map(e=>[e.id,e]))))}saveAlerts(e){this._logDuplicates(e,"save"),this._alertCache.save(this._documentId,this._context.get(),this._isFree,e)}dispose(){this._subs.forEach(e=>e.unsubscribe()),this._subs=[]}_logDuplicates(e,t){const a=new Map,n=e.reduce((e,t)=>{if(!$e.w.hasPosition(t))return e;const n=(e=>`${e.pname}_${e.begin}_${e.end}`)(t);if(a.has(n)){const i=a.get(n);e.push({existing:{begin:i.begin,end:i.end,pname:i.pname},duplicate:{begin:t.begin,end:t.end,pname:t.pname}})}return a.set(n,t),e},[]);n.length&&this._log.info(`Found duplicates in cache on ${t}`,n)}_logChangedOfMutedState(e,t){const a=[];e.length!==t.length&&y.Monitoring.Logging.getLogger("CacheManager").warn("Cannot calculate change of mute state"),e.forEach((e,n)=>{const i=t[n];i.muted!==e.muted&&a.push({range:$e.w.hasPosition(e)?{begin:e.begin,end:e.end,pname:e.pname}:{pname:e.pname},was:e.muted,now:i.muted})}),a.length&&y.Monitoring.Logging.getLogger("CacheManager").info("Muted state was changed on load from cache",a)}_getCacheableAlerts(){return Object(Y.pipe)(this._checkingDomain.state.get(),jt.a.reduce([],(e,t)=>(Mt.a.isCacheable(t.alert)&&e.push(t.alert.toLocalRawAlert()),e)))}}const Rt=e=>t=>Object(Y.pipe)(l.g.fromNullable(t.cardLayout.userMuteCategory),l.g.alt(()=>Object(Y.pipe)(Array.from(e.keys()),At.filter(St.a.Category.isSpecial),At.findFirst($e.w.belongsToSpecialCategory(t)))),l.g.fold(()=>t,a=>{const{muted:n}=t,i=Object(De.__rest)(t,["muted"]);return e.has(a)?Object.assign(Object.assign({},i),{muted:$e.t.MutedByType.MUTED_BY_USER}):Object.assign(Object.assign({},i),{muted:void 0===n?void 0:$e.t.MutedByType.NOT_MUTED})}));function Bt(e,t){const a=function(e){const t=t=>{e.next(t)};return{onSessionStarted:t,onWaitForOT:t,onReady:t,onSessionInbound:t,beforeAlert:t,onAlert:t,onRemove:t,onChange:t,onSynonyms:t,onPlagiarism:t,onTextInfo:t,onEmotions:t,onGoalPrediction:t,onBeforeAsyncCheckFinish:t,onAsyncCheckFinish:t,onError:t,onBeforeFinish:t,onFinish:t,onConnect:t,onDisconnect:t,onQueueMsgDropped:t,onAck:t,onPong:t,onMessageReceived:t,onMessageSent:t,onAutoComplete:t,onAttentionHeatmap:t,onAttentionInfo:t,onProofitAvailability:t,onProofitCancelled:t,onProofitCompleted:t,onProofitProgress:t,onProofitProgressProblem:t,onProofitSubmit:t,onBoomerangSharedLinkReceived:t,onBoomerangReviewSubmitted:t,onBoomerangReviewProgress:t}}(e),n=new f.a.Subject;return n.pipe(f.a.debounceTime(1e3),f.a.distinctUntilChanged()).subscribe(e=>t.setState({type:"wsCapi",state:{type:e}})),Object.assign(Object.assign({},a),{onFinish:e=>{n.next("online"),a.onFinish&&a.onFinish(e)},onDisconnect:e=>{e.reason.code===c.a.WsCodes.UNAUTHORIZED?n.next("unauthorized"):(e.reconnectCounter>1||l.b.isLeft(e.reconnectResult))&&n.next("offline"),a.onDisconnect&&a.onDisconnect(e)}})}function Ht(e){if(0===e.length)return l.g.none;{const t=e.reduce((e,t)=>Math.min(e,t),Number.MAX_VALUE),a=e.reduce((e,t)=>Math.max(e,t),Number.MIN_VALUE),n=e.length>=6?e.reduce(I.s,0)/e.length:void 0;return l.g.some({ct:e.length,min:t,max:a,range:a-t,avg:n,stddev:void 0!==n?Math.sqrt(e.reduce((e,t)=>e+Math.pow(t-n,2),0)/(e.length-1)):void 0})}}var Wt=a("AW4s");var $t=a("4e/B"),Vt=a("+JVj");class Ut{constructor(e){this._ded=e,this.changes=new f.a.Subject}insertLinkWithCaption(e,t,a){return Object(Y.pipe)(l.b.tryCatchError(()=>{this.changes.next(Ke.a.flush()),this.changes.next(Ke.a.ins(e,a,this._ded.getTextLength()))}),l.b.chain(()=>this.insertLink(Vt.b.create(e,e+a.length),t)))}insertLink(e,t){return l.b.tryCatchError(()=>this._ded.addFormatting(e,T.e.Type.link,t))}removeLink(e){return l.b.tryCatchError(()=>this._ded.removeFormatting(e,T.e.Type.link))}}var Gt=a("CFZe"),zt=a("Lmm7");const qt=12096e5;class Yt{constructor(e,t,a,n,i,r,s,o,l,c,d,p,u,m,h,g,f,b,y,C,v,S){this._capiClient=e,this._remoteDocument=t,this.documentModel=a,this.positionManager=n,this.alertsList=i,this.alertsService=r,this.alertRangeService=s,this.alertsReader=o,this.synonymsModel=l,this.plagiarismModel=c,this.formattingLinkModel=d,this.emotionsModel=p,this.mutedAlertsModel=u,this.duplexState=m,this.mutingAlertsReader=h,this.hasAlertsCache=g,this._onShutdown=f,this._capiConnection=b,this._doxConnection=y,this._capiWatcher=C,this._doxSyncManager=v,this._capiConManager=S}static create(e,t,a,n,s,o,c,d,p,u,m,h){o.setState({type:"wsDox",state:{type:"online"}});const g=new f.a.Subject,b=Object(Y.pipe)(p.dialect.get(),l.g.getOrElse(()=>"undefined")),C=ne.DocumentFeatures.getFormattingMode(d,e.meta.originalFilename,e.meta.createdAt,u.denali),v=new Be.a(Ne.a.MAX_SAFE_ID,0,!1),E=new Ne.a.LatencyMeasuringWSHandler(He.b.create(h).writer(Ne.a.optimizedOTSerializer),v,10),w=new Ne.a.CAPIConnection({client:m.names.capi.denali,clientVersion:m.buildVersion.toString(),context:Object(Y.pipe)(e.meta.settings.context,l.g.getOrElse(()=>We.a.unset)),handler:Bt(g,o),docid:d,dialect:b,clientSupports:(()=>{const e=[Re.a.textInfo,Re.a.freeAdvancedChecks,Re.a.readability,Re.a.sentenceVariety,Re.a.fillerWords,Re.a.alertsUpdate,Re.a.alertsChanges,Re.a.freeClarityChecks,Re.a.superAlerts,Re.a.consistency,Re.a.setGoalsLink,Re.a.voxCheck,Re.a.toneCards,Re.a.plagiarismAlertsUpdate,Re.a.alternativeDeletesCard,Re.a.fullSentenceRewrite,Re.a.listCard,Re.a.muteQuotedAlerts,Re.a.userMutes,Re.a.supportsButtonTransformCards,Re.a.gapTransformCard,Re.a.enclosingHighlight,Re.a.drilldownCard];return u.denali.toneDetector&&e.push(Re.a.emogenieCheck),C===ne.DocumentFeatures.FormattingMode.on&&e.push(Re.a.supportsFormatting),(u.denali.priorityListView||l.g.isSome(u.denali.prioritySwitcher))&&e.push(Re.a.priorityAlertsView),e})(),isDemoDoc:e.meta.isDemoDocument,idGenerator:v},e=>e.connect(a.api.capiWsUrl),E),k=new Ze(g,w.client,c,w),_=new it(g,k);Object(I.r)("capi",w.client);const O=Yt._getDocumentModel(d,e,c,_.requestDocStats,s,u,C),A=new Fe(O,e,t,u,c),T=O.context.view(e=>(e.domain||"_default_")+"."+b),x=new _t.DocumentCacheImpl(e=>e.filter(e=>$e.w.isRawAlert(e)),e=>e,"DN-"+a.alertCache.prefix,a.alertCache.version,kt.c.DenaliStorage.fromLocalStorage(kt.c.ls),qt),M=new _t.DocumentCacheImpl(e=>e,e=>e,a.outcomeScoreCache.prefix,a.outcomeScoreCache.version,kt.c.DenaliStorage.fromLocalStorage(kt.c.ls),qt),j=new _t.DocumentCacheImpl(i.identity,i.identity,a.mutedCategoriesCache.prefix,a.mutedCategoriesCache.version,kt.c.DenaliStorage.fromLocalStorage(kt.c.ls),qt),L=T.get(),N=u.isFree.get(),P=x.hasCache(d,L,N)&&M.hasCache(d,L,N),F=new Je(_,g,O,P,e.initialDelta.length),D=new Qe(g,(()=>{const e=new Set;return"off"!==u.denali.recordCapiMessages&&e.add("captureCapiMessages"),e})()),R=new et.b(F,g,O,p,n),B=u.measureCAPILatency?function(e,t,a,n){const i=y.Monitoring.Logging.getLogger("capi.performance"),r=e=>"idle"===e;return Object(Y.pipe)(e.checkingState.pipe(f.a.debounce(e=>r(e)?f.a.timer(5e3):f.a.EMPTY),f.a.distinctUntilChanged(),f.a.filter(r)),f.a.switchMapTo(Object(Y.pipe)(f.a.range(0,10),f.a.concatMap(()=>(a.ping(),t.pipe(f.a.first(Ne.a.CAPIEvent.is("pong"))))),f.a.takeUntil(e.checkingState.pipe(f.a.first(Object(I.m)(r)),f.a.merge(t.pipe(f.a.first(Ne.a.CAPIEvent.is("disconnect","error")))),f.a.merge(n.contentUpdated),f.a.merge(f.a.fromEvent(window,"offline")))),f.a.tap(e=>i.trace("pong event",e)),f.a.map(e=>e.latency),f.b.compact,f.a.toArray(),f.a.map(Ht),f.b.compact))).subscribe(e=>i.info("capi ping latency",e))}(O,g,R,c):f.a.Subscription.EMPTY,H=new wt.a,W=new Xe.a,$=u.denali.useTransformJson?Ge.a.Transform.identity:Ge.a.Transform.forcePositionOverTransformJson,V=()=>c.getContents().delta,U=new ze.a(H,W,V,g,R,O.counters,$);Object(I.r)("alertManager",U);const G=qe.a.create(U.state),z=new Ye.a(G,U._ops),q=new zt.b(H,V,R,c),X=r.f.of(O.rtfMode===S.e.DocumentFeatures.FormattingMode.on).filter(Boolean).map(()=>new Ut(c)),K=[U,q];X.forEach(e=>K.push(e));const Z=new Gt.b(O,g,R),Q=u.denali.toneDetector?l.g.some($t.b.create(g,R,y.Monitoring.Logging.getLogger("EmotionsModel"))):l.g.none,J=gt.connectAsPrimarySourceToDuplex(c);J.fails.subscribe(Yt._getChangesDispatcherFailHandler()),ct.init(gt.duplexAsUserSource(J.duplex),g,A,rt.ignoreTEResult(R),rt.ignoreResult(rt.pushDeleteThenInsert(H)),W,ot.merge(K)).subscribe(Yt._getChangesDispatcherFailHandler());const ee=St.a.CategoriesModel.create(g,R,U.state,z,u.demoMode?Ne.a.MutedAlerts.ScopeType.DOCUMENT:Ne.a.MutedAlerts.ScopeType.GLOBAL),te=Object(Y.pipe)(u.denali.mutedAlerts,l.g.fromPredicate(i.identity),l.g.map(()=>Et.a.create(G))),ae=new Yt(R,e.remoteDocument,O,H,U,z,z,G,q,Z,X,Q,ee,J.duplex,te,P,()=>{B.unsubscribe()},w,e.remoteConnection,D,A,k);Object(I.r)("engine",ae);const ie=new Dt(d,O.checkingState,U,ee,O.counters.view("unread"),T,N,x,M,j),re=y.Monitoring.Logging.getLogger("StEngine");try{Object(Y.pipe)(ie.getMutedCategories(),l.g.tap(e=>{re.debug("Loading muted alerts categories from cache..."),ee.loadCachedMutedCategories(e)})),Object(Y.pipe)(ie.getCorrectAlerts(l.b.unsafeGet(e.initialDelta.text),ee.mutedCategories.get()),l.g.tap(e=>{re.debug("Loading alerts from cache..."),U.loadAlerts(e),re.debug(`${e.length} cached alert(s) where loaded`),U.flushAlerts(),Object(Y.pipe)(ie.getScores(),l.g.tap(e=>U.loadScores(e)))}))}catch(e){re.warn("Cannot read alerts OR muted categories cache",e)}return Object(I.r)("text",()=>{F.getText().then(e=>{const t=c.getText();t!==e?console.log("Text DIFF",{capiText:e,capiLen:e.length,dedText:t,dedTextLen:t.length}):console.log("Texts are the same, len: "+t.length)}).catch(e=>{throw e})}),ae}shutdown(){return Object(De.__awaiter)(this,void 0,void 0,(function*(){y.Monitoring.Logging.getLogger("StEngine").debug("shutdown"),this._onShutdown(),yield this._capiConnection.close(void 0,"StEngine shutdown"),yield this._doxConnection.close(void 0,"StEngine shutdown"),this._doxSyncManager&&this._doxSyncManager.dispose(),this._capiConManager&&this._capiConManager.dispose(),this.plagiarismModel.dispose(),this.alertsList.dispose(),this._capiWatcher.dispose(),Object(Y.pipe)(this.emotionsModel,l.g.map(e=>e.dispose()))}))}static _getDocumentModel(e,t,a,n,i,r,s){return new Wt.b(e,t,a,n,i,r.enableTrackingOnDownload.get(),s,e=>Object(Y.pipe)(r.proofitTest,l.g.fold(()=>new Ot.b(t.remoteDocument,e),e=>new Ot.a.Mock(e,r.proofitLastJob))))}static _getChangesDispatcherFailHandler(){const e=y.Monitoring.Logging.getLogger("ChangesDispatcher");return t=>{"UnsubscriptionError"===t.exception.name?e.warn("shutdown error",t):t.details.to===ct.Receiver.CAPI&&Ve.b.isNotConnectedError(t.exception)?e.warn("tried to send change to not connected CAPI",t):t.details.to===ct.Receiver.CAPI&&Ve.c.isNotReadyError(t.exception)?e.warn("tried to send delta change to CAPI that expected a reset",t):t.details.to===ct.Receiver.CAPI?e.warn("failed pushing changes to CAPI",t):e.error("can not dispatch changes",t.exception,t.details)}}}Yt.getDoxInit=(e,t,a,n)=>{const i=Ue.a.Queue.create({acceptedMsgHandler:e=>n.acceptedMessage.next(e),droppedMsgsHandler:e=>n.droppedMessages.next(e)});return t.openDocumentById(e,function(e,t){const a=y.Monitoring.Logging.getLogger("DoxConnectivity");return{changeHandler:(t,a)=>e.dox.next({kind:"change",doc:t,change:a}),connectHandler:()=>{a.info("WS DOX connectivity online"),t.setState({type:"wsDox",state:{type:"online"}})},disconnectHandler:(e,n,i)=>Object(De.__awaiter)(this,void 0,void 0,(function*(){a.debug("Disconnected from dox",{reason:e,reconnectCounter:n,reconnectResult:i});const r=e=>{l.b.isLeft(i)?a.info(`WS DOX connectivity error: ${e}`):a.info(`WS DOX connectivity error, reconnecting: ${e}`),t.setState({type:"wsDox",state:{type:e}})};switch(e.code){case c.a.WsCodes.NOT_FOUND:r("documentNotFoundError");break;case c.a.WsCodes.UNAUTHORIZED:r("unauthorized");break;case c.a.WsCodes.BLOCKED_BY_CLIENT:r("blockedByClient");break;case c.a.WsCodes.CLIENT_MALFUNCTION:case c.a.WsCodes.PRECONDITION_FAILED:r("unknownConnectionError");break;default:n>=2?[0,c.a.WsCodes.UNKNOWN_WS_ERROR,c.a.WsCodes.CLOSED_ABNORMALLY].indexOf(e.code)>=0?r("unknownConnectionError"):r("serverError"):l.b.isLeft(i)&&r("serverError")}})),metadataChangeHandler:(t,a)=>e.dox.next({kind:"metadata_change",doc:t,documentMetadata:a})}}(n,a),i,5e3)};var Xt=a("F8cT"),Kt=a("DMXH"),Zt=a("eTAx"),Qt=a("eihE"),Jt=a("LLYZ"),ea=a("D6Vf"),ta=a("b+sJ");var aa=a("NaPV"),na=a("D8Xd"),ia=a("CvSs"),ra=a("AMXJ"),sa=a("+ukg"),oa=a("Hw2j"),la=a("u4+s"),ca=a("wt7H"),da=a("DLWy");class pa{constructor(e,t,a,n,i,r,s,o,l,c){this._modalManager=e,this._userAccount=t,this._documentModel=a,this._loaderViewModel=n,this._documentLoaderState=i,this._appRouter=r,this._notificationsManager=s,this._config=o,this._telemetry=l,this._environment=c,this._showGBBillingMigrationNotification=({expiryDate:e})=>this._notificationsManager.enqueue("gbBillingMigration",{expiryDate:e}).pipe(f.a.takeWhile(Object(I.m)(e=>na.a.isCloseAction(e)||"cta"===e),!0),f.a.switchMap(e=>this._handleGBBillingMigrationNotificationAction(e)))}init(){const e=this._documentLoaderState.view("text").pipe(f.a.filter(e=>e.isEmpty()),f.a.first(),f.a.filter(()=>Object(Y.pipe)(this._appRouter.locationState,l.g.exists(e=>!!e.showDocumentUploadedNotification))),f.a.switchMap(()=>this._showUploadNotification(this._documentModel.rtfMode))),t=this._userAccount.features.denali.gbBillingMigrationNotification.pipe(f.b.compactMap(this._showGBBillingMigrationNotification)),a=this._userAccount.settings.dunningSettings.pipe(f.a.combineLatest(this._userAccount.settings.dunningStatus,this._userAccount.subscription.state.pipe(f.a.filter(ia.a.isOk))),f.a.first(),f.a.filter(([e,t,a])=>this._shouldShowDunningModal(e,t,a.value)),f.a.switchMap(()=>this._showDunningModal()));return this._loadModal().pipe(f.a.tap(()=>this._loaderViewModel.init()),f.a.switchMap(l.g.fold(()=>f.a.EMPTY,e=>this._modalManager.showPreloaded(e))),f.a.merge(f.a.concatStatic(e,this._showChangePlanNotification()),this._showPremiumUngatingRenewalNotification(),t,this._showSafariExtActivationNotification(),a))}_loadModal(){return this._shouldShowConfirmUpgradeModal()?this._modalManager.preload(ca.a.confirmUpgrade).pipe(f.a.map(l.g.some)):this._shouldShowTour()?this._modalManager.preload(ca.a.tour).pipe(f.a.map(l.g.some)):this._shouldShowWhatsNew()?this._modalManager.preload(ca.a.news).pipe(f.a.map(l.g.some)):this._shouldShowSetGoals()?this._modalManager.preload(aa.c.setGoals("setGoalsLoader")).pipe(f.a.map(l.g.some),f.a.tap(()=>this._loaderViewModel.init()),f.a.switchMap(e=>this._loaderViewModel.loaderState.pipe(f.a.first(e=>e.contains(da.a.Checking)||e.contains(da.a.CheckingIn)),f.a.mapTo(e)))):f.a.of(l.g.none)}_shouldShowTour(){return l.g.isSome(this._userAccount.features.denali.tour)}_shouldShowConfirmUpgradeModal(){return Object(Y.pipe)(this._appRouter.query.get("showConfirmUpgrade"),l.g.exists(e=>"true"===e))}_shouldShowWhatsNew(){return this._userAccount.features.denali.showcaseNewFeaturesOnStartup}_shouldShowSetGoals(){return this._documentModel.isInitialRevision&&this._userAccount.settings.enableSetGoalsLoader.get()}_shouldShowDunningModal(e,t,a){const n=Object(Y.pipe)(t,l.g.map(e=>"IN_PROGRESS"===e),l.g.getOrElse(()=>Boolean(a.isDunning)));return sa.g.isPremium(this._userAccount.features.denaliUserType)&&Object(oa.a)(e)&&!this._shouldShowTour()&&n}_showDunningModal(){return this._telemetry.gnarSpec.inProductDunningNotificationShow(this._telemetry.pageId),this._modalManager.show(ca.a.dunning)}_showUploadNotification(e){const t=e===ne.DocumentFeatures.FormattingMode.compatibility?"denaliFormattingCompatibility":"denaliDocumentUploaded";return this._notificationsManager.enqueue(t).pipe(f.a.filter(e=>"navigateToDocuments"===e),f.a.tap(()=>this._appRouter.navigate(C.a.routes.documents.href())))}_handleGBBillingMigrationNotificationAction(e){switch(e){case"shown":return this._telemetry.gnarSpec.gbBillingMigrationNotificationShow(this._telemetry.pageId);case"closedByUser":return this._telemetry.gnarSpec.gbBillingMigrationCloseButtonClick(this._telemetry.pageId),this._userAccount.settings.dismissGBBillingMigrationNotification();case"cta":return this._telemetry.gnarSpec.gbBillingMigrationUpdateBillingButtonClick(this._telemetry.pageId),this._environment.actions.openPopup(new ra.a(this._config.account.adminSubscription,new URLSearchParams({popup:"add_billing_info"}))),Promise.resolve();default:return Object(le.d)(e)}}_showChangePlanNotification(){return this._userAccount.features.denali.changePlanHook.pipe(f.a.map(l.g.map(()=>la.b.offer)),f.b.compactMap(e=>this._userAccount.subscription.state.view(t=>({state:t,offer:e}))),f.a.filter(e=>ia.a.isOk(e.state)),f.a.first(),f.a.map(e=>la.a.create(e.offer,e.state.value,this._userAccount.subscription)),f.a.switchMap(l.b.fold(e=>(y.Monitoring.Logging.getLogger("change.plan.hook").warn(e),f.a.EMPTY),e=>e.shouldShowOffer?this._notificationsManager.enqueue("changePlanCta",{model:e}).pipe(f.a.takeWhile(Object(I.m)(e=>na.a.isCloseAction(e)||"changePlan"===e),!0),f.a.switchMap(t=>this._handleChangePlanNotificationAction(t,e))):f.a.EMPTY)))}_handleChangePlanNotificationAction(e,t){switch(e){case"shown":return this._telemetry.gnarSpec.changePlanNotificationShow(t.daysToRenewal,t.currentPlanType,this._telemetry.pageId),this._userAccount.settings.changePlanHookSeen();case"closedByUser":return this._telemetry.gnarSpec.changePlanNotificationCloseButtonClick(t.daysToRenewal,t.currentPlanType,this._telemetry.pageId),this._userAccount.settings.dismissChangePlanHook();case"changePlan":return this._telemetry.gnarSpec.changePlanNotificationSwitchPlanButtonClick(t.daysToRenewal,t.currentPlanType,this._telemetry.pageId),this._modalManager.show(ca.a.changePlan(t)).pipe(f.a.filter(e=>"closed"===e),f.a.first(),f.a.switchMap(()=>this._userAccount.settings.dismissChangePlanHook())).toPromise().catch(e=>y.Monitoring.Logging.getLogger("change.plan.modal").error(e));default:return Promise.resolve()}}_showSafariExtActivationNotification(){return this._userAccount.features.denali.safariExtActivationWeb||this._userAccount.features.denali.safariExtActivationNative?this._notificationsManager.enqueue("safariExtActivation",{}).pipe(f.a.tap(e=>{switch(e){case"shown":return this._telemetry.gnarSpec.safariExtensionActivationNotificationShow(this._telemetry.pageId),void this._userAccount.settings.markSafariExtNotificationSeen();case"activate":return this._telemetry.gnarSpec.safariExtensionActivationCtaButtonClick(this._telemetry.pageId),void this._environment.actions.openUrl(new ra.a("grammarly.extension://enable"));case"closedByUser":return void this._telemetry.gnarSpec.safariExtensionActivationCloseButtonClick(this._telemetry.pageId);case"timeout":case"closedByMaxNotificationOnScreen":case"closedByNotificationWithMorePriority":return;default:Object(le.d)(e)}})):f.a.EMPTY}_showPremiumUngatingRenewalNotification(){return this._userAccount.features.denali.premiumUngatingRenewalNotification.pipe(f.b.compactMap(e=>(this._telemetry.gnarSpec.premiumUngatingRenewalNotificationShow(this._telemetry.pageId),this._userAccount.settings.ungatedRenewalNotificationSeen(),this._notificationsManager.enqueue("premiumUngatingRenewal",{trialEndDate:e}).pipe(f.a.first(e=>na.a.isCloseAction(e)?(this._telemetry.gnarSpec.premiumUngatingRenewalDismissButtonClick(this._telemetry.pageId),this._userAccount.settings.ungatedRenewalNotificationDismissed(),!0):"ctaManageSubscription"===e&&(this._telemetry.gnarSpec.premiumUngatingRenewalCtaButtonClick(this._telemetry.pageId),this._userAccount.settings.ungatedRenewalNotificationDismissed(),this._environment.actions.openPopup(new ra.a(this._config.account.adminSubscription)),!0))))))}}var ua=a("BwCH");function ma(e,t){const a=t.has($.b.Flag.useSetDataOnCopy);return(t,n)=>f.a.from(ua.a.copy(t,a)).pipe(f.a.switchMap(()=>e.enqueue("copySuccess",{copyType:n})),f.a.catchError(t=>(ua.a.copyApiAvailable.next(!1),y.Monitoring.Logging.getLogger("clipboard").warn("Copy to clipboard failed",t),e.enqueue("copyToClipboardFailed")))).toPromise()}var ha=a("p7hf"),ga=a("aWq3");const fa=e=>{const t=n.useContext(K.a.Context);return n.createElement(ha.b,{documentUpload:e.documentUpload,multiple:!1,canDrop:()=>!0,render:(a,i)=>n.createElement(s.a.Fragment,null,o.a.combine(a,i,(a,i)=>(a||i)&&n.createElement($.c,{className:ga.animation,onMount:()=>e.modalManager.hideAll()},n.createElement("div",{className:ga.one}),n.createElement("div",{className:ga.two}),n.createElement("div",{className:ga.three}),n.createElement(pe,{position:"center",className:ga.textWrapper},n.createElement("div",{className:ga.titleWrap},n.createElement(x.H1,{className:ga.title},t.uploadDropZone)),n.createElement(x.Paper,{className:ga.content},t.uploadDropZoneTypes)))))})};var ba=a("By/D"),ya=a("gMRE"),Ca=a("lRnN"),va=a("Ni70"),Sa=a("SGQG");function Ea({stepId:e,onboardingViewModel:t,denaliEditorModel:a,getFirstTarget:i,overlay:r,completionTrigger:s},c){const p=n.useContext(d.a.Context),u=o.a.create({display:"none",pointerEvents:"none"}),m=o.a.create(!1),h=t.subscribeForStep(e),y=o.a.create(l.g.none);return g.a.useSubscriptionTo(f.a.mergeStatic(h.state.pipe(f.a.tap(e=>{"popup"===e&&r&&m.set(!0),u.modify(t=>Object.assign(Object.assign({},t),{pointerEvents:"dot"===e?"all":"none"}))}),f.a.merge(a.changes,c),f.a.combineLatest(p,y.pipe(f.a.skip(1))),f.a.tap(([e,t,n])=>((e,t)=>requestAnimationFrame(()=>{a.flushChanges(),Object(Y.pipe)(t,l.g.chain(e=>Object(Y.pipe)(e.getRect(),l.g.fromEither,l.g.map(va.b.relativeToRoot))),l.g.fold(()=>u.set({display:"none"}),({top:t,left:a,width:n,height:i})=>{u.modify(r=>Object.assign(Object.assign({},r),{position:"absolute",left:`${a/e}rem`,top:`${t/e}rem`,width:`${n/e}rem`,height:`${i/e}rem`,display:"block"}))}))}))(t,n))),h.state.view(e=>"dot"===e||"popup"===e).pipe(f.a.switchMap(e=>e?i():f.a.EMPTY),f.a.tap(b.b.toAtom(y))),f.a.mergeStatic(b.b.orEmpty(m.pipe(f.a.skip(1),f.a.filter(e=>!e)))(!!r),s).pipe(f.a.tap(t.getStepCompletionCallback(e))),m.pipe(f.a.switchMap(b.b.orEmpty(f.a.fromEvent(document,"click",{capture:!0,passive:!0}))),f.a.tap(()=>m.set(!1))))),{visibilityOverlay:m,customStyles:u,onboardingStep:h}}const wa=e=>{const t=n.useContext(ba.a.Context).pipe(f.a.map(e=>e.rect)),{visibilityOverlay:a,customStyles:i,onboardingStep:r}=Ea(e,t);return n.createElement(n.Fragment,null,e.overlay&&e.overlay(a),n.createElement("div",{className:Sa.a.editor},n.createElement(s.a.div,{style:i,className:Sa.a.onboardingPopup},n.createElement(ee.c,Object.assign({},e,{onboardingStep:r,viewportRect:t,eventType:"none",enableOptimizations:e.onboardingViewModel.cpuAndAnimationOptsExperiment}),n.createElement(s.a.div,{style:i.view(({width:e,height:t})=>({width:e,height:t}))})))))},ka=e=>e.onboardingViewModel.isStepEnabled(e.stepId)?n.createElement(wa,Object.assign({},e)):null;var _a=a("aH3e");const Oa=e=>t=>Object(Y.pipe)(t.getRect(),l.b.map(({clientRects:e,rootClientRect:t})=>e.map(e=>M.c.absToRelative(e,t))),l.b.map(t=>t.map(t=>({top:t.top,left:t.left,width:Math.max(t.width,2),height:t.height,zIndex:e?"inherit":"-1",mixBlendMode:e?"darken":"inherit"}))));class Aa{constructor(e,t){this._ded=e,this._env=t,this._log=y.Monitoring.Logging.root.getLogger("GraySelection"),this.state=this._ded.isEditorFocused.pipe(f.a.switchMap(Object(I.c)(f.a.of(!1),f.a.mergeStatic(this._ded.contentUpdated.pipe(f.a.auditTime(50)),b.a.windowResize.pipe(f.a.auditTime(50))).pipe(f.a.startWith(b.b.toVoid()),f.a.mapTo(!0)))),f.a.switchMap(e=>e?f.a.of(Object(Y.pipe)(this._ded.getSelectionRect(),l.b.chain(Oa(this._env.has(_a.a.Flag.supportsMixBlendMode))),l.g.fromEither)).pipe(f.a.delay(1)):f.a.of(l.g.none)),f.a.tap(e=>{l.g.isSome(e)&&!document.hasFocus()&&Object(Y.pipe)(kt.e.collapseSelection(),l.b.mapLeft(e=>{this._log.info("Cannot collapse selection",e)}))}),f.a.share())}}var Ta=a("GZ3w");const xa=({ded:e})=>{const t=n.useContext(_a.a.Context);return n.createElement(s.a.Fragment,null,new Aa(e,t).state.pipe(f.a.map(e=>n.createElement(n.Fragment,null,Object(Y.pipe)(e,l.g.fold(()=>null,e=>e.map((e,t)=>n.createElement("div",{"data-name":"gray-selection",key:`gray-selection-${t}`,style:e,className:Ta.graySelection})))))),f.a.startWith(null)))},Ia=(e,t)=>{const a={root:e,rootMargin:"0px",threshold:[0,1]};return b.a.getIntersectionObservable(t,a).pipe(f.a.filter(I.n),f.a.map(e=>1!==e[0].intersectionRatio),f.a.startWith(t.offsetHeight>e.offsetHeight))};class Ma{constructor(){this._log=y.Monitoring.Logging.getLogger("DocumentView"),this._nativeScrollbarState=Object(Y.pipe)(M.c.Scrollbar.getState(),l.b.mapLeft(this._log.handler("Cannot get scrollbar width").error),l.b.getOrElse(()=>M.c.Scrollbar.UNKNOWN_SCROLLBAR)),this.detector=o.a.create(l.g.none),this.target=o.a.create(l.g.none),this._visible="visible"===this._nativeScrollbarState.type?o.a.combine(this.target,this.detector,l.g.map2(Ia)).pipe(f.a.switchMap(l.g.fold(()=>f.a.EMPTY,i.identity)),f.a.onErrorResumeNext(f.a.of(!0))):o.a.create(!0),this.width=this._visible.pipe(f.a.map(e=>e?this._nativeScrollbarState.width:0),f.a.startWith(0),f.a.shareReplay({bufferSize:1,refCount:!0})),this.scrollTop=this.target.pipe(f.b.compact,f.a.switchMap(e=>f.a.fromEvent(e,"scroll").pipe(f.a.debounceTime(50),f.a.map(e=>e.target.scrollTop))),f.a.startWith(0)),this.fakeWidth="hidden"===this._nativeScrollbarState.type?this._nativeScrollbarState.width:0}}var ja=a("c1V0");const La=({viewModel:e,strings:t,className:a})=>n.createElement(s.a.div,Object.assign({},Object(X.c)(a,x.style.paper,e.visible.pipe(f.a.map(Object(I.c)(ja.placeholder,ja.hiddenPlaceholder))),e.size.view(V.g.match("",z.a.bigSize)))),t.typeOrPasteText,n.createElement("label",{className:ja.label},t.upload,n.createElement("input",{className:ja.input,onChange:({target:t})=>t.files&&e.upload(t.files),type:"file",accept:e.uploadInputAccept})),t.ending);var Na=a("Urso"),Pa=a("PyeZ"),Fa=a("fHRq"),Da=a("l0MP"),Ra=a("1w6p"),Ba=a("akIQ"),Ha=a("UgFH");const Wa=({viewModel:e})=>{const{gnarSpec:t,pageId:a}=n.useContext(v.a.Context),i=n.useContext(K.a.Context);return n.createElement("div",Object.assign({},Object(X.c)(Ha.card,Ha.cardUphook)),n.createElement(x.Small,{className:Ha.title},i.inlineUpgradeHook.suggestionIsPartOfPremium),n.createElement(re.a.Group,{align:"vertical"},n.createElement(re.a.Ghost,{className:Ha.upgradeButton,name:"upgrade",onClick:()=>{t.getPremiumButtonClick(a,"inlinePremiumCard"),e.upgrade()}},n.createElement(oe.d.PaidSmall,{width:15,className:Ha.upgradeIcon}),n.createElement(x.Small,{className:Ha.upgradeButtonText},i.inlineUpgradeHook.upgradeToPremium))))},$a=8,Va=(e,t)=>e.right+300>t.width?"right":"left",Ua=(e,t)=>M.c.classes((e=>{switch(e){case"invisible":return Ha.invisible;case"visible":return Ha.visible;default:return Object(le.d)(e)}})(e),"up"===t&&Ha.directionUp);function Ga(e,t){const a=n.useRef(null),[i]=n.useState(()=>o.a.create({visibility:"visible",position:{top:0,left:0},direction:"down"})),r=n.useContext(ba.a.Context),s=e=>{const n=a.current;n&&function(e,t,a,n){Object(Y.pipe)(e,l.g.map(({abs:e,relative:i})=>{const r=t.offsetHeight,s=e.height+e.top+r>a.height+a.top&&i.height<a.height?"up":"down";n.modify(e=>Object.assign(Object.assign({},e),{direction:s,position:{top:"up"===s?i.top-r-$a:i.top+i.height,left:i.left}}))}))}(t(),n,e,i)},[c]=n.useState(()=>f.a.combineLatestStatic(r.pipe(f.a.map(e=>e.rect)),i.pipe(f.a.filter(({visibility:e})=>"visible"===e)),e=>e).pipe(f.a.tap(s)));return g.a.useSubscriptionTo(c),n.useEffect(()=>{switch(e){case"removed":i.modify(e=>Object.assign(Object.assign({},e),{visibility:"invisible"}));break;case"added":requestAnimationFrame(()=>i.modify(e=>Object.assign(Object.assign({},e),{visibility:"visible"})));break;default:Object(le.d)(e)}},[e,i]),{_el:a,_state:i}}const za=({card:e,getPosition:t,mode:a,name:i,onMouseEnter:r=I.l,onMouseLeave:o=I.l})=>{n.useEffect(()=>{"added"===a&&o()},[a]);const l={onMouseEnter:r,onMouseLeave:o,"data-name":i},{_el:c,_state:d}=Ga(a,t);return n.createElement(s.a.div,Object.assign({tabIndex:-1,mount:e=>c.current=e,style:d.view("position")},Object(X.c)(Ha.container,d.view(({visibility:e,direction:t})=>Ua(e,t))),l),e)};const qa=(e,t,a)=>{const{key:i,card:r,onMouseEnter:s,onMouseLeave:o,name:c,isHidden:d}=t(e),p=function(e,t){return"added"===t?()=>Object(Y.pipe)(e.mark.getRect(),l.b.map(va.b.relativeAndAbs),l.g.fromEither):()=>l.g.some({abs:M.c.Rect.empty,relative:M.c.Rect.empty})}(a,e);return!d&&n.createElement(za,{key:i,getPosition:p,mode:e,card:r,name:c,onMouseEnter:s,onMouseLeave:o})},Ya=({viewModel:e,entry:t,index:a})=>i=>{const r=Mt.a.State.isBulkApplied(t.alert.state),s="added"===i?a+1:a,o="added"===i?e.events:b.b.noopObserver(),l=U.a.DATA_NAME;return{key:s,card:n.createElement(Ba.a,{alert:t.alert,hydrate:e.hydrate,events:o,highlightIndex:t.highlightIndex}),onMouseEnter:()=>e.events.next({type:Pa.b.Type.hovered}),onMouseLeave:()=>e.events.next({type:Pa.b.Type.unhovered}),name:l,isHidden:r}},Xa=({viewModel:e,index:t})=>a=>{return{key:"added"===a?t+1:t,card:n.createElement(Wa,{viewModel:e})}};function Ka(e,t,a){return Object(Y.pipe)(t.state,f.a.startWith(l.g.none),f.a.pairwise(),f.a.tap(([e,t])=>l.g.isNone(t)&&a&&a()),f.a.map(([a,n],i)=>[Object(Y.pipe)(a,l.g.map(a=>qa("removed",e({viewModel:t,entry:a,index:i}),a)),l.g.toNullable),Object(Y.pipe)(n,l.g.map(a=>qa("added",e({viewModel:t,entry:a,index:i}),a)),l.g.toNullable)]),f.a.startWith(null))}const Za=n.memo(({className:e,inlineCardVM:t,inlineUpgradeHookVM:a})=>{const i=n.useContext(ba.a.Context).pipe(f.a.map(e=>e.rect)),r=n.useMemo(()=>Na.a.emptyWithName("inline-card"),[]);return n.createElement(Na.a.Context.Provider,{value:r},n.createElement(s.a.Fragment,null,n.createElement("div",{className:e},Ra.b.mount(Da.a.View,Fa.a.Flow.create(t.state,t.events,i,t.hydrate,Va))),n.createElement(s.a.div,{className:e},Ka(Ya,t,()=>t.events.next({type:Pa.b.Type.closed}))),n.createElement(s.a.div,{className:e},Ka(Xa,a))))});var Qa=a("Sfi4"),Ja=a("ZvPX"),en=a("2BTG"),tn=a("+dDf"),an=a("quYV");const nn=500;class rn extends n.Component{constructor(){super(...arguments),this._subs=[],this._classes=o.a.create(""),this._state=o.a.create(r.f.empty()),this._content=o.a.create(null),this._onTransitionEnd=()=>{const e=this._state.get();e.contains(Kt.a.Type.checkingOut)&&this._state.set(r.e),e.isEmpty()&&this._content.set(null)}}componentDidMount(){const{theme:e,state:t}=this.props;this._subs.push(this._state.pipe(f.a.pairwise(),f.a.map(([t,a])=>a.fold(()=>t.fold(()=>{throw new le.b("Cannot animate sidebar loader from None to None")},t=>{switch(t){case Kt.a.Type.checkingOut:return[e.checkingOutEnd+" "+e.hideEnd];case Kt.a.Type.checkingIn:return[e.checkingInEnd+" "+e.hideEnd];case Kt.a.Type.checking:return[e.hideStart,e.hideEnd];default:return Object(le.d)(t)}}),a=>{switch(a){case Kt.a.Type.checkingOut:return t.contains(Kt.a.Type.checkingIn)?[e.checkingOutEnd]:t.isEmpty()?[e.hideEnd]:[e.checkingOutStart,e.checkingOutEnd];case Kt.a.Type.checkingIn:return t.contains(Kt.a.Type.checkingOut)?[e.checkingInEnd]:t.contains(Kt.a.Type.checking)?[]:[e.checkingInStart,e.checkingInEnd];case Kt.a.Type.checking:return[e.checkingStart,e.checkingEnd];default:return Object(le.d)(a)}})),f.a.switchMap(e=>an.a.rafSequence(e,!0))).subscribe(b.b.toAtom(this._classes)),t.subscribe(e=>{this._state.set(e),null===this._content.get()&&e.nonEmpty()&&this._content.set(this.props.children)}),t.pipe(f.a.switchMap(()=>f.a.timer(nn))).subscribe(this._onTransitionEnd))}componentWillUnmount(){this._subs.forEach(e=>e.unsubscribe()),this._subs=[]}render(){return n.createElement(s.a.div,{"data-role":"loader-content",key:"content",className:this._classes,mount:e=>e&&(this._el=e),onTransitionEnd:e=>e.target===this._el&&this._onTransitionEnd()},this._content)}}var sn=a("jcJZ"),on=a("+wa7"),ln=a("u/Xi"),cn=a("KvFL"),dn=a("47ib");const pn=["Conjunctions","Determiners","Fluency","Modifiers","Nouns","Numerals","Prepositions","Pronouns","Punctuation","Syntax","Spelling","Verbs","Word Order","Conciseness","References","Voice","Formality","Sensitivity","Variety","Vocabulary","Conventions"].map(e=>({id:e,title:e})),un=e=>n.createElement("span",null,n.createElement("span",{className:cn.dotOptimized},"."),n.createElement("span",{className:cn.dotOptimized},"."),n.createElement("span",{className:cn.dotOptimized,onAnimationEnd:e.onTransitionEnd},".")),mn=()=>{const[e,t]=n.useState(()=>M.a.shuffle(pn)),a=n.useCallback(()=>{t(e=>{const t=e.slice(0),a=t.shift();return a&&t.push(a),t})},[]);return n.createElement("div",{className:cn.wrapper},n.createElement("div",{className:cn.checkingWrapper},e.slice(0,8).map(({id:e,title:t},i)=>n.createElement(ln.a,{key:e,offset:`${100*i}%`,theme:dn},n.createElement(x.Base,{className:cn.item},t,5===i&&n.createElement(un,{onTransitionEnd:a}))))))};var hn,gn=a("6Gma"),fn=a("W1E0"),bn=a("lN2x"),yn=a("iyic");class Cn extends Qa.a{}function vn(e,t){return!e||J.e.isForceSidebar(t)?{prev:{start:{},end:{}},next:{start:{},end:{}}}:J.e.isSidebarOpened(e)?{prev:{start:{base:fn.navigationLeaveRightStart},end:{base:fn.navigationLeaveRight}},next:{start:{},end:{}}}:{prev:{start:{},end:{}},next:{start:{base:fn.navigationEnterLeftStart},end:{base:fn.navigationEnterLeft}}}}function Sn({state:e,checkingState:t,children:a}){return n.createElement("div",{className:bn.navigationWrapper},n.createElement(Cn,{state:e.pipe(f.a.distinctUntilChanged((e,t)=>J.e.isSidebarOpened(e)===J.e.isSidebarOpened(t))),stateToClassMapper:vn,className:bn.fullHeight},({state:i,view:r})=>J.e.isSidebarOpened(i)?n.createElement(s.a.div,Object.assign({key:"sidebar"},Object(X.c)(r.pipe(f.a.map(e=>e.base)),e.view(J.e.isSidebarOpened).view(e=>e?bn.wrapper:bn.narrowWrapper))),t.view(e=>"full"===e?null:a)):null))}(hn=Sn||(Sn={})).Loader=({baseLoaderClass:e,state:t,showToolbar:a,enableOptimizations:i})=>n.createElement(rn,{state:t.view("navigation"),theme:yn},n.createElement(s.a.div,Object.assign({},Object(X.c)(bn.navigationLoaderWrapper,e,a.view(e=>e&&bn.navigationLoaderWithToolbar))),n.createElement(s.a.div,{className:t.view("lens").view(e=>e.fold(()=>bn.fullHeightLoader,e=>e===Kt.a.Type.checkingOut?bn.fullHeightLoaderNavigation:bn.fullHeightLoader))},n.createElement(s.a.div,{className:t.view("lens").view(e=>e.fold(()=>bn.loaderWrapperNoShadow,e=>e===Kt.a.Type.checkingOut?bn.loaderWrapperNoShadow:bn.loaderWrapper))},i?n.createElement(mn,{key:"rechecking-optimized"}):n.createElement(on.a,{key:"rechecking"}))))),hn.Content=({navigationViewModel:e,documentModel:t,modalManager:a,features:i})=>n.createElement(n.Fragment,null,n.createElement(gn.a,{documentModel:t,modalManager:a,navigationViewModel:e}),n.createElement(sn.a,{navigationViewModel:e,features:i}));var En=a("2qsX"),wn=a("Z0Em"),kn=a("4lva"),_n=a("/by5"),On=a("Jmy1");const An=({plagiarismModel:e,lensPreviewVM:t,navigationViewModel:a,state:i,proofitViewModel:r,features:c})=>{const{gnarSpec:d,pageId:p}=n.useContext(v.a.Context),u=n.useContext(K.a.Context),m=i.view(J.e.isSidebarOpened),h=()=>m.get()?"wiritingAssistant":"writingMode",g=i.view("currentLens","type").view(e=>e===J.i.plagiarism),f=e=>"disabled"===e.kind&&e.reason===kn.d.EmptyDocument,b=e=>"disabled"===e.kind&&e.reason===kn.c.EmptyDocument,y=n.createElement(_n.a,{name:"proofread",isDisabled:a.documentActions.view(e=>e.proofit).view(f),tooltipAlignment:"left",tooltip:a.documentActions.view(e=>e.proofit).view(e=>Object(I.c)(u.documentActions.proofit.tooltip.emptyDocument,u.documentActions.proofit.tooltip.available)(f(e))),title:n.createElement(s.a.div,{className:m.view(Object(I.c)("",On.hidden))},u.sidebar.sendToProofreaders),onClick:()=>{c.proofit.get()===sa.o.enabled?r.showOrderModal():a.popover.set(l.g.some(kn.a.ProofitHook)),d.professionalProofreadingButtonClick(p,h())},className:m.view(Object(I.c)(On.proofitBtn,On.proofitBtnTeaser))},n.createElement(oe.d.ProofreadOutcomes,{className:m.view(Object(I.c)(On.actionIconTeaser,On.actionIcon))})),C=n.createElement(_n.a,{onClick:()=>{a.events.next({type:"switchToLens",id:It.a.SpecialId.Plagiarism,focusFirst:!0,actionSource:Mt.b.sidebar}),d.plagiarismButtonClick(p,h())},name:"plagiarism",isActive:g,isDisabled:a.documentActions.view(e=>e.plagiarism).view(b),tooltipAlignment:"left",tooltip:a.documentActions.view(e=>e.plagiarism).view(e=>Object(I.c)(u.documentActions.plagiarism.tooltip.emptyDocument,u.documentActions.plagiarism.tooltip.available)(b(e))),title:m.view(Object(I.c)(u.plagiarism.title,"")),className:m.view(Object(I.c)(On.plagiarismBtn,On.plagiarismBtnTeaser))},n.createElement(s.a.Fragment,null,o.a.combine(g,e.checkingState,(a,i)=>a&&"full"!==i?n.createElement(En.a.PlagiarismOutcomesMeter,{key:"plagiarism-counter",className:On.plagiarismScore,isChecking:e.checkingState.view(e=>"checking"===e),count:t.getLens(It.a.SpecialId.Plagiarism).view("percentile").view(wn.a.fromRatio)}):n.createElement(oe.d.PlagiarismOutcomes,{className:m.view(Object(I.c)(On.plagiarismIconTeaser,On.actionIcon)),key:"plagiarism-icon"}))));return n.createElement(s.a.Fragment,null,a.documentActions.view(e=>n.createElement(s.a.div,{className:m.view(Object(I.c)(On.outcomeDocumentActionsFull,On.outcomeDocumentActionsTeaser))},(e=>"available"===e.kind||e.reason===kn.d.EmptyDocument)(e.proofit)&&y,(e=>"available"===e.kind||e.reason===kn.c.EmptyDocument)(e.plagiarism)&&C)))};var Tn=a("vz4c"),xn=a("z1Kw"),In=a("tuqh");const Mn=()=>n.createElement(oe.d.CheckmarkOutcomes,{className:In.optionCheckedIcon,width:16}),jn=({option:{title:e,description:t,availableInCorrectness:a,availableInClarity:i}})=>n.createElement("tr",{className:In.option},n.createElement("td",{className:In.optionCell},n.createElement(x.Base,{className:In.optionTitle},e),Object(Y.pipe)(t,l.g.mapOrDefault(e=>n.createElement(x.Small,{className:In.columnDescription},e),null))),n.createElement("td",{className:In.optionChecked},a&&n.createElement(Mn,null)),n.createElement("td",{className:In.optionChecked},i&&n.createElement(Mn,null))),Ln=({title:e,description:t,className:a})=>n.createElement("th",{className:a},n.createElement(x.Base,{className:In.columnTitle},e),n.createElement(x.Small,{className:In.columnDescription},t)),Nn=()=>{const e=n.useContext(K.a.Context).proofitOrderModal.promo.step3,t=[{title:e.spelling.h1,description:l.g.none,availableInCorrectness:!0,availableInClarity:!0},{title:e.grammar.h1,description:l.g.none,availableInCorrectness:!0,availableInClarity:!0},{title:e.punctuation.h1,description:l.g.none,availableInCorrectness:!0,availableInClarity:!0},{title:e.conciseness.h1,description:l.g.some(e.conciseness.h2),availableInCorrectness:!1,availableInClarity:!0},{title:e.preciseness.h1,description:l.g.some(e.preciseness.h2),availableInCorrectness:!1,availableInClarity:!0},{title:e.readability.h1,description:l.g.some(e.readability.h2),availableInCorrectness:!1,availableInClarity:!0}];return n.createElement("table",{className:In.optionsTable},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{className:In.optionsTableColumn1}),n.createElement(Ln,{title:e.header.correctness.h1,description:e.header.correctness.h2,className:In.optionsTableColumn2}),n.createElement(Ln,{title:e.header.correctnessClarity.h1,description:e.header.correctnessClarity.h2,className:In.optionsTableColumn3}))),n.createElement("tbody",null,t.map(e=>n.createElement(jn,{option:e,key:`proofit-option-${e.title}`}))))};var Pn,Fn;(Fn=Pn||(Pn={})).Dots=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52"},n.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(16 16)"},n.createElement("circle",{cx:"10",cy:"10",r:"26",fill:"#EFF4FF"}),n.createElement("circle",{cx:"10",cy:"10",r:"18",fill:"#DCE7FF"}),n.createElement("circle",{cx:"10",cy:"10",r:"9",fill:"#9DBBFF"}))),Fn.PathFrom1To2=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 314 49"},n.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"#EBF0FF",strokeWidth:"2",d:"M1 0v8.5c0 8.837 7.163 16 16 16h280c8.837 0 16 7.163 16 16V48"})),Fn.PathFrom2To3=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 314 49"},n.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"#EBF0FF",strokeWidth:"2",d:"M313 0v8.5c0 8.837-7.163 16-16 16H17c-8.837 0-16 7.163-16 16v8.054"})),Fn.Illustration=()=>n.createElement("svg",{viewBox:"0 0 432 296",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},n.createElement("defs",null,n.createElement("path",{d:"M562,3 C562,83 430.204272,225.039762 318.380193,227 C251.656819,228.169638 194.76078,245.646649 156.426437,283 C122.849899,315.7173 28.718061,288.818016 12.9452193,301.609489 C-20.6124065,328.824083 12.9452193,419 94.3182261,362.425988 C175.691233,305.851977 173.663757,404.669157 238.24,392.399927 C269.889017,386.386739 323.865886,388.63911 362.242863,396.392987 C511.421672,426.533823 511.844211,635.1185 548,615.5 C605.82398,584.124119 562,-42.6094389 562,3 Z",id:"path-1"}),n.createElement("path",{d:"M19.3089215,7.937541 C17.6497662,9.75781021 11.3030739,19.3772256 10.9573251,21.58956 C10.6111662,23.8014846 9.82369558,40.4892442 10.9573251,40.6740835 C12.0905445,40.8589229 15.6173464,40.6740835 15.6173464,40.6740835 C15.6173464,40.6740835 17.6217051,25.3197123 18.1934416,23.656568 C18.7647679,21.9934237 27.4076677,15.0137914 31.660419,10.9481454 C35.9135805,6.88290921 34.064255,2.91029763 34.064255,2.91029763 L20.0579422,0.319267969 C20.0579422,0.319267969 7.57079144,7.18291455 1.97728943,15.2236312 C-0.695188878,19.0655028 0.323601194,33.676828 0.323601194,33.676828 C0.323601194,33.676828 3.2155049,34.1965094 4.57799307,33.1940326 C4.94794019,29.6824948 5.23339828,24.3360883 6.50155404,20.4544619 C6.66437999,19.9565022 6.94286568,19.5048549 7.32921843,19.1507502",id:"path-3"}),n.createElement("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:"linearGradient-5"},n.createElement("stop",{stopColor:"#B6CAFF",offset:"0%"}),n.createElement("stop",{stopColor:"#7CA1FF",offset:"100%"})),n.createElement("path",{d:"M0.260606478,48.0753261 L12.1340822,48.0753261 C17.114047,57.187615 26.7976771,63.3697253 37.9276223,63.3697253 C54.1444201,63.3697253 67.2907322,50.2452817 67.2907322,34.0554601 C67.2907322,25.5804005 63.6882211,17.9453528 57.9285812,12.593295 L57.9285812,0.815669031 C68.6856756,7.78180737 75.8017785,19.8765665 75.8017785,33.6306157 C75.8017785,55.2170445 58.2733624,72.7163027 36.6509653,72.7163027 C20.1393555,72.7163027 6.01510052,62.5118246 0.260610064,48.0753266 Z",id:"path-6"}),n.createElement("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:"linearGradient-8"},n.createElement("stop",{stopColor:"#B6CAFF",offset:"0%"}),n.createElement("stop",{stopColor:"#7CA1FF",offset:"100%"}))),n.createElement("g",{id:"Page-1",fill:"none",fillRule:"evenodd"},n.createElement("g",{id:"Initial---Proofread-02-08",transform:"translate(-288 -265)"},n.createElement("g",{id:"Popup",transform:"translate(288 60)"},n.createElement("g",{id:"Left",transform:"translate(0 68)"},n.createElement("g",{transform:"translate(-28 -27)",id:"Illustration"},n.createElement("g",{id:"Group-3"},n.createElement("mask",{id:"mask-2",fill:"#fff"},n.createElement("use",{xlinkHref:"#path-1"})),n.createElement("use",{id:"Oval-5",fill:"#F5F5FF",xlinkHref:"#path-1"}),n.createElement("path",{d:"M146.788506,257.081856 L280.453567,257.081856 C287.080984,257.081856 292.453567,262.454439 292.453567,269.081856 L292.453567,390.02113 L134.788506,372.12887 L134.788506,269.081856 C134.788506,262.454439 140.161089,257.081856 146.788506,257.081856 Z",id:"Rectangle",fill:"#E4E6F2",mask:"url(#mask-2)"})),n.createElement("ellipse",{id:"Oval",fill:"#F1F2FA",cx:"130.315",cy:"408.986",rx:"43.706",ry:"5.763"}),n.createElement("ellipse",{id:"Oval",fill:"#F1F2FA",cx:"329.556",cy:"436.032",rx:"75.885",ry:"12.968"}),n.createElement("g",{id:"Paper",transform:"translate(131.678 263.563)"},n.createElement("path",{d:"M8,0 L144.952351,-3.01980663e-14 C149.370629,-3.10096908e-14 152.952351,3.581722 152.952351,8 L152.952351,126.001947 C152.952351,130.386158 149.423632,133.953611 145.039682,134.001471 L70.9944988,134.809829 L0,112.933059 L0,8 C-5.41083001e-16,3.581722 3.581722,8.11624501e-16 8,0 Z",id:"Rectangle",fill:"#FFF"}),n.createElement("path",{d:"M25.1170739,54.1515434 C24.314287,54.1515434 23.6634997,53.5038202 23.6634997,52.7048131 C23.6634997,51.905806 24.314287,51.2580827 25.1170739,51.2580827 L128.391903,51.2580827 C129.19469,51.2580827 129.845477,51.905806 129.845477,52.7048131 C129.845477,53.5038202 129.19469,54.1515434 128.391903,54.1515434 L25.1170739,54.1515434 Z M25.1170739,65.002021 C24.314287,65.002021 23.6634997,64.3542978 23.6634997,63.5552907 C23.6634997,62.7562835 24.314287,62.1085603 25.1170739,62.1085603 L76.1646321,62.1085603 C76.967419,62.1085603 77.6182064,62.7562835 77.6182064,63.5552907 C77.6182064,64.3542978 76.967419,65.002021 76.1646321,65.002021 L25.1170739,65.002021 Z M71.0771224,42.9393832 C70.2743355,42.9393832 69.6235482,42.29166 69.6235482,41.4926529 C69.6235482,40.6936458 70.2743355,40.0459225 71.0771224,40.0459225 L128.391903,40.0459225 C129.19469,40.0459225 129.845477,40.6936458 129.845477,41.4926529 C129.845477,42.29166 129.19469,42.9393832 128.391903,42.9393832 L71.0771224,42.9393832 Z M25.1170739,75.8524986 C24.314287,75.8524986 23.6634997,75.2047754 23.6634997,74.4057682 C23.6634997,73.6067611 24.314287,72.9590379 25.1170739,72.9590379 L128.391903,72.9590379 C129.19469,72.9590379 129.845477,73.6067611 129.845477,74.4057682 C129.845477,75.2047754 129.19469,75.8524986 128.391903,75.8524986 L25.1170739,75.8524986 Z M25.1170739,30.3457684 C24.314287,30.3457684 23.6634997,29.6980452 23.6634997,28.8990381 C23.6634997,28.100031 24.314287,27.4523077 25.1170739,27.4523077 L128.391903,27.4523077 C129.19469,27.4523077 129.845477,28.100031 129.845477,28.8990381 C129.845477,29.6980452 129.19469,30.3457684 128.391903,30.3457684 L25.1170739,30.3457684 Z M25.1170739,86.7029762 C24.314287,86.7029762 23.6634997,86.0552529 23.6634997,85.2562458 C23.6634997,84.4572387 24.314287,83.8095155 25.1170739,83.8095155 L58.7217415,83.8095155 C59.5245284,83.8095155 60.1753157,84.4572387 60.1753157,85.2562458 C60.1753157,86.0552529 59.5245284,86.7029762 58.7217415,86.7029762 L25.1170739,86.7029762 Z",id:"Combined-Shape",fill:"#E4E6F2",fillRule:"nonzero"}),n.createElement("path",{d:"M64.5360384,86.7029762 C63.7332515,86.7029762 63.0824642,86.0552529 63.0824642,85.2562458 C63.0824642,84.4572387 63.7332515,83.8095155 64.5360384,83.8095155 L87.7932259,83.8095155 C88.5960128,83.8095155 89.2468001,84.4572387 89.2468001,85.2562458 C89.2468001,86.0552529 88.5960128,86.7029762 87.7932259,86.7029762 L64.5360384,86.7029762 Z M25.1170739,42.9393832 C24.314287,42.9393832 23.6634997,42.29166 23.6634997,41.4926529 C23.6634997,40.6936458 24.314287,40.0459225 25.1170739,40.0459225 L64.5360384,40.0459225 C65.3388253,40.0459225 65.9896126,40.6936458 65.9896126,41.4926529 C65.9896126,42.29166 65.3388253,42.9393832 64.5360384,42.9393832 L25.1170739,42.9393832 Z M81.978929,65.002021 C81.1761421,65.002021 80.5253548,64.3542978 80.5253548,63.5552907 C80.5253548,62.7562835 81.1761421,62.1085603 81.978929,62.1085603 L128.391903,62.1085603 C129.19469,62.1085603 129.845477,62.7562835 129.845477,63.5552907 C129.845477,64.3542978 129.19469,65.002021 128.391903,65.002021 L81.978929,65.002021 Z",id:"Combined-Shape",fill:"#EC5050",fillRule:"nonzero"})),n.createElement("g",{id:"Man-w-Pencil",transform:"translate(85.83 290.871)"},n.createElement("g",{id:"Pencil",transform:"rotate(-20 53.447 9.198)"},n.createElement("polygon",{id:"Fill-7",fill:"#6089F3",points:"42.7306681 76.025911 38.0871006 78.5584871 5.7923657 19.3303867 10.4363805 16.7978106"}),n.createElement("polygon",{id:"Fill-9",fill:"#7CA1FF",points:"47.3737436 73.4936929 42.7306234 76.0258215 10.4363358 16.7981685 15.0799033 14.2651451"}),n.createElement("polygon",{id:"Fill-14",fill:"#A2BCFF",points:"52.0172216 70.9610721 47.3736541 73.4936481 15.0798138 14.2655477 19.7233813 11.7329717"}),n.createElement("path",{d:"M52.6528102,81.32316 L53.0585241,87.968432 C53.0938619,88.6260697 52.3455054,89.0345208 51.8190167,88.6444119 L46.4534843,84.7044018 L52.6528102,81.32316 Z",id:"Fill-16",fill:"#EC5050"}),n.createElement("polygon",{id:"Fill-19",fill:"#FFF",points:"19.7232471 11.7331059 5.79254463 19.3299393 3.91695668 15.889197 17.8467646 8.29191616"}),n.createElement("path",{d:"M17.8466304,8.29178195 L3.91682248,15.8890627 L0.608487518,9.82269085 C-0.349659249,8.06406932 0.298051544,5.86165421 2.05644321,4.90293482 L9.61962974,0.777712456 C11.3780214,-0.181006937 13.5801486,0.4672359 14.5387427,2.22496268 L17.8466304,8.29178195 Z",id:"Fill-21",fill:"#FFC2C2"})),n.createElement("g",{id:"Foots",transform:"translate(20.342 66.04)"},n.createElement("path",{d:"M22.9728849,46.0241608 C22.9728849,46.0241608 21.9372998,46.5011779 20.2725812,46.4607201 L20.3172716,49.3228228 C20.3172716,49.3228228 21.4903955,49.511626 22.2682401,49.3659778 L22.5687447,48.62926 L23.2051981,49.4106741 C23.2051981,49.4106741 26.9314554,49.9512678 28.8535292,49.7882806 C28.8535292,49.7882806 29.0738993,48.9529226 28.1581307,48.5676099 C27.2419769,48.1826825 25.1542403,47.6494098 24.5624773,47.2259511 C23.9703291,46.8024925 22.9728849,46.0241608 22.9728849,46.0241608",id:"Fill-23",fill:"#3B3E4D"}),n.createElement("path",{d:"M4.13320993,43.43983 C4.13320993,43.43983 3.0267365,43.166258 1.7511329,42.095474 L-0.000269683636,44.3588008 C-0.000269683636,44.3588008 0.79837914,45.238855 1.49685976,45.6110671 L2.19148775,45.2226718 L2.20073405,46.2302646 C2.20073405,46.2302646 4.77428646,48.9794707 6.37736304,50.0517959 C6.37736304,50.0517959 7.07160577,49.5370181 6.59657731,48.6646702 C6.12116358,47.7915516 4.82321477,46.071901 4.62480467,45.3714026 C4.42677983,44.6705188 4.13320993,43.43983 4.13320993,43.43983",id:"Fill-27",fill:"#3B3E4D"}),n.createElement("path",{d:"M7.77756387,2.8459536 C4.72919113,8.61268399 11.8341253,20.6008102 14.5745244,24.8489352 L14.5745244,24.8489352 C15.2562232,25.9060036 15.7062805,27.095158 15.8990002,28.3419567 L15.8990002,28.3419567 L18.6223946,45.4535629 L23.2922583,44.4736081 C23.2922583,44.4736081 23.8662608,28.355318 23.2079906,24.1999585 L23.2079906,24.1999585 C22.5497205,20.0438355 21.233558,6.05724289 21.233558,6.05724289 L21.233558,6.05724289 C21.233558,6.05724289 15.8555438,0.360372931 11.5612947,0.360372931 L11.5612947,0.360372931 C10.0841546,0.360372931 8.73511643,1.03454517 7.77756387,2.8459536",id:"Fill-33",fill:"#C6CBDE"}),n.createElement("path",{d:"M6.76242072,28.533 C6.07445196,30.0274634 1.70046824,40.3121095 1.70046824,40.3121095 L6.66086342,43.2651117 C6.66086342,43.2651117 14.3506694,30.8491914 15.3564142,27.5225733 C18.010205,20.3519742 22.5283497,6.65570873 20.917261,3.88569821 C20.917261,3.88569821 17.7020601,3.3933421 14.1358546,3.3933421 C9.65376155,3.39372025 4.61801741,4.17120425 4.71817068,7.68047057 C4.89882098,13.9816456 7.45038948,27.0389147 6.76242072,28.533 Z",id:"Clip-37",fill:"#E4E6F2"}),n.createElement("path",{d:"M15.8990002,28.3419567 L18.6223946,45.4535629 L23.2922583,44.4736081 C23.2922583,44.4736081 23.8662608,28.355318 23.2079906,24.1999585 C22.9678434,22.6837403 22.6401371,19.8591813 22.3207189,16.8826816",id:"Fill-33",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{d:"M4.38018352,7.17986789 C4.43184215,9.38630245 4.71940381,12.415885 5.04863335,15.492005 C5.66561059,21.2566637 6.42892078,27.1847565 6.06024614,28.1651834 C5.49484045,29.6691633 1.90009107,40.0193007 1.90009107,40.0193007 L5.97678149,42.9911073 C5.97678149,42.9911073 13.5016783,30.5767367 14.3282476,27.2289352 C15.8990002,24.0434641 17.0905734,21.1594864 17.9675545,17.6725218",id:"Clip-37",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),n.createElement("g",{id:"Group-53",transform:"translate(23.743 31.196)"},n.createElement("path",{d:"M5.88330653,16.7886512 C7.71829147,14.4054718 11.7570817,13.3014505 14.1361803,16.3023169 C17.4145376,20.4378064 18.8620539,42.1072252 18.6917335,47.5251683 C18.6917335,47.5251683 6.00348395,47.8151799 0,46.8961822 C0,46.8961822 2.46653803,21.226393 5.88330653,16.7886512",id:"Fill-39",fill:"#FFF"}),n.createElement("path",{d:"M18.6917335,39.5094009 L18.6917335,47.5251683 C18.6917335,47.5251683 6.00348395,47.8151799 0,46.8961822 C0,46.8961822 2.46653803,21.226393 5.88330653,16.7886512",id:"Fill-39",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{d:"M14.9421691,6.41326474 C14.9962749,6.53196769 15.0809118,6.73057424 15.1705729,6.94454687 C15.3603297,7.397462 15.7529832,7.70132618 16.1916267,7.92567091 C16.2426408,7.95140909 16.278969,7.98713522 16.2901766,8.03592251 C16.3160701,8.14771073 16.1672791,8.35745768 15.9995511,8.5499178 C15.7522103,8.83572684 15.6629357,9.22256784 15.7553021,9.58828048 C15.9381024,10.3108703 16.1576174,11.4456551 15.8101808,11.6784512 C15.2923109,12.0257245 13.5605386,12.6253857 13.5605386,12.6253857 L13.0909775,15.5234279 C13.0909775,15.5234279 12.4730119,16.4661367 9.75651385,15.8707012 C8.83671512,15.6694056 8.451018,15.2871744 8.451018,15.2871744 L8.80541104,12.4456026 C8.80541104,12.4456026 6.16929879,9.67471467 7.54088102,6.97796808 C8.91284972,4.28045319 13.6583155,3.58244913 14.9421691,6.41326474",id:"Fill-41",fill:"#FFF"}),n.createElement("path",{d:"M8.86995889,8.11469929 C9.21616083,7.20911238 11.7652159,6.145276 13.841969,5.96876698 C15.917805,5.79225796 18.9854752,3.72675465 18.028032,2.76073731 C17.0701302,1.79471997 14.8594818,1.50474087 14.2207277,1.6855974 C13.5815151,1.86688868 14.5687638,0.307870601 13.5310751,0.190053005 C12.4929278,0.0722354085 6.21910668,1.50126286 5.62162174,4.7505939 C4.94022295,8.45510954 6.59144572,11.67053 8.8589538,12.9252222 L8.79521596,11.3579438 C8.79521596,11.3579438 6.91151056,10.5271341 7.1793012,9.5476395 C7.34942162,8.92507567 8.18168192,9.13940805 8.56502606,9.52590193 C8.56502606,9.52590193 8.74064903,8.45337053 8.86995889,8.11469929",id:"Fill-45",fill:"#3B3E4D"}),n.createElement("path",{d:"M22.1015227,32.9159145 C22.9821402,33.1976128 26.5951289,32.8827012 26.9494449,32.731806 C27.555489,32.4738901 27.4128144,32.2475474 27.4128144,32.2475474 C28.0925666,32.0560582 28.0214448,31.655448 28.0214448,31.655448 C28.7339561,31.2376161 27.8498903,31.0022524 27.8498903,31.0022524 C28.4878315,30.2088228 26.7028892,30.2289148 26.1843465,30.300262 C25.9033075,30.3388059 24.6748396,30.3215841 24.6748396,30.3215841 C24.6748396,30.3215841 24.7382027,30.0296348 25.053725,29.811903 C25.3024359,29.6405058 25.8597723,29.5023219 26.0317578,29.034875 C26.1472769,28.7220136 24.1950906,29.3026319 23.5226661,29.7134931 C22.9812781,30.0443963 22.1105746,31.1535576 22.1105746,31.1535576 L16.7876448,30.0800699 L15.6165055,32.6235552 L22.1015227,32.9159145 Z",id:"Fill-47",fill:"#FFF"}),n.createElement("path",{d:"M13.9235043,20.3536067 C13.7079836,22.6699292 14.0597134,26.8658803 14.566618,27.8548996 M17.4433881,33.6118774 C17.4433881,33.6118774 12.4351185,32.5711929 11.3368251,31.4837638 C9.57731428,29.7410889 6.91261659,24.0698097 7.28288112,20.0723185 C7.53719552,17.3283231 10.6174171,15.5606357 12.440291,16.8022403",id:"Fill-49",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{d:"M17.2332067,35.5617231 C17.2332067,35.5617231 18.6601238,35.9953446 19.5185243,35.786864 C19.5185243,35.786864 20.0910119,31.1840821 19.2306259,30.0664823",id:"Fill-51",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))),n.createElement("g",{id:"Man-on-the-ladder",transform:"translate(324.404 272.184)"},n.createElement("g",{id:"Ladder",transform:"translate(0 53.704)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"},n.createElement("path",{d:"M42.2873305,0.458915597 L63.6754936,103.759193",id:"Path-3",stroke:"#8189A9"}),n.createElement("path",{d:"M32.9242085,34.1090085 L44.562667,103.759193",id:"Path-3",stroke:"#8189A9"}),n.createElement("path",{d:"M32.9242085,8.08373708 L16.0882387,103.759193",id:"Path-3",stroke:"#C6CBDE"}),n.createElement("path",{d:"M18.1687635,14.8540285 L0.61595046,103.759193",id:"Path-3",stroke:"#C6CBDE"}),n.createElement("path",{d:"M0.910134603,95.109066 L14.1070863,95.109066",id:"Path-4",stroke:"#C6CBDE"}),n.createElement("path",{d:"M48.237134,95.109066 L61.4340857,95.109066",id:"Path-4",stroke:"#8189A9"}),n.createElement("path",{d:"M33.6749803,22.2982978 L46.8719321,22.2982978",id:"Path-4",stroke:"#8189A9"}),n.createElement("path",{d:"M4.55067302,79.6367778 L17.7476248,79.6367778",id:"Path-4",stroke:"#C6CBDE"}),n.createElement("path",{d:"M10.0114806,65.0746241 L23.2084324,65.0746241",id:"Path-4",stroke:"#C6CBDE"}),n.createElement("path",{d:"M10.0114806,50.5124705 L23.2084324,50.5124705",id:"Path-4",stroke:"#C6CBDE"}),n.createElement("path",{d:"M12.7418844,35.0401822 L25.9388362,35.0401822",id:"Path-4",stroke:"#C6CBDE"})),n.createElement("g",{id:"Group-26",transform:"translate(6.502 20.418)"},n.createElement("path",{d:"M9.75957787,4.94046636 C9.70096056,4.96496089 7.92645459,4.90005037 7.38004284,5.42586642 C7.07670849,5.72388328 4.6406057,5.16132543 4.27578465,5.44342084 C4.03885593,5.62141447 3.76708474,5.80675646 3.48383604,5.97291107 C3.21083512,5.87901535 1.43263995,5.25317994 1.09241358,2.89803026 C1.66956868,2.83434446 0.252505354,2.4861138 0.252505354,2.4861138 C1.04814317,2.24198492 1.29572958,1.88477293 0.612817377,1.15810168 C0.471807893,1.00827677 0.353753442,0.462865091 0.428357297,0.257519227 C0.530425208,-0.0449882986 0.861633529,0.0272705839 1.0313368,0.27425716 C1.86878556,1.45407733 2.9193882,1.53613403 3.80889569,2.4175291 C3.86259407,2.46366048 8.4716366,3.5589745 8.61141635,3.48385792 C9.60053229,2.9090528 10.7417253,4.47180423 9.75957787,4.94046636",id:"Fill-16",fill:"#E4E6F2"}),n.createElement("path",{d:"M19.1178936,61.1367709 C18.9617174,59.9696062 18.3821028,57.9504399 18.3821028,57.9504399 L16.5395516,58.1945688 C16.5395516,58.1945688 16.1427574,58.8383669 14.7556176,59.2437515 C13.3705274,59.6536267 11.7304723,59.3119279 10.9135191,59.6287239 C10.4413013,59.8095752 10.2392151,60.6517791 10.1478049,61.330686 C10.128539,61.4809191 10.1150119,61.6229874 10.1059939,61.7487261 C10.0863182,62.0144918 10.2998819,62.2398415 10.5683738,62.2382085 C12.3908394,62.2275942 18.7665996,62.1712568 19.0773124,61.9287609 C19.1724118,61.8569103 19.171592,61.5486873 19.1178936,61.1367709",id:"Fill-18",fill:"#3B3E4D"}),n.createElement("path",{d:"M16.024744,55.4544875 L16.2956954,58.3966896 C16.343655,58.9176067 16.7711924,59.3229913 17.2962888,59.3446281 C17.8845115,59.3695309 18.3780447,58.9061759 18.3882925,58.3195318 L18.4374818,55.4508133 L16.024744,55.4544875 Z",id:"Fill-20",fill:"#FBD4C1"}),n.createElement("path",{d:"M9.41693303,53.5304825 C9.00251271,52.4274118 7.98470298,50.5886886 7.98470298,50.5886886 L6.24339983,51.2365691 C6.24339983,51.2365691 6.00073235,51.9526261 4.74025513,52.6564358 C3.48182748,53.3643279 1.80652004,53.3957625 1.08138697,53.8864697 C0.662047722,54.1681569 0.653439585,55.0336305 0.716565924,55.7158034 C0.732142553,55.8664448 0.750588561,56.0081048 0.769854391,56.133027 C0.81084552,56.3963432 1.06990945,56.5682132 1.33020312,56.5069769 C3.10429918,56.0905698 9.30625698,54.6172234 9.55466322,54.3110417 C9.63090672,54.2200037 9.56163171,53.9199456 9.41693303,53.5304825",id:"Fill-22",fill:"#3B3E4D"}),n.createElement("path",{d:"M5.12647355,48.6801968 L6.05123342,51.4880872 C6.21478802,51.984918 6.72266811,52.2845679 7.23833651,52.1890392 C7.81795107,52.0820797 8.19506946,51.5207466 8.07291589,50.9467579 L7.47731479,48.1396841 L5.12647355,48.6801968 Z",id:"Fill-24",fill:"#FFF"})),n.createElement("g",{id:"Pants",transform:"translate(11.147 37.124)"},n.createElement("path",{d:"M1.97728943,15.6736851 C-0.695188878,19.5155567 0.323601194,35.5397524 0.323601194,35.5397524 C0.323601194,35.5397524 3.2155049,36.0594337 4.57799307,35.0569569 C4.94794019,31.5454191 5.23339828,26.1990126 6.50155404,22.3173862 C6.66437999,21.8194265 7.28479942,19.3389047 7.67115217,18.9848 L14.5536139,14.3084832 C13.4338227,16.1287524 11.2610683,19.7492958 10.9573251,23.3763675 C10.6111662,25.5882921 9.82369558,42.3521685 10.9573251,42.5370079 C12.0905445,42.7218472 15.6173464,42.5370079 15.6173464,42.5370079 C15.6173464,42.5370079 17.6217051,27.1826366 18.1934416,25.5194923 C18.7647679,23.856348 27.4076677,16.8767157 31.660419,12.8110697 C35.9135805,8.74583353 34.4643543,3.84193529 34.4643543,3.84193529 L20.0579422,2.18219229 C19.5823752,2.04419469 18.4615527,1.58713727 17.2986473,2.18219229 C13.2916383,4.23256619 7.237262,7.62135444 2.90194591,13.8534159 L1.97728943,15.6736851 Z",id:"pants",fill:"#E4E6F2"}),n.createElement("mask",{id:"mask-4",fill:"#fff"},n.createElement("use",{xlinkHref:"#path-3"})),n.createElement("use",{id:"pants",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xlinkHref:"#path-3"})),n.createElement("g",{id:"Group-45",transform:"translate(11.963)"},n.createElement("path",{d:"M18.3145525,16.5980195 C20.3469798,14.9770238 24.6738011,16.4716869 22.9237479,20.3879993 C21.1741111,24.3043117 12.6000165,27.8383448 10.7108586,28.4741098 C8.82211722,29.1094646 1.8906237,27.745236 0.367552635,27.2009391 L0.483750837,23.8670694 L9.55720621,25.077484 C9.55720621,25.077484 16.1151163,18.3527309 18.3145525,16.5980195",id:"Fill-30",fill:"#F37878"}),n.createElement("path",{d:"M23.3314411,13.1776448 C23.3314411,13.1776448 28.3446231,14.308076 31.0792374,22.8437339 C33.8130188,31.379802 34.2586535,40.8075817 34.2586535,40.8075817 C34.2586535,40.8075817 24.8261915,42.569266 17.2645622,39.0967586 C17.2645622,39.0967586 16.8559943,23.8289646 17.8151501,17.3466225 C18.2353794,14.5037276 23.3314411,13.1776448 23.3314411,13.1776448",id:"Fill-32",fill:"#FFC2C2"}),n.createElement("path",{d:"M23.3314411,13.1776448 C23.3314411,13.1776448 28.3446231,14.308076 31.0792374,22.8437339 C33.8130188,31.379802 34.2586535,40.8075817 34.2586535,40.8075817 C34.2586535,40.8075817 24.8261915,42.569266 17.2645622,39.0967586",id:"Fill-32",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{d:"M16.8292146,4.5304204 C16.8292146,4.5304204 16.469375,6.32860994 16.4069028,7.1386976 C16.3448472,7.94960561 15.5389564,8.19037597 15.482315,8.44550232 C15.4331702,8.66371327 15.9741791,9.19570502 15.9741791,9.19570502 C15.9741791,9.19570502 16.1045376,11.5911035 16.8429585,12.2646042 C17.5817958,12.938105 18.9174504,12.6948736 18.9174504,12.6948736 L19.1964927,15.1887131 C19.1964927,15.1887131 18.926613,16.6181589 23.8806546,14.0094715 L23.609109,12.2412245 C23.609109,12.2412245 26.2462668,7.07471093 24.0755678,4.54723741 C21.9052852,2.01935372 16.8292146,4.5304204 16.8292146,4.5304204",id:"Fill-34",fill:"#FFF"}),n.createElement("path",{d:"M18.841276,5.5197938 C18.0924432,5.64776714 17.338196,5.76958792 16.5835324,5.68222151 C15.4211339,5.5480956 14.5515216,5.2810743 14.0629894,3.99231711 C13.1754683,1.64942052 14.3828468,0.250737514 14.3828468,0.250737514 C14.3828468,0.250737514 15.0071518,1.06574723 17.5989132,0.495609584 C19.1199018,0.160910072 22.0481798,0.417266928 24.183478,2.66664453 C27.2362838,5.88361545 25.0293509,11.2273229 23.6091507,12.2412655 L23.2538924,10.1046849 C23.2538924,10.1046849 23.8490437,9.87129763 24.0222998,9.33233297 C24.1918076,8.8048531 23.5679191,7.34505462 22.6566586,8.1563728 C21.7766342,8.94020952 22.3372177,11.4779373 21.2364583,12.3872864 C20.135699,13.2962252 17.0999689,13.2921235 16.4006973,12.1510279 C15.6485326,10.9237963 16.0433566,9.90780284 16.0433566,9.90780284 C16.0433566,9.90780284 17.8346414,9.51814042 19.3189797,10.2543973 C20.7670842,10.9721965 21.6625184,8.96071807 21.3784784,7.77163243 C21.1277568,6.72282526 20.1032135,5.30404387 18.841276,5.5197938",id:"Fill-36",fill:"#3B3E4D"}),n.createElement("path",{d:"M20.961183,18.9681961 C22.6955209,16.6950306 27.7604342,17.1340365 26.9664724,21.781086 C26.1725105,26.4281355 19.5968064,33.4712 17.7423812,34.6540771 C15.8893416,35.8374058 3.75867565,34.9756534 1.97029846,34.802219 L2.02895649,31.9626816 L15.1909877,31.3095925 C15.1909877,31.3095925 19.084126,21.4283456 20.961183,18.9681961",id:"Fill-43",fill:"#F37878"}),n.createElement("path",{d:"M15.1909877,31.3095925 C15.1909877,31.3095925 19.084126,21.4283456 20.961183,18.9681961 M26.9664724,21.781086 C26.1725105,26.4281355 19.5968064,33.4712 17.7423812,34.6540771 C15.8893416,35.8374058 3.75867565,34.9756534 1.97029846,34.802219",id:"Fill-43",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))),n.createElement("g",{id:"Microscope",transform:"translate(235.569 289.818)"},n.createElement("path",{d:"M18.7214141,98.1589757 L27.5103085,98.1589757 C32.7568134,105.752299 41.5416826,110.73039 51.4934723,110.73039 C67.5630006,110.73039 80.5899271,97.7506293 80.5899271,81.7392826 C80.5899271,74.4458025 77.8868661,67.7813704 73.4244562,62.6862814 L73.4244562,51.5460728 C85.3038994,58.0661856 93.3524515,70.661726 93.3524515,85.1303003 C93.3524515,106.291867 76.1352753,123.446706 54.8968121,123.446706 C38.2493548,123.446706 24.0725672,112.906811 18.7214141,98.1589757 Z",id:"Combined-Shape",fill:"#FFF"}),n.createElement("rect",{id:"Rectangle",fill:"#FFF",x:"48.756",y:"115.255",width:"11.832",height:"20.933"}),n.createElement("g",{id:"Combined-Shape-2",transform:"translate(13 48)"},n.createElement("mask",{id:"mask-7",fill:"#fff"},n.createElement("use",{xlinkHref:"#path-6"})),n.createElement("use",{id:"Combined-Shape",fill:"url(#linearGradient-5)",xlinkHref:"#path-6"}),n.createElement("circle",{id:"Oval",fill:"#8FABF4",mask:"url(#mask-7)",cx:"59",cy:"7",r:"14"})),n.createElement("path",{d:"M68.9407352,60.0450769 L68.9407352,48.815669 C80.7802671,55.3357818 88.8017785,67.9313222 88.8017785,82.3998965 C88.8017785,103.561463 71.6424468,120.716303 50.4753383,120.716303 M15.0808757,97.1240807 L15.0808757,97.1240807 M25.4898376,97.1240807 C30.5355849,105.663304 39.8363985,111.391004 50.4753383,111.391004 C66.4908779,111.391004 79.474038,98.4112431 79.474038,82.3998965",id:"Combined-Shape",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{d:"M0.518722035,89.7717262 L35.103837,89.7717262",id:"Rectangle",stroke:"#3B3E4D",strokeWidth:"1.5",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{d:"M0.518722035,93.4122646 L35.103837,93.4122646",id:"Rectangle",stroke:"#E4E6F2",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("polyline",{id:"Rectangle",stroke:"#3B3E4D",strokeWidth:"1.5",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round",points:"35.9670574 138.00886 68.1689333 138.00886 77.7675693 138.00886 83.3409709 138.00886 83.3409709 144.379802 74.3616017 144.379802 47.7331274 144.379802 30.0840224 144.379802 23.2720871 144.379802"}),n.createElement("g",{id:"Group-2",transform:"rotate(-45 94.818 5.34)"},n.createElement("rect",{id:"Rectangle",stroke:"#3B3E4D",strokeWidth:"1.5",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round",y:"5.922",width:"96.041",height:"7.106"}),n.createElement("rect",{id:"Rectangle",stroke:"#3B3E4D",strokeWidth:"1.5",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round",x:"87.741",y:"2.369",width:"8.3",height:"14.212"}),n.createElement("path",{d:"M53.3483652,22.3447006 C53.1368783,27.7177952 48.7090794,32.0089156 43.2778645,32.0089156 C37.8466496,32.0089156 33.4188507,27.7177952 33.2073637,22.3447006 L15.0426441,22.3447006 C13.9380746,22.3447006 13.0426441,21.4492701 13.0426441,20.3447006 L13.0426441,2 C13.0426441,0.8954305 13.9380746,-1.84720821e-12 15.0426441,-1.84741111e-12 L70.1467549,-1.84741111e-12 C71.2513244,-1.8436898e-12 72.1467549,0.8954305 72.1467549,2 L72.1467549,20.3447006 C72.1467549,21.4492701 71.2513244,22.3447006 70.1467549,22.3447006 L53.3483652,22.3447006 Z",id:"Combined-Shape",fill:"#FFF"}),n.createElement("rect",{id:"Rectangle",fill:"#FFF",x:"10.312",width:"64.565",height:"18.704",rx:"2"}),n.createElement("rect",{id:"Rectangle",stroke:"#3B3E4D",strokeWidth:"1.5",fill:"url(#linearGradient-8)",strokeLinecap:"round",strokeLinejoin:"round",x:"13.043",width:"59.285",height:"18.949"}),n.createElement("rect",{id:"Rectangle",fill:"#FFF",x:"15.592",y:"2.547",width:"54.185",height:"4.517",rx:"1"}),n.createElement("ellipse",{id:"Oval",fill:"#FFF",cx:"43.278",cy:"19.541",rx:"10.078",ry:"10.067"}),n.createElement("path",{d:"M52.6436093,23.2665564 C53.1034261,22.1142813 53.3562713,20.8571999 53.3562713,19.5411324 C53.3562713,13.9814784 48.8440149,9.47448842 43.2778645,9.47448842 C37.7117141,9.47448842 33.1994577,13.9814784 33.1994577,19.5411324 C33.1994577,25.1007863 37.7117141,29.6077763 43.2778645,29.6077763 L43.2778645,29.6077763",id:"Oval",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",transform:"rotate(-110 43.278 19.541)"})),n.createElement("path",{d:"M56.4920001,122.536572 L56.4920001,134.368322",id:"Path-2",stroke:"#3B3E4D",strokeWidth:"1.5",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{d:"M48.3007887,120.812477 L48.3007887,134.758379",id:"Path-2",stroke:"#3B3E4D",strokeWidth:"1.5",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round"}))))))));var Dn=a("tBHB");const Rn=()=>{const e=n.useContext(K.a.Context).proofitOrderModal.promo.step2;return n.createElement(n.Fragment,null,n.createElement(x.H1,{className:Dn.stepTitle},e.title),n.createElement("ul",{className:Dn.step2Path},n.createElement("li",Object.assign({},Object(X.c)(Dn.step2PathLi,Dn.step2PathLi1)),n.createElement(Bn,{index:1}),n.createElement(x.Base,{className:Dn.step2LiDescription},e.li1),n.createElement("div",{className:Dn.pathFrom1To2},n.createElement(Pn.PathFrom1To2,null))),n.createElement("li",Object.assign({},Object(X.c)(Dn.step2PathLi,Dn.step2PathLi2)),n.createElement(Bn,{index:2,position:Dn.right}),n.createElement(x.Base,{className:Dn.step2LiDescription},e.li2),n.createElement("div",{className:Dn.pathFrom2To3},n.createElement(Pn.PathFrom2To3,null))),n.createElement("li",Object.assign({},Object(X.c)(Dn.step2PathLi,Dn.step2PathLi3)),n.createElement(Bn,{index:3}),n.createElement(x.Base,{className:Dn.step2LiDescription},e.li3))))},Bn=({index:e,position:t})=>n.createElement("div",Object.assign({},Object(X.c)(Dn.dots,t||Dn.left)),n.createElement(x.Base,{className:Dn.dotIndex},e),n.createElement(Pn.Dots,null)),Hn=()=>{const e=n.useContext(K.a.Context).proofitOrderModal.promo.step1;return n.createElement(n.Fragment,null,n.createElement(x.H1,{className:Dn.stepTitle},e.title),n.createElement(x.Base,{className:Dn.description},e.description),n.createElement("div",{className:Dn.step1Illustration},n.createElement(Pn.Illustration,null)))};var Wn=a("b+P9"),$n=a("m7xn"),Vn=a("R+r4"),Un=a("mvgk"),Gn=a("aVVF");const zn=()=>n.createElement("span",{className:Gn.iconArrow},"▼"),qn=()=>n.useContext(K.a.Context).proofitOrderModal.promo.step4,Yn=({title:e})=>n.createElement(x.Base,{className:Gn.userInputTitle},e,":"),Xn=({name:e,selected:t,items:a,onSelect:r,selectedLabel:s=i.identity})=>{const o=qn(),{labelTitle:l,active:c,iconSelected:d}=((e,t,a)=>Object(Y.pipe)(t,Wn.fold(()=>({labelTitle:e.choose,active:!1,iconSelected:e=>void 0}),e=>({labelTitle:a(e),active:!0,iconSelected:t=>t===e?n.createElement(oe.d.DocumentSettings.Selected,null):void 0}))))(o,t,s);return n.createElement(se.a,{name:`proofit-user-inputs-dropdown-${e}`,label:n.createElement(re.a.White,{active:c,name:`proofit-user-inputs-dropdown-button-${e}`,className:Gn.dropdown},l,n.createElement(zn,null)),customPosition:{top:"80%",left:"0"}},n.createElement("div",{className:Gn.dropdownOptionsContainer},a.map(({value:t,content:a})=>n.createElement(re.a.Flat,{key:`proofit-user-inputs-dropdown-${e}-item-${t}`,name:`proofit-user-inputs-dropdown-${e}-item-${t}`,className:Gn.dropdownOption,onClick:()=>r(Wn.some(t))},n.createElement(x.Base,null,a),d(t)))))},Kn=({selected:e,onSelect:t})=>{const a=qn();return n.createElement("div",{className:Gn.userInputWrapper},n.createElement("div",{className:Gn.userInputContainer},n.createElement(Yn,{title:a.nativeLanguage}),n.createElement(Xn,{name:"language",selected:e,items:Object.keys($n.c.PrimaryLanguage).map(e=>({value:e,content:n.createElement("span",{className:Gn.languageDropdownOption},e)})),onSelect:t})),n.createElement("div",Object.assign({},Object(X.c)(Gn.nativeLanguageDescriptionWrapper)),a.nativeLanguageDescription))},Zn=({selected:e,onSelect:t})=>{const a=qn(),i=e=>n.createElement("span",null,(e=>{switch(e){case Vn.a.Dialect.American:return n.createElement(oe.d.DocumentSettings.USFlag,null);case Vn.a.Dialect.British:return n.createElement(oe.d.DocumentSettings.GBFlag,null);case Vn.a.Dialect.Canadian:return n.createElement(oe.d.DocumentSettings.CanadianFlag,null);case Vn.a.Dialect.Australian:return n.createElement(oe.d.DocumentSettings.AustralianFlag,null);default:return n.createElement(oe.d.DocumentSettings.USFlag,null)}})(e),e," English");return n.createElement("div",{className:Gn.userInputWrapper},n.createElement("div",{className:Gn.userInputContainer},n.createElement(Yn,{title:a.dialect}),n.createElement("div",{className:Gn.dialectDropdown},n.createElement(Xn,{name:"dialect",selected:e,selectedLabel:i,items:Object.keys(Vn.a.Dialect).map(e=>({value:e,content:i(e)})),onSelect:t}))))},Qn=({left:e,right:t,selected:a,onSelect:i})=>{const{leftSelected:r,rightSelected:s}=((e,t,a)=>Wn.fold(()=>({leftSelected:!1,rightSelected:!1}),a=>({leftSelected:e===a,rightSelected:t===a}))(a))(e.value,t.value,a);return n.createElement(re.a.Group,{sticky:!0,className:Gn.splitButton},n.createElement(re.a.White,{name:`proofit-user-inputs-split-button-${e.value}`,key:e.value,active:r,className:Gn.splitButtonOption,onClick:()=>i(r?Wn.none:Wn.some(e.value))},e.title),n.createElement(re.a.White,{name:`proofit-user-inputs-split-button-${t.value}`,key:t.value,active:s,className:Gn.splitButtonOption,onClick:()=>i(s?Wn.none:Wn.some(t.value))},t.title))},Jn=({selected:e,onSelect:t})=>{const a=qn();return n.createElement("div",{className:Gn.userInputWrapper},n.createElement("div",{className:Gn.userInputContainer},n.createElement(Yn,{title:a.quotationType}),n.createElement(Qn,{left:{title:a.quotationTypeSingle,value:Vn.a.QuotationType.Single},right:{title:a.quotationTypeDouble,value:Vn.a.QuotationType.Double},selected:e,onSelect:t})))},ei=({selected:e,onSelect:t})=>{const a=qn();return n.createElement("div",{className:Gn.userInputWrapper},n.createElement("div",{className:Gn.userInputContainer},n.createElement(Yn,{title:a.spaceType}),n.createElement(Qn,{left:{title:a.spaceTypeSingle,value:Vn.a.SpaceType.Single},right:{title:a.spaceTypeDouble,value:Vn.a.SpaceType.Double},selected:e,onSelect:t})))},ti=({proofit:e})=>{g.a.useSubscriptionTo(e.requestPlans);const t=qn();return n.createElement(n.Fragment,null,n.createElement(x.H3,{className:Gn.title},t.title),n.createElement(s.a.div,{className:Gn.userInputsWrapper},e.viewState.pipe(f.a.map(t=>t.fold(()=>n.createElement(Un.a,{variation:"blue",className:Gn.loader}),({userInputs:{nativeLanguage:t,dialect:a,quotationType:i,spaceType:r}})=>n.createElement(n.Fragment,null,n.createElement(Kn,{selected:t,onSelect:t=>e.selectUserInput("nativeLanguage",t)}),n.createElement(Zn,{selected:a,onSelect:t=>e.selectUserInput("dialect",t)}),n.createElement(Jn,{selected:i,onSelect:t=>e.selectUserInput("quotationType",t)}),n.createElement(ei,{selected:r,onSelect:t=>e.selectUserInput("spaceType",t)})))))))};var ai,ni=a("1EBK"),ii=a("n6BF");!function(e){e.Vertical="Vertical",e.Horizontal="Horizontal"}(ai||(ai={}));class ri extends Qa.a{}class si extends n.Component{_mapStateToClass(e,t){return void 0===e?{prev:{start:t.step1Hide,end:t.stepShow},next:{start:"",end:t.stepShow}}:e<this.props.state.get()?{prev:{start:t.stepShow,end:t.step1Hide},next:{start:t.step2Hide,end:t.stepShow}}:{prev:{start:t.stepShow,end:t.step2Hide},next:{start:t.step1Hide,end:t.stepShow}}}render(){return n.createElement(ri,{state:this.props.state,stateToClassMapper:e=>this._mapStateToClass(e,this.props.direction===ai.Vertical?ii:ni)},e=>{return this.props.steps[e.state]?n.createElement(s.a.div,{key:"step"+(e.state+1),className:e.view,onTransitionEnd:t=>{"prev"===e.type&&"top"===t.propertyName&&e.done()}},this.props.steps[e.state]):Object(le.d)(e.state)})}}const oi=({proofit:e})=>{const t=n.useContext(K.a.Context),{gnarSpec:a,pageId:i,docId:r}=n.useContext(v.a.Context);return n.createElement(n.Fragment,null,n.createElement("div",{className:Dn.stepWrapper},n.createElement(s.a.Fragment,null,e.leftStep.view(a=>a>0&&n.createElement(re.a,{name:"proofit-order-promo-to-step-1",className:Dn.backButton,onClick:()=>e.changeLeftStep(Tn.c.Step1)},"←",n.createElement("span",{className:Dn.backButtonText},t.back)))),n.createElement(si,{state:e.leftStep,direction:ai.Horizontal,steps:[n.createElement(Hn,{key:"PromoStep1"}),n.createElement(Rn,{key:"PromoStep2"}),n.createElement(Nn,{key:"PromoStep3"}),n.createElement(ti,{key:"PromoStep4",proofit:e})]})),n.createElement("div",{className:Dn.nav},n.createElement(re.a,{name:"proofit-order-promo-to-step-2",className:Dn.navButton,disabled:e.leftStep.view(e=>e===Tn.c.Step2),onClick:()=>{a.professionalProofreadingLearningButtonClick(r,i),e.changeLeftStep(Tn.c.Step2)}},t.proofitOrderModal.promo.stepsNavigation.howItWorks),n.createElement("div",{className:Dn.delimiter}),n.createElement(re.a,{name:"proofit-order-promo-to-step-3",className:Dn.navButton,disabled:e.leftStep.view(e=>e===Tn.c.Step3),onClick:()=>{a.professionalProofreadingEditingOptionsButtonClick(r,i),e.changeLeftStep(Tn.c.Step3)}},t.proofitOrderModal.promo.stepsNavigation.editingOptions),n.createElement("div",{className:Dn.delimiter}),n.createElement(re.a,{name:"proofit-order-promo-to-step-4",className:Dn.navButton,disabled:e.leftStep.view(e=>e===Tn.c.Step4),onClick:()=>{a.professionalProofreadingProvideDetailsButtonClick(r,i),e.changeLeftStep(Tn.c.Step4)}},t.proofitOrderModal.promo.stepsNavigation.provideDetails)))};var li,ci,di=a("QuAz"),pi=a("dP+m");(ci=li||(li={})).SlowPlane=()=>n.createElement("svg",{width:"48",height:"46",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M2.99 37.27l31.972 8.01a3 3 0 0 0 3.63-2.144l8.463-32.043a3 3 0 0 0-4.433-3.345L2.187 31.78a3 3 0 0 0 .803 5.49z",fill:"#C5F7EB"}),n.createElement("path",{d:"M3.314 26.08l9.196 2.235a1 1 0 0 1 .634.479l4.621 8.153a1 1 0 0 0 1.83-.21l1.56-5.308a1 1 0 0 1 1.21-.686l11.6 3.007a1 1 0 0 0 1.218-.712l8.12-30.675a1 1 0 0 0-1.477-1.116l-38.786 23a1 1 0 0 0 .274 1.833z",stroke:"#353847",strokeWidth:"1.5",fill:"#FFF",strokeLinejoin:"round"}),n.createElement("path",{d:"M12.929 28.5L42.25 1.803a.5.5 0 0 1 .733.675L21.429 30.5l-1.838 6.247a1 1 0 0 1-1.827.214L12.929 28.5z",stroke:"#353847",strokeWidth:"1.5",fill:"#F0F2FC",strokeLinejoin:"round"}))),ci.MiddlePlane=()=>n.createElement("svg",{width:"59",height:"34",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M6.865 15.93a13.498 13.498 0 0 1-.19-2.153c0-7.49 6.153-13.563 13.74-13.563 5.966 0 11.028 3.762 12.928 9.005 1.41-.773 3.01-1.255 4.74-1.255 4.822 0 8.813 3.444 9.638 7.97 3.473.802 6.065 3.86 6.065 7.53 0 4.28-3.516 7.75-7.852 7.75H8.638c-4.337 0-7.852-3.47-7.852-7.75 0-3.674 2.599-6.737 6.079-7.534z",fill:"#CDDBFF",fillRule:"nonzero"}),n.createElement("path",{d:"M45.341 21.214l1.34 8.994a1 1 0 0 1-.518 1.03l-3.053 1.626a1 1 0 0 1-1.181-.18l-8.143-8.239",stroke:"#353847",strokeWidth:"1.5",fill:"#F0F2FC",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{d:"M40.616 10.086A20.928 20.928 0 0 1 52.99 8.548l3.235.584c1.036.187 1.72 1.158 1.528 2.168-.06.314-.2.607-.41.852l-1.49 1.745a18.883 18.883 0 0 1-8.918 5.794l-22.534 6.786a38.953 38.953 0 0 1-9.334 1.607l-2.64.129c-.686.033-1.271-.483-1.306-1.153a1.19 1.19 0 0 1 .13-.604l.707-1.378a.91.91 0 0 0-.06-.932l-3.952-4.6a.916.916 0 0 1 .265-1.29l1.607-1.045a.975.975 0 0 1 .956-.058l7.632 2.79c.26.128-2.172 1.516-1.908 1.396l24.118-11.253z",stroke:"#353847",strokeWidth:"1.5",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{d:"M29.343 18.964L15.347 10.47a1 1 0 0 1 .077-1.752l2.732-1.342a1 1 0 0 1 .68-.074l22.776 5.595a1 1 0 0 1 .107 1.91l-11.511 4.242a1 1 0 0 1-.865-.084z",stroke:"#353847",strokeWidth:"1.5",fill:"#F0F2FC",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{d:"M52.786 9.214a17.195 17.195 0 0 1-3.796 1.927l-.204.073",stroke:"#353847",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))),ci.QuickPlane=()=>n.createElement("svg",{width:"42",height:"55",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M21 29c6.684 4.124 8.984 13.275 5.136 20.439a14.624 14.624 0 0 1-4.209 4.88L21 55l-.927-.681c-6.362-4.673-7.986-13.989-3.626-20.808A14.392 14.392 0 0 1 21 29zM35 27c4.785 3.027 6.422 9.726 3.654 14.961a10.64 10.64 0 0 1-2.989 3.538L35 46l-.665-.5c-4.553-3.43-5.704-10.248-2.569-15.23A10.421 10.421 0 0 1 35 27zM7 27c4.785 3.027 6.422 9.726 3.654 14.961A10.64 10.64 0 0 1 7.665 45.5L7 46l-.665-.5C1.782 42.07.631 35.251 3.766 30.27A10.421 10.421 0 0 1 7 27z",fill:"#FFC2C2"}),n.createElement("path",{d:"M2.337 27.657l16-14.28a4 4 0 0 1 5.326 0l16 14.28A4 4 0 0 1 41 30.641V35H1v-4.359a4 4 0 0 1 1.337-2.984z",stroke:"#353847",strokeWidth:"1.5",fill:"#F0F2FC",strokeLinejoin:"round"}),n.createElement("path",{d:"M15.963 4.877L18 2.5a3.951 3.951 0 0 1 6 0l2.037 2.377A4 4 0 0 1 27 7.48V39H15V7.48a4 4 0 0 1 .963-2.603z",stroke:"#353847",strokeWidth:"1.5",fill:"#FFF",strokeLinejoin:"round"}),n.createElement("path",{d:"M18 7.414l.249-.366 1.02-1.5c.975-1.435 2.487-1.435 3.462 0l1.027 1.51.242.356",stroke:"#353847",strokeWidth:"1.5",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{d:"M21 21v15",stroke:"#353847",strokeWidth:"1.5",strokeLinecap:"round"})));var ui=a("iMP5");const mi=({proofit:e})=>{g.a.useSubscriptionTo(e.requestPlans);const t=n.useContext(K.a.Context),{gnarSpec:a,pageId:i,docId:o}=n.useContext(v.a.Context);return n.createElement("div",{className:ui.content},n.createElement(s.a.div,{className:ui.proofitDetailsWrapper},e.viewStateAndSubscription.pipe(f.a.map(([l,c])=>l.fold(()=>n.createElement(Un.a,{variation:"blue",className:ui.loader}),l=>Ot.c.isSendingState(l.proofitState)?n.createElement(Un.a,{variation:"blue",className:ui.loader}):n.createElement(n.Fragment,null,n.createElement("div",{className:ui.tierTitleContainer},n.createElement(x.Base,{className:ui.tierTitle},t.proofitOrderModal.order.tierTitle),n.createElement(re.a,{name:"helpMeChoose",className:ui.helpMeChooseBtn,disabled:e.leftStep.view(e=>e===Tn.c.Step3),onClick:()=>{a.professionalProofreadingHelpMeChooseButtonClick(o,i),e.changeLeftStep(Tn.c.Step3)}},n.createElement("span",{className:ui.helpMeChoose},t.proofitOrderModal.order.helpMeChoose))),n.createElement(re.a.Group,{sticky:!0,className:ui.claritySplitButton},n.createElement(re.a.White,{name:"proofit-order-split-button-tier-base",key:"proofit-order-split-button-tier-base",active:l.selectedPlanTier===Vn.a.PlanTier.Base,className:ui.claritySplitButtonBase,onClick:()=>{a.professionalProofreadingSelectPlanTierButtonClick(o,i,Vn.a.PlanTier.Base),e.selectPlanTier(Vn.a.PlanTier.Base)}},t.proofitOrderModal.order.tierBase),n.createElement(re.a.White,{name:"proofit-order-split-button-tier-clarity",key:"proofit-order-split-button-tier-clarity",active:l.selectedPlanTier===Vn.a.PlanTier.Clarity,className:ui.claritySplitButtonClarity,onClick:()=>{a.professionalProofreadingSelectPlanTierButtonClick(o,i,Vn.a.PlanTier.Clarity),e.selectPlanTier(Vn.a.PlanTier.Clarity)}},t.proofitOrderModal.order.tierClarity)),n.createElement(x.Base,{className:ui.plansTitle},t.proofitOrderModal.order.title),n.createElement(s.a.div,{className:ui.plansContainer,"data-name":"proofit-order"},l.selectedPlans.map((t,r)=>n.createElement(hi,{key:`${t.details.tier}-${t.details.turnaround}`,proofitState:l.proofitState,plan:t,index:r,onPlanSelect:()=>(a.professionalProofreadingSelectButtonClick(o,i,Vn.a.PlanType.getPlanName(t.details.turnaround),t.details.tier),e.changeLeftStep(Tn.c.Step4),t.select()),onPlanUnselect:()=>(a.professionalProofreadingUnselectButtonClick(o,i,Vn.a.PlanType.getPlanName(t.details.turnaround),t.details.tier),t.unselect())}))),n.createElement("div",{className:ui.summary},l.selectedPlan.fold(()=>n.createElement(x.Lawyer,{className:ui.paymentWarning},t.proofitOrderModal.order.warningConfirm),e=>n.createElement(gi,{key:"PaymentWarning"+e.details.turnaround,price:l.selectedPlan.get().details.price,subscription:c.value})),n.createElement("div",{className:ui.summaryButtons},l.selectedPlan.fold(()=>n.createElement(re.a.Primary,{key:"place-order",name:"place-order",className:ui.placeOrderButton,title:t.proofitOrderModal.order.chooseOptions,disabled:!0},t.proofitOrderModal.order.placeOrder),s=>n.createElement(re.a.Primary,{key:"place-order",name:"place-order",className:ui.placeOrderButton,onClick:kt.d.callOnce(()=>(a.professionalProofreadingPlaceOrderButtonClick(o,i,Vn.a.PlanType.getPlanName(s.details.turnaround),s.details.tier,e.requirePaymentCheck.get()),e.requirePaymentCheck.get()?e.changeRightStep(Tn.d.Step2):s.placeOrder(r.e))),active:!0,disabled:Ot.c.isSendingState(l.proofitState)},t.proofitOrderModal.order.placeOrder,l.proofitState.fold(()=>n.createElement(Un.a,{className:ui.planLoading,variation:"white",size:18}),()=>null))),n.createElement(re.a.Ghost,{key:"close",name:"close",className:ui.closeButton,onClick:()=>{a.professionalProofreadingCloseButtonClick(o,i),e.closeModal()}},t.actions.close)))))))))},hi=({plan:e,proofitState:t,index:a,onPlanSelect:i,onPlanUnselect:r})=>{const o=e.details,{label:l}=o,c=n.useContext(K.a.Context);return n.createElement(s.a.div,{className:e.details.enabled?ui.planWrapper:ui.planWrapperDisabled,"data-name":l.replace(" ","")},n.createElement("div",{className:ui.iconContainer},(e=>{return[n.createElement(li.SlowPlane,null),n.createElement(li.MiddlePlane,null),n.createElement(li.QuickPlane,null)][e]||Object(le.d)(e)})(a)),n.createElement(s.a.div,{className:ui.plans},n.createElement(s.a.div,{className:ui.planContainer},n.createElement("div",null,e.recommended&&n.createElement(x.Button,{className:ui.recommended},c.proofitOrderModal.order.recommended),n.createElement(x.Base,{className:ui.planTitle},l),n.createElement("div",{className:ui.priceWrapper},n.createElement(x.Base,{className:ui.price,"data-name":"turnaround-price"},"$",M.f.formatPrice(o.price)),n.createElement(x.Small,null,n.createElement("span",{"data-name":"price-per-word"},"$",o.perWord)," ",c.proofitOrderModal.order.perWord))),e.active.view(a=>a?n.createElement(re.a.Primary,{key:"selected-order",name:"selected-order",className:ui.selectPlanButton,onClick:r,active:!0,disabled:Ot.c.isSendingState(t)},c.statuses.selected):n.createElement(re.a.White,{key:"select-order",name:"select-order",className:ui.selectPlanButton,onClick:i,disabled:!e.details.enabled||Ot.c.isSendingState(t)},e.details.enabled?c.actions.select:c.statuses.unavailable)))))},gi=({price:e,subscription:t})=>{const a=n.useContext(Oe.a.Context),i=n.useContext(K.a.Context).proofitOrderModal.order.paymentWarnings;switch(t.paymentMethod){case"payPal":return n.createElement(x.Small,{className:ui.paymentWarning},i.payPal(e));case"creditCard":return t.creditCard||y.Monitoring.Logging.getLogger("ProofitView").warn("Missing credit card"),n.createElement(x.Small,{className:ui.paymentWarning},i.creditCard(e)," ",n.createElement(pi.a,{href:a.account.subscription},i.updateBilling));default:return y.Monitoring.Logging.getLogger("ProofitView").warn("Unknown payment method: "+t.paymentMethod),n.createElement(n.Fragment,null)}};var fi=a("DDUo");const bi=kt.d.lazy(()=>Promise.all([a.e(0),a.e(16)]).then(a.bind(null,"cSoA"))),yi=({proofit:e})=>{const t=n.createElement("div",{className:fi.stepWrapper},n.createElement(mi,{key:"OrderStep1",proofit:e})),a=n.createElement("div",{className:fi.stepWrapper},n.createElement(n.Suspense,{fallback:n.createElement(Un.a,{variation:"blue",className:di.spinner})},n.createElement(bi,{key:"OrderStep2",proofit:e})));return n.createElement(si,{state:e.rightStep,direction:ai.Vertical,steps:[t,a]})};var Ci=a("gKWT");const vi=({proofit:e})=>n.createElement("div",{className:Ci.wrapper},n.createElement("div",{className:Ci.row},n.createElement("div",{className:Ci.leftCol},n.createElement(oi,{proofit:e})),n.createElement("div",{className:Ci.col},n.createElement(yi,{proofit:e}))));var Si=a("jR3X");class Ei extends n.Component{constructor(){super(...arguments),this._modalClassName=(e,t)=>{switch(e){case Tn.a.Order:return t.proofitOrderModal;case Tn.a.Success:return t.proofitOrderSuccess;default:return Object(le.d)(e)}}}render(){const{proofit:e}=this.props;return n.createElement(v.a.Context.Consumer,null,t=>n.createElement(s.a.Fragment,null,e.isVisibleModal.view(a=>a?n.createElement(ea.b,{positionType:"fixed",visible:e.isVisibleModal,animate:!0,smallResolution:"resize",key:"overlay"},n.createElement(ea.a,{close:()=>{t.gnarSpec.professionalProofreadingCloseButtonClick(t.docId,t.pageId),e.closeModal()},className:Si.proofitModal,key:"modal"},n.createElement(s.a.div,Object.assign({name:"modalBody"},Object(X.c)(Si.proofitModalBody,e.modal.view(e=>e.fold(()=>"",e=>this._modalClassName(e.type,Si))))),e.modal.view(t=>t.map(t=>n.createElement(wi,{key:t.type,proofit:e,modal:t})).orNull())))):null)))}componentWillUnmount(){this.props.proofit.clearModals()}}const wi=({proofit:e,modal:t})=>{switch(t.type){case Tn.a.Order:return n.createElement(vi,{proofit:e,key:"order"});case Tn.a.Success:return n.createElement(xn.a,{payload:t.payload,close:()=>e.closeModal(),key:"success"});default:return Object(le.d)(t)}};var ki=a("+w1e"),_i=a("NbEL"),Oi=a("6qID"),Ai=a("Ffhm");const Ti=({draftAIEditorVM:e,lensPreviewVM:t,onTransitionEnd:a,transition:i})=>{const r=t.getLens(It.a.SpecialId.AllAlerts).view("count"),o=new f.a.Subject;return g.a.useSubscriptionTo(o.pipe(f.a.filter(e=>e.type===ki.b.Type.switchToClosestByViewport),f.a.mapTo({type:Oi.a.Type.Collapse}),f.a.tap(e.actions))),n.createElement(Ja.b.FixedContent,{key:It.a.SpecialId.DraftAI},n.createElement(s.a.div,Object.assign({},Object(X.c)(xi.lensContainer,i.pipe(f.a.map(({base:e})=>e))),{onTransitionEnd:a}),n.createElement(s.a.div,Object.assign({},Object(X.c)(xi.cardWrapper,i.pipe(f.a.map(({content:e})=>e)))),n.createElement(Ai.b,null,n.createElement(Ai.a,Object.assign({},e))))),n.createElement("div",{className:xi.seeAlerts},n.createElement(Ja.b.SeeAlerts,{cardsViewportState:r.view(e=>e>0?_i.a.below:_i.a.hidden),actionEvents:o,cardsAmount:r})))},xi=h.a.prefixedStylesheet("draft_ai_lens",{lensContainer:[{width:h.a.percent(100),paddingBottom:h.a.rem(3)}],cardWrapper:[{paddingRight:h.a.rem(2),paddingTop:h.a.rem(4.5)}],seeAlerts:[{position:"relative",marginTop:h.a.rem(-3)}]});var Ii=a("pKiV"),Mi=a("3F3p"),ji=a("+5S2"),Li=a("xdtP"),Ni=a("dCuA"),Pi=a("2U56"),Fi=a("Fq1y");const Di=()=>{const e=n.useContext(K.a.Context);return n.createElement("div",{className:Fi.content},n.createElement(x.Base,{className:Fi.originality100Text},e.plagiarism.originalText),n.createElement(Bi,{className:Fi.illusration}))},Ri=({variation:e="violet"})=>n.createElement("div",{className:Fi.content},n.createElement(Un.a,{variation:e,className:Fi.loader}),n.createElement(x.Base,{className:Fi.loadingText},"Please wait.",n.createElement("br",null),"We’re checking your text against billions of web pages.",n.createElement("br",null),"It'll just take a moment.")),Bi=({className:e})=>n.createElement("svg",Object.assign({},Object(X.c)(e),{width:"334",height:"375",viewBox:"0 0 334 375",xmlns:"http://www.w3.org/2000/svg"}),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M160.3 199.297C145.842 196.217 135 183.375 135 168c0-17.673 14.327-32 32-32 17.673 0 32 14.327 32 32 0 14.726-9.947 27.128-23.488 30.856 1.032-4.938 2.81-9.608 5.193-13.675.144-.214.215-.357.36-.572 1.504-2.576 2.15-5.438 2.006-8.372-.214-4.15-2.15-7.943-5.088-10.52l-1.362-1.144c-2.222-1.574-4.874-2.576-7.74-2.72-4.302-.285-8.315 1.146-11.47 4.08-3.08 2.862-4.8 6.94-4.8 11.09 0 2.362.5 4.652 1.576 6.727.358.787.716 1.43 1.218 2.075 2.323 4.075 3.954 8.634 4.895 13.472z",fill:"#F7EAF7"}),n.createElement("path",{d:"M176.62 164.617c-2.222-1.577-4.874-2.58-7.74-2.723-4.302-.287-8.315 1.146-11.47 4.085-3.08 2.866-4.8 6.952-4.8 11.11 0 2.364.5 4.658 1.576 6.736.358.79.716 1.434 1.218 2.08 2.365 4.156 4.014 8.815 4.946 13.76.286 1.362.5 2.796.645 4.158.358 1.075 1.075 1.72 2.007 1.935.215 1.36 1.29 2.507 2.795 3.01l1.147.286c.286.07.645.07.93.07.647 0 1.292-.07 1.865-.285 0 0 1.002-.358 1.002-.43 1.076-.644 1.792-1.576 1.936-2.65 1.003-.288 1.792-1.148 2.078-2.223.072-.86.215-1.65.36-2.437.93-5.734 2.866-11.18 5.59-15.84.143-.215.214-.36.358-.574 1.505-2.58 2.15-5.447 2.007-8.386-.214-4.157-2.15-7.956-5.088-10.536l-1.362-1.147zm-8.745 19.71c.932.718 2.294 1.506 3.728 1.864-1.076 3.872-1.936 9.463-2.222 11.254h-3.01c-.286-1.79-1.147-7.454-2.222-11.253 1.434-.357 2.796-1.074 3.727-1.862zm-1.29-3.08c0-.073-.143-1.506 1.075-1.72h.36c1.217.214 1.074 1.647 1.074 1.72-.072.716-.79 1.432-1.29 1.79-.43-.43-1.147-1.074-1.22-1.79zm-1.003 17.344c.143.073.215.145.358.073.072 0 .144-.072.215-.072h3.297c.072.073.144.073.215.073h.072c.142 0 .214-.072.286-.072h4.3c-.143.79-.287 1.506-.43 2.295 0 .072 0 .143-.072.287h-12.04c-.073-.574-.144-1.147-.288-1.65-.07-.286-.143-.572-.215-.86l4.302-.07zm2.293 9.462c-1.79 0-3.368-.93-3.727-2.222h7.383c-.286 1.29-1.863 2.222-3.655 2.222zm3.943-3.297h-7.956c-.79 0-1.506-.5-1.792-1.147-.072-.43-.144-.93-.144-1.36h11.898c-.07.357-.07.715-.143 1.074-.214.86-.93 1.433-1.862 1.433zm10.106-28.455c.143 2.724-.502 5.376-1.792 7.67v.07c-.143.216-.215.43-.36.646-2.292 3.87-3.94 8.243-5.087 12.83h-4.23c.287-1.935 1.148-7.382 2.223-11.11.573.072 1.146.072 1.648-.07 1.22-.36 1.72-1.578 1.65-2.58-.073-.933-.646-1.578-1.435-1.722-.5-.07-1.432.144-1.934 1.29-.215.502-.43 1.147-.645 1.864-1.146-.287-2.364-.932-3.153-1.505.574-.502 1.362-1.29 1.434-2.365.072-1.22-.5-2.652-2.006-2.867H167.59c-1.506.287-2.08 1.72-2.008 2.868.072 1.075.86 1.863 1.433 2.365-.788.573-2.007 1.218-3.153 1.505-.215-.717-.43-1.362-.645-1.864-.502-1.146-1.434-1.36-1.936-1.29-.787.072-1.36.79-1.432 1.72-.072 1.004.43 2.222 1.648 2.58.502.144 1.076.144 1.65.072 1.002 3.656 1.934 9.103 2.22 11.11h-4.228c-1.003-4.372-2.58-8.458-4.66-12.185-.357-.644-.787-1.29-1.146-1.934 0 0 0-.072-.07-.072-.933-1.935-1.435-4.085-1.435-6.235 0-3.872 1.65-7.67 4.516-10.322 2.867-2.724 6.665-4.014 10.608-3.8 2.653.216 5.16 1.076 7.24 2.58.07.073.143.144.215.144 3.082 2.366 5.304 6.236 5.52 10.608zm-8.96 9.03c.215-.644.43-1.217.574-1.647.286-.717.788-.645.788-.645.43.07.502.573.502.717.072.573-.215 1.29-.86 1.433-.287.143-.645.215-1.004.143zm-10.177 0c-.36 0-.717 0-1.004-.07-.645-.215-.932-.86-.86-1.434 0-.143.072-.645.502-.717.143 0 .5.07.788.645.143.43.358.93.574 1.576z",fill:"#8189A9",fillRule:"nonzero"}),n.createElement("path",{d:"M167.804 157.88c-.287 0-.502-.287-.574-.574v-8.457c0-.36.287-.575.574-.575.358 0 .573.287.573.574v8.456c0 .36-.287.574-.573.574zm-10.75 2.58l-4.302-7.31c-.143-.216-.072-.574.215-.717.215-.144.573-.072.717.215l4.3 7.31c.144.215.072.574-.215.717-.072.072-.216.072-.287.072-.144 0-.36-.144-.43-.287zm-14.55 3.44c-.217-.143-.288-.43-.145-.716.142-.287.43-.36.716-.215l7.382 4.156c.287.143.36.43.215.717-.143.215-.286.286-.5.286-.145 0-.216 0-.288-.072l-7.383-4.157zm-3.442 14.48c-.287 0-.573-.288-.573-.503-.073-.358.214-.573.5-.573l8.458-.072c.358 0 .573.215.573.502.073.358-.214.573-.5.573l-8.458.072zm10.966 9.03c.215-.143.574-.072.79.215.142.215.07.573-.216.717l-7.31 4.23c-.073.07-.216.07-.288.07-.215 0-.43-.143-.5-.286-.145-.215-.073-.574.214-.717l7.31-4.23zm12.472-29.458l-1.505-4.874c-.072-.287.07-.574.358-.645.287-.072.573.07.645.358l1.505 4.875c.072.287-.07.573-.358.645h-.143c-.215 0-.43-.143-.502-.358zm-9.103 5.303l-3.727-3.44c-.215-.215-.215-.573 0-.788.215-.215.573-.215.788 0l3.728 3.44c.215.215.215.573 0 .788-.144.072-.287.144-.43.144-.144 0-.287-.073-.36-.145zm-4.66 8.816c0 .217-.214.432-.5.432h-.144l-4.945-1.076c-.287-.07-.502-.358-.43-.645.07-.285.358-.5.645-.43l4.945 1.076c.287.072.502.36.43.646zm-5.733 11.47l4.874-1.577c.287-.072.574.07.645.358.072.288-.07.574-.358.646l-4.874 1.577h-.142c-.215 0-.43-.143-.502-.358-.072-.287.072-.574.358-.646zm9.748 7.884c.143-.215.502-.215.788 0 .287.215.287.573.072.788l-3.44 3.727c-.144.07-.287.143-.43.143-.144 0-.287-.072-.36-.144-.285-.216-.285-.574-.07-.79l3.44-3.726zm40.063-27.523l-7.382 4.158c-.072.07-.143.07-.287.07-.215 0-.358-.07-.502-.285-.143-.287-.07-.574.216-.717l7.382-4.157c.287-.145.573-.073.717.214.142.286.07.573-.145.717zm3.372 14.48l-8.458-.073c-.287 0-.574-.215-.502-.573 0-.287.215-.502.573-.502l8.46.072c.285 0 .572.215.5.573 0 .215-.286.502-.573.502zm-10.608 9.03l7.31 4.23c.287.142.358.5.215.716-.072.143-.287.286-.502.286-.07 0-.215 0-.286-.07l-7.31-4.23c-.288-.144-.36-.502-.216-.717.216-.287.574-.358.79-.215zm.86-15.34c-.072-.285.143-.572.43-.644l4.945-1.075c.287-.07.573.145.645.43.072.288-.143.575-.43.646l-4.946 1.076h-.143c-.286 0-.5-.215-.5-.43zm6.163 11.47c.287.07.43.358.36.645-.073.215-.288.358-.503.358h-.143l-4.874-1.577c-.287-.072-.43-.358-.36-.645.073-.286.36-.43.646-.357l4.873 1.577zm-9.46 7.884l3.44 3.727c.215.216.215.574-.072.79-.07.07-.214.143-.357.143-.144 0-.287-.072-.43-.144l-3.44-3.728c-.216-.215-.216-.573.07-.788.288-.215.646-.215.79 0zm-5.233-30.82c-.287-.144-.358-.43-.215-.717l4.3-7.31c.144-.288.43-.36.717-.216s.36.43.215.718l-4.3 7.31c-.072.215-.215.287-.43.287-.072 0-.215 0-.287-.072zm-5.447-2.294c-.287-.072-.43-.358-.36-.645l1.506-4.874c.07-.286.358-.43.645-.357.286.07.43.358.358.645l-1.505 4.874c-.072.215-.287.358-.502.358h-.143zm9.102 4.945c-.215-.215-.215-.573 0-.788l3.727-3.44c.216-.215.574-.215.79 0 .214.215.214.573 0 .788l-3.728 3.44c-.072.072-.215.144-.36.144-.142 0-.357 0-.43-.145z",fillOpacity:".5",fill:"#C770C8",fillRule:"nonzero"}),n.createElement("g",{fillRule:"nonzero"},n.createElement("path",{d:"M297.125 147.025c.3.3.3.8-.1 1.1-.1.1-.3.2-.5.2s-.4-.1-.5-.2l-1.8-1.8c-.3-.3-.3-.8 0-1.1.3-.3.8-.3 1.1 0l1.8 1.8zm3.9 4l1.7 1.8c.3.3.3.8 0 1.1-.1.1-.3.2-.5.2s-.4-.1-.5-.2l-1.8-1.8c-.3-.3-.3-.8 0-1.1.3-.3.8-.3 1.1 0zm-5 0c.3-.3.8-.3 1 0 .3.3.3.8 0 1.1l-1.8 1.8c-.1.1-.3.2-.5.2s-.4-.1-.5-.2c-.3-.3-.3-.8 0-1.1l1.8-1.8zm6.8-5.7c.3.3.3.8-.1 1.1l-1.8 1.8c-.1.1-.3.2-.5.2s-.4-.1-.5-.2c-.3-.3-.3-.8 0-1.1l1.8-1.8c.3-.3.8-.3 1.1 0zM121.425 366.225l1.7 1.8c.3.3.3.8 0 1.1-.1.1-.3.2-.5.2s-.4-.1-.5-.2l-1.8-1.8c-.3-.3-.3-.8 0-1.1.3-.3.8-.3 1.1 0zm5.6 5.7l1.7 1.8c.3.3.3.8 0 1.1-.1.1-.3.2-.5.2s-.4-.1-.5-.2l-1.8-1.8c-.3-.3-.3-.8 0-1.1.3-.3.8-.3 1.1 0zm-5 0c.3-.3.8-.3 1 0 .3.3.3.8 0 1.1l-1.8 1.8c-.1.1-.3.2-.5.2s-.4-.1-.5-.2c-.3-.3-.3-.8 0-1.1l1.8-1.8zm5.7-5.7c.3-.3.8-.3 1 0 .3.3.3.8 0 1.1l-1.8 1.8c-.1.1-.3.2-.5.2s-.4-.1-.5-.2c-.3-.3-.3-.8 0-1.1l1.8-1.8zM195.025 57.125l-1.8-1.8c-.3-.3-.3-.8 0-1.1.3-.3.8-.3 1.1 0l1.7 1.8c.3.3.3.8 0 1.1-.1.1-.3.2-.5.2s-.4-.1-.5-.2zm5.7 5.6l-1.9-1.8c-.3-.3-.3-.8 0-1.1.3-.3.8-.3 1.1 0l1.8 1.8c.3.3.3.8 0 1.1-.1.1-.3.2-.5.2s-.4-.1-.5-.2zm-6.9.2c-.2 0-.4 0-.5-.1-.3-.3-.3-.8 0-1.1l1.7-1.9c.3-.3.8-.3 1.1 0 .3.3.3.8 0 1.1l-1.8 1.8c-.1.1-.3.2-.5.2zm5.7-5.6c-.2 0-.4-.1-.6-.2-.3-.3-.3-.8 0-1.1l1.8-1.8c.3-.3.8-.3 1.1 0 .3.3.3.8 0 1.1l-1.8 1.8c-.1.1-.3.2-.5.2z",fill:"#F9E799"}),n.createElement("path",{d:"M62.8 135.5c.5 0 .8-.2.8-.7 0-.5-.4-.8-.8-.8H48.3c-.4 0-.9.2-.9.7 0 .5.4.8.8.8h14.6zm-19.3 0c.4 0 .8-.2.8-.7 0-.5-.4-.8-.8-.8h-4.7c-.4 0-.8.2-.8.7 0 .5.4.8.8.8h4.7zm-4.7 5H49c.5 0 .8-.3.8-.8s-.4-.8-.8-.8H38.8c-.5 0-.8.3-.8.8s.4.8.8.8zm14.5 0h3.3c.5 0 .8-.3.8-.8s-.4-.8-.8-.8h-3.3c-.5 0-.8.3-.8.8s.4.8.8.8zM311 12.3c0 .4-.3.7-.8.8h-14.6c-.5 0-.8-.3-.8-.8s.4-.8.8-.8h14.6c.5 0 .8.4.8.8zm4 .7c-.4 0-.8-.3-.8-.8s.4-.8.8-.8h4.7c.5 0 .8.3.8.8s-.4.8-.8.8H315zm4.7 3.5c.5 0 .8.4.8.8 0 .5-.4.8-.8.8h-10.1c-.5 0-.8-.4-.8-.8 0-.5.4-.8.8-.8h10.1zm-14.5 0c.5 0 .8.4.9.8 0 .5-.4.8-.8.8H302c-.5 0-.8-.4-.8-.8 0-.5.4-.8.8-.8h3.2z",fill:"#A4D3FF"}),n.createElement("path",{d:"M0 3.9c0 2.2 1.8 3.9 3.9 3.9 2.2 0 3.9-1.8 3.9-3.9C7.8 1.7 6 0 3.9 0 1.7 0 0 1.7 0 3.9zm6.3 0c0 1.3-1.1 2.4-2.4 2.4-1.3 0-2.4-1.1-2.4-2.4 0-1.3 1.1-2.4 2.4-2.4 1.3 0 2.4 1 2.4 2.4zM330.4 301c-1.9 0-3.4 1.5-3.4 3.4s1.5 3.4 3.4 3.4 3.4-1.5 3.4-3.4c-.1-1.9-1.6-3.4-3.4-3.4zm0 5.2c-1 0-1.9-.8-1.9-1.9 0-1 .8-1.9 1.9-1.9 1 0 1.9.8 1.9 1.9-.1 1.1-.9 1.9-1.9 1.9zM113.6 101.2c2.2 0 3.9-1.8 3.9-3.9 0-2.2-1.8-3.9-3.9-3.9-2.2 0-3.9 1.8-3.9 3.9 0 2.1 1.7 3.9 3.9 3.9zm0-6.3c1.3 0 2.4 1.1 2.4 2.4 0 1.3-1.1 2.4-2.4 2.4-1.3 0-2.4-1.1-2.4-2.4 0-1.4 1.1-2.4 2.4-2.4z",fill:"#A1E7D7"}))));var Hi,Wi=a("5TOM");!function(e){e.NearTitle="NearTitle",e.AboveCards="AboveCards"}(Hi||(Hi={}));const $i=e=>{const t=n.useContext(K.a.Context);return n.createElement(Vi.Content,Object.assign({},e,{theme:{viewport:Pi.a.viewport,lensviewContentWrapper:Pi.a.lensviewContentWrapper},loaderVariation:"cyan"}),n.createElement(s.a.div,Object.assign({},Object(X.c)(Pi.a.headerWrapper,e.transition.pipe(f.a.map(e=>e.title)))),n.createElement(en.a.Title,{lensAlertsCount:e.state.view("currentLens","meta","percentile").view(Object(i.flow)(wn.a.fromRatio,wn.a.prism.reverseGet)),lensId:It.a.SpecialId.Plagiarism,lensPreviewVM:e.lensPreviewVM,customInfoButton:n.createElement(s.a.Fragment,null,e.getPlagiarismText(Hi.NearTitle)(t,e.plagiarismModel.checkingState,e.state.view("currentLens","meta","percentile").view(wn.a.fromRatio),e.state.view("currentLens").view(e.capabilities.getActiveAlertsCount),e.state.view("currentLens","items","size")))})))};var Vi,Ui;(Ui=Vi||(Vi={})).getPlagiarismTextNearTitle=(e,t,a,i,r)=>o.a.combine(t,a,i,r,(t,a,i,r)=>{const s="full"===t?e.plagiarism.loadingDescription:e.plagiarism.helpIconDescription(a,i,r);return i>0||"full"===t?n.createElement(re.b,{key:s,title:s}):null}),Ui.getPlagiarismTextAboveCards=(e,t,a,n,i)=>o.a.combine(a,n,i,(t,a,n)=>e.plagiarism.lensDescription(t,a,n,Object(Li.a)(Wi.whiteReferenceLink))),Ui.Content=e=>n.createElement(n.Fragment,{key:It.a.SpecialId.Plagiarism},n.createElement(Ja.b.FixedContent,{onTransitionEnd:e.onTransitionEnd},e.children,n.createElement(Ja.b.SeeAlerts,{key:"seeAlerts",cardsViewportState:ji.c.getCardsViewportState(e.state,e.cardsListScrollManager,e.capabilities),actionEvents:e.cardsVM.actionEvents,cardsAmount:e.state.view("currentLens").view("items").view("size")}),n.createElement(s.a.div,{className:e.theme.viewport},n.createElement(s.a.div,Object.assign({},Object(X.c)(Wi.content,e.transition.pipe(f.a.map(e=>e.base)))),o.a.combine(e.state.view("currentLens").view(e.capabilities.getActiveAlertsCount),e.plagiarismModel.checkingState,(t,a)=>{switch(a){case"idle":case"checking":return t>0?null:n.createElement(Di,{key:"originality100"});case"full":return n.createElement(Ri,{key:"loading",variation:e.loaderVariation});default:return Object(le.d)(a)}})))),n.createElement(s.a.div,null,o.a.combine(e.state.view("currentLens").view(e.capabilities.getActiveAlertsCount),e.plagiarismModel.checkingState,(t,a)=>{switch(a){case"idle":case"checking":return t>0?n.createElement(Gi,Object.assign({key:"cards-view"},e)):null;case"full":return null;default:return Object(le.d)(a)}})));const Gi=({cardsVM:e,state:t,scrollEl:a,cardsListScrollManager:i,isMaster:r,transition:c,theme:d,checksFeedItem:p,capabilities:u,comparator:m})=>{const h=Ni.a.Elements.create(),y=t.lens(J.e.Prism.getLens()),C=o.a.create(l.g.none),v=new f.a.ReplaySubject;g.a.useSubscriptionTo(v.pipe(f.a.tap(e=>h.lens("scrollConsumer").set(e))));const S=Ii.a.cardList(p(e.actionEvents)),E=ji.c.getScrollObserver(i).pipe(f.a.startWith(!1)),w=tn.a.createCardListFlow(e,new f.a.Subject,l.g.none)(e,y,v,E,u,m);return n.createElement(Ni.a,{stateSyncListener:Ni.a.superScrollListener(i,h),height:ji.c.getAssistantHeight(t,i,u),className:c.pipe(f.a.map(e=>e.assistantWrapper)),name:"plagiarism",isMaster:r},n.createElement(n.Fragment,null,n.createElement("div",{ref:e=>C.set(l.g.fromNullable(e)),className:Wi.fakeTop}),n.createElement(s.a.div,{className:d.viewport},n.createElement(s.a.div,Object.assign({},Object(X.c)(d.lensviewContentWrapper,c.pipe(f.a.map(e=>e.content)))),n.createElement($.c,{onMount:()=>f.a.mergeStatic(a.pipe(f.a.tap(b.b.toAtom(h.lens("scrollProvider")))),C.pipe(f.a.tap(b.b.toAtom(h.lens("viewport"))))).subscribe()},Ra.b.mount(Mi.a,()=>ji.c.getPlaceholderState(t,i)),Ra.b.mount(S,w))))))};var zi=a("rjEp");const qi=a("x02P");var Yi=a("RfT4"),Xi=a("xUiX");class Ki extends n.Component{constructor(e,t){super(e,t),Object(le.g)(void 0!==t.hovered,"Hovered context of HideAssistant should be defined")}render(){return this.props.enableAnimation&&this.context.hovered?n.createElement(zi.a,{key:"animation-icon",className:Xi.hideAssistantIcon,animation:qi,mode:zi.a.Mode.forwards,startOn:this.context.hovered.pipe(f.a.filter(Boolean),f.a.mapTo(b.b.voidValue))}):n.createElement(oe.d.HideAssistantStatic,{className:Xi.hideAssistantIconStatic})}}Ki.contextType=Na.a.Context;const Zi=({state:e,navigationViewModel:t})=>{const{gnarSpec:a,pageId:i}=n.useContext(v.a.Context),r=n.useContext(_a.a.Context),s=n.useContext(K.a.Context),o=r.has(_a.a.Flag.supportsLottie);return n.createElement(re.a.SidebarFlat,{name:"hide-assistant",className:Xi.overviewBtn,onClick:()=>{t.events.next({type:"toggleSidebar",actionSource:Mt.b.sidebar}),a.assistantCloseButtonClick(i,e.get().currentLens.type)}},n.createElement(x.Small,{className:Xi.hideAssistantOutcomeText},s.hideAssistant),n.createElement(Ki,{enableAnimation:o}))},Qi=({state:e,documentModel:t,features:a,navigationViewModel:i})=>n.createElement(s.a.div,{className:Xi.sidebarHeader},e.view(J.e.isSidebarOpened).view(r=>r?n.createElement(Zi,{key:"hide-assistant",state:e,navigationViewModel:i}):n.createElement("div",{"data-name":"toggler",key:"toggle-wrapper",className:Xi.togglerWrapper},n.createElement(Yi.a,{documentModel:t,features:a,navigationViewModel:i}))));var Ji=a("JniT"),er=a("1d/y"),tr=a("kv9a"),ar=a("NW9S"),nr=a("dS2Y");function ir(e,t,a){return Ra.a.animatingFlow(function(e,t,a){const n=f.a.of(!0).pipe(f.a.delay(500),f.a.startWith(!1));return Ra.a.fromSideEffect(()=>e.events.next({kind:nr.b.Event.Kind.draftAIMiniCardClick,cardPosition:{top:0}}),f.a.combineLatestStatic([a.viewport,e.state,t,a.scrollTop,n]).pipe(f.a.map(([e,{node:t,title:a},n])=>Object(i.pipe)(t,l.g.filter(t=>ar.b.FromWindowTop.ISO.unwrap(e.top)>t.getBoundingClientRect().bottom),l.g.chain(()=>n),l.g.map(()=>({title:a})))),f.b.distinct))}(e,t,a),l.g.fold(()=>l.g.some(l.m.right("fadein")),()=>l.g.some(l.m.both("fadeout","fadein"))))}var rr=a("0vvr"),sr=a("pgXu");class or extends n.Component{render(){const{transition:e,theme:t}=this.props;return n.createElement($.b.Context.Consumer,null,a=>n.createElement(v.a.Context.Consumer,null,r=>n.createElement(s.a.div,Object.assign({},Object(X.c)(t.contentWrapper,e.pipe(f.a.map(e=>e.content)))),n.createElement(rr.a,{name:"advanced"},this.props.upgradeViewModel.advancedAlerts.view(Object(i.flow)(l.g.map(e=>{const i=e.alerts(),s=i.reduce((e,{count:t})=>e+t,0);return[n.createElement("div",{key:"some",className:t.advancedBlockWrapper},n.createElement(x.Base,null,"We found"," ",n.createElement("b",null,s," additional writing"," ",M.f.pluralize(s,"issue","issues")),n.createElement("br",null),"in this text available only for Premium users."),n.createElement("div",{key:"advanced-block",className:t.advancedBlock},n.createElement("div",{className:t.alertList},i.map(e=>n.createElement(x.Base,{key:e.category,className:t.alertBlock},n.createElement(En.a.Counter,{count:e.count,type:"yellow",theme:{counterWrapper:Object(X.c)(t.counter).className,counterContent:t.counterContent}}),e.categoryHuman))),n.createElement("div",{className:t.graphBlock},n.createElement("div",{className:t.graphCircle2},n.createElement("div",{className:t.graphCircle1},n.createElement(x.H1,Object.assign({},Object(X.c)(t.graphCounter,"windows"===a.info.os&&t.graphCounterWin)),s)))))),n.createElement("div",{key:"upgrade-block",className:t.upgradeBlock},n.createElement(sr.a,{size:"big",upgradeAction:()=>{r.gnarSpec.getPremiumButtonClick(r.pageId,"advancedIssues"),this.props.upgradeViewModel.openUpgradeUrl(S.k.Place.DenaliDocument.editorDenaliAdvanced)}})),n.createElement("footer",{key:"footer",className:t.footer},n.createElement(x.P1,{className:t.footerText},"It’s an online service that quickly and easily makes",n.createElement("br",null),"your writing better and makes you sound like a pro,",n.createElement("br",null),"or at least helps you avoid looking like a fool."),n.createElement(lr,{className:t.footerLogo}))]}),l.g.orNull))))))}}const lr=({className:e})=>n.createElement("svg",{width:"77",height:"20",viewBox:"0 0 77 20",className:e},n.createElement("path",{d:"M15.58138.367837l.088647 5.412045-.885505.275407c-.884542-2.75209-2.12367-4.31141-4.51328-4.31141H7.17438c-.08961 1.742595-.177293 4.67895-.177293 7.797587l2.12367-.091142c1.327775 0 1.94734-1.100637 2.212316-2.660947h.796858v6.512683h-.796858c-.264977-1.559318-.88454-2.659955-2.212317-2.659955l-2.12367-.091142c0 2.38455.087682 4.310417.177293 5.504178.17633 1.742594.6186 2.568815 1.769082 2.659957l1.0628.184266v.734088H.004586v-.734087l.885505-.184266c1.150482-.091142 1.592753-.917363 1.769083-2.659956.178257-2.84323.266904-8.80708 0-12.108993-.17633-1.743584-.6186-2.477673-1.769083-2.660947l-.885505-.092133v-.82523H15.58138zm31.331168 5.319616c3.009175 0 5.31014 2.75308 5.31014 6.514664 0 4.77108-2.831883 7.797586-7.522457 7.797586-1.682362 0-3.363762-.274417-4.956514-.641956.088647-1.92686.177294-13.670294 0-15.87058-.177294-1.101627-.44227-1.560308-1.23913-1.743583l-.619563-.092132v-.549824L43.814726 0c-.088647.918354-.088647 3.57831-.088647 6.513674.97415-.550814 1.94734-.82622 3.186468-.82622zM20.62606 5.50517c4.425597 0 6.638878 3.118637 6.638878 7.24677 0 3.94486-2.478258 7.247763-6.903855 7.247763-4.425598 0-6.637915-3.118638-6.637915-7.247763 0-3.943868 2.478258-7.24677 6.902892-7.24677zm32.74759 7.3392c0-3.761584 2.300964-7.339895 6.815208-7.339895 3.716423 0 5.487433 2.845213 5.487433 6.605807h-8.23163c-.088646 3.394045 1.50507 5.870727 4.691538 5.870727 1.41546 0 2.12367-.36556 3.009175-1.008506l.353624.45868C64.613492 18.715098 62.667117 20 60.188857 20c-3.983325 0-6.815207-2.935364-6.815207-7.15563zm22.83408-6.604815l.088646 3.57732-.6186.183274c-.79686-2.477674-1.858694-3.48618-3.45241-3.48618-1.061835 0-1.858693.82523-1.858693 2.018 0 1.193762.88454 1.835718 3.3628 2.844223 2.301926.917363 3.275114 2.018 3.275114 3.94486C77.004587 18.164282 74.79227 20 71.340824 20c-1.682362 0-3.629702-.36655-4.691538-.82523l-.088646-4.036992.619564-.184265c.974152 2.75209 2.21328 3.761584 3.89468 3.761584 1.416422 0 2.212317-1.009495 2.212317-2.110133 0-1.100637-.619563-1.743584-2.83188-2.567824-2.124634-.73508-3.62874-1.743584-3.62874-4.128133 0-2.38653 2.035987-4.404532 5.31014-4.404532 1.592752 0 3.009174.275407 4.07101.73508zM38.77024 5.87152l-1.416424 3.761584c-1.770046-1.19277-3.716423-.641956-4.159657 0-.087684 2.202266-.087684 5.687453.088646 7.432028.088647 1.099647.354587 1.64947 1.23913 1.741603l1.061834.092132v.73409h-8.230667v-.73409l.619564-.092132c.796858-.092133 1.150482-.641956 1.23913-1.741603.088646-1.92686.177293-5.780576 0-7.982842-.088648-1.19277-.442272-1.65046-1.23913-1.742593l-.619564-.092133V6.69774l5.929703-1.19277-.088647 3.21077c1.416422-3.302902 4.071973-3.761583 5.57608-2.84422zm6.107285 13.118687c1.85773 0 3.185505-2.84323 3.185505-6.513674 0-2.935363-1.061835-5.319913-3.009175-5.319913-.44227 0-.795895.091142-1.327776.275408-.087684 4.77009 0 10.183125.088646 11.467037.26594.091142.70821.091142 1.0628.091142zM20.361083 6.422532c-1.94734 0-2.478258 2.75209-2.478258 6.329408 0 3.486178.885505 6.3304 2.655552 6.3304 2.035023 0 2.566904-2.75209 2.566904-6.3304 0-3.486177-.885504-6.329408-2.744197-6.329408zm37.083577 4.679245l4.159657-.092133c0-1.834726-.264977-4.586815-1.769082-4.586815-1.50507 0-2.301928 2.567823-2.390575 4.678947z",fill:"#C6CBDE",fillRule:"evenodd"}));var cr=a("GHbd");const dr=({transition:e,upgradeViewModel:t,lensPreviewVM:a})=>{const i=n.useContext(_a.a.Context).platform===_a.a.Platform.IPAD?Object.assign(Object.assign({},cr),{paidView:cr.paidViewIPad,graphCircle2:cr.graphCircle2IPad}):cr;return n.createElement(Ja.b.FixedContent,null,n.createElement(s.a.div,Object.assign({},Object(X.c)(i.paidView,e.pipe(f.a.map(e=>e.base)))),n.createElement(s.a.div,Object.assign({},Object(X.c)(Pi.a.headerWrapper,e.pipe(f.a.map(e=>e.title)))),n.createElement(Ja.b.Title,{lensPreviewVM:a,lensId:It.a.SpecialId.Premium})),n.createElement(or,{transition:e,upgradeViewModel:t,lensPreviewVM:a,theme:i})))};var pr,ur=a("Od5a"),mr=a("PrZ+");class hr extends Qa.a{}!function(e){const t=e=>{return n.useContext(_a.a.Context).platform===_a.a.Platform.IPAD?fn.iPadWrapper:e.template?fn.draftAIWrapper:fn.wrapper},a=e=>{return new Map([[Hi.NearTitle,Vi.getPlagiarismTextNearTitle],[Hi.AboveCards,()=>o.a.create(null)]]).get(e)},c=e=>"prev"===e.type?e.done:i.constVoid;e.TheView=o=>{const d=n.useContext(_a.a.Context),p=t(o.features.denali),u=b.b.atomSwitchBy(e=>{let t=7;return t=31*(t=31*t+Object(r.k)(e.currentLens.id))+(tn.a.isInSuccess(e)?1231:1237)},o.denaliViewModels.lensState),m=Object(Ji.a)(!d.has(_a.a.Flag.supportsLottie)),{withNeutralForSelection:h}=n.useContext(te.a.Context),g=h(hr);return n.createElement(g,{key:"animationWrapper",className:p,state:u,stateToClassMapper:e.stateToClassMapper,onMouseDown:o.onMouseDown},(e=>t=>{const{denaliViewModels:{successLensViewModel:r,lensPreviewViewModel:o,cardsViewModel:d,priorityEvents:p,upgradeViewModel:u,cardsListScrollManager:m,navigationViewModel:h,draftAIEditorViewModel:g,draftAIItemViewModel:f},capabilities:b,plagiarismModel:y,features:C,scrollEl:v,successIllustrations:S}=e,E=t.state.get(),w={navigateToAllAlerts:()=>h.events.next({type:"switchToAll",focusFirst:!1,actionSource:Mt.b.sidebar})};switch(E.currentLens.type){case J.i.closed:return null;case J.i.plagiarism:return n.createElement(Ja.c.Provider,{value:w},n.createElement($i,{"data-name":"plagiarism-view",transition:t.view,plagiarismModel:y,cardsVM:d,state:t.state,isMaster:"next"===t.type,onTransitionEnd:"prev"===t.type?t.done:i.constVoid,scrollEl:v,cardsListScrollManager:m,getPlagiarismText:a,lensPreviewVM:o,checksFeedItem:tn.a.item,capabilities:b,comparator:tn.a.listItemOrd}));case J.i.draftAI:return n.createElement(Ja.c.Provider,{value:w},n.createElement(s.a.Fragment,null,g.view(l.g.fold(()=>null,e=>n.createElement(Ti,{"data-name":"draftai-lens-view",draftAIEditorVM:e,lensPreviewVM:o,onTransitionEnd:c(t),transition:t.view})))));case J.i.advanced:return n.createElement(Ja.c.Provider,{value:w},n.createElement(dr,{"data-name":"paidview",transition:t.view,upgradeViewModel:u,lensPreviewVM:o}));case J.i.lensview:const e=E.currentLens.meta,k=c(t),_=tn.a.isInSuccessWithDraftAI(E),O=t.state,A=t.state,T=n.createElement(en.a.Component,{lensPreviewVM:o,lensId:O.get().currentLens.id,navigationVM:h,type:h.lensTitleType,lensAlertsCount:A.view("currentLens").view(b.getVisibleAlertsCount),customSideButton:It.a.isAllAlerts(O.get().currentLens.id)&&Object(Y.pipe)(f,l.g.map(e=>Ra.b.mount(tr.a,ir(e,g,m))),l.g.toUndefined)}),x=l.g.isSome(C.denali.prioritySwitcher)||It.a.isMainLens(e.id),I=tn.a.createCardListFlow(d,p,Object(Y.pipe)(f,l.g.map(e=>e.events)));return n.createElement(Ja.c.Provider,{value:w},_?n.createElement(ur.a.View,{lens:e,transition:t.view,successLensViewModel:r,preventAnimation:C.preventAnimation,illustrations:S,onTransitionEnd:k,title:T,showTitle:x}):n.createElement(Ja.a,{"data-name":"lensview",transition:t.view,cardsVM:d,lensPreviewVM:o,navigationVM:h,state:O,isMaster:"next"===t.type,onTransitionEnd:k,scrollEl:v,cardsListScrollManager:m,cardListFlow:I,checksFeedItem:tn.a.item,capabilities:b,comparator:tn.a.listItemOrd,title:T}));default:return Object(le.d)(E.currentLens)}})(Object.assign(Object.assign({},o),{successIllustrations:m})))},e.NavigationWrapper=({onMount:e,onMouseDown:t,children:a})=>n.createElement("div",{"data-name":"navigation-view",ref:e,onMouseDown:t,className:fn.navigationWraperTier},a),e.NavigationView=t=>{const{withNeutralForSelection:a}=n.useContext(te.a.Context),i=a(e.NavigationWrapper);return n.createElement(i,{onMouseDown:t.onMouseDown},n.createElement(e.LensNavigationView,Object.assign({},t)),n.createElement(e.ActionsView,Object.assign({},t)),n.createElement(s.a.Fragment,null,t.features.isFree.view(e=>e||t.features.denali.gbVoxLensUphook||sa.g.isBusinessAdmin(t.features.denaliUserType)?n.createElement(er.a,{key:"freemium-notification-host",isSidebarOpen:t.denaliViewModels.lensState.view(J.e.isSidebarOpened),upgradeViewModel:t.denaliViewModels.upgradeViewModel,navigationViewModel:t.denaliViewModels.navigationViewModel}):null)))},e.TheViewPlaceholder=e=>{const a=t(e.features);return n.createElement("div",{className:a})},e.Grid=({name:e,className:t,opened:a,children:i})=>n.createElement(s.a.div,Object.assign({key:"sidebar-tier","data-name":"sidebar-tier"},Object(X.c)(fn.sidebarTier,a.view(e=>!e&&fn.hiddenWrapper),t)),n.createElement("div",{key:"sidebar-wrapper","data-name":e,className:fn.sidebarWrapper},i));const d=[J.i.closed,J.i.lensview,J.i.advanced,J.i.plagiarism],p=e=>(...t)=>[...t,e].join(" "),u=e=>J.e.isLensview(e)&&!tn.a.isInSuccess(e)||e.currentLens.type===J.i.advanced,m=(e,t)=>Object(Y.pipe)(e.transitionSource,l.g.map(({top:e})=>e),l.g.filter(e=>{const t=M.c.Rect.fromEl(document.body);return t.top<e&&e<t.bottom}),l.g.fold(Object(i.constant)(t),e=>h.a.style({opacity:0,transform:`translateY(${e}px)`})));e.stateToClassMapper=(e,t)=>{const a=void 0!==e&&e.get(),n=t.get();if(a){if(J.e.isSidebarOpened(a)){if(J.e.isSidebarOpened(n)){if(n.alertSource===J.c.forceSidebar||n.alertSource===J.c.forceText)return{prev:{start:{base:fn.lensHideStart,content:fn.contentHideStart},end:{base:fn.lensHide,content:fn.contentHide}},next:{start:{},end:{}}};if(u(n)&&u(a)){const e="textOrder"===n.switchOrder?fn.lensMoveUp:It.a.ord.compare(a.currentLens.meta,n.currentLens.meta)>0?fn.lensMoveDown:fn.lensMoveUp,t=p(e);return{prev:{start:{base:"",title:fn.lensLeaveStartTitle,content:t(fn.lensLeaveStartContent,fn.lensLeaveStart),allAlertsButton:fn.allAlertsVisible,assistantWrapper:fn.absoluteAssistant},end:{base:"",title:fn.lensLeaveTitle,content:t(fn.lensLeaveContent,fn.lensLeave),allAlertsButton:fn.allAlertsHidden,assistantWrapper:fn.absoluteAssistant}},next:{start:{base:"",title:fn.lensEnterStartTitle,content:t(fn.lensEnterStartContent,fn.lensEnterStart),allAlertsButton:fn.allAlertsHidden},end:{base:"",title:fn.lensEnterTitle,content:t(fn.lensEnterContent,fn.lensEnter),allAlertsButton:fn.allAlertsVisible}}}}{const e=d.indexOf(a.currentLens.type)-d.indexOf(n.currentLens.type)>0||tn.a.isInSuccess(n)?fn.lensMoveUp:fn.lensMoveDown,t=p(e),i=tn.a.isInSuccess(n)?fn.stateEnterStart:fn.lensEnterStart,r=tn.a.isInSuccess(n)?fn.stateEnter:fn.lensEnter;return{prev:{start:{base:t(fn.stateLeaveStart),content:t(fn.lensLeaveStartContent),title:fn.lensLeaveStartTitle,assistantWrapper:fn.absoluteAssistant},end:{base:t(fn.stateLeave),content:t(fn.lensLeaveContent),title:fn.lensLeaveTitle,assistantWrapper:fn.absoluteAssistant}},next:{start:{base:n.currentLens.id===It.a.SpecialId.DraftAI?m(n.currentLens,i):t(i),content:t(fn.lensEnterStartContent),title:fn.lensEnterStartTitle},end:{base:t(r),content:n.currentLens.id===It.a.SpecialId.DraftAI?fn.draftAILensContent:t(fn.lensEnterContent),title:fn.lensEnterTitle}}}}}return{prev:{start:{base:fn.sidebarLeaveRightStart},end:{base:fn.sidebarLeaveRight,title:fn.titleLeaveRight}},next:{start:{},end:{}}}}return{prev:{start:{},end:{}},next:{start:{base:fn.sidebarEnterLeftStart,title:fn.titleEnterLeftStart},end:{base:fn.sidebarEnterLeft,title:fn.titleEnterLeft}}}}return{prev:{start:{},end:{}},next:{start:{base:fn.sidebarEnterLeft,title:fn.titleEnterLeft},end:{base:fn.sidebarEnterLeft,title:fn.titleEnterLeft}}}},e.Loader=({state:t,baseLoaderClass:a,showToolbar:i,enableOptimizations:r})=>n.createElement(e.Grid,{name:"sidebar-loader",opened:o.a.create(!0)},n.createElement(rn,{state:t.view("lens"),theme:mr},n.createElement(s.a.div,Object.assign({},Object(X.c)(fn.loaderWrapper,a)),n.createElement(Ja.b.Rechecking,{"data-name":"lensviewRechecking",key:"lensview-rechecking"}))),n.createElement(Sn.Loader,{key:"navigation-rechecking",baseLoaderClass:a,state:t,showToolbar:i,enableOptimizations:r})),e.ActionsView=({denaliViewModels:{lensPreviewViewModel:e,navigationViewModel:t,proofitViewModel:a,lensState:i},documentModel:r,plagiarismModel:s,features:o,JSXPortal:l})=>n.createElement("div",{className:fn.actionsWrapper},n.createElement(Qi,{documentModel:r,features:o,state:i,navigationViewModel:t}),n.createElement(An,{state:i,plagiarismModel:s,proofitViewModel:a,lensPreviewVM:e,features:o,navigationViewModel:t}),n.createElement(l,null,n.createElement(Ei,{proofit:a}))),e.LensNavigationView=({denaliViewModels:{lensState:e,navigationViewModel:t,modalManager:a},documentModel:i,features:r})=>n.createElement(Sn,{state:e,checkingState:i.checkingState},n.createElement(Sn.Content,{documentModel:i,modalManager:a,navigationViewModel:t,features:r}))}(pr||(pr={}));class gr extends n.Component{constructor(){super(...arguments),this._editorHeight=o.a.create(0)}shouldComponentUpdate(){return!1}render(){const{denaliEditor:e,state:t,scrollbarViewModel:a,children:i,scrollEl:r,featuresViewModel:s}=this.props,o=ba.a.withViewportContainer(yr(br,{state:t}),{type:ba.a.ContainerType.inherit});return n.createElement(o,{name:"editorComponent",className:de.scrollWrapFixed},n.createElement(j.b,{denaliEditor:e,customTitlePlaceholder:s.denali.customTitlePlaceholder,theme:Object.assign({},de),scrollEl:r,editorHeight:this._editorHeight,scrollTop:a.scrollTop},i(new f.a.Subject,this._editorHeight)))}}class fr extends n.Component{render(){const{state:e,children:t}=this.props,a=yr(br,{state:e});return n.createElement(a,{name:"editorComponent",className:de.scrollWrapFixed},n.createElement(n.Fragment,null,n.createElement(ue,{selectionEffect:te.a.Effect.collapse},n.createElement("div",{className:de.textContent})),t))}}const br=({className:e,onMount:t,children:a,name:i})=>n.createElement(s.a.div,{"data-name":i,name:"text",key:"denaliEditorWrapper",className:e,mount:t},a);function yr(e,t){return class extends n.Component{constructor(){super(...arguments),this._textTransition=t.state.view(J.e.isSidebarOpened).pipe(f.a.skip(1),f.a.switchMap(e=>an.a.rafSequence(e?[de.toWritingStart,de.toWritingStart,de.toWritingEnd]:[de.toEditingStart,de.toEditingStart,de.toEditingEnd],!0)),f.a.startWith(void 0))}shouldComponentUpdate(){return!1}render(){const{className:t}=this.props;return n.createElement(e,Object.assign({},this.props,Object(X.c)(t,de.editorComponentWrapper,de.container,this._textTransition)))}}}var Cr=a("3jsv"),vr=a("hOiz"),Sr=a("HeG+");const Er=150,wr=70,kr=32;class _r extends n.Component{constructor(){super(...arguments),this._log=y.Monitoring.Logging.getLogger("SynonymsPopup"),this._getRect=()=>Object(Y.pipe)(this.props.synonymsInfo.activeMark.getRect(),l.b.map(va.b.relativeToRoot)),this._getAbsRect=()=>Object(Y.pipe)(this.props.synonymsInfo.activeMark.getRect(),l.b.map(va.b.relativeToViewport)),this._state=o.a.create(Object(Y.pipe)(this._getRect(),l.g.fromEither,l.g.map(e=>({top:e.bottom,left:0})))),this._getPosition=([e,t])=>this._el?Object(Y.pipe)(Object(i.tuple)(this._getAbsRect(),this._getRect()),l.b.map2((a,n)=>{const{width:i,height:r}=this._el.getBoundingClientRect(),s=t<n.bottom+r+kr&&r<n.top+Er,o=s?n.top-r:n.bottom,c=a.left+i,d=c<e.right?0:c-e.right+kr;return{card:{top:o,left:n.left-d},markOffset:(s?a.top-e.top-r:e.bottom-a.bottom-r)<wr?l.g.some((()=>s?Math.min(e.top+r+wr,e.bottom-n.height):Math.max(e.bottom-r-wr,n.height+wr))()):l.g.none}}),l.b.fold(e=>(this._log.info("Cannot get synonym popup position",e),l.g.none),l.g.some)):l.g.none,this._sub=null,this._rendered=!1}componentDidMount(){const{synonyms:e,synonymsInfo:t,editorHeight:a}=this.props;this._sub=this.context.pipe(f.a.map(e=>e.rect),f.a.combineLatest(a),f.a.map(this._getPosition)).subscribe(a=>{this._rendered||(this._rendered=!0,Object(Y.pipe)(a,l.g.chain(({markOffset:e})=>e),l.g.map(a=>{e.scrollToMark(t.activeMark,{paddingTop:a,animate:T.a.fast}).subscribe({error:e=>this._log.error("Cannot scroll to synonym",e)})}))),this._state.set(l.g.map(({card:e})=>e)(a))})}componentWillUnmount(){this._sub&&(this._sub.unsubscribe(),this._sub=null)}render(){const{synonyms:e,synonymsInfo:t}=this.props;return n.createElement(s.a.div,{mount:e=>this._el=e,key:"synonymsPopupWrapper",style:this._state.view(e=>l.g.getOrElse(()=>({visibility:"hidden",pointerEvents:"none"}))(e)),className:Sr.synonymsPopupWrapper},n.createElement(Cr.a,{hide:()=>e.close("closedByUser")},this.props.features.synonymsSynfony?n.createElement(vr.b,{synonymsInfo:t,apply:t=>()=>e.apply(t)}):n.createElement(vr.a,{synonymsInfo:t,apply:t=>()=>e.apply(t)})))}}_r.contextType=ba.a.Context;class Or extends n.Component{constructor(){super(...arguments),this._log=y.Monitoring.Logging.getLogger("SynonymIconWrapper")}render(){const{mark:e,className:t,children:a}=this.props;return n.createElement(s.a.div,{className:t,style:this.context.pipe(f.a.map(e=>e.rect),f.a.map(this._log.handler("Update tooltip position").debug),f.a.map(()=>Object(Y.pipe)(e.getRect(),l.b.map(va.b.relativeToRoot),l.b.map(e=>kt.d.translate(e.left+e.width,e.top)),l.g.fromEither,l.g.getOrElse(()=>({visibility:"hidden"})))))},a)}}Or.contextType=ba.a.Context;class Ar extends n.Component{constructor(){super(...arguments),this._log=y.Monitoring.Logging.getLogger("SynonymsView")}shouldComponentUpdate(){return!1}renderLoader(e){return f.a.of(n.createElement(Or,{className:Sr.iconWrapper,mark:e.activeMark},n.createElement(oe.d.SynonymLoader,{className:Sr.loader}))).pipe(f.a.delay(1e3),f.a.startWith(null))}renderPopup(e){return this.props.synonyms.onPopupOpen(),f.a.of(n.createElement(_r,{synonyms:this.props.synonyms,synonymsInfo:e,editorHeight:this.props.editorHeight,features:this.props.features}))}render(){const{synonyms:e}=this.props;return n.createElement(s.a.div,{className:Sr.contentWrapper},e.viewState.pipe(f.a.tap(e=>this._log.debug("Synonym state changed",Object(Y.pipe)(e,l.g.fold(()=>null,e=>({kind:e.synonymsState.kind,popupVisible:e.popupVisible}))))),f.a.switchMap(l.g.mapOrDefault(e=>zt.a.isQuerying(e.synonymsState)?this.renderLoader(e):(zt.a.isReady(e.synonymsState)||zt.a.isEmpty(e.synonymsState))&&e.popupVisible?this.renderPopup(e):f.a.of(null),f.a.of(null)))))}}var Tr=a("HDvz"),xr=a("EH1O"),Ir=a("3zdQ"),Mr=a("0lfv"),jr=a("qPuW");const Lr=({onClick:e,tooltip:t})=>n.createElement(re.a.Ghost,{name:"to-home",onClick:e,title:t.view(e=>e.orUndefined()),className:jr.toolbarBtn,animationMode:Ce.a.FromCenter},n.createElement(oe.d.Arrow,{className:jr.backIcon})),Nr=({userAccount:e})=>{const t=n.useContext(K.a.Context);return n.createElement(Lr,{tooltip:o.a.create(Object(r.h)(t.toolbar.signOut)),onClick:e.logout})},Pr=({type:e,userAccount:t})=>{const a=n.useContext(C.a.Context),i=n.useContext(K.a.Context);return n.createElement("div",{className:jr.fakeToolbarWrapper,"data-name":"document-tools"},t.features.demoMode?n.createElement(Nr,{userAccount:t}):n.createElement(Lr,{tooltip:o.a.create(Object(r.h)(i.toolbar.backToMyGrammarly)),onClick:()=>a.navigate(C.a.routes.documents.href())}),n.createElement(x.H3Legacy,{className:jr.fakeToolbarTitle,"data-name":"toolbar-title"},e===Kt.a.TextType.loading?i.toolbar.loading:i.toolbar.processing))};var Fr,Dr=a("vu24");!function(e){e.Loader=({userAccount:e,documentLoader:a,className:i})=>n.createElement(s.a.Fragment,null,a.state.view("text").view(Mr.a.mapOrNull(r=>n.createElement("div",{key:"with-text-loader",className:i},n.createElement("div",Object.assign({key:"editor"},Object(X.c)(Dr.secondTierLoader,Dr.baseLoaderClass)),!e.features.denali.hideToolbar&&n.createElement(Pr,{type:r,userAccount:e}),n.createElement(pe,{position:"top"},n.createElement("div",{className:Dr.textLoaderWrap},n.createElement(Ir.b,null)))),n.createElement(t,{documentLoader:a,enableOptimizations:e.features.denali.cpuAndAnimationOptsExperiment}))))),e.AssistantOnlyLoader=({documentLoader:e,className:a,enableOptimizations:i})=>n.createElement("div",{className:a},n.createElement(t,{documentLoader:e,enableOptimizations:i}));const t=({documentLoader:e,enableOptimizations:t})=>n.createElement(pr.Loader,{key:"sidebar-loader",state:e.state,baseLoaderClass:Dr.baseLoaderClass,enableOptimizations:t,showToolbar:e.state.view("text").view(e=>e.isEmpty())})}(Fr||(Fr={}));var Rr=a("BfMR");const Br=({width:e,className:t,children:a})=>n.createElement(s.a.div,Object.assign({},Object(X.c)(Rr.invisibleScrollbar,t),{style:e.pipe(f.a.map(e=>({width:`calc(100vw - ${e}px)`})))}),a),Hr=({onMount:e})=>n.createElement("div",{className:Rr.scrollDetector,ref:e}),Wr=()=>{const e=n.useContext(_a.a.Context);return g.a.useSubscriptionTo(e.has(_a.a.Flag.preventNavigationByOverscrollWithJS)?f.a.fromEvent(document,"wheel").pipe(f.a.tap(e=>{Math.abs(e.deltaX)>=Math.abs(e.deltaY)&&e.preventDefault()})):f.a.EMPTY),n.useEffect(()=>(document.body.classList.add(Rr.preventOverscroll),()=>document.body.classList.remove(Rr.preventOverscroll))),n.createElement(n.Fragment,null)},$r=e=>{const{denaliEditorModel:t,documentModel:a,plagiarismModel:i,userAccount:r,denaliViewModels:c,capabilities:d,documentLoader:p,loaderClassName:u,clientsState:m}=e,h=o.a.create(l.g.none),y=new Ma;g.a.useSubscriptionTo(h.pipe(f.a.tap(b.b.toAtom(y.target))));const{withSelectionEffect:C}=n.useContext(te.a.Context),v=C(({onMouseDown:e})=>n.createElement("div",{className:Dr.horizontalEditorWrapper,onMouseDown:e},n.createElement(ba.a.InheritVirtualContainer,{name:"withPadding",viewportPadding:w},n.createElement(gr,{denaliEditor:t,settingsModel:r.settings,featuresViewModel:r.features,state:c.lensState,scrollbarViewModel:y,scrollEl:h,viewportPadding:w},(e,i)=>n.createElement(Gr,{denaliViewModels:c,denaliEditorModel:t,editorHeight:i,docFeatures:a,features:r.features.denali}))),n.createElement(Hr,{key:"scroll-detector",onMount:e=>y.detector.set(l.g.fromNullable(e))})),te.a.Effect.collapse),S=C(()=>n.createElement(pr.TheView,{denaliViewModels:c,capabilities:d,documentModel:a,plagiarismModel:i,features:r.features,scrollEl:h}),te.a.Effect.collapse),E=C(pr.NavigationView,te.a.Effect.collapse),w=o.a.create(T.h.empty),k=kt.d.Portal.create("modals-portal");return n.createElement(n.Fragment,null,n.createElement(Wr,null),n.createElement(k.Destination,null),n.createElement(s.a.div,{"data-name":"document-content",className:Dr.secondTier,style:{paddingRight:`${y.fakeWidth}px`},mount:e=>h.set(l.g.fromNullable(e))},p.state.view("text").view(e=>e.fold(()=>n.createElement(ya.a.Top,{className:Dr.fixedLoader,key:"navigation-loader"},n.createElement(Br,{width:y.width,className:Dr.withPlaceForScrollbar},n.createElement(Fr.AssistantOnlyLoader,{enableOptimizations:r.features.denali.cpuAndAnimationOptsExperiment,documentLoader:p,className:u}))),()=>null)),n.createElement(Vr,{scrollbarWidth:y.width,sidebarOpen:c.lensState.view(J.e.isSidebarOpened),editor:n.createElement(fr,{state:c.lensState,features:r.features},n.createElement(je.Component,{denaliEditor:t,documentModel:a,settingsModel:r.settings,state:c.lensState,viewportPadding:w,formattingViewModel:c.formattingViewModel,clientsState:m,emotionsViewModel:c.emotionsViewModel})),assistant:n.createElement(n.Fragment,null,n.createElement(pr.TheViewPlaceholder,{features:e.userAccount.features.denali}),e.userAccount.features.denali.template?null:n.createElement(E,{denaliViewModels:c,capabilities:d,documentModel:a,plagiarismModel:i,features:r.features,scrollEl:h,JSXPortal:k.Source}))},n.createElement(()=>{switch(r.features.denali.documentToolbar){case sa.d.documentSettings:return n.createElement(Tr.a,{documentSettingsViewModel:c.documentSettingsViewModel.viewModel,lensState:c.lensState,isDemoMode:r.features.demoMode});case sa.d.none:return null;default:return Object(le.d)(r.features.denali.documentToolbar)}},null)),n.createElement(Ur,{opened:c.lensState.view(J.e.isSidebarOpened),editor:n.createElement(v,null),assistant:n.createElement(S,null)})))},Vr=({sidebarOpen:e,editor:t,assistant:a,scrollbarWidth:i,children:r})=>n.createElement(ya.a.Top,{className:Dr.fixedHorizontal},n.createElement(Br,{width:i,className:Dr.withPlaceForScrollbar},t,n.createElement(pr.Grid,{name:"sidebar-placeholder",opened:e},a),r)),Ur=({opened:e,editor:t,assistant:a})=>n.createElement("div",{className:Dr.horizontal},t,n.createElement(pr.Grid,{name:"sidebar",opened:e},a)),Gr=({denaliViewModels:e,denaliEditorModel:t,editorHeight:a,docFeatures:i,features:r})=>{const o=n.useContext(K.a.Context),l={denaliEditorModel:t,onboardingViewModel:e.onboardingViewModel},c=Object.assign(Object.assign({},l),{alignment:"bottomCenter",title:"In-line corrections",overlay:e=>n.createElement(ya.a.Top,{className:Dr.fixedOverlay},n.createElement(s.a.div,{className:e.view(e=>e?Dr.overlayVisible:"")},n.createElement(ea.b,{positionType:"fixed",visible:e,alignment:"none",overlayType:"transparent"}))),getFirstTarget:()=>e.marksViewModel.getFirstMark()}),{withSelectionEffect:d}=n.useContext(te.a.Context),p=d(te.a.Effect.PlainContainer,te.a.Effect.prevent);return n.createElement(s.a.Fragment,null,e.lensState.view(J.e.isSidebarOpened).view(t=>t&&n.createElement(ka,Object.assign({key:"sidebar-opened"},c,{stepId:Ca.a.StepId.Step11,message:"Click underlined words to see more details about what Grammarly has found.",completionTrigger:e.onboardingViewModel.completionTrigger.pipe(f.a.skip(1)),eventType:"onclick"}))),n.createElement(Za,{className:Dr.inlineCardWrapper,inlineCardVM:e.inlineCardViewModel,inlineUpgradeHookVM:e.inlineUpgradeHookViewModel}),n.createElement(ka,Object.assign({},l,{stepId:Ca.a.StepId.Step9,alignment:"bottomRight",eventType:"onhover",title:"Synonyms",message:"Click on a word twice to see the synonyms.",getFirstTarget:()=>e.synonymsViewModel.getFirstSynonym(),completionTrigger:e.synonymsViewModel.popupShown.pipe(f.a.skip(1))})),e.formattingViewModel.map(e=>n.createElement(p,null,n.createElement(xr.a,{vm:e.linksManager}))).orNull(),n.createElement(Ar,{synonyms:e.synonymsViewModel,editorHeight:a,features:r}),n.createElement("div",{className:Dr.documentContainer},r.graySelection&&n.createElement(xa,{ded:t}),n.createElement(La,{className:Dr.documentPlaceholder,viewModel:e.documentPlaceholderViewModel,strings:i.rtfMode===S.e.DocumentFeatures.FormattingMode.on?o.placeholderRTF:o.placeholder})))};var zr=a("SxAM"),qr=a("zqxF");const Yr="You may have unsaved changes in your document that will be lost if you leave the page.",Xr="The changes in your document may be lost if you leave this page.",Kr=e=>((e=>{g.a.useSubscriptionTo(e?f.a.fromEvent(document.body,"click",{passive:!0,capture:!0}).pipe(f.a.first(),f.a.delay(1e3),f.a.tap(()=>{const e=[...Array.from(document.documentElement.children),...Array.from(document.body.children)].filter(e=>!e.hasAttribute("data-verified")&&"head"!==e.nodeName.toLowerCase()).map(e=>({nodeName:e.nodeName,src:e.getAttribute("src"),content:e.outerHTML.substr(0,255)}));e.length&&e.forEach(e=>{y.Monitoring.Logging.getLogger("3rdPartyInjections").info("found unknown element",e)})})):f.a.EMPTY)})(e.userAccount.features.track3rdPartyExtensionsInjection),n.createElement(ns,{actions:e.environment.actions,documentModel:e.documentModel},n.createElement(es,Object.assign({},e)))),Zr=({notificationsManager:e})=>{const t=n.useContext(C.a.Context);return g.a.useSubscriptionTo(Object(Y.pipe)(t.locationState,l.g.filter(e=>!0===e.showSwitchUINotification),l.g.map(()=>e.enqueue("switchToDenali")),l.g.getOrElse(()=>f.a.EMPTY))),n.createElement(n.Fragment,null)},Qr=({denaliViewModels:e,userAccount:t,documentModel:a,documentLoader:i,notificationsManager:r,uploadViewModel:s})=>{const o=n.useContext(C.a.Context),l=n.useContext(Oe.a.Context),c=n.useContext(v.a.Context),d=n.useContext(Zt.a.Context),p=e.createLoaderViewModel(s),u=new pa(e.modalManager,t,a,p,i.state,o,r,l,c,d);return g.a.useSubscriptionTo(u.init()),g.a.useEffectOnWillUnmount(()=>p.dispose()),n.createElement(n.Fragment,null)},Jr=kt.d.lazy(()=>a.e(5).then(a.t.bind(null,"rdEn",7)));class es extends n.Component{constructor(){super(...arguments),this._subs=new Q.a.Keeper}_trackAlertActions(){return[this.props.denaliViewModels.lensState.view(J.e.isSidebarOpened).pipe(f.a.switchMap(b.b.orEmpty(this.props.denaliViewModels.alertUserEvents.alertClicked)),f.b.compact).subscribe(e=>{this.context.gnarSpec.alertUnderlineClick(this.context.pageId,"assistantOn",this.context.pageSessionId,It.a.isPremiumId(e.alert.lensId)?"premiumUphookPreview":e.alert.lensId)})]}componentWillMount(){y.Monitoring.Logging.root.context.add({denali:!0})}componentDidMount(){const{documentModel:e,selfUpdate:t,denaliEditorModel:a}=this.props;this.context.gnarSpec.denaliDocumentPageShow(this.context.pageId,document.location.toString(),this.context.isTouchDevice),this._subs.push(t.watch(e.saved.pipe(f.a.startWith(!0)),"saved"),a.dontFreezeWhen(ea.b.activeCount.view(e=>e>0),"overlay"),...this._trackAlertActions())}render(){const{denaliViewModels:e,denaliEditorModel:t,notificationsManager:a,uploadViewModel:r,environment:o,children:l,userAccount:c,subscription:d,documentModel:p,documentLoader:u}=this.props;return n.createElement(n.Fragment,null,n.createElement(ee.b.Context.Provider,{value:e.onboardingViewModel},n.createElement(Qt.a.Context.Provider,{value:ma(a,o)},n.createElement(te.a.Context.Provider,{value:te.a.getSelectionHOCs(t)},n.createElement($.c,Object.assign({onUnmount:()=>{try{this.props.denaliViewModels.modalManager.hideAll(),e.dispose(),this._subs.dispose()}catch(e){y.Monitoring.Logging.getLogger("Main").error("Cannot shutdown the engine",e)}}},Object(X.c)(qr.firstTier)),n.createElement(Qr,{denaliViewModels:e,userAccount:c,subscripton:d,documentModel:p,documentLoader:u,notificationsManager:a,uploadViewModel:r}),n.createElement(Zr,{notificationsManager:a}),l,n.createElement(zr.a,{searchViewModel:e.searchViewModel,key:"search-bar"}),n.createElement($r,Object.assign({},this.props,{loaderClassName:qr.firstTierLoader})),n.createElement(ts,{modalManager:e.modalManager}),n.createElement(s.a.div,null,e.showConfetti.pipe(f.a.filter(i.identity),f.a.map(()=>n.createElement(Jt.a,{fallback:()=>null,name:"Confetti"},n.createElement(n.Suspense,{fallback:null},n.createElement(Jr,{recycle:!1,tweenDuration:1e4})))),f.a.startWith(null))))))),n.createElement(fa,{documentUpload:r.uploadModel,modalManager:e.modalManager}))}}es.contextType=v.a.Context;const ts=({modalManager:e})=>n.createElement(s.a.Fragment,null,e.state.view(Object(i.flow)(l.g.map(({component:e})=>e),l.g.toNullable))),as=({documentLoader:e,userAccount:t})=>n.createElement(Fr.Loader,{className:qr.firstTierLoader,userAccount:t,documentLoader:e});class ns extends n.Component{constructor(){super(...arguments),this._log=y.Monitoring.Logging.getLogger("block_unsaved_changes"),this._blockNavigationWhenUnsavedChanges=()=>f.a.fromEvent(window,"beforeunload").pipe(f.a.withLatestFrom(this.props.documentModel.saved,(e,t)=>t?null:e),f.a.filter(Boolean)).subscribe(e=>(e.returnValue=Xr,Xr)),this._notifyAboutDocumentStateChange=()=>this.props.documentModel.saved.pipe(f.a.startWith(!0)).subscribe(e=>{this.props.actions.documentStateChanged(e?$.b.DocumentState.SAVED:$.b.DocumentState.NOT_SAVED).recover(this._log.handler("Could not perform documentStateChanged action.").warn)}),this._handleUnsavedChanges=()=>this._blockNavigationWhenUnsavedChanges().add(this._notifyAboutDocumentStateChange())}render(){return n.createElement($.c,{onMount:this._handleUnsavedChanges},this.props.children,n.createElement(ta.b.Block,{when:this.props.documentModel.saved.pipe(f.a.startWith(!0),f.a.map(e=>!e)),message:()=>(this.props.documentModel.flush().catch(e=>this._log.error("Could not flush document before exit",e)),this._log.warn("unsaved changes prompt before navigate"),Yr)}))}}var is=a("0Qd1");const rs=h.a.style({margin:`${h.a.rem(-10)} ${h.a.rem(-2)} 0 0`}),ss=()=>{const e=n.useContext(C.a.Context);return n.createElement(is.a,{name:"doc-not-found",logo:n.createElement(os,{className:rs}),title:"Can’t find this document",description:"It looks like this document was removed or URL is incorrect.",primaryButton:{title:"Go to your documents",onClick:()=>e.navigate(C.a.routes.documents.href())}})},os=({className:e})=>n.createElement("svg",{width:"194",height:"128",viewBox:"0 0 194 128",className:e},n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M44 40h64c2.2 0 4 1.8 4 4v80c0 2.2-1.8 4-4 4H45c-2.76 0-5-2.24-5-5V44c0-2.2 1.8-4 4-4z",fill:"#E4E6F2",opacity:".8"}),n.createElement("rect",{stroke:"#8189A9",strokeWidth:"1.5",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round",x:"47",y:"33",width:"72",height:"88",rx:"1"}),n.createElement("path",{d:"M60.28 86h44.67M60.28 96h44.67M60.28 107H73",stroke:"#E4E6F2",strokeWidth:"2",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("g",{transform:"translate(64 47)"},n.createElement("circle",{fill:"#8189A9",cx:"3",cy:"3",r:"3"}),n.createElement("circle",{fill:"#8189A9",cx:"33",cy:"3",r:"3"}),n.createElement("path",{d:"M29.46 21.54C26.66 18.74 22.78 17 18.5 17c-4.28 0-8.16 1.73-10.96 4.54",stroke:"#8189A9",strokeWidth:"2",strokeLinecap:"round"})),n.createElement("path",{d:"M188.13 106.03c.3.3.3.8-.1 1.1-.1.1-.3.2-.5.2s-.4-.1-.5-.2l-1.8-1.8c-.3-.3-.3-.8 0-1.1.3-.3.8-.3 1.1 0l1.8 1.8zm3.9 4l1.7 1.8c.3.3.3.8 0 1.1-.1.1-.3.2-.5.2s-.4-.1-.5-.2l-1.8-1.8c-.3-.3-.3-.8 0-1.1.3-.3.8-.3 1.1 0zm-5 0c.3-.3.8-.3 1 0 .3.3.3.8 0 1.1l-1.8 1.8c-.1.1-.3.2-.5.2s-.4-.1-.5-.2c-.3-.3-.3-.8 0-1.1l1.8-1.8zm6.8-5.7c.3.3.3.8-.1 1.1l-1.8 1.8c-.1.1-.3.2-.5.2s-.4-.1-.5-.2c-.3-.3-.3-.8 0-1.1l1.8-1.8c.3-.3.8-.3 1.1 0zM86.03 3.13l-1.8-1.8c-.3-.3-.3-.8 0-1.1.3-.3.8-.3 1.1 0l1.7 1.8c.3.3.3.8 0 1.1-.1.1-.3.2-.5.2s-.4-.1-.5-.2zm5.7 5.6l-1.9-1.8c-.3-.3-.3-.8 0-1.1.3-.3.8-.3 1.1 0l1.8 1.8c.3.3.3.8 0 1.1-.1.1-.3.2-.5.2s-.4-.1-.5-.2zm-6.9.2c-.2 0-.4 0-.5-.1-.3-.3-.3-.8 0-1.1l1.7-1.9c.3-.3.8-.3 1.1 0 .3.3.3.8 0 1.1l-1.8 1.8c-.1.1-.3.2-.5.2zm5.7-5.6c-.2 0-.4-.1-.6-.2-.3-.3-.3-.8 0-1.1l1.8-1.8c.3-.3.8-.3 1.1 0 .3.3.3.8 0 1.1l-1.8 1.8c-.1.1-.3.2-.5.2z",fill:"#F6C2CB",fillRule:"nonzero"}),n.createElement("path",{d:"M4.6 60.2c2.2 0 3.9-1.8 3.9-3.9 0-2.2-1.8-3.9-3.9-3.9-2.2 0-3.9 1.8-3.9 3.9 0 2.1 1.7 3.9 3.9 3.9zm0-6.3C5.9 53.9 7 55 7 56.3c0 1.3-1.1 2.4-2.4 2.4-1.3 0-2.4-1.1-2.4-2.4 0-1.4 1.1-2.4 2.4-2.4z",fill:"#A1E7D7",fillRule:"nonzero"})));a.d(t,"default",(function(){return ps}));const ls=({docId:e,engine:t,ded:a,userAccount:i,upgradeHook:r,remSize:s,notificationsCenter:o,networkState:c,uploadViewModel:d,notificationsManager:p,selfUpdate:u,clientsState:m,documentLoader:h,textResources:g,config:f,router:b,environment:y,platformEnvironment:C})=>{const S=q.b.isDraftAIMode(i.features.denali,t.documentModel)?l.g.some({model:q.b.create(t.documentModel),connector:new q.a(a)}):l.g.none,E=new ie.a(t,a,i,r,i.subscription,y,C,n.useContext(v.a.Context),s,c,e,d,S,p,i.settings,h,g,f,b);return n.createElement(Kr,{denaliEditorModel:a,plagiarismModel:t.plagiarismModel,documentModel:t.documentModel,uploadViewModel:d,userAccount:i,subscription:i.subscription,selfUpdate:u,denaliViewModels:E,capabilities:E.capabilities,notificationsManager:p,clientsState:m,documentLoader:h,environment:y},o)},cs=p.a.fontsProvider(s.a.div),ds=e=>{const{docId:t,userAccount:a,networkState:i,selfUpdate:r,uploadViewModel:s,upgradeHook:o,engineStream:p,notificationsManager:h,clientsState:b,documentLoader:C,textResources:S,config:E,router:w,environment:k,platformEnvironment:O}=e,A=y.Monitoring.Logging.getLogger("denali.editorContent"),T=n.useContext(v.a.Context),x=n.createElement(u.a,{key:"platformNotificationsCenter",views:_.a,manager:h,onNotificationClose:e=>T.gnarSpec.notificationCloseButtonClick(e.type,T.pageId)});return g.a.useEffectOnDidMount(()=>{A.info("denali page mount"),document.body.classList.remove("editorTs")}),g.a.useEffectOnWillUnmount(()=>{A.info("denali page unmount"),document.body.classList.add("editorTs")}),n.createElement(d.a.DefaultManager,null,n.createElement(cs,{key:t},n.createElement(Xt.a,null),p.pipe(f.a.map(l.g.fold(()=>x,l.b.fold(e=>e.code===c.a.WsCodes.NOT_FOUND?(A.warn("document not found on init",e),n.createElement(ss,{key:"404"})):(e.code===c.a.WsCodes.UNAUTHORIZED?A.warn("unauthorized on init",e):A.warn("engine init error",e),x),([e,l])=>n.createElement(d.a.Context.Consumer,{key:"remSize"},c=>n.createElement(v.a.ContextProvider,{gnarSpec:T.gnarSpec,docId:T.docId,pageId:l.documentModel.isDemoDocument?"demoDocument":"document",pageSessionId:T.pageSessionId},n.createElement(ls,{key:"main",docId:t,engine:l,ded:e,remSize:c,notificationsCenter:x,uploadViewModel:s,networkState:i,userAccount:a,upgradeHook:o,notificationsManager:h,selfUpdate:r,clientsState:b,documentLoader:C,textResources:S,config:E,router:w,environment:k,platformEnvironment:O})))))),f.a.startWith(x)),n.createElement(m.a,{key:"tooltip"})))};class ps extends n.Component{constructor(){super(...arguments),this._uploadViewModel=new w.b(this.props.doxApi,this.props.router,this.props.notificationsManager,this.context,this.props.environment,this.props.config),this._documentLoader=new Kt.b(this.props.router,this.props.userAccount.features.denali),this._docId=o.a.create(r.f.of(Number(this.props.docId)))}_renderPageDoc(e){k.a.docLoad.start();const{userAccount:t,networkState:a,upgradeHook:r,doxApi:s,doxWSApi:o,wsConnectivity:c,selfUpdate:d,notificationsManager:p,clientsState:u,textResources:m,config:h,router:g,environment:y,platformEnvironment:v,telemetryContainerId:w}=this.props,_=Fe.createDoxEventsCollector(),O=b.b.promiseToStream(()=>Yt.getDoxInit(e,o,c,_).then(a=>{const n={id:e,rtfMode:S.e.DocumentFeatures.getFormattingMode(e,a.meta.originalFilename,a.meta.createdAt,t.features.denali),template:E.a.fromDocSettings(a.meta.settings)},i=Le(t,y,n);return[i,Yt.create(a,_,h,w,s,c,i,e,t.settings,t.features,y)]}));return this._documentLoader.listenEngineErrors(O),n.createElement(C.c,{key:`base-page-${e}`,title:O.pipe(f.a.switchMap(Object(i.flow)(l.g.chain(l.g.fromEither),l.g.fold(()=>f.a.of("Grammarly"),([e,t])=>t.documentModel.title))),f.a.map(e=>e||"Grammarly"))},n.createElement(n.Fragment,null,n.createElement(ds,{key:"denali-editor-content",docId:`${e}`,userAccount:t,upgradeHook:r,networkState:a,uploadViewModel:this._uploadViewModel,engineStream:O,selfUpdate:d,notificationsManager:p,clientsState:u,documentLoader:this._documentLoader,textResources:m,config:h,router:g,environment:y,platformEnvironment:v}),n.createElement(as,{key:"loader",userAccount:this.props.userAccount,documentLoader:this._documentLoader})))}shouldComponentUpdate(){return!1}componentWillReceiveProps(e){const t=Number(e.docId);this._docId.set(r.f.of(t))}componentWillUnmount(){k.a.docLoad.cleanup(),this._uploadViewModel.dispose(),this._documentLoader.dispose()}render(){return n.createElement(s.a.Fragment,null,this._docId.view(e=>e.filter(e=>!isNaN(e)).fold(()=>n.createElement(C.c,{title:"Grammarly"},n.createElement(ss,{key:"404"})),e=>this._renderPageDoc(`${e}`))))}}ps.contextType=v.a.Context,h.a.setStylesTarget(document.getElementById("typestyleTarget"))},kbau:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a("ERkP"),i=a("rk+4"),r=a("CvSs"),s=a("mEc7"),o=a("nQSW"),l=a("Pe9T"),c=a("il7+");const d=e=>"safari"===e?l.e.ACCEPTED_UPLOAD_MIME_TYPES.join(","):l.e.ACCEPTED_UPLOAD_EXTENSIONS.join(",");class p extends s.b{constructor(){super(...arguments),this._onChange=e=>t=>{t.persist&&t.persist();const a="dataTransfer"in t?t.dataTransfer.files:t.target.files;if(!a||!a.length||r.a.isInProgress(this.props.documentUpload.state.get()))return;const n=this.props.documentUpload.upload({files:a,notify:e||!0,allowMultiple:this.props.multiple||!0,isDragNDrop:!1}).then(()=>{this._inputElement.value=""});void 0!==this.props.onUpload&&this.props.onUpload(n)},this._renderInput=(e,t)=>n.createElement(o.b.Context.Consumer,null,a=>n.createElement(i.a.Context.Consumer,null,i=>n.createElement("input",{ref:e=>{e&&(this._inputElement=e,this._inputElement.onchange=e=>this._onChange(t)(e))},"data-name":"upload-element",type:"file",accept:d(a.info.browser),title:i.tooltipUploadElementInput,multiple:this.props.multiple,className:e?c.upload:c.uploadContainer,onChange:this._onChange(t)})))}componentWillUnmount(){this.props.documentUpload.navigated()}render(){const{hideTooltip:e,showNotification:t}=this.props;return e?n.createElement("div",{className:c.uploadContainer,onClick:()=>setTimeout(()=>this._inputElement.click(),0)},this._renderInput(!0,t)):this._renderInput(!1,t)}}},kfbT:function(e,t,a){"use strict";var n=a("ERkP"),i=a("vOOZ"),r=a("1w6p"),s=a("bZeK"),o=a("nnns"),l=a("tZ26"),c=a("zR/0"),d=a("Y7d8"),p=a("6gXa"),u=a("aqMe");const m=p.a.style({display:"inline-flex",verticalAlign:"middle",marginRight:p.a.rem(.75),alignItems:"center"}),h=p.a.joinClasses([p.a.style({fontWeight:"bold"}),u.base]),g=p.a.style({minHeight:p.a.rem(1.5)}),f=p.a.style({$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:"transparent"}}}),b=p.a.style({display:"flex",justifyContent:"space-between",alignItems:"center"}),y=p.a.style({marginTop:p.a.rem(.35)});var C;a.d(t,"a",(function(){return C})),function(e){let t,a;e.Grid=r.b.Grid.make(({slots:e})=>n.createElement(n.Fragment,null,n.createElement("span",{className:m},e.info),e.switcher)),e.GridWithBulkAccept=r.b.Grid.make(({slots:e})=>n.createElement("div",{className:b},n.createElement("span",{className:y},e.headerContent),e.bulkAccept)),function(e){let t;!function(e){let t;!function(e){e.switchBack="switchBack"}(t=e.Kind||(e.Kind={}))}(t=e.Action||(e.Action={})),e.Component=r.b.Node.make(({state:e,notify:a})=>n.createElement(i.a.Fragment,null,e.pipe(c.a.map(({lensTitle:e})=>n.createElement(n.Fragment,null,n.createElement("span",{className:h},e),n.createElement(o.a.Flat,{name:"switch-back",title:"Back to all suggestions",className:f,onClick:()=>a({kind:t.Kind.switchBack})()},n.createElement(l.d.Close,{className:g})))))))}(t=e.LensFilter||(e.LensFilter={})),function(e){e.Component=r.b.Grid.make(({slots:e})=>n.createElement(n.Fragment,null,n.createElement("span",{className:m},e.counter),e.filter))}(a||(a={})),e.DefaultHeader=r.b.Knot.make(e.Grid,{info:s.a.Component,switcher:d.a.Component}),e.LensInfoComponent=r.b.Knot.make(a.Component,{counter:s.a.Component,filter:t.Component}),e.WithFilterHeader=r.b.Knot.make(e.Grid,{info:e.LensInfoComponent,switcher:d.a.Component}),e.Component=r.b.Union.make("kind",{withFilter:e.WithFilterHeader,withoutFilter:e.DefaultHeader})}(C||(C={}))},kllO:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a("I7vG"),i=a("zR/0"),r=a("lrqh"),s=a("PrA7"),o=a("PBHX");class l{constructor(e,t,a,l){this._model=e,this._modalOperations=t,this._notificationsManager=a,this._telemetry=l,this._log=s.Monitoring.Logging.getLogger("view.model.change.plan"),this.changePlan=()=>(this._telemetry.gnarSpec.changePlanConfirmationSwitchPlanButtonClick(this._model.daysToRenewal,this._model.currentPlanType,this._telemetry.pageId),i.a.from(Object(n.pipe)(this._model.changePlan(),r.l.mapLeft(this._handleChangePlanError),r.l.toPromise)).pipe(i.a.tap(this.close),i.a.switchMap(()=>(this._telemetry.gnarSpec.changePlanFormSuccess(this._model.daysToRenewal,this._model.currentPlanType,this._telemetry.pageId),this._notificationsManager.enqueue("changePlanSuccess",{planName:this.offer.title})))).toPromise()),this._handleChangePlanError=e=>{this._log.error(`Cannot change plan reason: ${e.reason}`,e.originalError);const t=o.a.isErrorLike(e.originalError)&&e.originalError.message;this._telemetry.gnarSpec.changePlanFormFail(this._telemetry.pageId,`reason: ${e.reason}, error: ${t}`),this._notificationsManager.enqueue("error").toPromise()},this.close=()=>{this._modalOperations.onClose(),this._telemetry.gnarSpec.changePlanConfirmationCloseButtonClick(this._model.daysToRenewal,this._model.currentPlanType,this._telemetry.pageId)}}get currentPlan(){return this._model.currentPlan}get offer(){return this._model.offer}get savedPrice(){return this._model.savedPrice}get nextPaymentDate(){return this._model.nextPaymentDate}}},ksOW:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("ERkP"),i=a("2Jhg"),r=a("Ars8"),s=a("cqAx"),o=a("lG5l"),l=a("/kIX");const c=({html:e,title:t,alerts:a,plagiarism:l})=>n.createElement(s.a,{className:r.a.textContent},n.createElement(o.e,{title:t,author:i.e}),n.createElement(d,{alerts:a,plagiarism:l,html:e})),d=({html:e,alerts:t,plagiarism:a})=>{const i=Object(l.b)(e,t,a);return n.createElement("div",{className:r.a.text,dangerouslySetInnerHTML:{__html:i}})}},ksyn:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.group=function(e){return Object.values(e.reduce((e,{lensName:t,isFree:a,cost:n})=>(void 0===e[t]&&(e[t]={lensName:t,free:0,premium:0}),e[t][a?"free":"premium"]+=n,e),{})).sort((e,t)=>t.premium-e.premium)}}(n||(n={}))},kv9a:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a("ERkP"),i=a("vOOZ"),r=a("nnns"),s=a("6gXa"),o=a("zR/0"),l=a("1w6p"),c=a("x98X"),d=a.n(c);const p=l.b.Node.make(({state:e,notify:t})=>n.createElement(i.a.div,null,e.pipe(o.a.map(({title:e})=>n.createElement(r.a.Primary,{name:"draftai-mini",className:g.button,onClick:t("click")},e,n.createElement("i",{className:g.icon},n.createElement("img",{src:d.a,className:g.ring}))))))),u=l.b.Union.asOption(p),m=s.a.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),h=s.a.keyframes({"0%":{opacity:1},"100%":{opacity:0}}),g=s.a.prefixedStylesheet("draftai_minibutton",{button:[{position:"absolute",right:s.a.rem(2)}],icon:[{display:"inline-flex",minHeight:s.a.rem(2),minWidth:s.a.rem(2),verticalAlign:"top"}],ring:[{height:s.a.rem(1.375),width:s.a.rem(1.375),margin:`${s.a.rem(.3125)} ${s.a.rem(.3125)} ${s.a.rem(.3125)} ${s.a.rem(.8125)}`}],fadeIn:[{animation:`${m} 100ms linear forwards`}],fadeOut:[{animation:`${h} 150ms linear forwards`}]}),f=l.b.Transition.make({fadein:g.fadeIn},{fadeout:g.fadeOut}),b=l.b.Animated.make(f,u)},l0MP:function(e,t,a){"use strict";var n,i=a("ERkP"),r=a("vOOZ"),s=a("1w6p"),o=a("uO+M"),l=a("6gXa"),c=a("rk+4"),d=a("cVtq"),p=a("nnns"),u=a("tZ26"),m=a("BugA"),h=a("zR/0"),g=a("aIes"),f=a("OA+g"),b=a("lrqh"),y=a("hoSD"),C=a("wOnQ");(n||(n={})).getReplacementLabelText=Object(f.flow)(b.g.filter(C.j.isRegular),b.g.map(y.e.pick("labels")),b.g.chain(Object(f.flow)(b.a.head,b.g.chain(b.a.head),b.g.map(y.e.pick("text")))),b.g.getOrElse(Object(f.constant)("")));var v,S,E=a("PyeZ"),w=a("fHRq");a.d(t,"a",(function(){return v})),(S=v||(v={})).Component=s.b.Node.make(({notify:e,state:t})=>{const a=i.useContext(c.a.Context);return i.createElement("div",{className:x.container},i.createElement("div",{className:x.header},i.createElement(u.d.Sparkles,{width:20})," ",i.createElement(m.Base,null,a.undoCard.title)),i.createElement(r.a.div,{className:x.buttonsContainer},t.pipe(h.a.map(({alert:t,replacementLabels:r})=>[i.createElement(p.a.Primary,{key:0,name:"inline-undo-confirm",className:x.confirmButton,onClick:g.d.callOnce(e({type:E.b.Type.confirmed,alertId:t.id}))},a.undoCard.confirm),i.createElement(p.a.Primary,{key:1,name:"inline-undo-revert",className:x.undoButton,onClick:g.d.callOnce(e({type:E.b.Type.undone,alertHighlight:{alert:t,highlightIndex:0}}))},a.undoCard.revert(i.createElement("span",{className:x.replacement},i.createElement(d.a,{newText:t.highlightTexts[0],oldText:n.getReplacementLabelText(r)}))))]))))}),S.View=w.a.UI.fromNode(S.Component);const k={padding:l.a.rem(.25)},_={display:"flex",padding:`${l.a.rem(.25)} ${l.a.rem(.75)}`},O={color:o.Color.CoreRed50,fontStyle:"italic"},A={marginRight:l.a.rem(.5),textTransform:"none",letterSpacing:o.Text.BodyLetterSpacing,fontWeight:o.Text.ButtonWeight,fontSize:l.a.rem(o.Text.BodySize),$nest:{"&[data-textpos='left']":{padding:`0 ${l.a.rem(.5)}`},"&[data-textpos='right']":{padding:`0 ${l.a.rem(.5)}`},"&[data-textpos='everywhere']":{padding:`0 ${l.a.rem(.5)}`}}},T={marginRight:0,background:o.Color.CoreNeutral10,color:o.Color.CoreNeutral90,fontWeight:o.Text.BodyWeight,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:o.Color.CoreNeutral10}}},x=l.a.stylesheet({container:[k],header:[{display:"flex",alignItems:"center"}],buttonsContainer:[_],replacement:[O],confirmButton:[A],undoButton:[A,T]})},lG5l:function(e,t,a){"use strict";var n=a("ERkP"),i=a("6gXa"),r=a("0Hf4"),s=a("uO+M"),o=a("Ov/9");const l="report-sections-title-",c={author:`${l}author`,titleSection:`${l}titleSection`,title:`${l}title`,largeTitle:`${l}largeTitle`,mediumTitle:`${l}mediumTitle`,smallTitle:`${l}smallTitle`,titleContainer:`${l}titleContainer`},d={display:"-webkit-box",overflow:"hidden",color:s.Color.CoreNeutral90,wordWrap:"break-word",hyphens:"auto",fontWeight:"bold","-webkit-line-clamp":5,"-webkit-box-orient":"vertical"},p={author:i.a.joinClasses([c.author,r.a.style({color:s.Color.CoreNeutral50,letterSpacing:0,fontSize:i.a.px(15*o.a),lineHeight:i.a.px(24*o.a)})]),titleSection:i.a.joinClasses([c.titleSection,r.a.style({marginBottom:i.a.px(22*o.a),pageBreakInside:"avoid"})]),title:i.a.joinClasses([c.title,r.a.style(d)]),largeTitle:i.a.joinClasses([c.largeTitle,r.a.style(d,{marginBottom:i.a.px(22*o.a),fontSize:i.a.px(28*o.a),lineHeight:i.a.px(40*o.a)})]),mediumTitle:i.a.joinClasses([c.mediumTitle,r.a.style(d,{fontSize:i.a.px(22*o.a),lineHeight:i.a.px(32*o.a)})]),smallTitle:i.a.joinClasses([c.smallTitle,r.a.style(d,{fontSize:i.a.px(18*o.a),lineHeight:i.a.px(32*o.a)})]),titleContainer:i.a.joinClasses([c.titleContainer,r.a.style({overflow:"hidden",textOverflow:"ellipsis"})])},u=({title:e,author:t})=>n.createElement("section",{className:p.titleSection},n.createElement("h1",{className:e.length<100?p.largeTitle:e.length<200?p.mediumTitle:p.smallTitle},e),t.map(e=>n.createElement("p",{className:p.author},"by ",e)).getOrElse(""));var m=a("hoSD"),h=a("3BTE");const g={generalMetricsSection:"report-sections-general_metrics-generalMetricsSection",generalMetricsHeader:"report-sections-general_metrics-generalMetricsHeader",metrics:"report-sections-general_metrics-metrics"},f={generalMetricsSection:i.a.joinClasses([g.generalMetricsSection,r.a.style(h.d,{marginBottom:i.a.px(14*o.a),$nest:{"& table":{width:i.a.percent(100),whiteSpace:"nowrap"},"& tbody":{verticalAlign:"top"}}})]),generalMetricsHeader:i.a.joinClasses([g.generalMetricsHeader,r.a.style(h.c,{margin:`${i.a.px(23*o.a)} 0 ${i.a.px(4*o.a)}`})]),metrics:i.a.joinClasses([g.metrics,r.a.style({color:s.Color.CoreBlue50,letterSpacing:0,fontWeight:"bold",fontSize:i.a.px(15*o.a),lineHeight:i.a.px(23*o.a),$nest:{"& td":{width:i.a.percent(21.875)}}})])},b=({stats:e})=>n.createElement("section",{className:f.generalMetricsSection},n.createElement("h2",{className:f.generalMetricsHeader},"General metrics"),n.createElement("table",null,n.createElement("tbody",null,n.createElement("tr",{className:f.metrics},n.createElement("td",null,e.chars.toLocaleString("en-US")),n.createElement("td",null,e.words.toLocaleString("en-US")),n.createElement("td",null,e.sentences),n.createElement("td",null,m.d.convertTimeToShortString(e.readingTime)),n.createElement("td",null,m.d.convertTimeToShortString(e.speakingTime))),n.createElement("tr",{className:h.a.text},n.createElement("td",null,"characters"),n.createElement("td",null,"words"),n.createElement("td",null,"sentences"),n.createElement("td",null,"reading",n.createElement("br",null),"time"),n.createElement("td",null,"speaking",n.createElement("br",null),"time")))));var y=a("tZ26"),C=a("/i6n");var v;!function(e){e.checkMark="report-components-checkMark"}(v||(v={}));i.a.joinClasses([v.checkMark,r.a.style({display:"inline-block",marginRight:i.a.px(7*o.a),marginBottom:i.a.px(4*o.a),width:i.a.px(16*o.a),height:i.a.px(16*o.a),verticalAlign:"middle"})]);var S;!function(e){e.radialProgressBar="report-components-radial_progress-radialProgressBar",e.radialProgressText="report-components-radial_progress-radialProgressText",e.radialProgressDescription="report-components-radial_progress-radialProgressDescription"}(S||(S={}));const E={radialProgressBar:i.a.joinClasses([S.radialProgressBar,r.a.style({width:i.a.px(71*o.a),height:i.a.px(71*o.a),fontWeight:"bold",transform:`translateX(${i.a.px(-6*o.a)})`,fill:s.Color.CoreNeutral90})]),radialProgressText:i.a.joinClasses([S.radialProgressText,r.a.style({fontSize:"20px"})]),radialProgressDescription:i.a.joinClasses([S.radialProgressDescription,r.a.style({fontWeight:"normal",fontSize:"11px",fill:s.Color.CoreNeutral60})])},w=({percentage:e,colorType:t,iconSize:a,description:i})=>n.createElement(C.a,{percentage:e,colorType:t,iconSize:a,description:i,theme:{radialProgressBar:E.radialProgressBar,radialProgressText:E.radialProgressText,radialProgressDescription:E.radialProgressDescription}}),k={scoreTable:"report-sections-score-scoreTable",issuesSummary:"report-sections-score-issuesSummary",issueCounters:"report-sections-score-issueCounters",issueCounter:"report-sections-score-issueCounter",issuesLeftBlock:"report-sections-score-issuesLeftBlock",total:"report-sections-score-total",score:"report-sections-score-score",writingIssues:"report-sections-score-wrtitingIssues",critical:"report-sections-score-critical",advanced:"report-sections-score-advanced"},_={display:"flex",verticalAlign:"top",alignItems:"center",$nest:{"& span":{paddingLeft:i.a.rem(.8)}}},O={display:"inline-block"},A={scoreTable:i.a.joinClasses([k.scoreTable,r.a.style(h.b,{margin:`${i.a.px(22*o.a)} 0 ${i.a.px(5*o.a)}`,$nest:{"& th":{paddingBottom:i.a.px(7*o.a)},[`& .${k.score}`]:{width:i.a.percent(43.75)},[`& .${k.writingIssues}`]:{width:i.a.percent(56.25)}}})]),issuesSummary:i.a.joinClasses([k.issuesSummary,r.a.style(h.e,_)]),issueCounters:i.a.joinClasses([k.issueCounters,r.a.style(h.e,_,{paddingTop:i.a.px(30*o.a),whiteSpace:"nowrap"})]),issueCounter:i.a.joinClasses([k.issueCounter,r.a.style({letterSpacing:i.a.px(.2*o.a),fontWeight:"bold",fontSize:i.a.px(15*o.a),lineHeight:i.a.px(19*o.a)})]),issuesLeftBlock:i.a.joinClasses([k.issuesLeftBlock,r.a.style(O)]),total:i.a.joinClasses([k.total,r.a.style(O,{width:i.a.percent(38.88),$nest:{[`& .${k.issueCounter}`]:{color:s.Color.CoreNeutral90,letterSpacing:0,fontSize:i.a.px(18*o.a)}}})]),critical:i.a.joinClasses([k.critical,r.a.style(O,{width:i.a.percent(38.88),$nest:{[`& .${k.issueCounter}`]:{color:s.Color.CoreRed40}}})]),advanced:i.a.joinClasses([k.advanced,r.a.style(O,{width:i.a.percent(22.24),$nest:{[`& .${k.issueCounter}`]:{color:s.Color.CoreYellow60}}})]),score:i.a.joinClasses([k.score]),writingIssues:i.a.joinClasses([k.writingIssues])},T=85,x=60;function I(e){return e>T?C.a.ColorType.eggBlue:e>x?C.a.ColorType.dandelion:C.a.ColorType.radicalRed}const M=({issues:e,className:t,text:a})=>n.createElement("div",{className:t},n.createElement("div",{className:A.issueCounter},e||n.createElement(y.d.Checkmark,null)),a),j=({critical:e,advanced:t})=>n.createElement("td",{className:A.issueCounters},n.createElement(M,{className:A.total,issues:e+t,text:"Issues left"}),n.createElement(M,{className:A.critical,issues:e,text:"Critical"}),n.createElement(M,{className:A.advanced,issues:t,text:"Advanced"})),L=({score:e})=>n.createElement("td",null,n.createElement(w,{colorType:I(e),iconSize:C.a.IconSize.pdf,percentage:e}),n.createElement("p",{className:h.a.text},"This text scores better than ",e,"%",n.createElement("br",null),"of all texts checked by Grammarly")),N=()=>n.createElement("section",{className:h.a.section,"data-name":"no-writing-issues"},n.createElement("table",{className:A.scoreTable},n.createElement("thead",{className:h.a.sectionHeader},n.createElement("tr",null,n.createElement("th",{className:A.writingIssues},"Writing Issues"))),n.createElement("tbody",null,n.createElement("tr",null,n.createElement("td",{className:A.issuesSummary},n.createElement(y.d.Checkmark,null),n.createElement("span",null,"No issues found")))))),P=({score:e,critical:t,advanced:a})=>n.createElement("section",{className:h.a.section,"data-name":"section-score-"+e},n.createElement("table",{className:A.scoreTable},n.createElement("thead",{className:h.a.sectionHeader},n.createElement("tr",null,n.createElement("th",{className:A.score},"Score"),n.createElement("th",{className:A.writingIssues},"Writing Issues"))),n.createElement("tbody",null,n.createElement("tr",null,n.createElement(L,{score:e}),n.createElement(j,{critical:t,advanced:a}))))),F=({score:e,critical:t,advanced:a})=>t||a?n.createElement(P,{score:e,critical:t,advanced:a}):n.createElement(N,null);var D=a("rk+4"),R=a("Z0Em"),B=a("uukV");const H={plagiarismSection:"report-sections-plagiarism-plagiarismSection",plagiarismSectionHeader:"report-sections-plagiarism-plagiarismSectionHeader",original:"report-sections-plagiarism-original",plagiarismMark:"report-sections-plagiarism-plagiarismMark",score:"report-sections-plagiarism-score",percent:"report-sections-plagiarism-percent",sources:"report-sections-plagiarism-sources",sourcesCount:"report-sections-plagiarism-sourcesCount",scoreDescription:"report-sections-plagiarism-scoreDescription"},W={plagiarismSection:i.a.joinClasses([H.plagiarismSection,r.a.style(h.d,{pageBreakAfter:"always"})]),plagiarismSectionHeader:i.a.joinClasses([H.plagiarismSectionHeader,r.a.style(h.c,{margin:`${i.a.px(23*o.a)} 0 ${i.a.px(10*o.a)}`})]),original:i.a.joinClasses([H.original,r.a.style(h.e,{display:"flex",alignItems:"center"})]),plagiarismMark:i.a.joinClasses([H.plagiarismMark,r.a.style({marginRight:i.a.rem(.8)})]),score:i.a.joinClasses([H.score,r.a.style(h.e,{width:i.a.percent(21.875)})]),percent:i.a.joinClasses([H.percent,r.a.style({marginTop:0,width:i.a.px(64*o.a),textAlign:"center"})]),sources:i.a.joinClasses([H.sources,r.a.style(h.e,{paddingTop:i.a.px(28*o.a),paddingBottom:0,width:i.a.percent(78.125),verticalAlign:"top"})]),sourcesCount:i.a.joinClasses([H.sourcesCount,r.a.style({color:s.Color.CoreNeutral90,letterSpacing:0,fontWeight:"bold",fontSize:i.a.px(18*o.a),lineHeight:i.a.px(18*o.a)})]),scoreDescription:i.a.joinClasses([H.scoreDescription,r.a.style(h.e,{paddingTop:i.a.px(10*o.a),whiteSpace:"pre-line"})])},$=({plagiarismData:e})=>{const t=n.useContext(D.a.Context);return n.createElement("section",{className:W.plagiarismSection,"data-name":"section-plagiarism-"+(e.state===B.a.PlagiarismCheckingState.CHECKED?e.score:-1)},n.createElement("h2",{className:W.plagiarismSectionHeader},"Plagiarism"),e.state===B.a.PlagiarismCheckingState.NOT_CHECKED?n.createElement("p",{className:h.a.text},"This text hasn’t been checked for plagiarism"):R.a.isMin(e.score)?n.createElement("p",{className:W.original},n.createElement(y.d.Checkmark,{className:W.plagiarismMark}),"This text seems 100% original. Grammarly found no matching text on",n.createElement("br",null),"the Internet or in ProQuest’s databases."):n.createElement("table",{className:h.a.genericTable},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("td",{className:W.score},n.createElement(w,{colorType:C.a.ColorType.lightVisteria,iconSize:C.a.IconSize.pdf,percentage:R.a.prism.reverseGet(e.score),description:"%"})),n.createElement("td",{className:W.sources},n.createElement("div",{className:W.sourcesCount},e.sources),e.sources>1?"sources":"source")),n.createElement("tr",null,n.createElement("td",{colSpan:2,className:W.scoreDescription},t.performance.report.plagiarismDescription(e.score,e.sources))))))},V={writingIssuesSection:"report-sections-writing_issues-writingIssuesSection",writingIssuesTable:"report-sections-writing_issues-writingIssuesTable",issueHeader:"report-sections-writing_issues-issueHeader",categoryAmount:"report-sections-writing_issues-categoryAmount",issueAmount:"report-sections-writing_issues-issueAmount",circle:"report-sections-writing_issues-circle",oval:"report-sections-writing_issues-oval",generalTitle:"report-sections-writing_issues-generalTitle",issueTitle:"report-sections-writing_issues-issueTitle",categoryTitle:"report-sections-writing_issues-categoryTitle",fakeHeader:"report-sections-writing_issues-fakeHeader",progressBarCell:"report-sections-writing_issues-progressBarCell",issueProgressBar:"report-sections-writing_issues-issueProgressBar",issueContent:"report-sections-writing_issues-issueContent",temporaryHeader:"report-sections-writing_issues-temporaryHeader",progressBarBg:"report-sections-writing_issues-progressBarBg"},U={marginLeft:i.a.px(6*o.a),width:i.a.px(20*o.a),height:i.a.px(20*o.a),borderRadius:i.a.px(10*o.a),background:s.Color.CoreRed40,color:s.Color.CoreNeutral0,textAlign:"center",fontSize:i.a.px(12*o.a),lineHeight:i.a.px(20*o.a)},G={paddingLeft:i.a.px(22*o.a),width:i.a.px(293*o.a),color:s.Color.CoreNeutral90,letterSpacing:0,fontSize:i.a.px(14*o.a),lineHeight:i.a.px(24*o.a)},z={writingIssuesSection:i.a.joinClasses([V.writingIssuesSection,r.a.style({borderTop:`1px solid ${s.Color.CoreNeutral30}`})]),writingIssuesTable:i.a.joinClasses([V.writingIssuesSection,r.a.style(h.b,{position:"relative",marginBottom:i.a.px(22*o.a),width:i.a.px(437*o.a),$nest:{"& td, & th":{verticalAlign:"top",pageBreakInside:"avoid"}}})]),issueHeader:i.a.joinClasses([V.issueHeader,r.a.style({pageBreakAfter:"avoid"})]),categoryAmount:i.a.joinClasses([V.categoryAmount,r.a.style({width:i.a.px(32*o.a),fontWeight:"bold",lineHeight:i.a.px(22*o.a)})]),issueAmount:i.a.joinClasses([V.issueAmount,r.a.style({paddingRight:i.a.px(10*o.a),color:s.Color.CoreRed40,textAlign:"right",fontWeight:"bold",fontSize:i.a.px(13*o.a),lineHeight:i.a.px(24*o.a)})]),circle:i.a.joinClasses([V.circle,r.a.style(U)]),oval:i.a.joinClasses([V.oval,r.a.style(U,{width:i.a.px(24*o.a)})]),generalTitle:i.a.joinClasses([V.generalTitle,r.a.style(G)]),issueTitle:i.a.joinClasses([V.issueTitle,r.a.style(G,{textTransform:"lowercase",fontWeight:"normal",$nest:{"&:first-letter":{textTransform:"capitalize"}}})]),categoryTitle:i.a.joinClasses([V.categoryTitle,r.a.style(G,{fontWeight:"bold"})]),fakeHeader:i.a.joinClasses([V.fakeHeader,r.a.style({position:"absolute",top:0,left:0,width:i.a.percent(100),background:s.Color.CoreNeutral0,lineHeight:i.a.px(24*o.a)})]),progressBarCell:i.a.joinClasses([V.progressBarCell,r.a.style({width:i.a.px(112*o.a)})]),issueProgressBar:i.a.joinClasses([V.issueProgressBar,r.a.style({marginTop:i.a.px(12*o.a),minWidth:i.a.px(5*o.a),height:i.a.px(5*o.a),borderRadius:i.a.px(6*o.a),background:`linear-gradient(to right, ${s.Color.CoreRed30}, ${s.Color.CoreRed40})`,boxShadow:`0 0 0 ${i.a.px(3*o.a)} ${s.Color.CoreNeutral0}`})]),issueContent:i.a.joinClasses([V.issueContent,r.a.style({pageBreakInside:"avoid"})]),temporaryHeader:i.a.joinClasses([V.temporaryHeader,r.a.style({pageBreakInside:"avoid"})]),progressBarBg:i.a.joinClasses([V.progressBarBg,r.a.style({width:i.a.percent(100),borderRadius:i.a.px(6*o.a),backgroundColor:s.Color.CoreNeutral10})])},q=({maxIssues:e,count:t})=>{let a=t/e*100;return a>94&&a<98?a=94:a>=98&&(a=100),n.createElement("div",{className:z.progressBarBg},n.createElement("div",{className:z.issueProgressBar,style:{width:`${a}%`}}))},Y=({category:e,categoryIssues:t})=>n.createElement("tr",{className:z.temporaryHeader},n.createElement("th",{className:z.categoryAmount},n.createElement("div",{className:t>99?z.oval:z.circle},t)),n.createElement("th",{className:z.categoryTitle},e),n.createElement("th",{className:z.progressBarCell})),X=({issues:e})=>{let t=0;return n.createElement("section",{className:z.writingIssuesSection},n.createElement("h2",{className:h.a.sectionHeader},"Writing Issues"),Object.entries(e).map(([e,a])=>{let n=0;return{category:e,issues:Object.entries(a).map(([e,a])=>(a>t&&(t=a),n+=a,{name:e,count:a})),issuesCount:n}}).map(({category:e,issuesCount:a,issues:i})=>n.createElement("table",{key:e,className:z.writingIssuesTable},n.createElement("thead",{className:z.issueHeader},n.createElement(Y,{category:e,categoryIssues:a})),n.createElement("tbody",null,i.map(({name:e,count:a})=>n.createElement("tr",{key:e,className:z.issueContent},n.createElement("td",{className:z.issueAmount},a),n.createElement("td",{className:z.issueTitle},e),n.createElement("td",null,n.createElement(q,{maxIssues:t,count:a}))))))))};var K=a("jW1I");a.d(t,"e",(function(){return u})),a.d(t,"b",(function(){return b})),a.d(t,"d",(function(){return F})),a.d(t,"c",(function(){return $})),a.d(t,"f",(function(){return X})),a.d(t,"a",(function(){return K.b}))},lSTv:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("OA+g"),r=a("lrqh"),s=a("Xo/A");!function(e){e.empty=s.a.empty,e.applyDiff=function(e){return Object(i.flow)(s.a.applyDiffLoose(e),r.b.mapLeft(e=>({recovered:e.recovered,rejected:e.rejected})))},e.toCheckingResult=function(e){return s.a.iso.wrap(e)}}(n||(n={}))},"lg/X":function(e,t,a){"use strict";var n,i=a("a5W6"),r=a("OA+g"),s=a("I7vG"),o=a("1aGC"),l=a("24uI"),c=a("+JVj"),d=a("mbuk"),p=a("zR/0"),u=a("gy42"),m=a("lrqh"),h=a("6fbX"),g=a("PrA7"),f=a("o5+S"),b=a("7FJK"),y=a("Wcgi");!function(e){e.rangeMismatch="range_mismatch",e.partialRemoveMismatch="partial_update_mismatch",e.noMarkInDom="no_mark_in_dom"}(n||(n={}));class C{constructor(e,t,a){this.action=e,this.got=t,this.expected=a,this.type=n.rangeMismatch}toString(){return`${this.type} on action '${this.action}', expected: ${this.expected}, got: ${this.got}`}}class v{constructor(e,t,a){this.action=e,this.got=t,this.expected=a,this.type=n.partialRemoveMismatch}toString(){return`${this.type} on action '${this.action}', expected: ${this.expected}, got: ${this.got}`}}class S{constructor(e,t){this.action=e,this.got=t,this.type=n.noMarkInDom}toString(){return`${this.type} on action '${this.action}' for range: ${this.got}`}}function E(e,t){return Object(s.pipe)((a=e,m.b.tryCatchError(()=>{const{deltaMarks:e}=a.ops.reduce(({deltaMarks:e,deltaLength:t},a)=>{if(!l.a.isInsert(a))throw new Error(`Quill marks: insert delta expected ${a}`);const n=l.a.getInsertLength(a),i=Object.keys(a.attributes||{});return 0===i.length?{deltaMarks:e,deltaLength:t+n}:(i.filter(f.l).forEach(a=>{const i=c.b.create(t,t+n);if(e.has(a)){const t=e.get(a);if(t.start>i.end+1)throw new Error(`Corrupted partial range. End part1: ${i.end}, start part2: ${t.start}`);e.set(a,c.b.join(i,t))}else e.set(a,i)}),{deltaMarks:e,deltaLength:t+n})},{deltaMarks:new Map,deltaLength:0});return e})),m.b.map(e=>Object(s.pipe)(t.map(t=>Object(s.pipe)(m.g.fromNullable(e.get(Object(b.d)(t.id))),e=>(function(e,t){return Object(s.pipe)(t,m.g.fold(()=>c.b.isEmpty(e.range)?m.g.none:m.g.some(m.b.right(new S(e.action,e.range))),t=>e.action===d.a.Change.ActionType.remove&&e.removeType===y.a.Change.RemoveType.partial?c.b.contains(e.range,t)?m.g.none:m.g.some(m.b.left(new v(e.action,e.range,t))):c.b.ord.equals(t,e.range)?m.g.none:m.g.some(c.b.contains(t,e.range)?m.b.right(new C(e.action,e.range,t)):m.b.left(new C(e.action,e.range,t)))))})(t,e))),i.array.sequence(m.g.option),m.g.getOrElse(()=>[]))));var a}a.d(t,"a",(function(){return _}));const w=o.import("core/module");class k{constructor(e,t,a,n){this.id=e,this._getParentRect=t,this._getPosition=a,this._getNodeAt=n,this._cachedMarkLength=c.b.size(m.b.getOrElse(()=>c.b.empty)(this.range())),this._cachedNodes=null}fromMarkEvent(e){return Object(s.pipe)(this._getCachedDomNodes(),m.b.chain(m.g.fold(()=>m.b.left(new d.a.CollapsedMarkError("cannot animate collapsed mark")),([e])=>m.b.right(e))),m.b.fold(e=>p.a.of(m.b.left(e)),t=>p.a.fromEvent(t,e).pipe(p.a.map(m.b.right))))}get range(){return this._getPosition(this.id)}getRect(){return Object(s.pipe)(this._getCachedDomNodes(),m.b.chain(m.g.fold(()=>m.b.left(new d.a.CollapsedMarkError("Cannot get rect for collapsed mark")),([e,t])=>Object(s.pipe)(m.f.fromArray(e===t?Array.from(e.getClientRects()):[...Array.from(e.getClientRects()),...Array.from(t.getClientRects())]),m.g.fold(()=>m.b.left(new Error("getClientRects returned nothing ")),e=>m.b.right({rootClientRect:this._getParentRect(),clientRects:e}))))))}_getCachedDomNodes(){return Object(s.pipe)(this.range(),m.b.fold(()=>m.b.right(m.g.none),e=>{const t=c.b.size(e);return null===this._cachedNodes||null===this._cachedNodes[0].parentElement||null===this._cachedNodes[1].parentElement||this._cachedMarkLength!==t?Object(s.pipe)(this._getUnderlines(),m.b.map(m.g.map(([e,a])=>(this._cachedNodes=[e.domNode,a.domNode],this._cachedMarkLength=t,this._cachedNodes)))):m.b.right(m.g.some(this._cachedNodes))}))}_getUnderlines(){return Object(s.pipe)(this.range(),m.b.fold(()=>m.b.right(m.g.none),e=>m.b.tryCatchError(()=>{const{start:t,end:a}=e,n=f.c.findUnderlineUp(this._getNodeAt(t+1)[0]),i=f.c.findUnderlineUp(this._getNodeAt(a)[0]);return Object(h.g)(null!==n&&null!==i,"Cannot find corresponding Marker. Looks like we are trying to show/hide non-existing alert/underline",this.id),m.g.some([n,i])})))}}class _ extends w{constructor(e,t){super(e,t),this.quill=e,this.options=t,this._subs=[],this._marks=new Map,this._log=g.Monitoring.Logging.getLogger("MarksManager",g.Logging.LogLevel.DEBUG),this.activeMarks=new p.a.BehaviorSubject(m.g.none),this.hoveredMarks=new p.a.BehaviorSubject(m.g.none),this.markChangeApplied=new p.a.Subject,this.changeMarks=e=>{if(0===e.length)return d.a.Change.Result.getEmpty();const t=this._getMarksModels(e);return this._marksValidation(e,Object(f.r)(this.quill.editor.delta),this.options.getOpsHistory()),this.quill.updateContents(Object(f.s)(Object(f.n)(e,this._getMarkAttributes)),o.sources.API),e.forEach(e=>e.action===d.a.Change.ActionType.remove&&Object(b.c)(e.id)),this.markChangeApplied.next(e.map(e=>e.id)),t};const a=Object(f.t)(this.quill).pipe(p.a.share());this._subs.push(a.pipe(p.a.filter(f.f)).subscribe(({delta:e})=>{this._unwrapMarkExtension(e.ops)}),a.pipe(p.a.filter(f.g),p.a.filter(({range:e})=>e&&0===e.length),p.a.distinctUntilChanged((e,t)=>e.range.index===t.range.index&&e.range.length===t.range.length),p.a.map(({range:e,source:t})=>t===o.sources.USER?Object(s.pipe)(m.g.fromNullable(e),m.g.chain(e=>{const t=this.quill.getLeaf(e.index)[0],a=this.quill.getLeaf(e.index+1)[0];if(a!==t&&a){const e=Object(s.pipe)(this._getMarksByBlot(t),m.g.fold(()=>[],r.identity)),n=Object(s.pipe)(this._getMarksByBlot(a),m.g.fold(()=>[],r.identity));return m.f.fromNullableArray(e.concat(n))}return this._getMarksByBlot(t)})):m.g.none)).subscribe(this.activeMarks),p.a.combineLatestStatic(p.a.mergeStatic(p.a.fromEvent(this.quill.root,"mouseenter").pipe(p.a.mapTo(!0)),p.a.fromEvent(this.quill.root,"mouseleave").pipe(p.a.mapTo(!1))).pipe(p.a.distinctUntilChanged()),this.options.ongoingSelection).pipe(p.a.switchMap(([e,a])=>a?p.a.of(m.g.none):e?p.a.mergeStatic(t.contentUpdated.pipe(p.a.mapTo(m.g.none)),t.scrollPositionChanged.pipe(p.a.mapTo(m.g.none)),p.a.fromEvent(this.quill.root,"mousemove",{passive:!0}).pipe(p.a.auditTime(50),p.a.map(e=>{const t=document.elementFromPoint(e.clientX,e.clientY);try{const e=o.find(t,!0);return!e||e instanceof o?m.g.none:this._getMarksByBlot(e)}catch(e){return m.g.none}}))):p.a.of(m.g.none).pipe(p.a.delay(200))),p.a.distinctUntilChanged(m.g.getEq({equals:(e,t)=>e.length===t.length&&e.every((e,a)=>t[a]===e)}).equals)).subscribe(this.hoveredMarks))}_getMarksByBlot(e){return Object(s.pipe)(m.g.fromNullable(f.c.getMarksIdsByBlot(e)),m.g.filterMap(Object(r.flow)(i.filterMap(Object(r.flow)(e=>this._marks.get(e),m.g.fromNullable)),m.f.fromArray)))}dispose(){this._subs.forEach(e=>e.unsubscribe()),this._subs=[]}_marksValidation(e,t,a){const n=e.filter(e=>!(e.action!==d.a.Change.ActionType.remove&&e.action!==d.a.Change.ActionType.update||c.c.is(e.meta.range())||Object(f.m)(e.id))).map(e=>({id:e.id,action:e.action,range:c.b.copy(e.meta.range())}));n.length>0&&u.b.Scheduler.inRic(p.a.of(void 0),2e3).pipe(p.a.map(()=>E(t,n)),p.a.first()).subscribe({next:m.b.fold(e=>this._log.warn("Cannot collect marks to validate",e),e=>e.forEach(m.b.fold(e=>{this._log.warn("Got invalid marks",{error:e,opsHistory:a})},e=>this._log.info("Range does not match with mark",{rangeMismatch:e,opsHistory:a}))))})}_getMarksModels(e){return e.reduce((e,t)=>{switch(t.action){case d.a.Change.ActionType.create:const a=new k(t.id,()=>this.quill.container.getBoundingClientRect(),()=>()=>{const e=t.meta.range();return c.b.isEmpty(e)?m.b.left(e):m.b.right(e)},e=>this.quill.getLeaf(e));this._marks.set(a.id,a),Object(b.e)(a.id),e.created.set(a.id,m.b.right(a));break;case d.a.Change.ActionType.update:this._marks.has(t.id)?e.created.set(t.id,m.b.right(this._marks.get(t.id))):e.updated.set(t.id,m.b.left(new h.b("Cannot update unknown mark")));break;case d.a.Change.ActionType.remove:if(!this._marks.has(t.id))throw e.removed.set(t.id,m.b.left(new h.b("Cannot remove unknown mark"))),new h.b("Cannot remove unknown mark");this._marks.delete(t.id),this._ensureActive(t.id),e.removed.set(t.id,m.b.right(void 0));break;default:Object(h.d)(t)}return e},d.a.Change.Result.getEmpty())}_getMarkAttributes(e){const t=Object(b.d)(e.id);switch(e.action){case d.a.Change.ActionType.create:return{[t]:{action:d.a.Change.ActionType.create,id:e.id,classes:e.meta.classes,order:e.meta.order}};case d.a.Change.ActionType.update:return{[t]:{action:d.a.Change.ActionType.update,id:e.id,classes:e.meta.classes,order:e.meta.order}};case d.a.Change.ActionType.remove:return{[t]:!1};default:return Object(h.d)(e)}}_ensureActive(e){Object(s.pipe)(this.activeMarks.getValue(),m.g.filter(t=>t.some(t=>t.id===e)),m.g.map(()=>{this.activeMarks.next(m.g.none)})),Object(s.pipe)(this.hoveredMarks.getValue(),m.g.filter(t=>t.some(t=>t.id===e)),m.g.map(()=>this.hoveredMarks.next(m.g.none)))}_findInsertsToUnwrap(e,t){return this.quill.scroll.path(e+1).reduce((a,[n,i])=>n instanceof b.a?((1===i&&!f.c.hasSameIdSibling(n,f.c.LOOKUP_DIRECTION.left)||i+t-1===n.length()&&!f.c.hasSameIdSibling(n,f.c.LOOKUP_DIRECTION.right))&&a.push(y.a.Change.getRemoveAction({range:()=>c.b.create(e,e+t)},y.a.Change.RemoveType.partial)(n.markId)),a):a,[])}_unwrapMarkExtension(e){const{toRemove:t}=e.reduce(({start:e,toRemove:t},a)=>(Object(f.k)(a)&&t.push(...this._findInsertsToUnwrap(e,l.a.getInsertLength(a))),{start:e+Object(f.d)(a),toRemove:t}),{start:0,toRemove:[]});t.length&&this.quill.updateContents(Object(f.s)(Object(f.n)(t,this._getMarkAttributes)),o.sources.API)}}_.DEFAULTS={}},lqtc:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return d}));var n,i=a("2Jhg"),r=a("LNSM"),s=a("D9EC"),o=a("6fbX"),l=a("+ukg"),c=a("0lfv");!function(e){let t,a;!function(e){e[e.SMALL=0]="SMALL",e[e.LARGE=1]="LARGE"}(t=e.Type||(e.Type={})),function(e){e[e.SHOW_ALL=0]="SHOW_ALL",e[e.HIDE_PREV=1]="HIDE_PREV",e[e.HIDE_NEXT=2]="HIDE_NEXT",e[e.HIDE_BOTH=3]="HIDE_BOTH"}(a=e.NavigationControlDisplay||(e.NavigationControlDisplay={}))}(n||(n={}));class d{constructor(e,t,a,p,u=s.l){this.type=e,this._stepMap=t,this._settings=a,this._modalOperations=p,this._onStart=u,this._steps=this.type===l.e.TourType.migration?d._migrationTour:d._welcomeTour,this._currentStepIndex=r.a.create(i.f.empty()),this._abort=()=>{this._settings.denaliWelcomeTourSeen(),this._modalOperations.onClose(),this._currentStepIndex.set(i.e)},this._getStepForIndex=e=>{const t=this._steps[e],a=this._stepMap[t.stepId];switch(a.type){case n.Type.LARGE:return{stepId:t.stepId,type:a.type,index:e,content:a.renderContent(),description:a.renderDescription(),navigationControl:t.navigationControl||n.NavigationControlDisplay.SHOW_ALL};case n.Type.SMALL:return{stepId:t.stepId,type:a.type,index:e,content:a.renderContent({type:this.type,abort:this._abort,goToNext:this.goToNext,goToPrev:this.goToPrev}),navigationControl:t.navigationControl||n.NavigationControlDisplay.HIDE_BOTH};default:return Object(o.d)(a)}},this.descriptionMeta=this._currentStepIndex.view(c.a.map(e=>({index:e,steps:this._steps.length}))).view(c.a.map(({index:e,steps:t})=>({index:e<1||e>=t-1?e:e-1,totalSteps:t-2}))),this.currentStep=this._currentStepIndex.view(c.a.map(this._getStepForIndex)),this.goToNext=()=>this._currentStepIndex.modify(c.a.flatMap(e=>{const t=e+1;return this._steps[t]?Object(i.h)(t):(this._settings.denaliWelcomeTourSeen(),this._modalOperations.onClose(),i.e)})),this.goToPrev=()=>this._currentStepIndex.modify(c.a.map(e=>{const t=e-1;return this._steps[t]?t:0}))}start(){this._currentStepIndex.set(Object(i.h)(0)),this._onStart()}}d._migrationTour=[{stepId:"welcomeOldUser"},{stepId:"fastApply",navigationControl:n.NavigationControlDisplay.HIDE_PREV},{stepId:"assistant"},{stepId:"checkTypes"},{stepId:"goals"},{stepId:"finalOldUser",navigationControl:n.NavigationControlDisplay.HIDE_NEXT}],d._welcomeTour=[{stepId:"welcomeNewUser"},{stepId:"fastApply",navigationControl:n.NavigationControlDisplay.HIDE_PREV},{stepId:"assistant"},{stepId:"checkTypes"},{stepId:"goals"},{stepId:"finalNewUser",navigationControl:n.NavigationControlDisplay.HIDE_NEXT}]},m5GR:function(e,t,a){e.exports=a.p+"files/eabe5d072b56b38a23c37e1b991c215d/inter-lightitalic.woff2"},mHcA:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return C}));var n,i,r=a("I7vG"),s=a("FiSa"),o=a("SGhz"),l=a("24uI"),c=a("+JVj"),d=a("hoSD"),p=a("lrqh"),u=a("D9EC"),m=a("6fbX"),h=a("PrA7"),g=a("zR/0");function f(e){return null===e||d.f.isBreakWordChar(e.charCodeAt(0))}class b{constructor(e=0,t=!1){this._textLength=e,this._verify=t}pushChanges(e){s.a.isReset(e)?this._textLength=e.length:s.a.isDelta(e)&&(this._verify&&Object(o.g)(e.prevLen,this._textLength,"Incorrect textLength on insert."),this._textLength+=e.length)}get textLength(){return this._textLength}}!function(e){e.create=e=>c.b.compose({id:e})}(n||(n={})),function(e){class t{registerRange(e,t){return n.create(e)(t)}deregisterRange(e){return c.b.empty}findClosestToPosition(e,t){return p.g.none}findRanges(e){return[]}widen(e){return Object(r.pipe)(e,e=>c.b.alterLeft(e,1),p.b.chain(e=>c.b.alterRight(e,1)),p.b.unsafeGet)}narrow(e){return Object(r.pipe)(e,p.g.fromPredicate(e=>c.b.size(e)>1),p.g.map(e=>Object(r.pipe)(e,e=>c.b.alterLeft(e,-1),p.b.chain(e=>c.b.alterRight(e,-1)),p.b.unsafeGet)))}}e.RangeManagerMock=t,e.mock=new t}(i||(i={}));const y=(e,t)=>{let a=0;const n=new Map;if(s.a.isFlush(e))return{affected:[],changed:[]};let i=t.length+1;return s.a.isReset(e)?t.forEach(e=>{e.start=0,e.end=0,n.set(e.meta.id,e)}):e.delta.ops.forEach(e=>{if(l.a.isRetain(e))a+=e.retain;else if(l.a.isInsert(e)){const r=a,s=d.a.lowerBound(t,e=>e.end<r),o=e.insert,l="string"==typeof o?o.length:1;if(a+=l,p.g.isSome(s)){const e="string"==typeof o?o.charAt(o.length-1):null,a="string"==typeof o?o.charAt(0):null;for(let i=s.value;i<t.length;++i){const s=t[i];s.start<r?s.end===r?f(a)||n.set(s.meta.id,s):(n.set(s.meta.id,s),s.end+=l):s.start===s.end&&s.end===r?f(a)||n.set(s.meta.id,s):(s.start!==r||f(e)||n.set(s.meta.id,s),s.start+=l,s.end+=l)}i>s.value&&(i=s.value)}}else if(l.a.isDelete(e)){const r=a,s=d.a.lowerBound(t,e=>e.end<=r);if(p.g.isSome(s)){const a=r+e.delete;for(let i=s.value;i<t.length;++i){const s=t[i];s.start,s.start<a?(n.set(s.meta.id,s),s.start<r?s.end=s.end-Math.min(e.delete,s.end-r):s.end<=a?(s.start=r,s.end=r):(s.start=r,s.end-=e.delete)):(s.start-=e.delete,s.end-=e.delete)}i>s.value&&(i=s.value)}}}),{changed:t.slice(i),affected:Array.from(n.values())}};class C{constructor(e=0,t=!1){this._strictMode=t,this._log=h.Monitoring.Logging.getLogger("position_manager",h.Logging.LogLevel.DEBUG),this._verifyState=this._log.isEnabled(h.Logging.LogLevel.INFO),this._ranges=new Map,this._rangesArray=[],this._rangeChanged=new g.a.Subject,this.rangeChanged=this._rangeChanged,this.widen=e=>(this._validateRange(e),Object(r.pipe)(e,e=>c.b.alterLeft(e,e.start<=0?0:1),p.b.chain(e=>c.b.alterRight(e,e.end>=this._lenCalc.textLength?0:1)),p.b.getOrElse(t=>(this._log.error("TextRange mutation error",t),e)))),this.narrow=e=>(this._validateRange(e),Object(r.pipe)(e,p.g.fromPredicate(e=>c.b.size(e)>1),p.g.map(e=>Object(r.pipe)(e,e=>c.b.alterLeft(e,e.meta.increasedLeft>0?-1:0),p.b.chain(e=>c.b.alterRight(e,e.meta.increasedRight>0?-1:0)),p.b.getOrElse(t=>(this._log.error("TextRange mutation error",t),e)))))),this._lenCalc=new b(e,this._verifyState),Object(u.r)("positions",()=>{this._log.info("PositionManager",this.toString()),this._verifyIsSorted()})}pushChanges(e){this._log.trace("PM Incoming: ",{changes:e,currentLen:this._lenCalc.textLength});try{this._lenCalc.pushChanges(e)}catch(e){if(this._strictMode)throw e;this._log.error("TextLengthCalc check failed",e)}const t=y(e,this._rangesArray);this._verifyState&&this._verifyIsSorted();const a={changed:t.changed,affected:t.affected.map(e=>this.getRange(e.meta.id))};return(a.changed.length>0||a.affected.length>0)&&this._rangeChanged.next(a),a}registerRange(e,t){if(this._ranges.has(e))throw new Error("Range already registered "+e);this._log.trace("Registered range: "+e);const a=n.create(e)(t);return this._validateRange(a),this._ranges.set(e,a),this._rangesArray.push(a),this._rangesArray.sort(c.b.ord.compare),a}_validateRange(e){(e.start<0||e.end>this._lenCalc.textLength)&&this._log.warn("Trying to modify corrupted range start",JSON.stringify(e))}getRange(e){const t=this._ranges.get(e);if(void 0===t)throw new Error("Range is not registered");return t}findRanges(e){return this._rangesArray.filter(e)}deregisterRange(e){this._log.trace("deregisterRange #"+e);const t=this.getRange(e);this._verifyState&&this._verifyIsSorted(),this._ranges.delete(e);try{return Object(r.pipe)(d.a.lowerBound(this._rangesArray,e=>e.end<t.end),p.g.getOrElse(()=>this._rangesArray.length),a=>{let n=a;for(;n<this._rangesArray.length&&this._rangesArray[n].meta.id!==e;)n++;return Object(m.g)(n<this._rangesArray.length&&this._rangesArray[n].meta.id===e,"Range should be present: "+e),this._rangesArray.splice(n,1),t})}catch(t){throw this._log.error("Cannot deregister range "+e,this._rangesArray),t}}findById(e){return p.g.fromNullable(this._ranges.get(e))}findByRange(e){const t=[];return Object(r.pipe)(d.a.lowerBound(this._rangesArray,t=>t.end<e.end),p.g.getOrElse(()=>this._rangesArray.length),a=>{let n=a;for(;n<this._rangesArray.length&&this._rangesArray[n].end===e.end;)this._rangesArray[n].start===e.start&&t.push(this._rangesArray[n]),n++;return t})}findIntersections(e){const t=[];return Object(r.pipe)(d.a.lowerBound(this._rangesArray,t=>t.end<e.start),p.g.getOrElse(()=>this._rangesArray.length),a=>{let n=a;for(;n<this._rangesArray.length;){const a=this._rangesArray[n];a.end>e.start&&e.end>a.start&&t.push(this._rangesArray[n]),n++}return t})}findClosestToPosition(e,t){const a=this._rangesArray.filter(t);return Object(r.pipe)(d.a.lowerBound(a,t=>e>=t.end),p.g.getOrElse(()=>a.length),t=>{const n=p.g.fromNullable(a[t]),i=p.g.fromNullable(a[t-1]);return Object(r.pipe)(n,p.g.map(t=>Object(r.pipe)(i,p.g.fold(()=>t,a=>{return t.start-e<=e-a.end?t:a}))),p.g.orElse(i))})}getRegisteredRanges(){return this._rangesArray}getTextLength(){return this._lenCalc.textLength}_verifyIsSorted(){for(let e=1;e<this._rangesArray.length;++e)this._rangesArray[e-1].end>this._rangesArray[e].end&&(this._log.isEnabled(h.Logging.LogLevel.DEBUG)?this._log.error("Houston, we have a problem: Array is not sorted anymore @ "+e,this._rangesArray):this._log.error("Houston, we have a problem: Array is not sorted anymore"),this._rangesArray.sort(c.b.ord.compare))}toString(){return JSON.stringify(this,void 0,2)}toJSON(){return{textLength:this.getTextLength(),ranges:this._rangesArray}}}},mOEe:function(e,t,a){"use strict";a.d(t,"b",(function(){return y})),a.d(t,"a",(function(){return v}));var n=a("OA+g"),i=a("I7vG"),r=a("LNSM"),s=a("dE97"),o=a("GUi3"),l=a("yA7V"),c=a("jAb7"),d=a("1huE"),p=a("zR/0"),u=a("Z0Em"),m=a("gy42"),h=a("uukV"),g=a("lrqh"),f=a("D9EC"),b=a("PrA7");function y(e){return t=>({id:t.id,categoryHuman:t.toLiteAlert().categoryHuman,lensId:t.lensId,getHighlightRanges:t.getHighlightRanges,content:Object(i.pipe)(t.transform,g.g.filter(()=>!(s.a.isSuperAlert(t)||s.a.isOneGap(t)||s.f.isSimple(t.extraProperties.cardType)||s.f.isFullSentence(t.extraProperties.cardType))),g.g.chain(Object(n.flow)(e,g.b.fold(e=>(b.Monitoring.Logging.getLogger("ReportViewModel.hydration").error("Could not hydrate alert",e),g.g.none),g.g.some))),g.b.fromOption(()=>t.highlightTexts))})}const C=24e3;class v{constructor(e,t,a,n,l,v,S,E,w,k){this._engine=e,this._profile=t,this._features=a,this._notificationsManager=n,this._htmlContent=l,this.reportData=r.a.create(g.g.none),this.downloadStarted=r.a.create(!1),this._log=b.Monitoring.Logging.getLogger("ReportViewModelImpl"),this._subs=new d.a.Keeper,this._requestSent=r.a.create(!1),this._visitLenses=(e,t)=>{e.view("currentLens","id").get()!==o.a.SpecialId.Plagiarism&&this._engine.documentModel.extraSettings.checkedPlagiarism&&t.events.next({type:"switchToLens",id:o.a.SpecialId.Plagiarism,focusFirst:!1,actionSource:s.b.sidebar}),t.events.next({type:"switchToLens",id:o.a.SpecialId.AllAlerts,focusFirst:!1,actionSource:s.b.sidebar})},this.beginDownload=()=>{this.downloadStarted.set(!0)},this._finishDownload=()=>{this.downloadStarted.set(!1),this._requestSent.set(!1),this.reportData.set(g.g.none)},this._getReportModel=e=>p.a.combineLatestStatic(this._engine.documentModel.title.view(e=>e||"Untitled"),this._engine.documentModel.recentDocumentStats.pipe(p.b.compact),this._engine.documentModel.score.pipe(p.b.compact),this._engine.documentModel.counters,p.a.combineLatestStatic(this._features.isPremium,e).pipe(p.a.map(([e,t])=>e?Object(i.pipe)(t,g.g.map(e=>({score:u.a.groupSum.concat(u.a.MAX,u.a.groupSum.inverse(u.a.fromRatio(e.percentile))),sources:e.count,state:h.a.PlagiarismCheckingState.CHECKED,sortedAlerts:this._getFilteredAlerts(s.a.isPlagiarism)})),g.g.alt(()=>g.g.some({state:h.a.PlagiarismCheckingState.NOT_CHECKED}))):g.g.none)),this._htmlContent).pipe(p.a.map(([e,t,a,n,i,r])=>{const o=this._getFilteredAlerts(Object(f.b)(Object(f.b)(s.a.isApplicableAlert,Object(f.m)(s.a.isMuted)),s.a.isRegistered));return g.g.some({sortedAlerts:this._getNonPremiumSortedAlerts(o),dedHTML:r,title:e,author:this._profile.get().fullName,stats:t,score:a.rank,criticalIssues:n.critical,advancedIssues:n.advanced,issues:this._calculateIssues(o),plagiarism:i})})),this._listenDownload=(e,t,a,n)=>{this._subs.push(this.downloadStarted.pipe(p.a.filter(Boolean),p.a.switchMap(()=>p.a.from(this._prepareDownload()).pipe(p.a.timeout(C),p.a.tap(()=>this._visitLenses(e(),a())),p.a.observeOn(p.a.asapScheduler),p.a.switchMap(()=>t().flush()),p.a.switchMapTo(this._getReportModel(n).pipe(p.a.first())),p.a.catchError(e=>(this._log.error("Error while preparing PDF report",e),this._finishDownload(),this._notificationsManager.enqueue("error").pipe(p.a.mapTo(g.g.none))))))).subscribe(m.b.toAtom(this.reportData)))},this._alertDataProcessor=y(v),this._listenDownload(S,E,w,k.view(c.a.lookup(o.a.SpecialId.Plagiarism)))}_prepareDownload(){return this._engine.documentModel.extraSettings.checkedPlagiarism&&!this._features.isFree.get()?this._engine.plagiarismModel.recheck():Promise.resolve()}tryToInterrupt(){this._requestSent.get()||this._finishDownload()}_calculateIssues(e){return e.reduce((e,t)=>{const a=o.a.OutcomeId.fromOutcomeId(t.lensId),n=t.toLiteAlert(),i=n.categoryHuman;return e[a]=e[a]||{},e[a][i]=e[a][i]||0,e[a][i]+=n.cost,e},{})}generateReport(e,t,a){this._requestSent.get()||(this._requestSent.set(!0),this._subs.push(p.a.from(this._engine.documentModel.generateReport(e,{headerTemplate:t,footerTemplate:a,format:"Letter",marginTop:"70px",marginBottom:"70px"})).pipe(p.a.tap(this._finishDownload),p.a.catchError(e=>(this._log.error("generateReport failed",e),this._notificationsManager.enqueue("error")))).subscribe()))}_getNonPremiumSortedAlerts(e){return e.map(this._alertDataProcessor)}_getFilteredAlerts(e){return Object(i.pipe)(this._engine.alertsList.state.get(),l.a.reduce([],(t,a)=>(e(a.alert)&&t.push(a.alert),t)))}dispose(){this._subs.dispose()}}var S;!function(e){e.Mock=class{constructor(){this.downloadStarted=r.a.create(!1),this.beginDownload=n.constVoid,this.tryToInterrupt=n.constVoid,this.generateReport=()=>{throw new Error("Method not implemented.")},this.reportData=r.a.create(g.g.none),this.dedHTML="",this.dispose=n.constVoid}}}(S||(S={}))},mbuk:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("D57K"),r=a("6fbX");!function(e){!function(e){!function(e){e.create="create",e.update="update",e.remove="remove"}(e.ActionType||(e.ActionType={})),function(e){e.getEmpty=function(){return{created:new Map,updated:new Map,removed:new Map}}}(e.Result||(e.Result={}))}(e.Change||(e.Change={}));var t=function(e){function t(t){return e.call(this,t)||this}return Object(i.__extends)(t,e),t}(r.a);e.CollapsedMarkError=t}(n||(n={}))},mvgk:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("D57K"),i=a("ERkP"),r=a("vOOZ"),s=a("9NHN"),o=a("6fbX"),l=a("uO+M"),c=a("6gXa"),d=a("WIwS"),p=a("gy42");function u(e){var{wrapperClassName:t,variation:a,isIdle:s,ref:o}=e,l=Object(n.__rest)(e,["wrapperClassName","variation","isIdle","ref"]);return i.createElement(r.a.span,{role:"spinner",className:t},p.b.mapMaybeObservable(a,e=>i.createElement(u.Svg,Object.assign({},l,{type:e,isIdle:s}))))}!function(e){e.getClassName=e=>t=>{switch(t){case"red":return e.red;case"green":return e.green;case"blue":return e.blue;case"white":return e.white;case"violet":return e.violet;case"yellow":return e.yellow;case"yellowPremium":return e.yellowPremium;case"orange":return e.orange;case"gray":return e.gray;case"cyan":return e.cyan;default:return Object(o.d)(t)}},e.Svg=t=>{const{className:a,size:r=64,strokeWidth:l=2,type:c,name:d,isIdle:p}=t,u=Object(n.__rest)(t,["className","size","strokeWidth","type","name","isIdle"]),m=i.useRef(null),g=i.useRef(null);return i.useEffect(()=>(Object(o.g)(null!==m.current,"groupEl should be already created"),g.current=m.current.animate({transform:["rotate(0deg)","rotate(360deg)"]},{duration:2e3,easing:"linear",fill:"forwards",iterations:1/0}),()=>g.current.cancel()),[]),i.useEffect(()=>{Object(o.g)(null!==g.current,"groupAnimation should be already created");const e=g.current;e.play&&(p?e.pause():"running"!==e.playState&&e.play())}),i.createElement("svg",Object.assign({"data-role":d},Object(s.c)(a),{viewBox:"25 25 50 50",width:r,height:r},u),i.createElement("g",{transform:"translate(50 50)"},i.createElement("g",{ref:m},i.createElement("circle",Object.assign({},Object(s.c)(_.path,p&&h,e.getClassName(_)(c)),{cx:"50",cy:"50",r:"20",fill:"none",transform:"translate(-50 -50)",strokeWidth:l,strokeMiterlimit:"10"})))))}}(u||(u={}));const m=c.a.keyframes({"0%":{strokeDasharray:`1px, ${c.a.px(200)}`,strokeDashoffset:c.a.px(1)},"50%":{strokeDasharray:`89px, ${c.a.px(200)}`,strokeDashoffset:c.a.px(-35)},"100%":{strokeDasharray:`89px, ${c.a.px(200)}`,strokeDashoffset:c.a.px(-124)}}),h="spinnerIdle",g={animation:`${m} 2s ease-in-out infinite`,strokeDasharray:`1px, ${c.a.px(200)}`,strokeDashoffset:c.a.px(1),strokeLinecap:"round",$nest:{[`&.${h}`]:{animationIterationCount:0}}},f={stroke:l.Color.CoreRed50},b={stroke:l.Color.CoreGreen50},y={stroke:l.Color.CoreBlue50},C={stroke:l.Color.CoreNeutral0},v={stroke:d.d},S={stroke:d.n},E={stroke:l.Color.CoreYellow60},w={stroke:d.k},k={stroke:l.Color.CoreCyan50},_=c.a.stylesheet({path:[g],red:[f],green:[b],blue:[y],white:[C],violet:[v],yellow:[S],orange:[E],gray:[w],cyan:[k]})},"n+Au":function(e,t,a){"use strict";a.d(t,"b",(function(){return f})),a.d(t,"a",(function(){return b}));var n=a("ERkP"),i=a("I7vG"),r=a("vOOZ"),s=a("LNSM"),o=a("rk+4"),l=a("nnns"),c=a("tZ26"),d=a("mvgk"),p=a("zR/0"),u=a("BoSw"),m=a("lrqh"),h=a("uYVq"),g=a("vgpX");const f=({reportViewModel:e,state:t})=>n.createElement(r.a.Fragment,null,Object(i.pipe)(e,m.g.map(e=>t.pipe(p.a.map(t=>n.createElement(b,{key:"downloadPdfReportButton",statsLoadingState:t.type,reportViewModel:e})))),m.g.toNullable));class b extends n.Component{constructor(){super(...arguments),this._loadingState=s.a.create(this.props.statsLoadingState),this._buttonState=s.a.combine(this.props.reportViewModel.downloadStarted,this._loadingState,(e,t)=>this._getButtonState(e,t))}_getButtonState(e,t){const a=this.context.performance;return e?{disabled:!0,className:g.preparingForReportLabel,children:n.createElement("span",{key:"stats-load-container",className:g.loaderContainer},a.report.preparingPdfReport,n.createElement(d.a,{size:20,variation:"gray",wrapperClassName:g.downloadPdfSpinner}),n.createElement(h.a,{reportViewModel:this.props.reportViewModel}))}:Object.assign({className:g.downloadPdfReportButton,children:n.createElement("span",{key:"download-button"},n.createElement(c.d.Download,{className:g.downloadIcon}),a.report.downloadPdfReport)},t===u.a.State.Type.READY?{disabled:!1}:{disabled:!0,title:t===u.a.State.Type.SHORT_CONTENT?a.notEnoughTextToGenerateReport:void 0})}componentWillUnmount(){this.props.reportViewModel.tryToInterrupt()}shouldComponentUpdate(){return!1}componentWillReceiveProps({statsLoadingState:e}){this._loadingState.set(e)}render(){return n.createElement(l.a.Caps,{name:"download-pdf-report",title:this._buttonState.view("title"),className:this._buttonState.view("className"),disabled:this._buttonState.view("disabled"),onClick:this.props.reportViewModel.beginDownload},this._buttonState.view("children"))}}b.contextType=o.a.Context},n61d:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){var t=function(){function e(e){this._predicate=e,this._queueMap=new Set,this._queue=[]}return e.prototype.put=function(e){var t,a=this,n=new Set,i=e.reduce((function(e,t){return n.has(t.id)||a._queueMap.has(t.id)||!a._predicate(t)||(n.add(t.id),e.push(t)),e}),[]);(t=this._queue).push.apply(t,i),i.forEach((function(e){var t=e.id;return a._queueMap.add(t)}))},e.prototype.take=function(e){for(var t=0,a=[];t<this._queue.length&&a.length<e;){var n=this._queue[t];this._predicate(n)&&a.push(n),this._queueMap.delete(n.id),t++}return this._queue=this._queue.slice(t),a},e.prototype.order=function(e){this._queue.sort(e)},Object.defineProperty(e.prototype,"length",{get:function(){return this._queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nonEmpty",{get:function(){return this._queue.length>0},enumerable:!1,configurable:!0}),e}();e.LazyPredicateUniq=t}(n||(n={}))},nb6X:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("D57K"),r=a("a5W6"),s=a("5p8x"),o=a("fOOC"),l=a("I7vG"),c=a("gL5k"),d=a("6fbX"),p=a("lrqh");!function(e){var t,a,n;function u(e,a){var n=a.position,r=a.point,s={width:Math.trunc(e.width),height:Math.trunc(e.height)};return c.Rect.validate(t.match((function(){return Object(i.__assign)({top:r.y,right:r.x,bottom:r.y+s.height,left:r.x-s.width},s)}),(function(){return Object(i.__assign)({top:r.y-s.height,right:r.x,bottom:r.y,left:r.x-s.width},s)}),(function(){return Object(i.__assign)({top:r.y-s.height,right:r.x+s.width,bottom:r.y,left:r.x},s)}),(function(){return Object(i.__assign)({top:r.y,right:r.x+s.width,bottom:r.y+s.height,left:r.x},s)}))(n))}function m(t){return e.topLeft(c.Rect.Point.normalize({x:t.left,y:t.top}))}!function(e){e.topLeft="topLeft",e.topRight="topRight",e.bottomRight="bottomRight",e.bottomLeft="bottomLeft"}(t=e.Position||(e.Position={})),function(e){e.match=function(t,a,n,i){return function(r){switch(r){case e.topRight:return t();case e.bottomRight:return a();case e.bottomLeft:return n();case e.topLeft:return i();default:return Object(d.d)(r)}}}}(t=e.Position||(e.Position={})),e.topLeft=function(e){return{position:t.topLeft,point:c.Rect.Point.normalize(e)}},e.topRight=function(e){return{position:t.topRight,point:c.Rect.Point.normalize(e)}},e.bottomRight=function(e){return{position:t.bottomRight,point:c.Rect.Point.normalize(e)}},e.bottomLeft=function(e){return{position:t.bottomLeft,point:c.Rect.Point.normalize(e)}},e.relativeTo=function(e,t){return{position:e.position,point:c.Rect.Point.relativeTo(e.point,t)}},e.empty=e.topLeft(c.Rect.Point.empty),e.toRect=u,e.fromRect=m,e.inRect=function(e,t){var a=t.point;return c.Rect.hasPoint(e,a)},e.toCss=function(e){var a=e.position,n=e.point;return t.match((function(){return{top:n.y,right:n.x}}),(function(){return{right:n.x,bottom:n.y}}),(function(){return{bottom:n.y,left:n.x}}),(function(){return{top:n.y,left:n.x}}))(a)},function(t){t.create=function(e,t){return Object(d.g)(e.point.x===t.point.x||e.point.y===t.point.y,"can not form Zone without a common dimension",(function(){return JSON.stringify({a:e,b:t})})),[e,t]},t.bySide=function(a,n){return c.Rect.Side.match((function(){return t.create(e.bottomLeft({x:Math.ceil(n.left),y:Math.ceil(n.top)}),e.bottomRight({x:Math.floor(n.right),y:Math.ceil(n.top)}))}),(function(){return t.create(e.topLeft({x:Math.floor(n.right),y:Math.ceil(n.top)}),e.bottomLeft({x:Math.floor(n.right),y:Math.floor(n.bottom)}))}),(function(){return t.create(e.topLeft({x:Math.ceil(n.left),y:Math.floor(n.bottom)}),e.topRight({x:Math.floor(n.right),y:Math.floor(n.bottom)}))}),(function(){return t.create(e.topRight({x:Math.ceil(n.left),y:Math.ceil(n.top)}),e.bottomRight({x:Math.ceil(n.left),y:Math.floor(n.bottom)}))}))(a)}}(a=e.Zone||(e.Zone={})),function(e){e.byAxis=function(e,t){return s.g(Object(o.getFirstSemigroup)(),r.array)(c.Rect.Axis.toSides(e).map((function(e){return[e,a.bySide(e,t)]})))}}(e.Variants||(e.Variants={})),function(t){function a(e,t){return Object(l.pipe)(c.Rect.intersection(e,t),p.g.map((function(e){var a=e.width/t.width,n=e.height/t.height,i=(Number.isNaN(a)?0:a/2)+(Number.isNaN(n)?0:n/2);return Object(d.g)(i>=0,"quality can not be negavite: "+i),Object(d.g)(i<=1,"quality can be higher than 1: "+i),i})))}t.empty={quality:0,point:e.empty},t.qualityOfIntersection=a,t.byViewport=function(e,t){return{quality:Object(l.pipe)(a(e,t),p.g.getOrElse((function(){return 0})))+Object(l.pipe)(c.Rect.scale(2,t),p.b.chain(c.Rect.normalize),p.g.fromEither,p.g.chain((function(t){return a(e,t)})),p.g.getOrElse((function(){return 0}))),point:m(t)}},t.fromZone=function(e,a,n){return Object(l.pipe)(r.array.traverse(p.b.either)(n,(function(e){return u(a,e)})),p.b.chain((function(e){var t=e[0],a=e[1];return c.Rect.join(t,a)})),p.b.chain((function(e){return c.Box.placeIntoRect(a,e)})),p.b.map((function(a){return a.map((function(a){return t.byViewport(e,a)}))})))}}(n=e.Qualified||(e.Qualified={})),function(e){e.build=function(e,t,a){return Object(l.pipe)(a,s.i((function(a){return n.fromZone(e,t,a)})))}}(e.QualifiedVariants||(e.QualifiedVariants={})),function(e){var t;!function(e){e[e.left=0]="left",e[e.middle=1]="middle",e[e.right=2]="right",e[e.edges=20]="edges",e[e.any=210]="any"}(t=e.Placement||(e.Placement={})),e.takeBy=function(e,t){return function(a){return Object(l.pipe)(a,s.m({point:n.empty,side:e},(function(a,n,i){return Object(l.pipe)(i,p.b.map((function(i){return i.filter((function(n,i){return t.toString().includes(i.toString())&&e===a})).reduce((function(e,t){return t.quality>e.point.quality?{point:t,side:a}:e}),n)})),p.b.unsafeGet)}))).point}},e.preferBy=function(e,t){return function(a){return Object(l.pipe)(a,s.m({point:n.empty,side:e},(function(a,n,i){return Object(l.pipe)(i,p.b.map((function(i){return i.reduce((function(n,i,r){return i.quality>n.point.quality||i.quality===n.point.quality&&t.toString().includes(r.toString())&&e===a?{point:i,side:a}:n}),n)})),p.b.unsafeGet)}))).point}},e.preferTopMiddle=e.preferBy("top",t.middle),e.preferTopEdges=e.preferBy("top",t.edges)}(e.Selector||(e.Selector={}))}(n||(n={}))},"o5+S":function(e,t,a){"use strict";a.d(t,"n",(function(){return g})),a.d(t,"c",(function(){return b})),a.d(t,"i",(function(){return y})),a.d(t,"d",(function(){return C})),a.d(t,"k",(function(){return v})),a.d(t,"l",(function(){return S})),a.d(t,"m",(function(){return E})),a.d(t,"j",(function(){return k})),a.d(t,"r",(function(){return _})),a.d(t,"s",(function(){return A})),a.d(t,"t",(function(){return T})),a.d(t,"g",(function(){return x})),a.d(t,"e",(function(){return I})),a.d(t,"f",(function(){return M})),a.d(t,"q",(function(){return j})),a.d(t,"o",(function(){return L})),a.d(t,"p",(function(){return N})),a.d(t,"b",(function(){return P})),a.d(t,"a",(function(){return F})),a.d(t,"h",(function(){return D}));var n=a("1aGC"),i=a("4ae2"),r=a("24uI"),s=a("FiSa"),o=a("+JVj"),l=a("bYZB"),c=(a("3s0z"),a("zR/0")),d=a("lrqh"),p=a("hoSD"),u=a("6fbX"),m=a("D9EC"),h=a("7FJK");function g(e,t){return e.filter(e=>{const t=e.meta.range();return t.start!==t.end&&"number"==typeof t.start&&"number"==typeof t.end&&!(-1===t.start&&-1===t.end)}).reduce((e,a)=>{const n=a.meta.range(),r=n.start<0?0:n.start;return e.compose((new i.a).retain(r).retain(n.end-r,t(a)))},new i.a)}const f=e=>e.getAttribute("data-mark-id");var b;function y(e,t){const{index:a,length:n}=t,i=e.slice(0,a).search(/[\w-]+$/),r=e.slice(a).search(/[^-_a-z0-9]/i),s=r+a;if(0===n&&(-1===i||0===r))return d.g.none;if(-1===r){const t=e.slice(i);return d.g.some(o.b.create(i,i+t.length,{value:t}))}return e.slice(s,a+n).match(/[-_a-z0-9]/i)?d.g.none:d.g.some(-1===i?o.b.create(a,s,{value:e.slice(a,s)}):o.b.create(i,s,{value:e.slice(i,s)}))}!function(e){function t(e){let t=e;const a=[];for(;t;)t instanceof h.a&&a.push(t),t=t.parent;return a}let a;e.findUnderlineUp=function(e){return D(e,e=>e instanceof h.a&&!!f(e.domNode))},e.lookupUnderlinesUp=t,function(e){e[e.left=0]="left",e[e.right=1]="right"}(a=e.LOOKUP_DIRECTION||(e.LOOKUP_DIRECTION={})),e.isUnderlineWithId=e=>t=>t instanceof h.a&&t.markId===e;const n=e=>"children"in e,i=e=>n(e)&&e.children.head?[e,...i(e.children.head)]:[e],r=e=>n(e)&&e.children.tail?[e,...r(e.children.tail)]:[e];e.getSiblingBlots=(t,n)=>{const s=n===a.left?t.prev&&r(t.prev):t.next&&i(t.next);return s||(t.parent?e.getSiblingBlots(t.parent,n):[])},e.hasSameIdSibling=(t,a)=>e.getSiblingBlots(t,a).some(e.isUnderlineWithId(t.markId)),e.getMarksIdsByBlot=function(e){return t(e).map(e=>e.markId)}}(b||(b={}));const C=r.a.getOperationOffset,v=e=>r.a.isInsert(e)&&w(e),S=e=>-1!==e.indexOf(h.b),E=e=>-1!==e.indexOf("64656E616E69"),w=e=>!r.a.isDelete(e)&&!!e.attributes&&Object.keys(e.attributes).some(e=>S(e)||E(e));function k(e,t="suffix"){return!(!r.a.isInsert(e)||"string"!=typeof e.insert)&&("suffix"===t?p.f.isBreakWordChar(e.insert.charCodeAt(0)):p.f.isBreakWordChar(e.insert.charCodeAt(e.insert.length-1)))}const _=e=>new i.a(e.ops),O=n.import("delta"),A=e=>new O(e.ops);function T(e){return c.a.fromEvent(e,"editor-change",(e,t,a,n)=>"text-change"===e?{name:"text-change",delta:_(t),oldDelta:_(a),source:n}:{name:"selection-change",range:t,oldRange:a,source:n})}function x(e){return"selection-change"===e.name}const I=e=>t=>"text-change"===t.name&&t.delta.ops.some(t=>!r.a.isRetain(t)||!!t.attributes&&Object.keys(t.attributes).some((t,a,n)=>!S(t)&&!E(t)&&e(t,n)));function M(e){return"text-change"===e.name&&e.delta.ops.some(e=>!r.a.isRetain(e))}function j(){if(window.MutationObserver||a("yNQd"),!document.getSelection){document.getSelection=()=>null}}function L(e){const t=d.b.unsafeGet(e.text),a=new i.a;let n=0;for(let e=0;e<t.length-1;e++)if("\r"===t[e]){const i=e-n;n=e,"\n"!==t[e+1]?(a.retain(i).delete(1).insert("\n"),n++):(a.retain(i).delete(1),n++)}const r=t.length-1,o=r-n;return"\r"===t[r]?a.retain(o).delete(1).insert("\n"):"\n"!==t[r]&&a.retain(o+1).insert("\n"),s.a.delta(a,t.length)}const N=([e,t])=>{if(p.c.Guardians.isBR(e.domNode)){const a=Array.from(e.parent.domNode.childNodes).findIndex(t=>t===e.domNode);return[e.parent.domNode,a+t]}return[e.domNode,t]};var P;!function(e){let t;function a(e){switch(e){case"bold":case"italic":case"underline":case"strike":case"header":case"list":case"indent":return!1;case"link":return!0;default:return Object(u.d)(e)}}function n(e){switch(e){case l.e.Type.italic:return{key:"italic",value:!0};case l.e.Type.bold:return{key:"bold",value:!0};case l.e.Type.orderedList:return{key:"list",value:"ordered"};case l.e.Type.bulletList:return{key:"list",value:"bullet"};case l.e.Type.dashedList:return{key:"list",value:"dashed"};case l.e.Type.underline:return{key:"underline",value:!0};case l.e.Type.link:return{key:"link",value:void 0};case l.e.Type.header1:return{key:"header",value:1};case l.e.Type.header2:return{key:"header",value:2};case l.e.Type.strike:return{key:"strike",value:!0};default:return Object(u.d)(e)}}!function(e){e.is=function(e){switch(e){case"bold":case"italic":case"underline":case"strike":case"header":case"list":case"link":case"indent":return!0;default:return!1}}}(t=e.QuillFormatNames||(e.QuillFormatNames={})),e.mapEditorFormatToQuill=n,e.mapQuillFormatToEditor=Object(m.k)((e,t)=>Object.keys(l.e.Type).find(i=>{const r=n(i);return r.key===e&&(a(e)||r.value===t)}),(e,t)=>a(e)?e:e+"_"+t),e.mapQuillFormatsToDenali=(a,n)=>{const r=a.getFormat(n.start,o.b.size(n));return Object.keys(r).reduce((s,o)=>{if(t.is(o)){const t=r[o],c=e.mapQuillFormatToEditor(o,t);if(c)if(c===l.e.Type.link){const e=i(a,n,t);e.length>0&&(s[l.e.Type.link]=e)}else s[c]=!0}return s},{})};const i=(e,t,a)=>{const n=o.b.size(t);return e.scroll.descendants(e=>"A"===e.domNode.nodeName,n>0?t.start:Math.max(0,t.start-1),n>0?n:1).map(t=>{const n=t.offset(e.scroll);return{url:a,rect:new F(t.domNode,()=>e.container.getBoundingClientRect()),range:o.b.create(n,n+t.length())}})};e.isBlockFormat=e=>{switch(e){case l.e.Type.bold:case l.e.Type.italic:case l.e.Type.strike:case l.e.Type.underline:case l.e.Type.link:return!1;case l.e.Type.header1:case l.e.Type.header2:case l.e.Type.orderedList:case l.e.Type.bulletList:case l.e.Type.dashedList:return!0;default:return Object(u.d)(e)}}}(P||(P={}));class F{constructor(e,t){this._el=e,this._rootClientRect=t}getRect(){return d.b.tryCatchError(()=>{const e=this._rootClientRect();Object(u.g)(!p.c.Rect.eq.equals(e,p.c.Rect.empty),"Got an empty parent rect");const t=Array.from(this._el.getClientRects());return Object(u.g)(!t.every(e=>p.c.Rect.eq.equals(e,p.c.Rect.empty)),"Got an empty Rect"),{rootClientRect:e,clientRects:d.g.unsafeGet(d.f.fromArray(t))}})}}const D=(e,t)=>{let a=e;for(;a;){if(a&&t(a))return a;a=a.parent}return null}},o79T:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a("ERkP"),i=a("uO+M"),r=a("6gXa"),s=a("ps/9"),o=a("nnns");const l=e=>n.createElement(o.a.Animated,Object.assign({},Object(o.c)(e,p.gray))),c={position:"relative",display:"inline-block",overflow:"hidden",outline:"none",border:0,verticalAlign:"middle",whiteSpace:"nowrap",cursor:"default",userSelect:"none",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer"}}},d={overflow:"hidden",padding:`0 ${r.a.rem(.5)}`,borderRadius:r.a.rem(s.s),backgroundColor:i.Color.CoreNeutral60,color:i.Color.CoreNeutral0,textTransform:"none",letterSpacing:r.a.rem(i.Text.ButtonLetterSpacing),fontSize:r.a.rem(i.Text.ButtonSize),lineHeight:r.a.rem(i.Text.ButtonLineHeight),transitionDuration:r.a.seconds(.2),$nest:{"&[data-active='true'] > i[role='icon'] > svg, &:not([data-disabled='true']):hover > i[role='icon'] > svg, &:not([data-disabled='true'])[data-hovered='true'] > i[role='icon'] > svg":{fill:i.Color.CoreNeutral0},"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:i.Color.CoreNeutral50,color:i.Color.CoreNeutral0},"&:not([data-disabled='true'])[data-active='true']":{backgroundColor:i.Color.CoreNeutral50,color:i.Color.CoreNeutral0,$nest:{"&:hover":{backgroundColor:i.Color.CoreNeutral50,color:i.Color.CoreNeutral0}}},"&[data-disabled='true']":{backgroundColor:i.Color.CoreNeutral60,color:i.Color.CoreNeutral50},".groupSticky &":{padding:`0 ${r.a.rem(.5)}`,borderRight:`2px solid ${i.Color.CoreNeutral0}`,borderRadius:0,backgroundColor:i.Color.CoreNeutral20,$nest:{"&:first-child":{borderRadius:`${r.a.rem(s.s)} 0 0 ${r.a.rem(s.s)}`},"&:last-child":{borderRight:"none",borderRadius:`0 ${r.a.rem(s.s)} ${r.a.rem(s.s)} 0`}}}}},p=r.a.stylesheet({button:[c],gray:[c,d]})},oWeJ:function(e,t,a){"use strict";a.d(t,"a",(function(){return N})),a.d(t,"b",(function(){return Z}));var n=a("ERkP"),i=a("I7vG"),r=a("9NHN"),s=a("vOOZ"),o=a("lrqh"),l=a("uO+M"),c=a("6gXa"),d=a("ps/9"),p=a("rk+4"),u=a("GUi3"),m=a("dE97"),h=a("UEGg"),g=a("uqkn"),f=a("IVzZ"),b=a("+w1e"),y=a("E0zP"),C=a("kED/"),v=a("nnns"),S=a("8P+J"),E=a("tZ26"),w=a("BugA"),k=a("aIes"),_=a("zR/0"),O=a("0A/6"),A=a("3bJT"),T=a("5z3N"),x=a("H9T+");const I=({theme:e={},action:t,hasEmoji:a})=>n.createElement("div",Object.assign({},Object(r.c)(e.wrapper,ae.ctaText)),a?n.createElement(S.a,{emojiClassName:Object(r.c)(ae.cardLogo,e.logo).className},t):t),M=({vox:e,theme:t={}})=>n.createElement(n.Fragment,null,Object(i.pipe)(e.logoUrl,o.g.map(e=>n.createElement(T.d,Object.assign({},Object(r.c)(ae.cardLogo,t.logo),{logoUrl:e}))),o.g.toNullable),n.createElement(T.c,Object.assign({vox:e},Object(r.c)(ae.cta,t.label),{isMinimalCard:!1}))),j=e=>[u.a.outcomeTypeMatch(e.lensType)({correctness:A.a.dotCorrectness,clarity:A.a.dotClarity,premium:A.a.dotAdvanced,engagement:A.a.dotEngagement,delivery:A.a.dotDelivery,vox:A.a.dotVox}),ae.cta],L=()=>{const e=n.useContext(p.a.Context);return n.createElement(C.a.Regular,{className:ae.newLabel},e.new)};var N;!function(e){e.SmartPhrases=({card:e,actions:t,useBundleContainer:a=!1,twoLined:i=!1})=>{const s=n.useContext(p.a.Context);return n.useEffect(()=>{"added"!==e.visualState.transition.type&&"rendered"!==e.visualState.transition.type||(t.next({type:b.b.Type.smartPhrasesShowMiniCard,alertId:e.activeAlert.id}),e.activeAlert.hideReplacements&&t.next({type:b.b.Type.smartPhrasesDone,alertId:e.activeAlert.id,source:"auto"}))},[t,e.activeAlert.hideReplacements,e.activeAlert.id,e.visualState.transition.type]),n.createElement(O.a.Mini,Object.assign({},Object(r.c)(i?V.wrapper:Z.wrapper,a?Z.bundleContainer:null),{actions:t,cardId:e.id,getActiveAlert:()=>e.activeAlert,hideActivateButton:!0,hideDot:!0}),n.createElement("div",{className:ae.smartPhrasesContainer},n.createElement(x.r,{className:ae.smartPhrasesTitle,title:e.activeAlert.title,emoji:e.activeAlert.emoji,hideBetaBadge:!0}),n.createElement("div",{className:ae.smartPhrasesIntentDetectedFeedback},n.createElement(v.a.Ghost,{title:s.card.smartPhrases.intentDetectedFeedbackYes,name:`smart-phrases-${e.activeAlert.intent}-intent-detected-feedback-yes`,active:e.activeAlert.intentDetectedFeedback===m.n.SMART_PHRASES_INTENT_DETECTED_ACCURATE,disabled:Boolean(e.activeAlert.intentDetectedFeedback),onClick:a=>{var n,i;t.next({type:b.b.Type.smartPhrasesFeedback,alertId:e.activeAlert.id,cardId:e.id,feedbackType:m.n.SMART_PHRASES_INTENT_DETECTED_ACCURATE}),t.next({type:b.b.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:e.activeAlert},clickPoint:{x:null!==(n=null==a?void 0:a.clientX)&&void 0!==n?n:0,y:null!==(i=null==a?void 0:a.clientY)&&void 0!==i?i:0}})}},n.createElement(E.d.VoteYes,null)),n.createElement(v.a.Ghost,{title:s.card.smartPhrases.intentDetectedFeedbackNo,name:`smart-phrases-${e.activeAlert.intent}-intent-detected-feedback-no`,active:e.activeAlert.intentDetectedFeedback===m.n.SMART_PHRASES_INTENT_DETECTED_INACCURATE,disabled:Boolean(e.activeAlert.intentDetectedFeedback),onClick:k.d.callOnce(()=>{t.next({type:b.b.Type.smartPhrasesFeedback,alertId:e.activeAlert.id,cardId:e.id,feedbackType:m.n.SMART_PHRASES_INTENT_DETECTED_INACCURATE}),t.next({type:b.b.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForDismissSurvey:g.a.isEligibleForDismissSurvey(e)})})},n.createElement(E.d.VoteNo,null)))))},e.Bundle=({card:e,actions:t})=>{const[a]=j(e.activeAlert);return n.createElement(O.a.Mini,Object.assign({},Object(r.c)(Z.wrapper,Z.bundleContainer,Z.dot,a),{actions:t,cardId:e.id,getActiveAlert:()=>e.alerts[0],counter:n.createElement(w.SmallLight,{className:Z.alertsCounter},e.alerts.length)}),n.createElement(s.a.div,{className:Z.miniContainer},n.createElement("div",{className:Z.highlightedText},f.a.bundleTitle(e))))},e.Standard=({card:a,actions:l})=>{const c=n.useContext(p.a.Context);if(y.a.isSmartPhrasesItem(a))return n.createElement(e.SmartPhrases,{card:a,actions:l});{const[e,d]=j(a.activeAlert);return n.createElement(O.a.Mini,Object.assign({},Object(r.c)(Z.wrapper,Z.dot,e),{actions:l,cardId:a.id,getActiveAlert:()=>a.activeAlert}),n.createElement(s.a.div,{className:Z.miniContainer},n.createElement("div",{className:Z.highlightedText},a.activeAlert.highlightTexts[0]),n.createElement("div",{className:Z.middleDot},"·"),Object(i.pipe)(a.activeAlert.extraProperties.vox,o.g.map(e=>n.createElement(M,{vox:e,theme:{logo:Z.cardLogo}})),o.g.getOrElse(()=>n.createElement(n.Fragment,null,n.createElement(I,{hasEmoji:h.a.hasTone(a.activeAlert),action:g.a.miniTitle(a,c),theme:{wrapper:d,logo:Z.cardLogo}}),y.a.isTakeawayItem(a)&&n.createElement(t,{item:a,className:V.takeawayIconStandard})))),Object(i.pipe)(a.renderOptions.isNew,_.a.map(e=>o.g.isSome(e)?n.createElement(L,{key:"new-label"}):null))))}};const t=({item:e,className:t})=>(o.g.contains(m.q.correctlyDetected)(e.activeAlert.takeawayFeedback)||o.g.contains(m.q.correctlyDetectedAndDone)(e.activeAlert.takeawayFeedback))&&e.activeAlert.takeawayIsLikelyToBeRead?n.createElement(E.d.ValidationOk,{width:16,className:t}):n.createElement(E.d.Megaphone,{width:16,className:t});e.TwoLined=({card:a,actions:s})=>{const l=n.useContext(p.a.Context);if(y.a.isSmartPhrasesItem(a))return n.createElement(e.SmartPhrases,{card:a,actions:s,twoLined:!0});{const[e,c]=j(a.activeAlert);return n.createElement(O.a.Mini,Object.assign({},Object(r.c)(V.wrapper,V.dot,e),{actions:s,cardId:a.id,getActiveAlert:()=>a.activeAlert}),n.createElement("div",{className:V.miniContainer},Object(i.pipe)(a.activeAlert.extraProperties.vox,o.g.map(e=>n.createElement(M,{vox:e,theme:{logo:V.cardLogo,label:V.subTitle}})),o.g.getOrElse(()=>n.createElement(n.Fragment,null,n.createElement(I,{hasEmoji:h.a.hasTone(a.activeAlert),action:g.a.miniTitle(a,l),theme:{wrapper:Object(r.c)(c,V.ctaText,V.subTitle).className,logo:V.cardLogo}}),y.a.isTakeawayItem(a)&&n.createElement(t,{item:a,className:V.takeawayIconMini})))),n.createElement("div",{className:D},a.activeAlert.highlightTexts[0])))}}}(N||(N={}));const P="0 1px 8px rgba(109, 117, 141, .18)",F={$nest:{"&:before":{top:c.a.rem(.85),left:0}}},D=c.a.joinClasses(["miniTwoLinedHighlightedText",c.a.style({overflow:"hidden",marginTop:c.a.rem(-.25),color:l.Color.CoreNeutral90,textOverflow:"ellipsis"})]),R={height:c.a.rem(3.25),borderRadius:c.a.rem(d.r),boxShadow:P,$nest:{"&:hover":{boxShadow:P},"&:hover .miniTwoLinedHighlightedText":{borderColor:"transparent"}}},B={top:c.a.rem(.7)},H={fontWeight:c.a.important(400),fontSize:c.a.rem(.75)},W={position:"absolute",left:c.a.rem(.5),minWidth:"initial",minHeight:"initial",background:l.Color.CoreNeutral0},$=Object.assign(Object.assign({},W),{top:c.a.rem(.6)}),V=c.a.stylesheet({dot:[F],wrapper:[R],miniContainer:[{flexDirection:"column"}],cardLogo:[B],subTitle:[H],ctaText:[{overflow:"hidden",textOverflow:"ellipsis"}],takeawayIconMini:[$],takeawayIconStandard:[W]}),U={height:c.a.rem(3),$nest:{"&:hover .highlightText":{borderColor:"transparent"}}},G={$nest:{"&:before":{top:c.a.px(1),bottom:0,left:0}}},z={height:c.a.important(c.a.rem(2.5)),borderRadius:c.a.rem(d.r)},q={color:l.Color.CoreNeutral50,display:"flex",width:c.a.rem(2),height:c.a.percent(100),justifyContent:"center",alignItems:"center"},Y={overflow:"hidden",color:l.Color.CoreNeutral90,textOverflow:"ellipsis"},X={display:"inline-block",padding:`0 ${c.a.rem(.5)}`},K={top:0,bottom:0,left:c.a.rem(.5),margin:"auto"},Z=c.a.stylesheet({wrapper:[U],dot:[G],miniContainer:[{display:"flex",justifyContent:"flex-end",alignItems:"center"}],bundleContainer:[z],alertsCounter:[q],highlightedText:[Y],middleDot:[X],cardLogo:[K]}),Q={color:l.Color.CoreNeutral50,fontWeight:300},J={position:"absolute",left:c.a.rem(.5),width:c.a.rem(1),height:c.a.rem(1),background:l.Color.CoreNeutral0},ee={marginLeft:c.a.rem(.5)},te={color:l.Color.CoreNeutral90,fontSize:c.a.rem(.875),lineHeight:c.a.rem(1.125)},ae=c.a.stylesheet({ctaText:[{$nest:{"&:first-letter":{textTransform:"uppercase"}}}],cta:[Q],cardLogo:[J],newLabel:[ee],smartPhrasesContainer:[{display:"flex",alignItems:"center",justifyContent:"space-between"}],smartPhrasesTitle:[te],smartPhrasesIntentDetectedFeedback:[{display:"flex",alignItems:"center",position:"absolute",right:0}]})},omiJ:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a("ERkP"),i=a("OA+g"),r=a("I7vG"),s=a("GUi3"),o=a("XxrX"),l=a("0mPX"),c=a("cVtq"),d=a("lrqh"),p=a("Ars8"),u=a("cqAx");const m=({alerts:e,plagiarism:t})=>t.length+e.length===0?null:n.createElement(u.a,{className:p.a.alertTableContainer},n.createElement("table",{className:p.a.alertTable},n.createElement("tbody",null,e.map((e,t)=>n.createElement(h,{key:e.id,alert:e,index:t})),t.map((t,a)=>n.createElement(g,{key:t.id,alert:t,index:a+e.length}))))),h=({alert:e,index:t})=>n.createElement("tr",null,n.createElement("td",{className:p.a.alertTableTdIndex},t+1,"."),n.createElement("td",{className:p.a.alertTableTdExample},Object(r.pipe)(e.content,d.b.fold(e=>n.createElement("span",{className:p.a.alertTableHighlightText},b(y(e))),e=>n.createElement(c.f,{replacementsLabels:e,onClick:()=>i.constVoid,layoutDensity:o.a.Density.cozy})))),n.createElement("td",Object.assign({className:p.a.alertTableTd},l.a.renderToHtml(e.categoryHuman))),n.createElement("td",{className:p.a.alertTableTd},s.a.OutcomeId.fromOutcomeId(e.lensId))),g=({alert:e,index:t})=>n.createElement("tr",null,n.createElement("td",{className:p.a.alertTableTdIndex},t+1,"."),n.createElement("td",{className:p.a.alertTableTdExample},n.createElement("span",{className:p.a.alertTableHighlightText},b(y(e.highlightTexts)))),n.createElement("td",{className:p.a.alertTableTdPlagiarismSource},n.createElement(C,{alert:e})),n.createElement("td",{className:p.a.alertTableTd},s.a.OutcomeId.fromOutcomeId(e.lensId))),f=300;function b(e){return e.length>f?n.createElement(n.Fragment,null,e.substr(0,f-1),"…"):n.createElement(n.Fragment,null,e)}function y(e){return 1===e.length?e[0]:Array.from(new Set(e)).join("; ")}const C=({alert:e})=>n.createElement(n.Fragment,null,e.title,"web"===e.plagiarismType.source&&Object(r.pipe)(e.plagiarismType.url,d.g.map(e=>n.createElement("a",{href:e,className:p.a.plagiarismLink},e)),d.g.toNullable))},p7hf:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return m}));var n=a("ERkP"),i=a("LNSM"),r=a("vOOZ"),s=a("9NHN"),o=a("zR/0"),l=a("hoSD"),c=a("ot6E"),d=a("sWIT"),p=a("NIeu");class u extends n.Component{constructor(){super(...arguments),this.isDropZoneVisible=i.a.create(!1),this.isDropZoneHovered=i.a.create(!1),this.timeout=void 0,this.isDocumentUploading=i.a.create(!1),this.onLeave=()=>{this.isDropZoneVisible.set(!1),this.isDropZoneHovered.set(!1)},this.onDragOver=e=>(this.isDropZoneVisible.set(!0),this.isDropZoneHovered.set(this.props.canDrop(e)),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.onLeave(),100),e.stopPropagation(),e.preventDefault(),!1),this.onDrop=e=>{e.preventDefault(),e.stopPropagation(),this.onLeave(),this.props.canDrop(e)&&(this.isDocumentUploading.set(!0),this.props.documentUpload.upload({files:e.dataTransfer.files,notify:!0,allowMultiple:this.props.multiple,isDragNDrop:!0}).then(()=>this.isDocumentUploading.set(!1)))},this._subs=[]}componentDidMount(){this._subs=[o.a.fromEvent(document,"dragover").subscribe(this.onDragOver),o.a.fromEvent(document,"drop").subscribe(this.onDrop)]}componentWillUnmount(){this._unsubscribe(),this.props.documentUpload.navigated()}render(){return this.props.render(this.isDropZoneVisible,this.isDropZoneHovered,this.isDocumentUploading)}_unsubscribe(){this._subs.forEach(e=>e.unsubscribe()),this._subs=[]}}const m=e=>{const t=n.useContext(c.a.Context);return n.createElement(u,Object.assign({},e,{canDrop:e=>l.c.hasParentWithClassName(e.target,p.dropzone),render:(e,a,i)=>n.createElement(r.a.div,Object.assign({},Object(s.c)(p.dropZoneElement,e.pipe(o.a.map(e=>e&&p.active)),a.pipe(o.a.map(e=>e&&p.hovered)),i.pipe(o.a.map(e=>e&&Object(s.c)(p.active,p.hovered).className)))),n.createElement(r.a.div,{className:p.dropzone},i.pipe(o.a.map(e=>e?n.createElement("div",{className:p.progressContainer,key:"uploading"},n.createElement("div",{className:p.message},t.modalUploadingDocumentText),n.createElement(d.a,{size:18})):n.createElement("div",{className:p.dropzoneMiddleblock,key:"dropAFile"},"Drop a text file here")))))}))}},p88l:function(e,t,a){e.exports=a.p+"files/c93e619c54ac4d58a06e3deb35b1724a/inter-italic.woff2"},pKPl:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return d}));var n=a("ERkP"),i=a("vOOZ"),r=a("By/D"),s=a("1gzW"),o=a("zR/0"),l=a("gy42");class c extends n.Component{componentDidMount(){this.props.onMount&&this.props.onMount(this._editorWrapEl)}shouldComponentUpdate(){return!1}render(){const{theme:e={},children:t,onMouseDown:a}=this.props;return n.createElement("div",{className:e.editorContentWrap,onMouseDown:a},n.createElement(i.a.div,{className:e.editorContent,mount:e=>e&&(this._editorWrapEl=e)},t))}}const d=e=>{const t=n.useContext(r.a.Context),{ref:a,onMount:i}=s.a.useElWatcher();s.a.useSubscriptionTo(a.pipe(o.b.compactMap(a=>e.scrollEl.pipe(o.b.compact,o.a.first(),o.a.tap(n=>e.denaliEditor.attach(a,n,t.pipe(o.a.map(e=>e.rect)))))))),s.a.useSubscriptionTo(a.pipe(o.b.compactMap(t=>l.a.getResizeObservable(t).pipe(o.a.map(e=>e.height),o.a.distinctUntilChanged(),o.a.startWith(t.getBoundingClientRect().height),o.a.tap(l.b.toAtom(e.editorHeight)))))),n.useEffect(()=>()=>e.denaliEditor.dispose());const{theme:d={},children:p}=e;return n.createElement(c,{theme:d,onMount:i},p)}},pKiV:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("ERkP"),r=a("vOOZ"),s=a("9NHN"),o=a("D9EC"),l=a("lrqh"),c=a("1w6p"),d=a("6gXa"),p=a("EiZq"),u=a("aIes"),m=a("zR/0");!function(e){let t;function a(e){return c.b.List.make(u.a.Sorted.getFoldableWithIndex(),n(e))}function n(t){return c.b.Knot.make(e.IdProvider,{cell:c.b.Knot.make(p.a.Cell,{item:c.b.Composite.make(e.CardStyleProvider,t)})})}!function(e){e.onMount="onMount"}(t=e.ActionsKind||(e.ActionsKind={})),e.cardListContent=a,e.cardList=function(t){return c.b.Knot.make(e.ScrollableBox,{content:a(t)})},e.ScrollableBox=c.b.Grid.make(({notify:e,view:a,slots:n})=>i.createElement(r.a.div,Object.assign({},Object(s.c)(a("disableUserActions").pipe(m.a.map(Object(o.c)(g.disableUserActions,void 0))),g.scrollContent),{"data-purpose":"scrollable-box",style:{height:a("height")},mount:a=>e({kind:t.onMount,element:l.g.fromNullable(a)})()}),n.content)),e.cell=n,e.CardStyleProvider=c.b.Grid.make(({slots:e})=>i.createElement("div",{className:g.cardWrapper},e.children)),e.IdProvider=c.b.Grid.make(({slots:e,state:t})=>i.createElement(r.a.div,{"data-id":t},e.cell))}(n||(n={}));const h={margin:`${d.a.rem(.5)} 0`,background:"none",userSelect:"none",$nest:{"&:before":{position:"absolute",left:d.a.rem(-.5),width:d.a.rem(.5),height:d.a.percent(100),background:"none",content:"''"}}},g=d.a.stylesheet({scrollContent:[{position:"relative",boxSizing:"content-box"}],disableUserActions:[{pointerEvents:"none"}],cardWrapper:[h]})},pgXu:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("ERkP"),i=a("9NHN"),r=a("uO+M"),s=a("6gXa"),o=a("WIwS"),l=a("ps/9"),c=a("rk+4"),d=a("nnns"),p=a("tZ26");const u=({upgradeAction:e,size:t,title:a,className:r})=>{const s=n.useContext(c.a.Context).goPremium,o=a||s;return n.createElement(d.a,Object.assign({name:"upgrade"},Object(i.c)(r,"big"===t?_.baseBig:"link"===t?_.link:_.baseSmall),{onClick:e}),"link"===t?n.createElement(p.d.PaidLink,{width:14,className:_.linkIcon}):n.createElement(p.d.Paid,{className:"big"===t?_.bigIcon:_.icon}),o)},m={background:r.Color.CoreGreen60,borderRadius:s.a.rem(l.s),boxShadow:`0 2px 5px ${s.a.color(o.l).fade(.35).toRGBA().toString()}`,color:r.Color.CoreNeutral0,textTransform:"uppercase",letterSpacing:s.a.rem(l.h),fontWeight:"bold",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:s.a.color(r.Color.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:s.a.color(r.Color.CoreGreen60).tint(.2).toRGBA().toString()}}},h={padding:`0 ${s.a.rem(3)} 0 ${s.a.rem(2)}`,fontSize:s.a.rem(.8125),lineHeight:s.a.rem(3)},g={padding:`0 ${s.a.rem(2)} 0 ${s.a.rem(.5)}`,fontSize:s.a.rem(.6875),lineHeight:s.a.rem(2)},f={background:r.Color.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:s.a.color(r.Color.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:s.a.color(r.Color.CoreGreen60).tint(.2).toRGBA().toString()}}},b={padding:`0 ${s.a.rem(3)} 0 ${s.a.rem(2)}`,fontSize:s.a.rem(.8125),lineHeight:s.a.rem(3)},y={padding:`0 ${s.a.rem(2)} 0 ${s.a.rem(.5)}`,fontSize:s.a.rem(.6875),lineHeight:s.a.rem(2)},C={fill:r.Color.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{fill:r.Color.CoreNeutral0}}},v={marginRight:s.a.rem(.2)},S={color:r.Color.CoreGreen60,fontSize:s.a.rem(.75),transition:"transform .2s ease-out",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{transform:"scale(1.05)"},"&:not([data-disabled='true']):active":{transition:"none",transform:"scale(1)"}}},E={color:r.Color.CoreGreen60},w={fill:r.Color.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:r.Color.CoreGreen60}}},k={fill:r.Color.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:r.Color.CoreGreen60}}},_=s.a.stylesheet({base:[m],baseBig:[m,h],baseSmall:[m,g],baseUpHookRedesign:[m,f],baseBigUpHookRedesign:[h,f,b],baseSmallUpHookRedesign:[g,f,y],icon:[C],bigIcon:[C,v],link:[S],linkUpHookRedesign:[S,E],linkIconUpHookRedesign:[w],linkIcon:[k]})},q9Ib:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return S}));var n,i=a("OA+g"),r=a("I7vG"),s=a("94k3"),o=a("dE97"),l=a("GUi3"),c=a("yA7V"),d=a("PyeZ"),p=a("zR/0"),u=a("1huE"),m=a("gy42"),h=a("BeBM"),g=a("XCjp"),f=a("lrqh"),b=a("D9EC"),y=a("6fbX"),C=a("PrA7");!function(e){let t,a;!function(e){e.getInlineHighlightFilter=e=>t=>!e.view(h.e.isSidebarOpened).get()||Object(r.pipe)(t,f.g.map(e=>o.a.State.isBulkApplied(e.state)),f.g.getOrElse(i.constTrue))}(t=e.ViewModel||(e.ViewModel={})),function(e){e.highlightMarkByInlineAlert=(e,t,a)=>({id:"highlightMarkByInlineAlert",when:Object(b.p)(l.a.isClosedId,l.a.isMainLens),what:h.e.Effect.Applicator.create(g.a.getHighlightSubscribtion(e,t,a).pipe(p.a.switchMapTo(p.a.NEVER)))})}(a=e.Effects||(e.Effects={}))}(n||(n={}));const v=300;class S{constructor(e,t,a,n,s,l,h,g,b,S,E){this._inlineManager=e,this._marksVM=t,this._closeEvent=a,this._checkingDomain=n,this._alertsReader=s,this._alertsService=l,this._telemetry=h,this._openInlineAlert=g,this._hovered=b,this.hydrate=S,this._inlineHighlightFilter=E,this._subs=new u.a.Keeper,this.events=new p.a.BehaviorSubject({type:d.b.Type.closed}),this._emitCloseWhen=p.b.listenWhenSome(e=>this._checkingDomain.state.pipe(p.a.map(c.a.get(e.id)),p.a.filter(f.g.isNone),p.a.merge(this._closeEvent),p.a.tap(this._inlineManager.closeCards))),this._toMarkAndAlert=Object(i.flow)(f.g.filter(e=>f.g.isSome(this._alertsReader.getInteractable(e.id))),f.g.chain(e=>(Object(y.g)(!o.a.isInPremiumLens(e),"Can't hover plagiarism alert"),Object(r.pipe)(this._marksVM.getMarkByAlert({alert:e,highlightIndex:0}),f.g.map(t=>({mark:t,alert:e,highlightIndex:0})))))),this.state=p.a.combineLatestStatic(this._inlineManager.hoveredMarkAlert.pipe(p.a.filter(this._inlineHighlightFilter),p.a.switchMap(this._emitCloseWhen)),this.events.pipe(p.a.tap(e=>{"unhovered"===e.type&&this._telemetry.gnarSpec.alertUnderlineHover(this._telemetry.pageId,"assistantOff",this._telemetry.pageSessionId)}))).pipe(p.a.debounce(([e,t])=>p.a.timer(f.g.isNone(e)&&"closed"!==t.type?v:0)),p.a.switchMap(([e,t])=>Object(r.pipe)(e,f.g.fold(()=>"hovered"===t.type?p.a.EMPTY:(this._hovered.next(f.g.empty()),p.a.of(f.g.none)),e=>{switch(this._hovered.next(f.g.some(e)),t.type){case d.b.Type.closed:return m.b.delay(f.g.some(e),v);case d.b.Type.opened:case d.b.Type.unhovered:case d.b.Type.hovered:case d.b.Type.addedToDictionary:case d.b.Type.ignored:case d.b.Type.applied:case d.b.Type.confirmed:case d.b.Type.undone:case d.b.Type.mounted:return p.a.of(f.g.some(e));default:return Object(y.d)(t)}}))),p.a.distinctUntilChanged(f.g.getEq(o.d.ordId).equals),p.a.map(this._toMarkAndAlert),p.a.share()),this._log=C.Monitoring.Logging.getLogger("InlineCardViewModelImpl",C.Logging.LogLevel.DEBUG),this._subs.push(this._listenAlertOpenings(),this._listenAlertIgnores(),this._listenAlertAddedToDictionary(),this._listenAlertApplies())}openAlert(e){this._openInlineAlert.next(e)}_listenAlertIgnores(){return this.events.pipe(p.a.filter(d.b.isAlertIgnoreAction)).subscribe(e=>Object(r.pipe)(this._alertsService.applyFeedback(e.alertId,{kind:s.a.AlertFeedbackType.IGNORE,subtype:s.a.FeedbackSubtype.Inline},o.b.text),f.b.fold(e=>this._log.error("error sending alert feedback",e),i.constVoid)))}_listenAlertAddedToDictionary(){return this.events.pipe(p.a.filter(d.b.isAlertAddToDictionaryAction)).subscribe(e=>Object(r.pipe)(this._alertsService.applyFeedback(e.alertId,{kind:s.a.AlertFeedbackType.ADD_TO_DICTIONARY,subtype:s.a.FeedbackSubtype.Inline},o.b.text),f.b.fold(e=>this._log.error("error sending alert feedback",e),i.constVoid)))}_listenAlertOpenings(){return this.events.pipe(p.a.filter(d.b.isAlertOpenAction)).subscribe(e=>{this.openAlert(e.alert)})}_listenAlertApplies(){return this.events.pipe(p.a.filter(d.b.isAlertApplyAction)).subscribe(e=>{Object(r.pipe)(this._alertsService.apply(e.alertId,{alternativeIndex:0,source:o.b.text,feedbackSubtype:s.a.FeedbackSubtype.Inline}),f.b.fold(e=>this._log.error("error applying alert",e),()=>void this._telemetry.gnarSpec.suggestedReplacementButtonClick(this._telemetry.pageId,"defaultCard","assistantOn",this._telemetry.pageSessionId)))})}dispose(){this._subs.dispose()}}!function(e){e.DATA_NAME="inline-card",e.isInlineCard=t=>!!t&&t.getAttribute("data-name")===e.DATA_NAME}(n||(n={}))},qE82:function(e,t,a){"use strict";var n,i=a("fOOC"),r=a("24uI"),s=a("4ae2"),o=a("6fbX"),l=a("lrqh"),c=function(){function e(e){this._delta=e,this._cursor={index:0,operationOffset:0}}return e.prototype.next=function(e){Object(o.g)(e>=0,"Length cannot be negative");var t=this._cursor.index;if(t>=this._delta.ops.length)return l.g.none;for(var a=r.a.operationLength(this._delta.ops[t]),n=e-(a-this._cursor.operationOffset);n>0&&t<this._delta.ops.length-1;)t++,n-=a=r.a.operationLength(this._delta.ops[t]);return n>0?(this._cursor={index:t+1,operationOffset:0},l.g.none):(this._cursor={index:t,operationOffset:a+n},l.g.some(this._delta.ops[t]))},e}();a.d(t,"a",(function(){return n})),function(e){const t=l.g.getMonoid(Object(i.getObjectSemigroup)());e.getEnrichedWithFormattingDelta=e=>a=>{const n=new c(e);return a.ops.reduce(([e,a],i)=>{const s=n.next(a);return r.a.isInsert(i)?[e.insert(i.insert,l.g.toUndefined(t.concat(l.g.chain(r.a.getAttrs)(s),r.a.getAttrs(i)))),0]:[e.push(i),r.a.operationLength(i)]},[new s.a,1])[0]}}(n||(n={}))},qzE2:function(e,t,a){e.exports=a.p+"files/da83100fc42a3c359ae8e3038a4a5e90/inter-regular.woff"},rTXf:function(e,t,a){"use strict";var n=a("ERkP"),i=a("I7vG"),r=a("vOOZ"),s=a("LNSM"),o=a("9NHN"),l=a("lrqh"),c=a("eTAx"),d=a("rk+4"),p=a("nnns"),u=a("uZT5"),m=a("8P+J"),h=a("D6Vf"),g=a("BugA"),f=a("pgXu"),b=a("1gzW"),y=a("zR/0"),C=a("OA+g"),v=a("uO+M"),S=a("6gXa");const E={display:"flex",flexDirection:"column",maxHeight:"90vh",width:S.a.rem(41.5),backgroundColor:v.Color.CoreNeutral0,textAlign:"left"},w={padding:`${S.a.rem(1.125)} ${S.a.rem(2)} ${S.a.rem(1)}`,paddingBottom:S.a.rem(1)},k={paddingBottom:0,backgroundColor:v.Color.CoreNeutral0,flexShrink:0,$nest:{"&:after":{position:"absolute",bottom:0,display:"block",width:`calc(100% - ${S.a.rem(4)})`,height:S.a.px(1),background:v.Color.CoreNeutral20,content:"''"}}},_={display:"block",margin:`${S.a.rem(.8125)} 0`,color:v.Color.CoreNeutral90,fontWeight:v.Text.SmallLightWeight,lineHeight:S.a.rem(1.5)},O={minHeight:S.a.rem(4)},A={display:"flex",$nest:{"&:not(:last-child)":{marginBottom:S.a.rem(1.25),borderBottom:`1px solid ${v.Color.CoreNeutral20}`}}},T={marginBottom:S.a.rem(-.5),maxWidth:S.a.rem(27),justifyContent:"initial",flexWrap:"wrap",$nest:{"& > .setGoalsToneButton":{margin:`0 0 ${S.a.rem(.5)}`,marginLeft:S.a.important(0),$nest:{"&:not(:last-child)":{marginRight:S.a.rem(.5)}}}}},x={width:S.a.rem(7),textTransform:"capitalize",lineHeight:S.a.rem(2)},I={marginTop:S.a.rem(.8125)},M={margin:`0 0 ${S.a.rem(1.5)} ${S.a.rem(7)}`},j={margin:`0 0 ${S.a.rem(1.5)} ${S.a.rem(7)}`},L={display:"flex",width:S.a.percent(100),justifyContent:"space-between"},N={color:v.Color.CoreNeutral90,fontWeight:300,fontSize:S.a.rem(.8125)},P=S.a.stylesheet({wrapper:[E],modalBody:[w],modalHeader:[k],itemDescription:[_],modalFooter:[O],row:[A],toneButtons:[T],rowHeader:[x],extraContent:[I],title:[M],description:[j],image:[{position:"absolute"}],footerWrapper:[L],checkboxText:[N]}),F=({name:e,items:t,sticky:a,theme:i={},extraContent:r,children:s})=>n.createElement("div",{className:P.row},n.createElement("div",null,n.createElement(g.H3,{className:P.rowHeader},e),r),n.createElement("div",null,n.createElement(p.a.Group,{sticky:a,className:i.buttonsGroup},t.map(t=>n.createElement(p.a.White,Object.assign({className:i.button,name:`context-${e}-${t.key}`},t)))),n.createElement(g.Small,{className:P.itemDescription},s))),D=({items:e,current:t,shouldDisable:a,itemTitle:n=C.identity})=>({sticky:!0,items:e.map(e=>({key:e,active:t.view(t=>t===e),onClick:()=>t.set(e),disabled:a&&a(e),children:n(e)}))}),R=({items:e,current:t},a)=>({items:e.map(e=>({key:e,active:t.view(t=>Object(i.pipe)(t,l.g.exists(t=>t.has(e)))),onClick:()=>t.modify(t=>{const a=Object(i.pipe)(t,l.g.fold(()=>new Set,e=>new Set(e)));return a.has(e)?a.delete(e):a.add(e),l.g.some(a)}),children:a(e)}))});a.d(t,"a",(function(){return B}));const B=({blocks:e,features:t,showOnLoad:a,close:i,upgrade:r,reset:s,showOnLoadChanged:o})=>{const l=n.useContext(c.a.Context);return n.createElement(h.a,{className:P.wrapper},n.createElement(h.a.Header,{className:P.modalHeader},n.createElement(W,null)),n.createElement(h.a.Body,{name:"goalsBody",className:P.modalBody},n.createElement(H,{features:t,upgradeAction:r,blocks:e})),n.createElement(h.a.Footer,{className:P.modalFooter},n.createElement($,{supportsSetGoalsLoader:!t.demoMode&&l.has(c.a.Flag.supportsSetGoalsLoader),onDone:i,reset:s,showOnLoad:a,showOnLoadChanged:o})))},H=({blocks:e,features:t,upgradeAction:a})=>{const s=n.useContext(d.a.Context).goals,{audience:o,formality:c,domain:p,tone:u,intent:h}=e;return n.createElement(n.Fragment,null,n.createElement(F,Object.assign({name:"audience"},D(o)),o.current.view(t=>t&&s.sections.audience[t](Object(i.pipe)(e.audience.default,l.g.exists(e=>e===t))))),n.createElement(F,Object.assign({name:"formality"},D(c)),c.current.view(e=>e?s.sections.formality[e]:"")),n.createElement(F,Object.assign({name:"domain"},D(Object.assign(Object.assign({},p),{itemTitle:e=>"mail"===e?"email":e})),{extraContent:n.createElement(r.a.div,{className:P.extraContent},t.isFree?n.createElement(f.a,{size:"link",upgradeAction:a}):null)}),p.current.view(e=>t.isFree?s.sections.domain.free:e?s.sections.domain[e]:"")),n.createElement(F,Object.assign({name:"tone",theme:{buttonsGroup:P.toneButtons,button:"setGoalsToneButton"}},R(u,e=>n.createElement(m.a,{key:e},s.sections.tone.options[e]))),s.sections.tone.experimental),n.createElement(F,Object.assign({name:"intent"},R(h,e=>s.sections.intent.options[e])),s.sections.intent.experimental))},W=()=>{const e=n.useContext(d.a.Context).goals;return n.createElement(n.Fragment,null,n.createElement(V,null),n.createElement(g.H1,{className:P.title},e.title),n.createElement(g.Base,{className:P.description},e.header))},$=({supportsSetGoalsLoader:e,showOnLoad:t,showOnLoadChanged:a,reset:i,onDone:r})=>{const l=n.useContext(d.a.Context),c=s.a.create(t);return b.a.useSubscriptionTo(c.pipe(y.a.tap(a))),n.createElement("div",Object.assign({},Object(o.c)(e&&P.footerWrapper)),e&&n.createElement(u.a,{checked:c,name:"set-goals"},n.createElement(g.Small,{className:P.checkboxText},l.goals.footer.showModalOnStart)),n.createElement(p.a.Group,null,n.createElement(p.a.Ghost,{name:"reset",onClick:i},l.goals.footer.reset),n.createElement(p.a.Primary,{name:"closeSetContext",onClick:r},l.done)))},V=()=>n.createElement("svg",{className:P.image,width:"69",height:"80",viewBox:"0 0 69 80"},n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M28.935 70C12.955 70 0 57.045 0 41.065 0 25.085 12.955 12.13 28.935 12.13c15.98 0 28.936 12.954 28.936 28.935C57.87 57.045 44.917 70 28.936 70zm0-12.242c9.22 0 16.694-7.474 16.694-16.693 0-9.22-7.475-16.694-16.695-16.694s-16.693 7.475-16.693 16.695 7.474 16.693 16.693 16.693z",fill:"#4C7AF1"}),n.createElement("path",{d:"M28.935 57.758c-9.22 0-16.693-7.474-16.693-16.693 0-9.22 7.474-16.694 16.693-16.694 9.22 0 16.694 7.475 16.694 16.695s-7.475 16.693-16.695 16.693zm0-11.13a5.564 5.564 0 1 0 0-11.128 5.565 5.565 0 0 0 .001 11.129z",fill:"#BCDBFB"}),n.createElement("circle",{fill:"#FFF",cx:"28.935",cy:"41.065",r:"5.565"}),n.createElement("path",{stroke:"#4C7AF1",strokeLinecap:"round",strokeWidth:"1.5",d:"M15.024 68.016L9.46 78.5m32.274-10.484L47.298 78.5"}),n.createElement("path",{d:"M61.96 13.367a.65.65 0 0 1 .645.656.65.65 0 0 1-.646.655h-6.075L29.35 41.7a.636.636 0 0 1-.913 0 .663.663 0 0 1 0-.927L54.972 13.75V7.59a.65.65 0 0 1 .645-.656.65.65 0 0 1 .646.656v5.777h5.696zm3.17-3.215a.65.65 0 0 1 .646.655.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V4.372a.65.65 0 0 1 .646-.655.65.65 0 0 1 .644.655v5.78h5.696zm3.17-3.218a.65.65 0 0 1 .647.656.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V1.155A.65.65 0 0 1 61.96.5a.65.65 0 0 1 .645.655v5.78H68.3z",fill:"#4C7AF1"}),n.createElement("path",{d:"M49.267 20.486l-8.586 8.757",stroke:"#FFF",strokeWidth:"1.3"})))},rWEN:function(e,t,a){"use strict";var n,i=a("8Js9"),r=a("OA+g"),s=a("I7vG"),o=a("LNSM"),l=a("94k3"),c=a("hoSD"),d=a("lrqh"),p=a("tn8Q"),u=a("D9EC"),m=a("6fbX"),h=a("PrA7"),g=a("yA7V"),f=a("Xo/A"),b=a("lSTv"),y=a("7b34"),C=a("QxMx"),v=a("+X10"),S=a("QshB"),E=a("zR/0");!function(e){function t(t){return r=>Object(s.pipe)(t,y.a.foldMap(e.group)(n,i,a),Object(C.a)(e.group.concat)(r))}e.group=S.b.group,e.eq=S.b.eq,e.applyDiff=t,e.fromAlerts=function(e){const a=h.Monitoring.Logging.getLogger("DocumentCounters");return e.pipe(E.a.scan((e,a)=>{return{alerts:a,counters:t(g.a.Diff.toRegistered(g.a.diff(e.alerts,a)))(e.counters)}},{alerts:g.a.empty,counters:S.b.group.empty}),E.a.tap(({counters:e})=>{S.b.isValid(e)||a.error("Counters can not be below zero",S.b.show.show(e))}),E.a.map(({counters:e})=>e))};const a=e=>v.a.toUnmutedOnly(e.counters),n=Object(r.flow)(a,e.group.inverse),i=(t,i)=>e.group.concat(a(i),n(t))}(n||(n={}));var w,k=a("93Qa"),_=a("5p8x"),O=a("GUi3"),A=a("Z0Em");!function(e){function t(e){const{left:t,right:n}=Object(s.pipe)(e,_.d(d.g.fromNullable),_.e(e=>"GeneralScore"!==e),_.j((e,t)=>({lensId:a(e),score:A.b.fromNumber(t)})),_.k(Object(k.sequenceS)(d.b.either))),i=Object(s.pipe)(n,_.i(({lensId:e,score:t})=>Object(r.tuple)(e,t)),e=>new Map(Object.values(e)));return Object(s.pipe)(d.m.fromOptions(d.g.fromPredicate(Object(r.not)(_.h))(t),d.g.fromPredicate(Object(r.not)(d.e.isEmpty))(i)),d.g.getOrElse(()=>d.m.right(new Map)))}function a(e){return e===O.a.SpecialId.Plagiarism?d.b.right(O.a.SpecialId.Plagiarism):O.a.OutcomeId.toOutcomeId(e)}e.empty=new Map,e.eq=d.e.getEq(O.a.Id.ord,A.b.ord),e.fromCapi=function(e){return e.pipe(E.a.filter(Object(u.p)(l.a.CAPIEvent.is("finish"),l.a.CAPIEvent.is("async_check_finished"),l.a.CAPIEvent.is("feedback_ack"))),E.a.map(e=>e.outcomeScores),E.a.filter(u.h),E.a.map(t),E.a.tap(d.m.mapLeft(e=>{_.h(e)||h.Monitoring.Logging.getLogger("LensesScores").error("failed to parse capi scores",e)})),E.a.filter(Object(u.p)(d.m.isBoth,d.m.isRight)),E.a.map(e=>e.right))}}(w||(w={}));var T=a("aIes"),x=a("gy42"),I=a("kMag"),M=a("7qGb"),j=a("LTbp"),L=a("U75S"),N=a("FiSa"),P=a("4ae2"),F=a("WOlp"),D=a("SGhz"),R=a("dcBR"),B=a("v0pb"),H=a("qE82"),W=a("24uI"),$=a("dE97");function V(e){switch(e._raw.point){case"AllCapsBoldification":return l.a.AlternativeReversed.fromAlternativeBoldified;case"Lists":return l.a.AlternativeReversed.fromAlternativeListified;default:return l.a.AlternativeReversed.fromAlternative}}const U=Object(u.k)(h.Monitoring.Logging.getLogger),G=Object(r.flow)(L.ub(({beingAppliedAlert:e,undo:t,reversedAlternative:a})=>j.p(()=>{const n={action:l.a.AlertFeedbackType.ACCEPTED,commit:()=>U("AlertManager.ops").debug(`_applyTransformJson(${e.toLiteString()}):commit()`),undo:t,reversedAlternative:e.registerReversedAlternative(a)},i=e.switchToApplied(n),r=$.t.create(i.state.from,B.a.create(e));return[i.id,r]},d.b.toError)),j.m);function z(e){const t=l.a.Alternative.compose(e.alternatives.map(i.c(e=>e.alternative)),e.currentFullText);return Object(s.pipe)(W.a.nonEmpty(t.composedDelta)?d.g.some(t):d.g.none,d.g.map(({composedDelta:t,reversedAlternatives:a})=>({changeWithFormatting:Object(s.pipe)(t,H.a.getEnrichedWithFormattingDelta(e.currentFullText),t=>N.a.delta(t,e.originalTextLength)),correctRevAlternatives:Object(s.pipe)(a,p.a.tapFailure(({rejected:e})=>h.Monitoring.Logging.getLogger("AlertManager.ops").error("failed to generate reverse alternative",e)),p.a.foldSuccess(d.a.map(t=>({reversedAlternative:t.reversedAlternative,alternative:i.b(e.alternatives[t.alternativeIndex]),alert:e.alerts[t.alternativeIndex].alert}))))})))}var q;!function(e){const t=Object(r.flow)((e,t)=>d.b.tryCatch(()=>$.t.create(e,t),d.b.toError),d.b.map(e=>Object(r.tuple)(e[0].id,e)),M.of);e.prepare=M.chain(Object(r.tupled)(t)),e.prepareFromAlert=j.d(e=>t(e.state.from,B.a.create(e)))}(q||(q={}));function Y(e,t){return d.b.fromPredicate(e,e=>{const a=new m.b(t,e.toString());return h.Monitoring.Logging.getLogger("AlertManager.ops").error(t,a),a})}const X=e=>Y($.a.isNotDisposed,e);function K(e){return j.d(d.g.fold(Object(r.constant)(j.k(void 0)),e))}class Z{constructor(e,t,a,n){this._positionManager=e,this._getContent=t,this._capiClient=a,this._alertsRepo=n,this._log=h.Monitoring.Logging.getLogger("AlertManager.ops"),this._sendUpdate=e=>j.p(()=>this.events.next({updated:new Map(e)}),d.b.toError),this._sendSingleUpdate=j.d(e=>this._sendUpdate([e])),this._flushChanges=j.p(()=>this.changes.next(N.a.flush()),d.b.toError),this.changes=new E.a.Subject,this.events=new E.a.Subject,this.undoApplied=(e,t)=>{return Object(s.pipe)(()=>this._positionManager.getTextLength(),M.chain(t=>{const n={alertsToUpdate:[],reversedDelta:new P.a,undo:r.constVoid},i=e.filter($.a.isApplied).reduce((e,t)=>{const n=t.state.undoable;return $.s.isWithAlternative(n)?Object(s.pipe)(n.reversedAlternative,d.g.fold(()=>{F.w.withTransformJson(t._raw)&&this._log.error("No reversed delta registered for alert",{alert:t.toLiteString()}),a(e,t)},Object(r.flow)(e=>e(),d.b.map(e=>e.delta),d.b.fold(e=>{this._log.error("Could not retrieve reversed delta",{e,alert:t.toLiteString()})},n=>{a(e,t),Object(s.pipe)(n,l.a.Alternative.fromRawDelta,t=>t.rebase(e.reversedDelta),d.g.fold(()=>{e.reversedDelta=e.reversedDelta.compose(n)},({delta:t})=>{e.reversedDelta=e.reversedDelta.compose(t)}))})))):a(e,t),e},n);return i.alertsToUpdate.length>0?Object(s.pipe)(j.p(()=>{const e=Object(s.pipe)(i.reversedDelta,H.a.getEnrichedWithFormattingDelta(this._getContent()));this.changes.next(N.a.delta(e,t))},d.b.toError),j.a(this._flushChanges),j.a(Object(s.pipe)(i.undo,M.map(d.b.right))),j.b(Object(s.pipe)(i.alertsToUpdate,j.m,j.d(this._sendUpdate)))):j.k(void 0)}));function a(e,a){e.undo=Object(r.flow)(e.undo,a.state.undoable.undo),e.alertsToUpdate.push(q.prepare(()=>[B.a.create(a),B.a.create(a.changeState(t===$.a.State.Applied.Method.ByCard?$.a.State.init:$.a.State.Removed.create($.a.State.Removed.Reason.bulkAcceptUserResponse)))]))}},this._dismissBatch=(e,t)=>Object(s.pipe)(this._flushChanges,j.b(Object(s.pipe)(e,d.a.map(Object(r.flow)(M.of,M.map(X("Cannot send feedback for already disposed")),j.d(e=>this._applyFeedbackToAlert(e,l.a.AlertFeedbackType.IGNORE,$.b.sidebar,this._commitFeedbackToCapi(e,{kind:l.a.AlertFeedbackType.IGNORE,subtype:t}))),q.prepareFromAlert)),j.m,j.d(this._sendUpdate)))),this._applyAlert=({alert:e,replacementText:t,source:a,method:n,feedbackSubtype:i})=>Object(s.pipe)(e,Y($.a.isRegistered,"can not apply alert in non registered state"),M.of,j.a(this._flushChanges),j.d(e=>this._switchToBeingApplied(e,a,n)),j.d(({beingAppliedAlert:e,undo:a})=>Object(s.pipe)(e.getReplaceEither.bind(e),j.n,j.c(()=>new Error("Cannot apply alert with tJSON"),n=>{this._log.debug(`_applyAlert(${e.toLiteString()}, rrange: ${n})`);const r=n.start,s=n.end-n.start,o=(new P.a).retain(r).delete(t.length).insert(e.replaceText);return{alert:e,undo:a,reverseDelta:o,replacementText:t,removeLen:s,feedbackSubtype:i,pos:r}}))),j.d(this._applyAlertData)),this._applySmartPhrasesAlert=({alerts:e,feedbackSubtype:t})=>Object(s.pipe)(this._flushChanges,j.b(Object(s.pipe)(e,j.o(e=>Object(s.pipe)(e.alternative,j.j(t=>Object(r.tuple)({alternative:R.a.withoutOptionalOps(t.alternative.ops),alternativeIndex:t.alternativeIndex},V(e.alert))))))),j.d(t=>j.p(()=>({alternatives:t,alerts:e,originalTextLength:this._positionManager.getTextLength(),currentFullText:this._getContent()}),d.b.toError)),j.j(z),K(e=>Object(s.pipe)(e.correctRevAlternatives,d.a.map(({alert:e,alternative:a})=>Object(s.pipe)(j.l(()=>e),j.e(e=>j.l(this._sendApplySmartPhrasesFeedback(e,a.alternativeIndex,t))))),j.m,j.d(t=>Object(s.pipe)(j.p(()=>this.changes.next(e.changeWithFormatting),d.b.toError),j.a(this._flushChanges),M.apSecond(Object(s.pipe)(Object(r.flow)(L.ub(e=>j.p(()=>{const t=B.a.create(e);e.bumpVersion();const a=$.t.create(t,B.a.create(e));return[e.id,a]},d.b.toError)),j.m)(t),j.d(this._sendUpdate)))))))),this._applyTransformJson=({alerts:e,source:t,method:a,feedbackSubtype:n,drilldownSuggestionIds:i})=>Object(s.pipe)(this._flushChanges,j.b(Object(s.pipe)(e,j.o(e=>Object(s.pipe)(e.alternative,j.j(t=>Object(r.tuple)(t,V(e.alert))))))),j.d(t=>j.p(()=>({alternatives:t,alerts:e,originalTextLength:this._positionManager.getTextLength(),currentFullText:this._getContent()}),d.b.toError)),j.j(z),K(e=>Object(s.pipe)(e.correctRevAlternatives,d.a.map(({alert:e,alternative:r,reversedAlternative:o})=>Object(s.pipe)(this._switchToBeingApplied(e,t,a),j.e(e=>j.l(this._sendApplyTransformJsonFeedback(e.beingAppliedAlert,r.alternativeIndex,n,i))),j.j(e=>Object.assign(Object.assign({},e),{reversedAlternative:o})))),j.m,j.d(t=>Object(s.pipe)(j.p(()=>this.changes.next(e.changeWithFormatting),d.b.toError),j.a(this._flushChanges),M.apSecond(Object(s.pipe)(G(t),j.d(this._sendUpdate)))))))),this._alertFeedback=(e,t,a)=>{this._log.debug(`_alertFeedback(${e.toLiteString()}, feedbackType: ${t.kind}, source: ${a})`),$.a.isHidden(e)&&this._log.error("Sending feedback for a hidden alert",{alert:e,feedbackType:t.kind});const n=this._commitFeedbackToCapi(e,t);return Object(s.pipe)(e,X("Cannot send feedback for already disposed"),M.of,j.d(e=>t.kind!==l.a.AlertFeedbackType.LOOKED||e.isRead?l.a.FeedbackType.willRemoveAlert(t.kind)?Object(s.pipe)(this._flushChanges,j.b(this._applyFeedbackToAlert(e,t.kind,a,n)),q.prepareFromAlert,this._sendSingleUpdate):Object(s.pipe)(n,j.l):Object(s.pipe)(q.prepare(()=>[B.a.create(e),(e.isRead=!0,B.a.create(e))]),this._sendSingleUpdate,M.apFirst(n))))},this._alertBatchFeedback=(e,t,a)=>Object(s.pipe)(e,d.a.filterMap(e=>e.rawId),d.f.fromArray,d.g.fold(Object(r.constant)(r.constVoid),e=>this._sendFeedback({kind:t,alertIds:e,subtype:a}))),this._notifyAlertUpdated=Object(r.flow)(e=>[[e[0].id,e]],this._sendUpdate),this._releaseRef=(e,t)=>Object(s.pipe)(j.p(()=>{this._log.debug(`_releaseRef ${e} on (${t.toLiteString()}) refs: ${t._refNames}`,{shouldBeRemoved:$.a.shouldBeRemoved(t)}),$.a.shouldBeRemoved(t)&&this.events.next({removed:new Map([[t.id,B.a.create(t)]])})},d.b.toError)),this._changeMuteState=(e,t)=>{const a=Object(s.pipe)(e,p.a.fromArray(Object(r.flow)(X("Cannot send Mute feedback for already disposed"),d.b.chain(Y(e=>d.g.isSome(e.muteCategory)||$.a.belongsToAnySpecialCategory(e),"Alert is not muting")))));return Object(s.pipe)(a,p.a.foldSuccess(d.a.map(e=>q.prepare(()=>[B.a.create(e),(e.mute=t,B.a.create(e))]))),j.m,j.j(d.f.fromArray),K(this._sendUpdate),j.j(Object(r.constant)(a)))},this._changeGapValue=(e,t)=>Object(s.pipe)(e,Y($.a.isOneGap,"can not change gap value for a non one gap alert"),M.of,j.d(e=>q.prepare(()=>[B.a.create(e),B.a.create(e.changeGapValue(t))])),this._sendSingleUpdate),this._confirmApplied=Object(r.flow)(d.a.map(e=>q.prepare(()=>[B.a.create(e),B.a.create(e.changeState($.a.State.Removed.create($.a.State.Removed.Reason.bulkAcceptUserResponse)))])),j.m,j.d(this._sendUpdate)),this._changeTakeawayFeedback=(e,t)=>Object(s.pipe)(e,Y($.a.isTakeaway,"can not change feedback for non-takeaway alert"),M.of,j.d(e=>{const a=B.a.create(e),n=e.setFeedback(t),i=B.a.create(n);return Object(s.pipe)(q.prepare(()=>[a,i]),this._sendSingleUpdate,j.j(()=>n))})),this._requestShortenItReplacements=e=>Object(s.pipe)(e,X("Cannot send shorten_it_submit message for already disposed"),d.b.chain(Y($.a.isShortenIt,"can not send shorten_it_submit for a non shorten-it alert")),M.of,j.d(e=>{const t=B.a.create(e),a=e.setSummariesRequestState($.k.SummariesRequestState.requested),n=B.a.create(a);return Object(s.pipe)(q.prepare(()=>[t,n]),this._sendSingleUpdate,j.j(()=>a),M.apFirst(this._commitShortenItSubmitToCapi(e)))})),this._changeSmartPhrasesFeedback=(e,t)=>Object(s.pipe)(e,Y($.a.isSmartPhrases,"Cannot change feedback for a non-SmartPhrases alert."),M.of,j.d(e=>j.p(()=>{const a=[Object(r.tuple)(e.id,$.t.create(B.a.create(e),B.a.create(e.setFeedback(t))))];return this.events.next({updated:new Map(a)}),e},d.b.toError))),this._rotateSmartPhrasesReplacements=e=>Object(s.pipe)(e,Y($.a.isSmartPhrases,"Cannot rotate replacements for a non-SmartPhrases alert."),M.of,j.d(e=>j.p(()=>{const t=[Object(r.tuple)(e.id,$.t.create(B.a.create(e),B.a.create(e.rotateReplacements())))];return this.events.next({updated:new Map(t)}),e},d.b.toError))),this._discardSmartPhrasesReplacement=(e,t)=>Object(s.pipe)(e,Y($.a.isSmartPhrases,"Cannot discard replacement for a non-SmartPhrases alert."),M.of,j.d(e=>j.p(()=>{const a=[Object(r.tuple)(e.id,$.t.create(B.a.create(e),B.a.create(e.discardReplacement(t))))];return this.events.next({updated:new Map(a)}),e},d.b.toError))),this._changeSentenceLevelBrandTonesFeedback=(e,t)=>Object(s.pipe)(e,Y($.a.isSentenceLevelBrandTones,"Cannot change feedback for a non-Sentence Level Brand Tones alert."),M.of,j.d(e=>j.p(()=>{const a=[Object(r.tuple)(e.id,$.t.create(B.a.create(e),B.a.create(e.setFeedback(t))))];return this.events.next({updated:new Map(a)}),e},d.b.toError))),this._handleCapiError=e=>t=>{D.a.isDroppedError(t)?this._log.debug(`Stopped listening for ${e} message acknowledge`,t):D.b.isNotConnectedError(t)?this._log.warn(`Failed to send ${e} as CAPI was not connected`,t):this._log.error(`Failed to send ${e}`,t)},this._applyAlertData=({pos:e,removeLen:t,reverseDelta:a,undo:n,replacementText:i,alert:r,feedbackSubtype:o})=>Object(s.pipe)(j.p(()=>{let s=this._positionManager.getTextLength(),c=!1;const p={action:l.a.AlertFeedbackType.ACCEPTED,replacement:i,commit:()=>{c||this._log.debug(`_applyAlert(${r.toLiteString()}):commit()`)},reversedAlternative:d.g.none,undo:()=>{c=!0,this._log.debug(`_applyAlert(${r.toLiteString()}):undo()`);const e=this._positionManager.getTextLength();e!==s&&this._log.error(`Text has changed while uncommitted apply is present. Expected: ${s}, actual: ${e}`);const t=N.a.delta(a,e);this.changes.next(t),this.changes.next(N.a.flush()),n()}};return this._sendApplyTextFeedback(r,i,o)(),this.changes.next(N.a.delta((new P.a).retain(e).delete(t).insert(i),s)),this.changes.next(N.a.flush()),s=this._positionManager.getTextLength(),p},d.b.toError),j.d(e=>j.p(()=>r.switchToApplied(e),d.b.toError)),q.prepareFromAlert,this._sendSingleUpdate),this._sendApplyFeedback=(e,t)=>e.state.method===$.a.State.Applied.Method.ByCard?this._commitFeedbackToCapi(e,t):r.constVoid,this._sendApplyTextFeedback=(e,t,a)=>this._sendApplyFeedback(e,{kind:l.a.AlertFeedbackType.ACCEPTED,replacementText:t,subtype:a}),this._sendApplyTransformJsonFeedback=(e,t,a,n)=>{const i={kind:l.a.AlertFeedbackType.ACCEPTED,alternativeIndex:t,subtype:a,drilldownSuggestionIds:n},r=$.a.isOneGap(e)?Object.assign(Object.assign({},i),{gapValue:e.gapValue}):i;return this._sendApplyFeedback(e,r)},this._sendApplySmartPhrasesFeedback=(e,t,a)=>{const n={kind:l.a.AlertFeedbackType.ACCEPTED,alternativeIndex:t,subtype:a};return this._commitFeedbackToCapi(e,n)}}_applyFeedbackToAlert(e,t,a,n){return j.p(()=>{this._alertsRepo.removeFromCapiMapping(e);const i=this._createFeedbackUndoable(e,t,n);return e.changeState($.a.State.Applied.create(i,a,$.a.State.Applied.Method.ByCard,B.a.create(e)))},d.b.toError)}_createFeedbackUndoable(e,t,a){return{action:t,replacement:e.replaceText,commit:a,undo:()=>this._alertsRepo.addToCapiMapping(e)}}_commitFeedbackToCapi(e,t){return Object(s.pipe)(e.rawId,d.g.fold(Object(r.constant)(()=>this._log.debug("skip feedback for local alert",e)),e=>this._sendFeedback(Object.assign({id:e},t))))}_sendFeedback(e){return()=>{d.l.toPromise(this._capiClient.sendFeedback(e)).catch(this._handleCapiError("alert feedback"))}}_commitShortenItSubmitToCapi(e){return Object(s.pipe)(e.rawId,d.g.fold(Object(r.constant)(()=>this._log.debug("skip shorten-it-submit for local alert",e)),e=>this._shortenItSubmit(e)))}_shortenItSubmit(e){return()=>{d.l.toPromise(this._capiClient.shortenItSubmit(e)).catch(this._handleCapiError("shorten-it-submit"))}}_switchToBeingApplied(e,t,a){return j.p(()=>(this._alertsRepo.removeFromCapiMapping(e),e.switchToBeingAppliedState(t,a)),d.b.toError)}}var Q,J,ee,te,ae,ne=a("a5W6");(Q||(Q={})).toString=d.b.fold(({id:e})=>`rid:${e}`,e=>`aid:${e.toString()}`),(J||(J={})).match=function(e){return t=>t instanceof $.e?e.alertAddOrUpdate(t):t instanceof Map?e.rangeChange(t):"_tag"in t?e.alertRemove(t):e.alertChange(t)},(ee||(ee={})).defaultValidator=$.a.isDuplicatedBy;class ie{constructor(e,t,a){this._positionManager=e,this._alertsRepo=t,this._alertDuplicateValidator=a,this._log=h.Monitoring.Logging.getLogger("AlertManager.pipeline",h.Logging.LogLevel.DEBUG),this._heuristicallyRemovedAlerts=new Map,this.process=e=>(this._log.trace(`process, to process = ${e.length}`),this._collectChanges(this._processAlertsBatch(e))),this.reset=e=>(this._cleanupPendingAlerts(e),this._finishAlertsChecking()),this._processAlertsBatch=e=>{const{toAdd:t,toUpdate:a,toAddOrUpdate:n,toRemoveUnfiltered:i,toChangeUnfiltered:o,toDispose:c,rangeChanges:p}=this._processBatch(e),u=e=>Object(s.pipe)(this._alertsRepo.getByAlertId(e),d.g.getOrElse(()=>t.get(e)||a.get(e)||c.get(e)));o.forEach(e=>Object(s.pipe)(d.g.fromNullable(n.get(e.id)),d.g.fold(()=>Object(s.pipe)(this._alertsRepo.getByRawAlertId(e.id),d.g.map(t=>{const i=t.copy();i.patchWithRawAlert(ie._prepareUpdate(i,e)),a.set(i.id,i),n.set(e.id,i)}),d.g.getOrElse(()=>this._log.info("Change from CAPI: Cannot find internal AlertId."))),t=>{const n=ie._prepareUpdate(t,e);a.has(t.id)?t.patchWithRawAlert(n):t.updateAlertWithManagedData(n)})));const h=i.reduce((e,i)=>{const r=Object(s.pipe)(i,d.b.fold(({id:e})=>Object(s.pipe)(this._alertsRepo.getByRawAlertId(e),d.g.map(e=>$.a.isRegistered(e)?e:void 0),d.g.getOrElse(()=>this._heuristicallyRemovedAlerts.has(e)?void this._heuristicallyRemovedAlerts.delete(e):n.get(e))),u));return void 0===r?(d.b.isLeft(i)?this._log.debug("Remove from CAPI: Cannot find internal AlertId. capiId: #"+JSON.stringify(i.left)):this._log.error("Cannot find existing alert by id",i.right),e):(Object(s.pipe)(this._getMergeTarget(i,n),d.g.filter(re(e=>e.lensId!==r.lensId?(this._log.warn("Trying to merge alerts from different lenses",{source:r,target:e}),!1):d.g.isNone(r.rawId)?(this._log.warn("Trying to merge into local alert",{source:r,target:e}),!1):r.references>e.references)),d.g.fold(()=>{e.set(r.id,{alert:r,reason:Object(s.pipe)(i,d.b.swap,d.g.fromEither,d.g.chain(e=>e.hint),d.g.chain(e=>e===l.a.AlertRemoveHint.NotFixed?d.g.some($.a.State.Removed.Reason.capiDismiss):d.g.none),d.g.getOrElse(()=>$.a.State.Removed.Reason.capiDone))})},d.b.fold(e=>{this._log.debug("swap raw alerts with new alert",{source:r.toString(),newTarget:e.toString()}),this._alertsRepo.swapRaw(r,e);const i=d.g.unsafeGet(r.rawId);Object(m.g)(void 0===a.get(e.id),"Added alert should not be present in the updated alerts map",()=>a.get(e.id).toString());const s=r.copy();a.set(s.id,s),n.set(i,s),t.delete(e.id),c.set(e.id,e)},t=>{this._log.debug("swap raw alerts with existing alert",{source:r.toString(),existingTarget:t.toString()}),this._alertsRepo.swapRaw(r,t),e.set(t.id,{alert:t,reason:$.a.State.Removed.Reason.capiDismiss})}))),e)},new Map),g=new Map;return p&&p.forEach((e,t)=>{Object(s.pipe)(t,u,d.g.fromPredicate(n=>n?$.a.isInteractable(n)?!a.has(n.id)||(this._log.debug("skip range change on updateHolder alert",n.toLiteString()),!1):(this._log.debug("skip range change on non-interactable alert",n.toLiteString()),!1):(this._log.warn("got range changes for unknown alert",{alertId:t,alertRanges:e}),!1)),d.g.chain(a=>Object(s.pipe)(a.onRangeChange(e),d.g.map(e=>{switch(e.state){case $.a.Transition.State.Pending:return g.set(a.id,[a,e.removedRanges]);case $.a.Transition.State.Dispose:return Object(s.pipe)(a.rawId,d.g.fold(()=>this._log.debug("dispose by range change on unknown rid",a.id),e=>this._heuristicallyRemovedAlerts.set(e,a))),h.set(t,{alert:a,reason:$.a.State.Removed.Reason.textChange});default:return Object(m.d)(e)}}))))}),h.forEach(({alert:e})=>{this._log.trace("check cancellations from toRemove: "+e.toLiteString()),Object(s.pipe)(e.rawId,d.g.fold(()=>{t.get(e.id)&&(this._log.debug("cancel add local alert for: "+e.toLiteString()),t.delete(e.id),h.delete(e.id),c.set(e.id,e)),Object(m.g)(!1===a.has(e.id),"Added local alert should not be present in the updated alerts map",()=>a.get(e.id).toString())},i=>{const r=n.get(i);r&&(n.delete(i),t.delete(r.id)?(this._log.debug("cancel add for: "+r.toLiteString()),this._log.debug("cancel remove for: "+e.toLiteString()),h.delete(e.id),c.set(e.id,e),c.set(r.id,r)):a.delete(r.id)?(this._log.debug("cancel update for: "+r.toLiteString()),r.id!==e.id&&(this._log.debug("marking update to dispose: "+r.toLiteString()),c.set(r.id,r))):this._log.error("_addOrUpdateAlert toAdd || toUpdate mapping in unsync state!",r))})),this._log.trace("check if local orphan toRemove: "+e.toLiteString()),Object(s.pipe)(this._alertsRepo.getByAlertId(e.id),d.g.fold(()=>{this._log.debug("cancel delete for: "+e.toLiteString()),h.delete(e.id)},r.constVoid))}),c.size>0&&this._log.debug(`_cancelAlerts, to cancel = ${c.size}`,{alerts:Array.from(c.values()).map(e=>e.toLiteString())}),c.forEach(e=>{g.delete(e.id)&&this._log.debug("cancel startChecking for: "+e.toLiteString());try{e.dispose()}catch(t){this._log.warn("unexpected error on disposing canceled alert",t,e)}}),{toAdd:t,toUpdate:a,toRemove:h,toStartChecking:g}},this._collectChanges=({toAdd:e,toUpdate:t,toRemove:a,toStartChecking:n})=>{const{alertsToAdd:i,alertsToUpdate:r,alertsToRemove:s}=this._addAlerts(Array.from(e.values()),a);return t.size>0&&this._updateAlerts(Array.from(t.values()),r),n.size>0&&this._startAlertsChecking(Array.from(n.values()),r,i),s.size>0&&this._removeAlerts(s,r),{added:i,updated:r}},this._validateAlertAdd=e=>{try{const t=!$.a.isPremium(e)||void 0!==e.categoryHuman;return e._raw.impact!==F.w.Impact.Critical&&e._raw.impact!==F.w.Impact.Advanced&&d.g.isSome(e.rawId)&&this._log.warn("CAPI provides corrupted impact prop",{alert:e,raw:F.w.clearUserTextFields(e._raw)}),t||(this._log.error("CAPI provides corrupted alert",{alert:e,raw:F.w.clearUserTextFields(e._raw)}),e.dispose()),Object(s.pipe)(e.rawId,d.g.exists(e=>d.g.isSome(this._alertsRepo.getByRawAlertId(e))))?(this._log.warn("unexpected overlap on rawId for non-updatable alert",{alert:e,raw:F.w.clearUserTextFields(e._raw)}),e.dispose(),!1):e.lensType===O.a.Type.Plagiarism&&A.b.isMax(e.progress)?(this._log.info("CAPI provides a Plagiarism alert with an invalid progress",{alert:e,raw:F.w.clearUserTextFields(e._raw)}),e.dispose(),!1):t}catch(t){this._log.error("Cannot validate alert",t);try{e.dispose()}catch(e){this._log.warn("Cannot dispose invalid alert",e)}return!1}},this._recheckedAlerts=new Set,this._terminateAlertChecking=({id:e})=>{this._recheckedAlerts.delete(e)&&this._log.debug("Stopped watching checking state for alert",e)},this._applyRemoveToAlert=({alert:e,reason:t})=>(this._alertsRepo.removeFromCapiMapping(e),t!==$.a.State.Removed.Reason.textChange&&e.clearCapiId(),e.changeState($.a.State.Removed.create(t))),this._finishAlertChecking=e=>{Object(m.g)(this._recheckedAlerts.delete(e.id),"tried to finish checking on alert which had not been marked as checking"),this._log.debug("Stopped watching checking state for alert",e.id);const t=B.a.create(e);return $.t.create(t,B.a.create(e.changeState($.a.State.Registered.create($.a.CheckingState.IDLE))))}}static _prepareUpdate(e,t){const a=Object.assign(Object.assign({},e.toRawAlert()),{rev:t.rev});return F.w.withTransformJson(a)&&Object(s.pipe)(t.transformJson,d.g.tap(e=>a.transformJson=e)),Object(s.pipe)(t.extraProperties,d.g.tap(e=>a.extra_properties=e)),Object(s.pipe)(t.muted,d.g.tap(e=>a.muted=e)),a}_processBatch(e){return e.reduce((e,t)=>(J.match({alertAddOrUpdate:t=>{Object(s.pipe)(t.rawId,d.g.fold(()=>{e.toAdd.set(t.id,t)},a=>{Object(s.pipe)(this._alertsRepo.getByRawAlertId(a),d.g.filter(e=>e.allowUpdate),d.g.map(()=>{Object(s.pipe)(d.g.fromNullable(e.toAddOrUpdate.get(a)),d.g.map(t=>{this._log.debug("got overlap in batch on update"),e.toUpdate.delete(t.id),e.toDispose.set(t.id,t)})),e.toUpdate.set(t.id,t)}),d.g.getOrElse(()=>{Object(s.pipe)(d.g.fromNullable(e.toAddOrUpdate.get(a)),d.g.map(t=>{this._log.info("got overlap in batch on add"),e.toAdd.delete(t.id),e.toDispose.set(t.id,t)})),e.toAdd.set(t.id,t)})),e.toAddOrUpdate.set(a,t)}))},rangeChange:t=>{Object(m.g)(void 0===e.rangeChanges,"unexpected rangeChanges duplicate"),e.rangeChanges=t},alertRemove:t=>{e.toRemoveUnfiltered.push(t)},alertChange:t=>{e.toChangeUnfiltered.push(t)}})(t),e),{toAdd:new Map,toRemoveUnfiltered:[],toChangeUnfiltered:[],toUpdate:new Map,toAddOrUpdate:new Map,rangeChanges:void 0,toDispose:new Map})}_getMergeTarget(e,t){return Object(s.pipe)(e,d.b.swap,d.g.fromEither,d.g.chain(e=>e.mergedIn),d.g.chain(e=>{const a=Object(s.pipe)(this._alertsRepo.getByRawAlertId(e),d.g.map(e=>d.b.right(e)),d.g.alt(()=>Object(s.pipe)(d.g.fromNullable(t.get(e)),d.g.map(e=>d.b.left(e)))));return d.g.isNone(a)&&this._log.warn("Merge from CAPI: Cannot find alert to merge into.",{capiId:e}),a}),d.g.filter(re(e=>!!e.allowUpdate||(this._log.warn("Merge from CAPI: Trying to merge in a non-updatable alert, skipping. ",{target:e.toLiteString()}),!1))))}_addAlerts(e,t){return e.length>0&&this._log.debug("_addAlerts, count = "+e.length,{alerts:e.map(e=>e.toLiteString())}),Object(s.pipe)(e,ne.filter(this._validateAlertAdd),ne.reduce({alertsToAdd:new Map,alertsToUpdate:new Map,alertsToRemove:t},(e,t)=>{this._log.trace("Adding alert: "+t.toLiteString());const a=this._getAlertsWithMatchingRanges(t.getHighlightRanges()[0]),n=this._tryToMatchInvalid(t,a);switch(this._log.trace("Adding alert match result",{inc:t.id,match:n}),n.type){case te.Type.Merged:{const a=n.result[1];$.a.isNotRegistered(a.alert)?$.a.isRemoved(a.alert)&&this._log.warn("unexpected merge into removed alert",{alert:a,newAlert:t}):this._alertsRepo.addToCapiMapping(a.alert),e.alertsToUpdate.set(a.id,n.result);break}case te.Type.Restored:{const t=n.result[1];Object(m.g)(!e.alertsToRemove.has(t.id),"can't update alert which we wanted to remove earlier"),this._alertsRepo.addToCapiMapping(t.alert),e.alertsToUpdate.set(t.id,n.result);break}case te.Type.Unmatched:{const i=n.result,r=a.filter(t=>$.a.isDuplicateCandidate(t)&&this._alertDuplicateValidator(i,t)&&!e.alertsToRemove.has(t.id));Object(m.g)(i.allowDuplicates||$.a.isApplicableAlert(i),"BaseAlertImpl must allow duplicates or be an ApplicableAlert type"),r.length>0&&this._log.info("Trying to add a duplicated alert",{newAlert:t.toString(),duplicates:r.map(e=>e.toString())});const o=i.allowDuplicates?{result:ae.Add,toRemove:d.g.none}:this._tryAddAlert(i,r);switch(o.result){case ae.Add:case ae.OverwriteExisting:this._log.debug("AllAlerts: Append alert to all alerts",i.toLiteString()),this._alertsRepo.addToCapiMapping(i),Object(m.g)(!e.alertsToRemove.has(i.id),"can't add alert which we wanted to remove earlier",()=>i.toLiteString()),this._alertsRepo.add(i),e.alertsToAdd.set(i.id,B.a.create(i)),Object(s.pipe)(o.toRemove,d.g.tap(t=>{if(e.alertsToAdd.has(t.id)){this._alertsRepo.removeFromCapiMapping(t);const e=t.changeState($.a.State.Removed.create($.a.State.Removed.Reason.canceled));this._terminateAlertChecking(e),this._alertsRepo.remove(e)}else this._log.debug("schedule to remove duplicate",t.toLiteString()),e.alertsToRemove.set(t.id,{alert:t,reason:$.a.State.Removed.Reason.duplicated});e.alertsToAdd.delete(t.id),e.alertsToUpdate.delete(t.id)}));break;case ae.Skip:this._log.debug("Skip alert with low priority",i.id);break;default:Object(m.d)(o.result)}break}default:Object(m.d)(n)}return e}))}_updateAlerts(e,t){this._log.debug(`_updateAlerts, to update = ${e.length}`,{alerts:e.map(e=>e.toLiteString())}),Object(s.pipe)(e,ne.reduce(t,(e,t)=>(this._log.trace("Updating alert: "+t.toLiteString()),Object(s.pipe)(this._alertsRepo.getByRawAlertId(d.g.unsafeGet(t.rawId)),d.g.fold(()=>this._log.warn("tried to update unknown alert",t),a=>{const n=t._raw;t.dispose();const i=e.has(a.id)?e.get(a.id)[0]:B.a.create(a);a.enqueueRawAlertForUpdate(n),e.set(a.id,$.t.create(i,B.a.create(a)))})),e)))}_startAlertsChecking(e,t,a){this._log.debug(`_startAlertsChecking, to update = ${e.length}`,{alerts:e.map(([e,t])=>[e.toLiteString(),t])});const n=(e,t)=>{const a=e.changeState($.a.State.Registered.create($.a.CheckingState.CHECKING));return this._recheckedAlerts.add(e.id),B.a.create(t.size>0?a.enqueueRangesRemove(t):a)};Object(s.pipe)(e,ne.reduce({updatedAlerts:t,addedAlerts:a},(e,[t,a])=>(Object(s.pipe)(this._alertsRepo.getByAlertId(t.id),d.g.fold(()=>{this._log.warn("tried to start checking unknown alert",{alert:t,ranges:a})},()=>{if(e.addedAlerts.has(t.id))e.addedAlerts.set(t.id,n(t,a));else{const i=e.updatedAlerts.has(t.id)?e.updatedAlerts.get(t.id)[0]:B.a.create(t);e.updatedAlerts.set(t.id,$.t.create(i,n(t,a)))}})),e)))}_removeAlerts(e,t){e.forEach((e,a)=>{Object(s.pipe)(this._alertsRepo.getByAlertId(a),d.g.fold(()=>{this._log.warn("tried to remove unknown alert",e)},()=>{const n=t.has(a)?t.get(a)[0]:B.a.create(e.alert),i=this._applyRemoveToAlert(e);this._terminateAlertChecking(i),t.set(a,$.t.create(n,B.a.create(i)))}))})}_getAlertsWithMatchingRanges(e){return Object(s.pipe)(this._positionManager.findIntersections(e),ne.filter(Object(u.b)(I.a.is,I.b.isVisible)),ne.filterMap(e=>this._alertsRepo.getByAlertId(e.meta.alertId)),ne.filter(e=>!($.a.isApplied(e)&&e.getAppliedRanges().length>0)))}_tryToMatchInvalid(e,t){return Object(m.g)(!e.isValid,"added alert should be invalid"),Object(m.g)($.a.isRegistered(e),"added alert should be in registered state",()=>e.toString()),Object(s.pipe)(d.g.fromNullable(t.find(t=>!t.isValid&&t.canBeMergedWith(e))),d.g.fold(()=>({result:e,type:te.Type.Unmatched}),t=>{Object(m.g)(Object(s.pipe)(t.rawId,d.g.forAll(Object(r.flow)(this._alertsRepo.getByRawAlertId,d.g.isNone))),"CAPI mapping should not contain invalid alerts"),this._log.debug(`Merging new alert (${e}) into the existing one aid(${t})`);const a=B.a.create(t);return t.patchWithRawAlert(e._raw),e.dispose(),t.allowUpdate&&$.a.isCapiDone(t)?{result:$.t.create(a,B.a.create(t.changeState($.a.State.init))),type:te.Type.Restored}:{result:$.t.create(a,B.a.create(t)),type:te.Type.Merged}}))}_tryAddAlert(e,t){return Object(s.pipe)(d.f.fromArray(t),d.g.map(t=>{Object(m.g)(1===t.length,"Only one visible alert to one range is expected while _tryEnqueueAlert",`got ${t.map(e=>e.toString())} with input (${e.toString()})`);const a=t[0];return a.extraProperties.priority<=e.extraProperties.priority?{result:ae.OverwriteExisting,toRemove:d.g.some(a)}:(e.dispose(),{result:ae.Skip,toRemove:d.g.none})}),d.g.getOrElse(()=>({result:ae.Add,toRemove:d.g.none})))}_cleanupPendingAlerts(e){e.removed.forEach(e=>{this._heuristicallyRemovedAlerts.delete(e)&&this._log.info("unexpected alert remove from finish msg",e)}),this._heuristicallyRemovedAlerts.size>0&&this._log.info("we had heuristically removed alerts which were not confirmed by capi",{size:this._heuristicallyRemovedAlerts.size}),this._heuristicallyRemovedAlerts.clear()}_finishAlertsChecking(){return Object(s.pipe)(Array.from(this._recheckedAlerts.values()),ne.filterMap(e=>{const t=this._alertsRepo.getByAlertId(e);d.g.isNone(t)&&(this._log.error("tried to finish checking on missing alert",e),this._recheckedAlerts.delete(e));const a=Object(s.pipe)(t,d.g.filter(e=>$.a.isRegistered(e)),d.g.map(e=>Object(r.tuple)(e.id,this._finishAlertChecking(e))));return d.g.isNone(a)&&this._log.error("tried to update checking state on non-registered alert",e),a}),e=>({updated:new Map(e)}))}}function re(e){return d.b.fold(e,e)}!function(e){let t;!function(e){e.Unmatched="Unmatched",e.Merged="Merged",e.Restored="Restored"}(t=e.Type||(e.Type={}))}(te||(te={})),function(e){e.Skip="Skip",e.Add="Add",e.OverwriteExisting="OverwriteExisting"}(ae||(ae={}));class se{constructor(){this._log=h.Monitoring.Logging.getLogger("AlertManager.repository",h.Logging.LogLevel.DEBUG),this._allAlerts=new Map,this._capiAlertsIdMapping=new Map,this.add=e=>{this._allAlerts.set(e.id,e)},this.remove=e=>{this._log.trace("AllAlerts: Clean alert from all alerts",e.toLiteString()),Object(m.g)(0===e.references,"can not dispose alert in use",()=>e.toString()),Object(m.g)(!1===e.isValid,"can not dispose valid alert",()=>e.toString()),Object(m.g)(this._allAlerts.delete(e.id),"alert should exist in alerts list",()=>e.toString()),e.dispose()},this.addToCapiMapping=e=>{e.isValid||Object(s.pipe)(e.rawId,d.g.fold(()=>this._log.debug("skip register of local alert in capi mapping",e),t=>{this._log.trace("register alert in capi mapping",e.toLiteString()),Object(m.g)(void 0===this._capiAlertsIdMapping.get(t),"unexpected overlap of rawid alert",()=>e.toString()),e.validate(),this._capiAlertsIdMapping.set(t,e.id)}))},this.removeFromCapiMapping=e=>{e.isValid&&(Object(s.pipe)(e.rawId,d.g.tap(t=>{this._log.trace("clean valid alert capi mapping for: "+e.toLiteString()),Object(m.g)(this._capiAlertsIdMapping.delete(t),"valid alert should had valid raw id",()=>e.toString())})),e.invalidate())},this.getByAlertId=e=>d.g.fromNullable(this._allAlerts.get(e)),this.getByRawAlertId=e=>Object(s.pipe)(d.g.fromNullable(this._capiAlertsIdMapping.get(e)),d.g.chain(this.getByAlertId)),this.swapRaw=(e,t)=>{const a=Object(s.pipe)(e.rawId,d.g.exists(e=>this._capiAlertsIdMapping.has(e))),n=Object(s.pipe)(e.rawId,d.g.exists(e=>this._capiAlertsIdMapping.has(e)));Object(m.g)(a||n,"At least one of the swapped alerts should be registered in the system");const i=e._raw;e.silentPatchWithRawAlert(t._raw),t.silentPatchWithRawAlert(i),a&&this._capiAlertsIdMapping.set(d.g.unsafeGet(e.rawId),e.id),n&&this._capiAlertsIdMapping.set(d.g.unsafeGet(t.rawId),t.id)},this.toArray=()=>Array.from(this._allAlerts.values()),this.toMap=()=>this._allAlerts,this.toJSON=()=>({allAlerts:Array.from(this._allAlerts.entries()),idMapping:Array.from(this._capiAlertsIdMapping.entries())})}}var oe=a("4Gi8");a.d(t,"a",(function(){return le}));class le{constructor(e,t,a,m,y,C,v,S=ee.defaultValidator){this._positionManager=e,this._alternativeManager=t,this._getContent=a,this._capiEvents=m,this._capiClient=y,this._documentCounters=C,this._transformRawAlert=v,this._alertDuplicateValidator=S,this._state=o.a.create(b.a.empty),this.state=this._state.view(b.a.toCheckingResult),this.lensesScores=o.a.create(w.empty),this._log=h.Monitoring.Logging.getLogger("AlertManager",h.Logging.LogLevel.TRACE),this._subs=[],this._addAlerts=new E.a.Subject,this._removeAlerts=new E.a.Subject,this._changeAlerts=new E.a.Subject,this._flush=new E.a.Subject,this._alertsPerRevision=0,this._alertsRepository=new se,this._pipeline=new ie(this._positionManager,this._alertsRepository,this._alertDuplicateValidator),this._invalidateAlerts=()=>{this.flushAlerts();const[e,t]=c.a.partition(this._getAllAlertsAsArray(),e=>e.isValid);this._log.debug("Invalidate alerts...",{valid:e.length,invalid:t.length}),e.forEach(e=>{this._alertsRepository.removeFromCapiMapping(e),e.clearCapiId()}),t.forEach(e=>e.clearCapiId())},this._removeInvalidAlerts=e=>{this._log.debug(`Removing invalid alerts by type '${e}'...`);const t=this._getTypeFilter(e),a=this._getAllAlertsAsArray().filter(e=>!e.isValid&&$.a.isRegistered(e)&&t(e));a.forEach(e=>this._removeAlertBuffered(d.b.right(e.id))),this._log.debug(`${a.length} invalid alerts removed`),this.flushAlerts(),this._log.isEnabled(h.Logging.LogLevel.TRACE)&&this._log.trace("Removed alerts",a.map(e=>e.toString()))},this._onCapiEvent=e=>{try{switch("alert_received"===e.kind&&this._alertsPerRevision++,e.kind){case"alert_received":case"plagiarism_alert_received":if(!1===e.alert.hidden&&void 0===e.alert.cardLayout)return void this._log.warn("got alert with empty mapping",{pname:e.alert.pname});this._addAlertBuffered($.a.create(this._transformRawAlert(e.alert),this._ops,this._positionManager,this._alternativeManager));break;case"alert_removed":this._log.debug(`Remove from capi #${e.alertId}, merged in #${d.g.getOrElse(()=>"None")(e.mergedIn)}, hint: ${d.g.getOrElse(()=>"None")(e.hint)}`),Object(s.pipe)(this._alertsRepository.getByRawAlertId(e.alertId),d.g.exists($.a.isBulkApplied))||this._removeAlertBuffered(d.b.left({id:e.alertId,mergedIn:e.mergedIn,hint:e.hint}));break;case"alert_changed":this._log.debug("Alert change from capi #"+e.alertId),this._changeAlertBuffered({id:e.alertId,rev:e.rev,extraProperties:d.g.fromNullable(e.extraProperties),transformJson:d.g.fromNullable(e.transformJson),muted:d.g.fromNullable(e.muted)});break;case"finish":this._log.debug(`Alerts per revision (#${e.revision}): ${this._alertsPerRevision}`),this._alertsPerRevision=0,"idle"===this._capiClient.checkingState&&this._emitDomainEvent(this._pipeline.reset(e))}}catch(t){this._log.warn("Cannot handle alert event "+e.kind,t)}},this._emitDomainEvent=e=>{Object(s.pipe)(e,this._prepareDiff,f.a.createDiff,p.a.recover(e=>this._log.error("conflicts on diff creating",e)),e=>(this._log.debug("_emitDomainEvent",g.a.Diff.show.show(e)),e),b.a.applyDiff,d.j.map(p.a.recover(e=>this._log.error("conflicts on diff apply",e))),e=>this._state.modify(e))},this._prepareDiff=({added:e,updated:t=new Map,removed:a=new Map})=>(t.forEach((e,n)=>{Object(s.pipe)(e,i.d,$.a.fromAlertModel,$.a.shouldBeRemoved)&&(t.delete(n),a.set(n,e[0]))}),a.forEach(Object(r.flow)($.a.fromAlertModel,this._disposeAlert)),{added:e,updated:t,removed:a}),this._disposeAlert=e=>{if($.a.isApplied(e)&&e.state.undoable.commit(),$.a.isNotRegistered(e))try{this._alertsRepository.remove(e)}catch(t){this._log.error("can not remove alert",t),$.a.isNotDisposed(e)&&e.dispose()}else this._log.error("unexpected remove of registered alert",e.toString())},this._ops=new Z(this._positionManager,this._getContent,this._capiClient,this._alertsRepository),this.loadScores=e=>{this.lensesScores.set(e)},this.undoApplied=this._ops.undoApplied,this.changes=this._ops.changes;const k=e.rangeChanged.pipe(E.a.map(({affected:e})=>e),E.a.filter(e=>e.length>0),E.a.map(e=>T.a.groupBy(e=>e.meta.alertId,e.filter(I.a.is))),E.a.filter(e=>e.size>0),E.a.tap(e=>this._log.debug("Range[s] changed",e)),E.a.share()),_=E.a.interval(250).pipe(E.a.startWith(0),E.a.merge(this._flush)),O=x.b.createIgnoreErrorsSubscriber(this._log);this._subs.push(O("_alertsInvalidation",this._capiEvents.pipe(E.a.filter(l.a.CAPIEvent.is("session_started")),E.a.tap(this._invalidateAlerts),E.a.switchMapTo(E.a.mergeStatic(this._capiEvents.pipe(E.a.filter(l.a.CAPIEvent.is("finish")),E.a.first(),E.a.mapTo("alert")),this._capiEvents.pipe(E.a.filter(l.a.CAPIEvent.is("async_check_finished")),E.a.first(),E.a.mapTo("plagiarism")))),E.a.tap(this._removeInvalidAlerts))),O("_capiEvents",this._capiEvents.pipe(E.a.tap(this._onCapiEvent))),O("_alertsProccesing",this._addAlerts.pipe(E.a.merge(this._removeAlerts),E.a.merge(this._changeAlerts),E.a.merge(k),E.a.buffer(_),E.a.filter(u.n),E.a.map(this._pipeline.process),E.a.tap(this._emitDomainEvent))),O("_alertsBuffer",k.pipe(E.a.merge(this._capiEvents.pipe(E.a.filter(l.a.CAPIEvent.is("before_finish","before_async_check_finish","async_check_finished")))),E.a.mapTo(x.b.voidValue),E.a.tap(this._flush))),O("_alertOpsAlertChanges",this._ops.events.pipe(E.a.tap(this._emitDomainEvent))),O("_lensesScoresChanges",w.fromCapi(this._capiEvents).pipe(E.a.tap(x.b.toAtom(this.lensesScores)))),O("documentCountersChanges",n.fromAlerts(this._state.view(f.a.iso.wrap)).pipe(E.a.tap(x.b.toAtom(this._documentCounters))))),Object(u.r)("alerts",()=>this.toString()),Object(u.r)("triggerRemove",e=>{this._removeAlertBuffered(d.b.right(e))})}flushAlerts(){this._flush.next()}loadAlerts(e){const t=new Map;return Object(u.n)(e)&&(this._log.debug(`${e.length} external alert(s) where loaded`),e.map(oe.a.splitById).map(({id:e,local:t})=>({id:e,alert:$.a.create(Object(s.pipe)(t,l.a.RawAlert.matchBy(r.identity,e=>Object.assign(Object.assign({},e),{transformJson:{highlights:e.transformJson.highlights,alternatives:Object(s.pipe)(e.transformJson.alternatives,d.g.map(l.a.Alternative.Group.fromSerialized))}}),r.identity),this._transformRawAlert),this._ops,this._positionManager,this._alternativeManager)})).forEach(({id:e,alert:a})=>{this._addAlertBuffered(a),e&&t.set(e,a.id)})),t}toString(){return JSON.stringify(this,void 0,2)}toJSON(){return{repo:this._alertsRepository}}dispose(){this._subs.forEach(e=>e.unsubscribe()),this._subs=[]}_getTypeFilter(e){switch(e){case"alert":return e=>!$.a.isPlagiarism(e);case"plagiarism":return e=>$.a.isPlagiarism(e);default:return Object(m.d)(e)}}_addAlertBuffered(e){this._log.trace(`_addAlert(${e.toLiteString()})`),this._addAlerts.next(e)}_changeAlertBuffered(e){this._log.trace(`_changeAlert(${e.id})`),this._changeAlerts.next(e)}_removeAlertBuffered(e){this._log.trace(`_removeAlert(${Q.toString(e)})`),this._removeAlerts.next(e)}_getAllAlertsAsArray(){return this._alertsRepository.toArray().filter($.a.isNotRemoved)}}},rjEp:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("ERkP"),i=a("Nh1y"),r=a.n(i),s=a("zR/0"),o=a("6fbX"),l=a("D9EC"),c=a("hoSD");class d extends n.Component{constructor(){super(...arguments),this._subs=[],this._mode=this.props.mode||d.Mode.forwards,this._isPlaying=!1,this._debugName="",this._onPageBlurCb=()=>{this._animation.pause(),this._isPlaying=!1},this._onPageFocusCb=()=>{this._animation.play(),this._isPlaying=!0}}shouldComponentUpdate(){return!1}componentDidMount(){Object(o.f)(this._el,"Lottie animation target container element does not exist"),this._animation=r.a.loadAnimation({container:this._el,renderer:"svg",animationData:this.props.animation,loop:this._mode===d.Mode.loopForward||this._mode===d.Mode.loopBackward,autoplay:!1});const{onComplete:e}=this.props;e&&this._subs.push(s.a.fromEventPattern(e=>this._animation.addEventListener("complete",e),e=>this._animation.removeEventListener("complete",e)).subscribe(()=>{this._isPlaying=!1,e()})),this._init(),this.props.doNotPauseOnBlur||(window.addEventListener("blur",this._onPageBlurCb),window.addEventListener("focus",this._onPageFocusCb)),Object(l.r)("getLottieAnimations",()=>{const e=window;return this._debugName||(this._debugName=this.props.name||c.f.alphanumeric(10)),e.ddebug.lottieAnimations||(e.ddebug.lottieAnimations={}),e.ddebug.lottieAnimations[this._debugName]?e.ddebug.lottieAnimations:Object.assign(e.ddebug.lottieAnimations,{[this._debugName]:{isPlaying:()=>this._isPlaying,animation:this._animation}})})}componentWillUnmount(){this._subs.forEach(e=>e.unsubscribe()),this._subs=[],this._animation.destroy(),this.props.doNotPauseOnBlur||(window.removeEventListener("blur",this._onPageBlurCb),window.removeEventListener("focus",this._onPageFocusCb))}_playWithDelay(){const{startOn:e}=this.props;e?this._subs.push(e.subscribe(()=>{this._animation.stop(),this._animation.play(),this._isPlaying=!0})):(this._animation.play(),this._isPlaying=!0)}_init(){const e=this._animation.getDuration(!0),t=this.props.shiftByPercentage?e*Math.min(100,this.props.shiftByPercentage)/100:0;switch(this._animation.goToAndStop(t,!0),this._mode){case d.Mode.firstFrame:break;case d.Mode.lastFrame:this._animation.goToAndStop(e-t,!0);break;case d.Mode.loopForward:case d.Mode.forwards:this._playWithDelay();break;case d.Mode.loopBackward:case d.Mode.backwards:this._animation.goToAndStop(e-t,!0),this._animation.setDirection(-1),this._playWithDelay();break;default:Object(o.d)(this._mode)}}render(){return n.createElement("div",{"data-name":this.props.name,className:this.props.className,ref:e=>this._el=e})}}!function(e){let t;!function(e){e.firstFrame="firstFrame",e.lastFrame="lastFrame",e.forwards="forwards",e.backwards="backwards",e.loopForward="loopForward",e.loopBackward="loopBackward"}(t=e.Mode||(e.Mode={}))}(d||(d={}))},rmZI:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return s}));var n,i,r=a("LNSM");!function(e){let t;!function(e){e.VerySatisfied="VerySatisfied",e.SomewhatSatisfied="SomewhatSatisfied",e.Neutral="Neutral",e.SomewhatDissatisfied="SomewhatDissatisfied",e.VeryDissatisfied="VeryDissatisfied"}(t=e.Experience||(e.Experience={})),e.adminSatisfactionReasons=["CreatingStrongCompanyBrand","SavingTimeWritingAndEditing","CentrallyManagingGrammarlyAccount","EnablingTeamToCommunicateWithCustomersEffectively","Other"],e.teamMemberSatisfactionReasons=["SavingTimeWritingAndEditing","SoundingFluentInEnglish","SoundingMoreProfessionalAndPolished","ImprovingOverallWritingSkills","FeelingConfidentWhenCommunicating","CommunicatingWithCustomersEffectively","Other"],e.dissatisfactionReasons=["DoesntIntegrateWithAnAppIUse","LowQualitySuggestions","FeaturesAreMissing","TechnicalDifficulties","NotSureWhatGrammarlyBusinessDoes","DidntFindItValuable","Other"]}(n||(n={})),function(e){e.isFirstQuestion=e=>!("answer1"in e||"answer2"in e),e.isSecondQuestion=e=>"answer1"in e&&!("answer2"in e),e.isThirdQuestion=e=>"answer1"in e&&"answer2"in e&&!("answer3"in e),e.isCompleted=e=>"answer1"in e&&"answer2"in e&&"answer3"in e;const t=[n.Experience.Neutral,n.Experience.SomewhatDissatisfied,n.Experience.VeryDissatisfied];e.isSecondQuestionAboutDissatisfaction=e=>"answer1"in e&&t.includes(e.answer1),e.getSecondQuestionAnswer=e=>e.answer2}(i||(i={}));class s{constructor(e,t){this._tracking=e,this.isAdmin=t,this.state=r.a.create({})}answer(e){const t=this.state.view(i.isFirstQuestion).get(),a=this.state.view(i.isSecondQuestion).get(),n=t?"answer1":a?"answer2":"answer3";this.state.modify(t=>Object.assign(Object.assign({},t),{[n]:e})),t?this._tracking.onFirstAnswer(e):a?this._tracking.onSecondAnswer(e):Boolean(e.trim())&&this._tracking.onThirdAnswer(e)}}},rq0W:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return p}));var n,i=a("I7vG"),r=a("lrqh"),s=a("D9EC"),o=a("PrA7"),l=a("D/5U"),c=a("sWLkM");function d({from:e,transition:t,incomplete:a}){if(!a)return{};const n=u("transitionClassMapper");return Object(i.pipe)(e,r.g.map(e=>{switch(e){case"added":case"rendered":switch(t.type){case"added":return n.error(`Impossible transition: ${e} -> ${t.type}`),{main:l.a.addedMain};case"focused":return{main:t.clockwise?l.a.rendered2focusedMainClockwise:l.a.rendered2focusedMain};case"removed":return{shade:l.a.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(t.type){case"rendered":return{main:l.a.focused2renderedMain,shade:t.clockwise?l.a.focused2renderedShadeClockwise:l.a.focused2renderedShade};case"removed":return{main:"",shade:t.clockwise?l.a.focused2renderedShadeClockwise:l.a.focused2renderedShade};default:return{}}case"success":switch(t.type){case"removed":return{main:"",shade:t.clockwise?l.a.focused2renderedShadeClockwise:l.a.focused2renderedShade};case"focused":return{main:l.a.success2FocusedMain};default:return{}}case"presuccess":switch(t.type){case"success":return{main:l.a.focused2successMain,shade:l.a.focused2successShade};default:return{}}case"removed":switch(t.type){case"added":return n.error(`Impossible transition: ${e} -> ${t.type}`),{main:l.a.addedMain};default:return{}}default:return{}}}),r.g.getOrElse(()=>{switch(t.type){case"added":return{main:l.a.addedMain};case"focused":return{main:l.a.openedMain};default:return{}}}))}function p({from:e,transition:t,incomplete:a}){return a?Object(i.pipe)(e,r.g.map(e=>{switch(e){case"added":case"rendered":switch(t.type){case"added":return u("bundleTransitionClassMapper").error(`Impossible transition: ${e} -> ${t.type}`),{main:l.a.addedMain};case"focused":return{main:t.clockwise?c.a.rendered2focusedBundleMainClockwise:c.a.rendered2focusedBundleMain,shade:c.a.rendered2focusedBundleShade};case"removed":return{shade:l.a.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(t.type){case"rendered":return{main:c.a.focused2renderedBundleMain,shade:t.clockwise?c.a.focused2renderedBundleShadeClockwise:c.a.focused2renderedBundleShade};case"removed":return{main:"",shade:t.clockwise?l.a.focused2renderedShadeClockwise:l.a.focused2renderedShade};default:return{}}case"success":switch(t.type){case"removed":return{main:"",shade:t.clockwise?l.a.focused2renderedShadeClockwise:l.a.focused2renderedShade};case"focused":return{main:l.a.success2FocusedMain};default:return{}}case"presuccess":switch(t.type){case"success":return{main:l.a.focused2successMain,shade:l.a.focused2successShade};default:return{}}case"removed":switch(t.type){case"added":return u("bundleTransitionClassMapper").error(`Impossible transition: ${e} -> ${t.type}`),{main:l.a.addedMain};default:return{}}default:return{}}}),r.g.getOrElse(()=>{switch(t.type){case"added":return{main:l.a.addedMain};case"focused":return{main:l.a.openedMain};default:return{}}})):{}}!function(e){e.toOption=function(e){return t=>{const{main:a,shade:n}=e(t);return{main:r.g.fromNullable(a),shade:r.g.fromNullable(n)}}}}(n||(n={}));const u=Object(s.k)(o.Monitoring.Logging.getLogger)},"s+3N":function(e,t,a){"use strict";a.d(t,"b",(function(){return C})),a.d(t,"c",(function(){return v})),a.d(t,"a",(function(){return S}));var n=a("OA+g"),i=a("I7vG"),r=a("lrqh"),s=a("6fbX"),o=a("7b34"),l=a("D9EC"),c=a("PrA7"),d=a("kMag"),p=a("dE97"),u=a("GUi3"),m=a("yA7V"),h=a("jAb7"),g=a("zR/0"),f=a("UEGg"),b=a("BeBM"),y=a("bFfh");const C=()=>b.e.create({alertSource:p.b.api,switchOrder:"lensOrder",currentLens:y.a.Closed.create(n.constFalse,r.c.fromEquals(n.constFalse))}),v=()=>b.e.create({alertSource:p.b.api,switchOrder:"lensOrder",currentLens:y.a.DraftAI.create()});class S{constructor(e,t,a,r,s,o,l,d,u,h=b.e.FocusFirstFilter.defaultFilter){this._checkingState=e,this._alertsReader=t,this._lenses=a,this._positionManager=r,this._lensPreviewVM=s,this._lensViewFactory=o,this._alertsHandlerFactory=l,this._capabilities=d,this._alertsFilterService=u,this._focusFirstFilter=h,this._transformAlertsDiffToApplicator=e=>t=>a=>b.e.hasItems(a)?a.patch({currentLens:e(t,Object(n.not)(p.a.isMuted))(a.currentLens)}):a,this._log=c.Monitoring.Logging.getLogger("FocusedLensManagerImpl"),this._updateMetaSource=e=>t=>a=>e===a.currentLens.id&&b.e.hasItems(a)?b.e.Prism.getLensWithItems().modify(this._capabilities.updateMeta(t),a):a,this._lensAlerts=e=>{const t=this._alertsFilterService.alertVisibleInSidebar(e.id);return Object(i.pipe)(this._checkingState.get(),m.a.reduce([],(e,{alert:a})=>t(a)?[...e,a]:e),e=>e.sort(p.d.ord.compare))}}static _mapByActiveLensId(e,t,a,n){if(u.a.isOutcomeId(e))return n();switch(e){case u.a.SpecialId.Plagiarism:return t();case u.a.SpecialId.Premium:return a();case u.a.SpecialId.AllAlerts:case u.a.SpecialId.Priority:case u.a.SpecialId.PredictionTakeaways:case u.a.SpecialId.PredictionEmogenie:case u.a.SpecialId.RealTimeProofit:return n();default:return Object(s.d)(e)}}_conditionedApplicator(e,t){return a=>n=>e(n,a)?t(a)(n):n}static _filterALEvents(e){return t=>g.a.of(Object(i.pipe)(t,m.a.Diff.filter(t=>e(t.alert)))).pipe(g.a.filter(Object(n.not)(o.a.isEmpty)))}emptyState(e=u.a.SpecialId.AllAlerts){return b.e.create({currentLens:this._createLens({lensId:e,initialLens:this._lensPreviewVM.getLens(e).get(),visibleAlerts:[],alertHighlight:r.g.none,alertSource:p.b.api}),alertSource:p.b.api,switchOrder:"lensOrder"})}getLensEventsByLensId(e,t,a={}){const n=this._getActiveLensMeta(t),s=this._lensAlerts(n),o=this._createState(e,r.g.none,n,t,s),l=a.focusBehavior?this._getAlertToFocus(a.focusBehavior,o):r.g.none;e.currentLens.id===t&&b.e.hasItems(e)&&this._capabilities.getActiveAlertsCount(e.currentLens)!==s.length&&this._log.warn("Lens contains inconsistent number of alerts",n.id);const c=b.e.hasItems(o)?Object(i.pipe)(l,r.g.fold(()=>o,a=>this._createState(e,r.g.some(a),n,t,s))):o;return this._generateEventsFromState(c,this._alertsHandlerFactory(t))}getLensEventsByAlert(e,t,a){Object(s.g)(r.g.isSome(this._alertsReader.getById(a.alert.id)),"Can't focus non existing alert",a.alert.id);const n=this._getActiveLensMeta(t),i=e.currentLens.meta.id===t&&e.currentLens.meta.filter(a.alert)&&b.e.hasItems(e)?b.e.Prism.getLensWithItems().modify(this._capabilities.selectItemByAlert(a),e):this._createState(e,r.g.some(a),n,t,this._lensAlerts(n));return this._generateEventsFromState(i,this._alertsHandlerFactory(t))}findClosestAlertHighlight(e,t){return Object(i.pipe)(this._positionManager.findClosestToPosition(e,e=>d.a.is(e)&&d.b.isVisible(e)&&!d.b.isApplied(e)&&Object(i.pipe)(this._alertsReader.getRegistered(e.meta.alertId),r.g.exists(a=>this._alertsFilterService.alertCanBeDisplayed(a)&&t(a)&&a.getHighlightRanges().some(t=>t.meta.id===e.meta.id)))),r.g.chain(e=>Object(i.pipe)(this._alertsReader.getRegistered(e.meta.alertId),r.g.map(t=>{const a={alert:f.a.fromModel(t),highlightIndex:t.getHighlightRanges().findIndex(t=>t.meta.id===e.meta.id)};return a.highlightIndex<0&&(this._log.error("findClosestAlertRange returned a range which doesn't exist in alert.highlightRanges",{alert:a.alert.toString(),range:JSON.stringify(e),positionManagerRanges:JSON.stringify(this._positionManager.findRanges(e=>d.a.is(e)&&e.meta.alertId===t.id)),hasPendingRanges:t.hasNewRangesForUpdate}),a.highlightIndex=0),a}))))}findNextAlertInText({alert:e,highlightIndex:t},a){const n=e.getHighlightRanges();return Object(s.g)(t<n.length,"AHI is out of highlightRanges length",`hr length: ${n.length}, ahi: ${t}`),this.findClosestAlertHighlight(n[t].end,a)}findNextAlertInTextByLens(e,t,a){return this.findNextAlertInText(e,this._alertsFilterService.alertVisibleInText(t,a))}findPremiumAlert(){return this._lensPreviewVM.getLens(u.a.SpecialId.Premium).get().count>0?Object(i.pipe)(this._checkingState.get(),m.a.find(Object(n.flow)(p.a.fromAlertModel,Object(l.b)(p.a.isRegistered,p.a.isPremium))),r.g.map(e=>({alert:f.a.fromModel(e.alert),highlightIndex:0}))):r.g.none}hasZeroFreeAlerts(e){return 0===this._lensPreviewVM.getLens(e.get()).get().priorityCount}_getMetaChangesObservable(e){return b.e.hasItems(e)&&e.currentLens.kind===b.f.persistent?this._lensPreviewVM.getLens(e.currentLens.id).view(this._updateMetaSource(e.currentLens.id)):b.e.hasItems(e)&&e.currentLens.type===b.i.lensview?this._lenses.pipe(g.a.distinctUntilChanged(h.a.eq.equals),g.a.map(Object(n.flow)(h.a.lookup(e.currentLens.id),r.g.map(this._updateMetaSource(e.currentLens.id)),r.g.getOrElse(()=>b.e.Effect.Applicator.Source.identity)))):b.e.Effect.Applicator.Source.empty}_generateEventsFromState(e,t){return g.a.mergeStatic(this._checkingState.pipe(g.a.pairwise(),g.a.map(([e,t])=>m.a.diff(e,t)),g.a.switchMap(S._filterALEvents(e.currentLens.meta.filter)),g.a.map(this._conditionedApplicator((e,t)=>{const a=this._alertsFilterService.getLensesFilter(e.currentLens.id),r=Object(i.pipe)(t,m.a.Diff.filter(Object(n.not)(({alert:e})=>a(e))));return o.a.isEmpty(r)||this._log.info("tried to send event with alerts that do not fit current lens, skipping",{diff:m.a.Diff.show.show(r)}),o.a.isEmpty(r)},this._transformAlertsDiffToApplicator(t)))),this._getMetaChangesObservable(e)).pipe(g.a.startWith(b.e.Effect.Applicator.Source.override(e)))}_getActiveLensMeta(e){const t=S._mapByActiveLensId(e,()=>this._lensPreviewVM.getLens(u.a.SpecialId.Plagiarism).get(),()=>this._lensPreviewVM.getLens(u.a.SpecialId.Premium).get(),()=>this._lensPreviewVM.getLens(e).get());return Object(s.g)(void 0!==t,`unknown lensId:${e}`),t}_createState({alertSource:e,switchOrder:t},a,n,o,l){Object(s.g)(r.g.forAll(({alert:e})=>r.g.isSome(this._alertsReader.getInteractable(e.id)))(a),"we can create state only with alert in registered state",()=>Object(i.pipe)(a,r.g.fold(()=>"null",e=>e.toString())));const c=this._createLens({lensId:o,initialLens:n,visibleAlerts:l,alertHighlight:a,alertSource:e});return b.e.create({currentLens:c,alertSource:e,switchOrder:t})}_createLens(e){const t=Object(i.pipe)(this._focusFirstFilter(e),r.g.map(({alert:t,highlightIndex:a})=>({alertIndex:e.visibleAlerts.findIndex(Object(b.k)(t)),highlightIndex:a})));return this._lensViewFactory.create(e.lensId,e.initialLens,e.visibleAlerts,t)}_getAlertToFocus(e,t){switch(e.kind){case b.e.Effect.FocusBehaviorType.noFocus:case b.e.Effect.FocusBehaviorType.unFocus:return r.g.none;case b.e.Effect.FocusBehaviorType.focusFirst:return b.e.hasItems(t)?this._capabilities.findFirstAlert(t.currentLens):r.g.none;case b.e.Effect.FocusBehaviorType.focusNext:return b.e.hasItems(t)?this._capabilities.findNextAlert(t.currentLens):r.g.none;case b.e.Effect.FocusBehaviorType.focusAlert:return r.g.some(e.alertHighlight);default:Object(s.d)(e)}}}},s9lZ:function(e,t,a){e.exports=a.p+"files/f3eff5948418ea16f395ca03499aad13/mutedAlerts.png"},sDKV:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("ERkP"),r=a("LNSM"),s=a("vOOZ"),o=a("1huE"),l=a("zR/0"),c=a("lrqh"),d=a("hoSD"),p=a("07Tf"),u=a("q4n/"),m=a("PrA7");!function(e){e.getSelectionHOCs=e=>({withNeutralForSelection:t=>(function(e,t){return class extends i.Component{constructor(){super(...arguments),this._el=r.a.create(c.g.none),this._subs=new o.a.Keeper,this._onMount=e=>{this._el.set(c.g.fromNullable(e)),this.props.onMount&&e&&this.props.onMount(e)},this._neutralForSelection=()=>this._el.pipe(l.a.switchMap(c.g.fold(()=>l.a.EMPTY,e=>l.a.mergeStatic(l.a.fromEvent(document,"mousedown",e=>e.target).pipe(l.a.filter(t=>!(t===e||d.c.isParent(e,t))),l.a.mapTo(!0)),l.a.fromEvent(document,"mouseup").pipe(l.a.mapTo(!1))).pipe(l.a.tap(t=>{e.style.pointerEvents=t?"none":"auto"}))))).subscribe(),this._preventOnMouseMove=()=>{const e=r.a.create(!1);return[t.dontFreezeWhen(e,"prevent-focus"),this._el.pipe(l.a.switchMap(c.g.fold(()=>l.a.EMPTY,e=>l.a.mergeStatic(l.a.fromEvent(e,"mousedown").pipe(l.a.mapTo(!0)),l.a.fromEvent(e,"mouseup").pipe(l.a.mapTo(!1))))),l.a.tap(t=>e.set(t))).subscribe()]}}componentDidMount(){this._subs.push(this._neutralForSelection(),...this._preventOnMouseMove())}componentWillUnmount(){this._subs.dispose()}render(){return i.createElement(e,Object.assign({},this.props,{onMount:this._onMount}))}}})(t,e),withSelectionEffect:(t,n)=>a.withSelectionEffect(t,e,n)});const t=e=>(class extends i.Component{render(){return i.createElement(e,Object.assign({},this.props))}});let a;e.getPassThrough=()=>({withNeutralForSelection:e=>t(e),withSelectionEffect:e=>t(e)}),e.Context=i.createContext(p.a.invariantContent("DenaliEditorSelection")),function(e){e.PlainContainer=({children:e,onMouseDown:t,onMount:a,className:n})=>i.createElement(s.a.div,{className:n,onMouseDown:t,mount:a},e),e.withSelectionEffect=function(e,t,a){return class extends i.Component{_onMouseDown(e){u.b.isLeftMouseButtom(e)&&a(t,e)}render(){return i.createElement(e,Object.assign({},this.props,{onMouseDown:this._onMouseDown}))}}},e.collapse=(e,t)=>{c.b.getOrElse(t=>m.Monitoring.Logging.getLogger("Selection").error(`Failed to set cursor to ${e.getCursor().index} on selection collapse. ${t}`))(e.setCursor(e.getCursor().index,0)),t.stopPropagation()},e.resetAsap=(e,t)=>{setTimeout(()=>{const{index:t,length:a}=e.getCursor();c.b.getOrElse(e=>m.Monitoring.Logging.getLogger("Selection").error(`Failed to set cursor to index: ${t}, length: ${a} on selection reset. ${e}`))(e.setCursor(t,a))},0),t.stopPropagation()},e.prevent=(e,t)=>{t.stopPropagation()}}(a=e.Effect||(e.Effect={}))}(n||(n={}))},sWLkM:function(e,t,a){"use strict";a.d(t,"a",(function(){return k})),a.d(t,"b",(function(){return _}));var n=a("6gXa"),i=a("ps/9"),r=a("D/5U"),s=a("3bJT");const o=n.a.keyframes({from:{opacity:0,transform:"translateY(50%)"},to:{opacity:1,transform:"translateY(0)"}}),l=n.a.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(-25%)"}}),c=n.a.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(100%)"}}),d=n.a.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(150%)"}}),p=n.a.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),u=n.a.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),m=n.a.keyframes({from:{transform:"translateY(-10%)"},to:{transform:"translateY(0)"}}),h=n.a.keyframes({from:{transform:"translateY(100%)"},to:{transform:"translateY(0)"}}),g=n.a.keyframes({from:{transform:"translateY(150%)"},to:{transform:"translateY(0)"}}),f=n.a.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),b=n.a.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(125%)"}}),y={opacity:0,animation:`${o} ${n.a.seconds(i.d/1e3)} ${r.f} forwards`},C={transformOrigin:"top",animation:`${r.c} ${n.a.seconds(i.d/1e3)} ${r.f} forwards`,$nest:{[`& .${s.b.bundleInnerContainerSelector}`]:{animation:`${l} ${n.a.seconds(i.d/1e3)} ${r.f} forwards`,$nest:{[`& .${s.b.bundleFakeCard1Selector}`]:{animation:`${c} ${n.a.seconds(i.d/1e3)} ${r.f} forwards`},[`& .${s.b.bundleFakeCard2Selector}`]:{animation:`${d} ${n.a.seconds(i.d/1e3)} ${r.f} forwards`}}}}},v={transformOrigin:"top",animation:`${p} ${n.a.seconds(i.d/1500)} ${r.f} forwards`,$nest:{[`& .${s.b.bundleInnerContainerSelector}`]:{animation:`${l} ${n.a.seconds(i.d/1e3)} ${r.f} forwards`,$nest:{[`& .${s.b.bundleFakeCard1Selector}`]:{animation:`${c} ${n.a.seconds(i.d/1e3)} ${r.f} forwards`},[`& .${s.b.bundleFakeCard2Selector}`]:{animation:`${d} ${n.a.seconds(i.d/1e3)} ${r.f} forwards`}}}}},S={animation:`${u} ${n.a.seconds(i.d/1e3)} ${r.f} forwards`,$nest:{[`& .${s.b.bundleInnerContainerSelector}`]:{animation:`${m} ${n.a.seconds(i.d/1e3)} ${r.f} forwards`,$nest:{[`& .${s.b.bundleFakeCard1Selector}`]:{animation:`${h} ${n.a.seconds(i.d/1e3)} ${r.f} forwards`},[`& .${s.b.bundleFakeCard2Selector}`]:{animation:`${g} ${n.a.seconds(i.d/1e3)} ${r.f} forwards`}}}}},E={animation:`${f} ${n.a.seconds(i.d/1e3)} ${r.f} forwards`,$nest:{[`& .${s.b.bundleInnerContainerSelector}`]:{animation:`${m} ${n.a.seconds(i.d/1e3)} ${r.f} forwards`,$nest:{[`& .${s.b.bundleFakeCard1Selector}`]:{animation:`${h} ${n.a.seconds(i.d/1e3)} ${r.f} forwards`},[`& .${s.b.bundleFakeCard2Selector}`]:{animation:`${g} ${n.a.seconds(i.d/1e3)} ${r.f} forwards`}}}}},w={animation:`${b} ${n.a.seconds(i.d/1e3)} ${r.f} forwards`},k=n.a.stylesheet({focused2renderedBundleMain:[y],focused2renderedBundleShade:[r.e,C],focused2renderedBundleShadeClockwise:[r.e,v],rendered2focusedBundleMain:[r.d,S],rendered2focusedBundleMainClockwise:[r.d,E],rendered2focusedBundleShade:[r.e,w]}),_=new Map([[r.c,k.focused2renderedBundleShade],[p,k.focused2renderedBundleShadeClockwise],[b,k.rendered2focusedBundleShade]])},sgef:function(e,t,a){e.exports=a.p+"files/70f84e39477b8c33dbc1900a4bacb20f/inter-medium.woff"},"u/Xi":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("ERkP"),i=a("B8QE");const r=e=>{const{offset:t}=e,{flowPosition:a,flowPositionAnimate:r}=e.theme||i;return n.createElement("div",{style:{transform:`translate3d(0, ${t}, 0)`},className:`${a} ${r}`},e.children)}},"u4+s":function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return d}));var n,i,r=a("I7vG"),s=a("cu2o"),o=a("lrqh"),l=a("D9EC"),c=a("hoSD");!function(e){e.Monthly="Monthly",e.Quarterly="Quarterly",e.Annual="Annual"}(n||(n={})),function(e){e.offer={price:{currency:"USD",value:139.95},regularPrice:{currency:"USD",value:139.95},discountPercent:"0%",periodInMonths:12,title:"Annual",savePricedBySwitchingFrom:{monthly:{price:"$220/year",percent:"60%"},quarterly:{price:"$100/year",percent:"40%"}}}}(i||(i={}));class d{constructor(e,t,a,n,i,r){this.offer=e,this.currentPlan=t,this.nextPaymentDate=a,this._isCancelled=n,this._queuedPlan=i,this._subscriptionOps=r,this._renew=e=>o.l.tryCatch(()=>e?this._subscriptionOps.renew():Promise.resolve(),e=>({reason:"Renew failed",originalError:e})),this._getPlans=()=>o.l.tryCatch(()=>this._subscriptionOps.getPlans(),e=>({reason:"Could not get plans",originalError:e})),this._changePlan=e=>o.l.tryCatch(()=>this._subscriptionOps.changePlan(e),e=>({reason:"Changing plan failed",originalError:e})),this._extractAnnualPlan=e=>{const t=e.find(e=>12===e.periodMonths);return t?s.a.eq.equals(t.priceMoney,this.offer.price)?o.l.right(t.id):o.l.left({reason:"Expectation failed, we did not receive the annual plan with offered price"}):o.l.left({reason:"Expectation failed, we did not receive the annual plan"})},Object(l.r)("changePlanHookShowOffer",()=>d.enableDebugModeToShowOffer=!0)}get isMonthly(){return 1===this.currentPlan.periodMonths}get isQuarterly(){return 3===this.currentPlan.periodMonths}get savedPrice(){return this.isMonthly?this.offer.savePricedBySwitchingFrom.monthly:this.offer.savePricedBySwitchingFrom.quarterly}get currentPlanType(){return this.isMonthly?n.Monthly:this.isQuarterly?n.Quarterly:n.Annual}get daysToRenewal(){const e=this.nextPaymentDate.getTime(),t=c.d.Local.now().getTime();return Math.floor(Math.max(0,e-t)/c.d.MS_IN_DAY)}get shouldShowOffer(){return!!d.enableDebugModeToShowOffer||this.willSubscriptionRenewSoon&&!this.hasAlreadyChangedToAnnual}get hasAlreadyChangedToAnnual(){return!!this._queuedPlan&&12===this._queuedPlan.periodMonths}get willSubscriptionRenewSoon(){const e=this.daysToRenewal<2*c.d.DAYS_IN_WEEK;return(this.isMonthly||this.isQuarterly)&&e}changePlan(){return Object(r.pipe)(this._renew(this._isCancelled),o.l.chain(this._getPlans),o.l.chain(this._extractAnnualPlan),o.l.chain(this._changePlan))}static create(e,{currentPlan:t,queuedPlan:a,nextPayDate:n,expirationDate:i,isCancelled:r},s){if(!t)return o.b.left("Cannot load plans for change plan when user is freemium");if(!n&&!i)return o.b.left("Cannot change plan when nextPayDate and expirationDate are null");const l={renew:()=>s.renew(),changePlan:e=>s.changePlan(e),getPlans:()=>s.getPlans()};return o.b.right(new d(e,t,new Date(n||i),r,a,l))}}d.enableDebugModeToShowOffer=!1},uYVq:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a("ERkP"),i=a("OA+g"),r=a("I7vG"),s=a("vOOZ"),o=a("uukV"),l=a("lrqh"),c=a("Ars8"),d=a("cqAx"),p=a("omiJ"),u=a("ksOW"),m=a("/kIX");class h extends n.Component{componentDidMount(){const e=this._el.children;this.props.onElementsReady({header:e[0].outerHTML,stats:e[1].outerHTML,text:e[2].outerHTML,footer:e[3].outerHTML})}render(){const{model:e}=this.props,t=(a=e.plagiarism,Object(r.pipe)(a,l.g.filter(e=>e.state===o.a.PlagiarismCheckingState.CHECKED),l.g.map(e=>e.sortedAlerts),l.g.getOrElse(()=>[])));var a;return n.createElement("div",{ref:e=>{null!==e&&(this._el=e)}},n.createElement(d.d,{title:e.title}),n.createElement(d.b,{model:e}),n.createElement("div",null,n.createElement(u.a,{html:e.dedHTML,title:e.title,alerts:e.sortedAlerts,plagiarism:t}),n.createElement(p.a,{alerts:e.sortedAlerts,plagiarism:t})),n.createElement(d.c,null))}}class g extends n.Component{_prepareHTML(e){return'<!doctype html><html lang="en" style="--rem: 23.8;"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>Report</title><style>'+Object(m.a)()+"</style></head>"+`<body>${e}</body>`+"</html>"}render(){const{reportViewModel:e}=this.props;return n.createElement(s.a.div,{className:c.a.invisible},e.reportData.view(Object(i.flow)(l.g.map(t=>n.createElement(h,{model:t,onElementsReady:({header:t,footer:a,stats:n,text:i})=>e.generateReport(this._prepareHTML(n+i),t,a)})),l.g.toNullable)))}}},uZT5:function(e,t,a){"use strict";a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return u}));var n=a("ERkP"),i=a("9NHN"),r=a("vOOZ"),s=a("uO+M"),o=a("6gXa"),l=a("ps/9");const c=()=>n.createElement("svg",{className:b.svg,viewBox:"0 0 14 11",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},n.createElement("defs",null,n.createElement("path",{d:"M11.864 16.273a.792.792 0 0 0-1.145 1.094l3.752 3.93 6.839-7.99a.792.792 0 1 0-1.203-1.03l-5.7 6.66-2.543-2.664z",id:"b"}),n.createElement("filter",{x:"-18.2%",y:"-10.8%",width:"136.4%",height:"143%",filterUnits:"objectBoundingBox",id:"a"},n.createElement("feOffset",{dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1"}),n.createElement("feGaussianBlur",{stdDeviation:".5",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),n.createElement("feColorMatrix",{values:"0 0 0 0 0.168627451 0 0 0 0 0.176470588 0 0 0 0 0.219607843 0 0 0 0.7 0",in:"shadowBlurOuter1"}))),n.createElement("g",{transform:"translate(-9 -12)",fillRule:"nonzero",fill:"none"},n.createElement("use",{fill:"#000",filter:"url(#a)",xlinkHref:"#b"}),n.createElement("use",{fill:"#FFF",fillRule:"evenodd",xlinkHref:"#b"}))),d=()=>n.createElement("svg",{className:b.svg2,viewBox:"0 0 12 9",width:"12",height:"9",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M1.386 4.115L4.561 7.29l5.81-5.81",stroke:"#FFF",strokeWidth:"2",fill:"none",fillRule:"evenodd",strokeLinecap:"round"})),p=({checked:e,className:t,children:a,name:r})=>n.createElement(m,{name:r,checked:e,className:t,checkedComponent:e=>n.createElement("div",Object.assign({key:"checkbox"},Object(i.c)(b.rectangle)),e&&n.createElement(c,null))},a),u=({checked:e,className:t,children:a,name:i})=>n.createElement(m,{checked:e,name:i,className:t,checkedComponent:e=>n.createElement("div",{key:e?"checkbox1":"checkbox2",className:e?b.rectangleFilledBlue:b.rectangle},e&&n.createElement(d,null))},a),m=({checked:e,checkedComponent:t,className:a,children:s,name:o})=>n.createElement(r.a.label,Object.assign({},Object(i.c)(b.wrapper,a),{onClick:e=>e.stopPropagation()},o?{"data-name":`${o}-checkbox`}:{}),n.createElement(r.a.input,{type:"checkbox",checked:e,onChange:t=>e.modify(e=>!e),className:b.inputCheckbox}),e.view(t),n.createElement("div",null,s)),h={display:"flex",marginRight:o.a.rem(.5),paddingTop:o.a.rem(.18),width:o.a.rem(1),height:o.a.rem(1),border:`2px solid ${s.Color.CoreNeutral30}`,borderRadius:o.a.rem(l.t),backgroundColor:"transparent",alignItems:"center"},g={paddingTop:o.a.rem(.1),borderColor:s.Color.CoreBlue50,borderRadius:o.a.rem(l.t),backgroundColor:s.Color.CoreBlue50},f={width:o.a.percent(100),height:o.a.percent(100)},b=o.a.stylesheet({wrapper:[{display:"flex",cursor:"default",alignItems:"center",userSelect:"none"}],rectangle:[h],rectangleFilledBlue:[h,g],inputCheckbox:[{margin:0,"-webkit-appearance":"none",appearance:"none"}],svg:[f],svg2:[{margin:"auto"}]})},uukV:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("OA+g"),r=a("LNSM"),s=a("lrqh");!function(e){let t,a;!function(e){e[e.CHECKED=0]="CHECKED",e[e.NOT_CHECKED=1]="NOT_CHECKED"}(t=e.PlagiarismCheckingState||(e.PlagiarismCheckingState={})),function(e){e.Mock=class{constructor(){this.downloadStarted=r.a.create(!1),this.beginDownload=i.constVoid,this.tryToInterrupt=i.constVoid,this.generateReport=()=>{throw new Error("Method not implemented.")},this.reportData=r.a.create(s.g.none),this.dedHTML="",this.dispose=i.constVoid}}}(a=e.ViewModel||(e.ViewModel={}))}(n||(n={}))},vLzu:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return n}));var n,i=a("I7vG"),r=a("FGLS"),s=a("zR/0"),o=a("CvSs"),l=a("lrqh"),c=a("D9EC"),d=a("mEc7"),p=a("Pe9T");class u{constructor(e,t,a,i,l,c){this._doxApi=e,this._appRouter=t,this._notificationsManager=a,this._telemetry=i,this._environment=l,this._config=c,this._upload=e=>this._doxApi.createDocument(r.a.Create.file(e,r.a.UploadFileMode.plain)),this.uploadModel=new p.d.UploadModelImpl(e=>this._upload(e),(e,t)=>this._appRouter.navigate(d.a.routes.denali_editor.href({docId:e}),t),this._telemetry,this._notificationsManager,this._environment,this._config),this.state=this.uploadModel.state.pipe(s.a.pairwise(),s.a.map(([e,t])=>o.a.isInProgress(t)?n.State.loading:o.a.isOk(t)||o.a.isIdle(t)&&o.a.isOk(e)?n.State.uploaded:n.State.idle),s.a.startWith(n.State.idle))}isUploaded(e,t){const a=Object(i.pipe)(this._appRouter.locationState,l.g.chain(e=>l.g.fromNullable(e.uploadedFileType))),n=Object(i.pipe)(this._appRouter.locationState,l.g.chain(e=>l.g.fromNullable(e.uploadedFileName))),r=void 0!==e?Object(i.pipe)(a,l.g.exists(t=>t===e)):l.g.isSome(a),s=void 0!==t?Object(i.pipe)(n,l.g.exists(e=>t.test(e))):l.g.isSome(n);return r||s}dispose(){this.uploadModel.dispose()}}!function(e){let t;!function(e){e.idle="idle",e.loading="loading",e.uploaded="uploaded"}(t=e.State||(e.State={}));e.Mock=class{constructor(){this.uploadModel={navigated:c.l},this.state=s.a.EMPTY,this.dispose=c.l}isUploaded(e,t){throw new Error("Method not implemented.")}showUploadNotificationIfNeeded(){throw new Error("Method not implemented.")}}}(n||(n={}))},vVVP:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var n=a("a5W6"),i=a("OA+g"),r=a("I7vG"),s=a("5E2i"),o=a("kgbq"),l=a("mbuk"),c=a("+JVj"),d=a("lrqh"),p=a("6fbX"),u=a("hoSD"),m=a("QxMx"),h=a("D9EC"),g=a("PrA7"),f=a("dE97"),b=a("UEGg"),y=a("kFFO"),C=a("XpkH");class v{constructor(e,t,a,n,o,l,c,p){this._alert=e,this._alertsService=t,this._alertRangeService=a,this._changeMarksInDEd=n,this._create=o,this._update=l,this._remove=c,this._onTransitionEnd=p,this._currentState=C.b.from(C.c.initial),this._scheduledState=C.b.from(C.c.visible),this.id=this._alert("id").id,this._marksMap=new Map,this._alertRef=this._alertsService.takeReference(this._alert("_alertRef"),"mark"),this._shouldInitMark=!0,this._tryToUpdateRangesInAlert=e=>{if(!e.to.updateRanges||!Object(r.pipe)(this._alertRangeService.hasNewRangesForUpdate(this.id),d.b.fold(i.constFalse,s.a)))return d.g.none;const t=Object(r.pipe)(this._alertRangeService.applyPendingRangesUpdate(this.id),d.b.mapLeft(e=>S("markAlert").error("cannot apply pending ranges",e)),d.g.fromEither,d.g.chain(s.a),d.g.filter(({addedHighlightedRanges:e,removedHighlightedRanges:t})=>e.length>0||t.length>0));return Object(r.pipe)(t,d.g.map(e=>({commit:()=>e.removedHighlightedRanges[1](),ranges:{added:e.addedHighlightedRanges,removed:e.removedHighlightedRanges[0]}})))},this._dispose=()=>{this._marksMap.clear(),d.b.either.map(this._alertRef,e=>e.dispose())},this._disposeIfEmpty=()=>{0===this._marksMap.size&&this._dispose()},d.b.either.mapLeft(this._alertRef,e=>S("markAlert").warn("can not take alertRef",e))}get state(){return{current:this._currentState,scheduled:this._scheduledState}}get alert(){return this._alert()}scheduleApply(e){return this._throwWhenNotAllowedState(e),this._throwWhenInFinaleState(e),Object(p.g)(e!==C.c.initial,`Cannot schedule change ${this.id} from ${this._currentState.visualState} to initial state`),this._currentState.visualState!==C.c.initial||e!==C.c.disposed&&!C.c.isApplied(e)?this._scheduledState&&this._scheduledState.forceUpdate?this._scheduledState=C.b.updateVisualState(this._scheduledState,e):this._currentState.visualState!==e||this._currentState.updateRanges?this._scheduledState=C.b.updateVisualState(this._currentState,e):this._scheduledState=null:(this._scheduledState=null,this._currentState=C.b.from(C.c.disposed),this._dispose()),this}scheduleUpdate(){this._throwWhenInFinaleState(),this._scheduledState=C.b.updateRanges(this._scheduledState||this._currentState,!0)}scheduleForceUpdate(){this._throwWhenInFinaleState(),this._scheduledState=C.b.forceUpdate(this._scheduledState||this._currentState,!0)}apply(){if(!C.a.isPending(this))return;this._throwWhenInFinaleState();const e=this._getTransition();Object(r.pipe)(this.change(),d.g.filter(e=>e.rawMark.length>0),d.g.map(t=>{this._handleBasicEvent(t.rawMark),t.commit(),this._onTransitionEnd(e,this)}))}applyWith(e){const t=[this,...e];this._handleMultipleHighlights(t,e=>e.change())}markByIndex(e){try{return this._throwWhenInFinaleState(),this._shouldInitMark&&(this._shouldInitMark=!1,this.apply()),this._markbyIndex(e)}catch(e){return d.g.none}}get mark(){return this.markByIndex(0)}_iterateOverMarkAlerts(e,t){e.forEach(({change:e,ma:a})=>{e.rawMark.forEach(e=>{"create"===e.action?a._setMarkAndCheckFinaleState(e.id,Object(r.pipe)(t.created.get(e.id)||d.b.left(new Error("Cannot get unknown mark")),d.g.fromEither)):"remove"===e.action&&a._removeMark(e.id)}),e.commit(),a._disposeIfEmpty()})}_handleMultipleHighlights(e,t){const a=e.map(e=>[e,t(e)]).filter(([e,t])=>Object(r.pipe)(t,d.g.filter(t=>0!==t.rawMark.length||(S("markAlert").warn("rawAction must have rawMark array",{rawAction:t.action,state:Object.assign(Object.assign({},e.toJSON()),{alert:void 0})}),!1)),d.g.isSome)).map(([e,t])=>({ma:e,change:d.g.unsafeGet(t)}));if(0===a.length)return;const n=u.a.flatMap(a.map(e=>e.change.rawMark)),i=this._changeMarksInDEd(n);this._iterateOverMarkAlerts(a,i)}get _mark(){return this._markbyIndex(0)}_markbyIndex(e){return this._marksMap.size>e?0===e?this._marksMap.values().next().value:Array.from(this._marksMap.values())[e]:d.g.none}_setMarkAndCheckFinaleState(e,t){this._throwWhenInFinaleState(),this._setMark(e,t)}_setMark(e,t){this._shouldInitMark=!1,this._marksMap.set(e,t)}_removeMark(e){this._marksMap.delete(e)}change(){Object(p.g)(C.a.isPending(this),"Next state should be scheduled to change it",()=>JSON.stringify({currentState:this._currentState,aid:this.id}));const e=this._commitTransition();return e.from.visualState!==e.to.visualState||e.to.forceUpdate||e.to.updateRanges?d.g.some(this._getRawActionForApply(e)):d.g.none}_handleBasicEvent(e){const t=this._changeMarksInDEd(e);e.forEach(e=>{if(e.action===l.a.Change.ActionType.remove)this._removeMark(e.id);else{const a=Object(r.pipe)(d.g.fromNullable(this._marksMap.get(e.id)),d.g.chain(s.a),d.g.alt(()=>Object(r.pipe)((e.action===l.a.Change.ActionType.create?t.created.get(e.id):t.updated.get(e.id))||d.b.left(new Error("Cannot get unknown mark")),d.g.fromEither)));this._setMark(e.id,a)}}),this._disposeIfEmpty()}_getTransition(){return Object(p.g)(C.a.isPending(this),"Next state should be scheduled to change it",()=>JSON.stringify({currentState:this._currentState,aid:this.id})),{from:this._currentState,to:this._scheduledState}}_commitTransition(){const e=this._getTransition();return this._currentState=Object.assign(Object.assign({},e.to),{updateRanges:!1,forceUpdate:!1}),this._scheduledState=null,e}_getRawActionForApply(e){switch(e.from.visualState){case C.c.initial:return Object(r.pipe)(this._tryToUpdateRangesInAlert(e),d.g.map(e=>e.commit())),{action:"create",commit:o.a,rawMark:this._getHighlightRanges(t=>this._create(()=>t,e)(t.meta.id))};default:switch(e.to.visualState){case C.c.disposed:const t=C.c.isApplied(e.from.visualState)||f.a.State.isRemoved(this.alert.state)&&b.a.isApplicableAlert(this.alert)&&this._getAppliedRanges(i.constVoid).length>0?this._getAppliedRanges((e,t)=>({id:t().meta.id,range:t})):this._getHighlightRanges(e=>({id:e.meta.id,range:()=>e}));return{action:"remove",commit:Object(r.pipe)(this._tryToUpdateRangesInAlert(e),d.g.map(({commit:e})=>e),d.g.getOrElse(()=>i.constVoid)),rawMark:t.map(e=>this._remove(e.range)(e.id))};case C.c.applied:const a=this._getHighlightRanges(e=>this._remove(()=>e)(e.meta.id));return{action:"replace",commit:Object(r.pipe)(this._tryToUpdateRangesInAlert(e),d.g.map(({commit:e})=>e),d.g.getOrElse(()=>i.constVoid)),rawMark:[...a,...this._getAppliedRanges((t,a)=>this._create(a,e)(a().meta.id))]};default:const n=()=>f.a.State.isBulkApplied(this._alert("_getRawActionForApply").state)?this._getAppliedRanges((e,t)=>t()):this._getHighlightRanges(s.a);return Object(r.pipe)(this._tryToUpdateRangesInAlert(e),d.g.map(({commit:t,ranges:a})=>this._getReplaceAction(e,n(),a.removed,t)),d.g.getOrElse(()=>({action:"update",commit:o.a,rawMark:n().map(t=>this._update(()=>t,e)(t.meta.id))})))}}}_getReplaceAction(e,t,a,n){return{action:"replace",commit:n,rawMark:[...a.map(e=>this._remove(()=>e)(e.meta.id)),...t.map(t=>this._create(()=>t,e)(t.meta.id))]}}_getAppliedRanges(e){return Object(r.pipe)(this._alertRangeService.getAppliedRanges(this.id),d.b.fold(e=>(S("markAlert").error("cannot get applied ranges",{error:e.message,alert:b.a.snapshot(this._alert("_getAppliedRanges"))}),[]),n.mapWithIndex(e)))}_getHighlightRanges(e){return Object(r.pipe)(this._alertRangeService.getHighlightRanges(this.id),d.b.fold(t=>(S("markAlert").warn("cannot get highlight ranges via range service",{error:t,alert:this._alert("_getHighlightRanges")}),Object(r.pipe)(this._alert("_getHighlightRanges_Fallback").getHighlightRanges(),n.map(e))),n.map(e)))}_throwWhenNotAllowedState(e){const t=this._alert("_throwWhenNotAllowedState");Object(p.g)(!(!b.a.isDefault(t)&&!b.a.isSuper(t))||(!e||f.a.State.isBulkApplied(t.state)||!C.c.isApplied(e)),`Applied state isn't allowed for ${this.id}`)}_throwWhenInFinaleState(e){Object(p.g)(e&&C.a.isOneOf(C.c.applied)(this)?e===C.c.disposed||f.a.State.isBulkApplied(this._alert("_throwWhenInFinaleState").state):C.a.notAnyOf(C.c.disposed)(this),`'${this._currentState.visualState}' MarkAlert '${this.id}' cannot be changed${e?` to '${e}' `:""}`)}toJSON(){return{current:this._currentState,scheduled:this._scheduledState,mark:{id:Object(r.pipe)(this._mark,d.g.map(e=>e.id),d.g.toUndefined),range:Object(r.pipe)(this._mark,d.g.map(e=>e.range),d.g.toUndefined)},alert:this._alert("toJSON")}}equals(e){return C.a.eq.equals(this,e)}hashCode(){return Object(y.b)(this.id)}}!function(e){e.compareTo=e=>{const t=Object(m.a)(c.b.distanceFrom)(e);return(e,a)=>Object(h.d)(Math.min(...e.alert.getHighlightRanges().map(t)),Math.min(...a.alert.getHighlightRanges().map(t)))}}(v||(v={}));const S=Object(h.k)(g.Monitoring.Logging.getLogger)},vXpH:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return m})),a.d(t,"c",(function(){return h}));var n=a("ERkP"),i=a("vOOZ"),r=a("9NHN"),s=a("nnns"),o=a("tZ26"),l=a("D6Vf"),c=a("BugA"),d=a("TIXb");const p="modal-notification";var u,m;!function(e){e.TopLeft="topLeft",e.TopRight="topRight",e.BottomLeft="bottomLeft",e.BottomRight="bottomRight"}(u||(u={})),function(e){e.Left="Left",e.Right="Right"}(m||(m={}));class h extends n.Component{render(){const{title:e,content:t,position:a,icon:l,iconPosition:p,label:h,buttons:g,isCloseButton:f}=this.props;return n.createElement(i.a.Fragment,null,this.props.isVisibleAtom.view(i=>i&&n.createElement("div",Object.assign({id:this._id},Object(r.c)(d.modalNotification,p===m.Right?d.modalNotificationReverse:"",d[a||u.BottomLeft])),!1!==f&&n.createElement(s.a,{name:"modal-notification-close",className:d.closeIcon,onClick:()=>this._closeModal()},n.createElement(o.d.Close,null)),(l||h)&&n.createElement("section",{className:d.iconSection},h&&n.createElement("div",{className:d.label},h),l&&n.createElement("div",{className:d.icon},l)),n.createElement("section",{className:d.contentSection},n.createElement(c.Paper,{className:d.title},e),n.createElement(c.Base,{className:d.content},t),g&&n.createElement("div",{className:d.btnGroup},g)))))}get _id(){return this.props.id||p}_closeModal(){this.props.isVisibleAtom.set(!1)}}!function(e){class t extends n.Component{render(){return n.createElement(n.Fragment,null,n.createElement(l.b,{positionType:"fixed",preventClose:!1,visible:this.props.isVisibleAtom,alignment:"none",overlayType:"transparent"}),n.createElement(e,Object.assign({key:"modal-notification"},this.props)))}}e.WithOverlay=t}(h||(h={}))},vtAC:function(e,t,a){"use strict";a.d(t,"a",(function(){return g})),a.d(t,"b",(function(){return f}));var n=a("ERkP"),i=a("vOOZ"),r=a("9NHN"),s=a("LNSM"),o=a("D9EC"),l=a("uO+M"),c=a("6gXa"),d=a("WIwS"),p=a("ps/9"),u=a("Z0Em"),m=a("zR/0"),h=a("gy42");function g({value:e,initValue:t=u.a.MIN,wrapperClass:a,progressClass:s,isLoading:o=m.a.of(!1)}){const l=f(e,t);return n.createElement(i.a.div,Object.assign({},Object(r.c)(O.wrapper,a)),n.createElement(b,{width:l,progressClass:s,isLoading:o}))}function f(e,t=u.a.MIN){const a=s.a.create(!1);return requestAnimationFrame(()=>requestAnimationFrame(()=>a.set(!0))),m.a.combineLatestStatic(h.b.toObservable(e),a,(e,a)=>a?e:t)}function b({width:e,progressClass:t,isLoading:a}){const s=e.pipe(m.a.map(e=>`${e}%`)),l=e.pipe(m.a.map(u.a.prism.reverseGet),m.a.map(e=>e>0?`${e+.75}%`:0),m.a.startWith(0)),c=a.pipe(m.a.switchMap(e=>e?s:"0")),d=e.pipe(m.a.map(u.a.isMin),m.a.shareReplay({bufferSize:1,refCount:!0}));return n.createElement(n.Fragment,null,n.createElement(i.a.div,Object.assign({},Object(r.c)(O.borderContainer,d.pipe(m.a.map(Object(o.c)(O.borderContainerZeroWidth,O.borderContainerWithMinWidth)))),{style:{width:l}})),n.createElement(i.a.div,Object.assign({},Object(r.c)(t||O.defaultProgress,O.progressBar,d.pipe(m.a.map(Object(o.c)(O.progressBarZeroWidth,O.progressBarWithMinWidth)))),{style:{width:s}})),n.createElement(i.a.div,{className:O.loading,style:{width:c}}))}const y=c.a.keyframes({"0%":{backgroundPosition:"0 0"},"100%":{backgroundPosition:"20px 20px"}}),C={position:"relative",width:c.a.percent(100),height:c.a.rem(.25),borderRadius:c.a.rem(p.r),backgroundColor:d.j},v={position:"relative",top:0,height:c.a.percent(100),borderRadius:c.a.rem(p.r),backgroundPosition:"center",transition:"width .8s ease-in-out 0s"},S={minWidth:c.a.px(4)},E={position:"absolute",backgroundColor:l.Color.CoreNeutral0},w={minWidth:c.a.px(6)},k={position:"absolute",minWidth:0,backgroundImage:d.c,backgroundSize:"20px 20px",transition:"none",animation:`${y} 1s linear infinite`},_={backgroundImage:d.f},O=c.a.stylesheet({wrapper:[C,C],progressBar:[v],progressBarZeroWidth:[{minWidth:0}],progressBarWithMinWidth:[S],borderContainer:[v,E],borderContainerZeroWidth:[{minWidth:0}],borderContainerWithMinWidth:[w],loading:[v,k],defaultProgress:[_]})},vz4c:function(e,t,a){"use strict";var n,i,r,s,o,l,c=a("D57K"),d=a("I7vG"),p=a("2Jhg"),u=a("LNSM"),m=a("xlCj"),h=a("R+r4"),g=a("bYZB"),f=a("D8Xd"),b=a("zR/0"),y=a("1huE"),C=a("CvSs"),v=a("gy42"),S=a("lrqh"),E=a("6fbX"),w=a("D9EC"),k=a("PrA7"),_=a("mEc7"),O=a("8iZ1");class A{constructor(e){this._closeModal=e,this.actions=new b.a.Subject,this._subscriptions=new y.a.Keeper,this._subscriptions.push(this.actions.subscribe(()=>this._closeProofitOrder()))}_closeProofitOrder(){this._closeModal()}dispose(){this._subscriptions.dispose()}}a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return x}));class T{constructor(e,t){this.details=e,this._ops=t,this.active=u.a.create(!1),this.recommended=this.details.enabled&&(this.details.turnaround===h.a.PlanType.Instant&&this.details.tier===h.a.PlanTier.Base||this.details.turnaround===h.a.PlanType.SixHours&&this.details.tier===h.a.PlanTier.Clarity),this.select=()=>{this._ops._selectPlan(this.details)},this.unselect=()=>{this._ops._selectPlan(null)},this.placeOrder=e=>this._ops._placeOrder(this.details,e)}toggleActive(e){return this.active.set(e),this}}!function(e){e.Order="Order",e.Success="Success"}(n||(n={})),function(e){e[e.Step1=0]="Step1",e[e.Step2=1]="Step2"}(i||(i={})),function(e){e[e.Step1=0]="Step1",e[e.Step2=1]="Step2",e[e.Step3=2]="Step3",e[e.Step4=3]="Step4"}(r||(r={})),(o=s||(s={})).selectPlanTier=function(e,t){return Object.assign(Object.assign({},e),{selectedPlanTier:t,selectedPlans:e.plans.filter(e=>e.details.tier===t).sort((e,t)=>t.details.turnaround-e.details.turnaround).slice(0,3)})},o.selectPlan=function(e,t){const a=S.g.getEq(h.a.Plan.eq),n=e=>a.equals(t,S.g.some(e.details)),i=e=>e.toggleActive(n(e));return Object.assign(Object.assign({},e),{plans:e.plans.map(i),selectedPlans:e.selectedPlans.map(i),selectedPlan:p.f.of(e.plans.find(n))})};class x{constructor(e,t,a,o,l,v,w){this._subscription=e,this._documentModel=t,this._ded=a,this._user=o,this._notificationsManager=l,this._router=v,this._config=w,this.modal=u.a.create(p.e),this.isVisibleModal=this.modal.lens(m.a.create(e=>e.nonEmpty(),(e,t)=>e?t:p.e)),this.viewState=u.a.create(p.e),this.subscriptionState=this._subscription.state,this.braintreeApi=this._subscription.braintreeApi,this.leftStep=u.a.create(r.Step1),this.rightStep=u.a.create(i.Step1),this._orderModalViewModelOption=p.e,this._initialNativeLanguage=S.g.none,this.viewStateAndSubscription=this.viewState.pipe(b.a.combineLatest(this._subscription.state)),this._subscriptions=new y.a.Keeper,this._closeModal=()=>this.modal.set(p.e),this.changeLeftStep=e=>{this.leftStep.set(e)},this.changeRightStep=e=>{this.rightStep.set(e)},this.placeOrderAfterAntiFraudCheck=e=>{this._log.info("Anti-fraud place order after check"),this._subscriptions.push(this.viewStateAndSubscription.pipe(b.a.first(),b.a.map(([e])=>e.get()),b.a.map(e=>e.selectedPlan.get()),b.a.switchMap(t=>t.placeOrder(Object(p.h)(e)))).subscribe(()=>this._onBillingSuccess(),()=>this.onBillingError()))},this.onBillingError=()=>{this._subscriptions.push(this._showPaymentError().subscribe())},this.requestPlans=this._ded.contentUpdated.pipe(b.a.filter(g.b.isTextMaybeWithFormatting),b.a.auditTime(1e3),b.a.startWith(void 0),b.a.switchMap(()=>Promise.all([this._proofit.getPlans(),this._user.getUserNativeLanguage()])),b.a.retryWhen(C.a.OperationRetrier.RetryStrategy.conditional(e=>"TimeoutError"===e.name||"NotConnectedError"===e.name,C.a.OperationRetrier.RetryStrategy.linear(2,1e3))),b.a.tap(([e,t])=>{this._initialNativeLanguage=Object(d.pipe)(t,S.b.getOrElse(()=>S.g.none));const a=[...e.turnaroundOptions,...e.clarityTurnaroundOptions].map(e=>new T(e,this)),n={words:e.words,selectedPlanTier:h.a.PlanTier.Base,plans:a,selectedPlans:[],selectedPlan:p.e,proofitState:p.e,statistics:p.e,userInputs:Object(d.pipe)(t,S.b.fold(()=>e.userInputs,t=>Object.assign(Object.assign({},e.userInputs),{nativeLanguage:t}))),priceOfferId:e.priceOfferId};this.viewState.set(Object(p.h)(s.selectPlanTier(n,h.a.PlanTier.Clarity)))}),b.a.catchError(e=>(this._log.error("Error querying proofit plan options",e),this._notificationsManager.enqueue("error").pipe(b.a.filter(f.a.isCloseAction),b.a.tap(()=>this.modal.set(p.e))))),b.a.finalize(()=>{this.viewState.set(p.e)}),b.a.share()),this.requestStatistics=()=>(this._log.info("Request Statistics"),this._proofit.getStatistics().pipe(b.a.retryWhen(C.a.OperationRetrier.RetryStrategy.conditional(e=>"NotConnectedError"===e.name,C.a.OperationRetrier.RetryStrategy.linear(2,1e3))),b.a.tap(e=>{this.viewState.modify(t=>t.map(t=>{var a=Object(c.__rest)(t,[]);return Object.assign(Object.assign({},a),{statistics:e})}))}),b.a.catchError(e=>(this._log.debug("Error querying proofit statistics",e),b.a.of(p.f.empty()))))),this.selectPlanTier=e=>{this.viewState.modify(t=>t.map(t=>s.selectPlan(s.selectPlanTier(t,e),S.g.none)))},this._selectPlan=e=>{this.viewState.modify(t=>t.map(t=>s.selectPlan(t,S.g.fromNullable(e))))},this._placeOrder=(e,t)=>(this._updateUserNativeLanguage(),this._proofit.placeOrder(e,this._getUserInputs(),this._getPriceOfferId(),t)),this._onBillingSuccess=()=>{this._subscriptions.push(this._showPaymentMessage().subscribe())},this._log=k.Monitoring.Logging.getLogger("ProofitView"),this._goToMyDocuments=()=>{window.PROOFIT_SUBMITTED=!0,this._router.navigate(_.a.routes.documents.href())},this._proofit=this._documentModel.proofit;const O=this._subscription.state.get().value;this.requirePaymentCheck=this._user.features.denali.requirePaymentCheck?u.a.create(!0):this.viewState.view(e=>e.flatMap(e=>e.selectedPlan).map(e=>e.details.requirePaymentCheck).getOrElse(!1)),this._subscriptions.push(this._proofit.state.pipe(b.a.tap(e=>this.viewState.modify(t=>t.map(t=>Object.assign(Object.assign({},t),{proofitState:e})))),b.a.switchMap(e=>e.fold(()=>b.a.EMPTY,b.a.of)),b.a.switchMap(e=>{switch(e.kind){case"submitted":return this._log.info("Document submitted for proofreading"),this._showSuccessModal();case"finished":case"cancelled":case"sending":return b.a.EMPTY;case"error":return this._log.error("Error sending document for proofreading:",e.errorType),this._createErrorNotification(e.errorType,O.paymentMethod);default:return Object(E.d)(e)}})).subscribe()),this._subscriptions.push(this.modal.pipe(b.a.pairwise(),b.a.filter(([e])=>e.exists(e=>e.type===n.Success))).subscribe(this._goToMyDocuments))}clearModals(){this._orderModalViewModelOption.forEach(e=>e.dispose()),this._orderModalViewModelOption=p.e}newOrderModalViewModel(){const e=new A(this._closeModal);return this._orderModalViewModelOption=Object(p.h)(e),e}closeModal(){this.modal.set(p.e),this.leftStep.set(r.Step1),this.rightStep.set(i.Step1)}showOrderModal(){this.modal.set(Object(p.h)({type:n.Order}))}selectUserInput(e,t){this.viewState.modify(a=>a.map(a=>Object.assign(Object.assign({},a),{userInputs:Object.assign(Object.assign({},a.userInputs),{[e]:t})})))}dispose(){this.clearModals(),this._subscriptions.dispose()}_showPaymentMessage(){return this._notificationsManager.enqueue("paymentSuccess")}_showPaymentError(){return this._notificationsManager.enqueue("paymentError")}_showSuccessModal(){return this._log.info("Show Success Modal"),this._proofit.jobDetails.pipe(b.a.switchMap(e=>e.fold(()=>b.a.EMPTY,b.a.of)),b.a.combineLatest(this._user.profile,({dueTime:e},{email:t})=>Object(p.h)({type:n.Success,payload:{email:t,dueDate:e}})),b.a.first(),b.a.tap(v.b.toAtom(this.modal)))}_createErrorNotification(e,t){switch(e){case"payment":return this._notificationsManager.enqueue("proofitPaymentDeclinedError",{paymentMethod:t}).pipe(b.a.filter(e=>"navigateToSubscription"===e),b.a.tap(()=>window.open(this._config.account.subscription,"_blank")));case"emptyDocument":return this._notificationsManager.enqueue("proofitEmptyDocumentError");case"alreadyProofread":return this._notificationsManager.enqueue("proofitDocumentProofreadError").pipe(b.a.filter(e=>"navigateToDocuments"===e),b.a.tap(this._goToMyDocuments));case"complexInternalStructure":return this._notificationsManager.enqueue("proofitComplexInternalStructureError").pipe(b.a.filter(e=>"navigateToDocuments"===e),b.a.tap(this._goToMyDocuments));case"unknown":return this._notificationsManager.enqueue("error");default:return Object(E.d)(e)}}_getUserInputs(){return this.viewState.get().map(({userInputs:e})=>e).getOrElse({nativeLanguage:S.g.none,dialect:S.g.none,quotationType:S.g.none,spaceType:S.g.none})}_updateUserNativeLanguage(){const e=this._getUserInputs();S.g.getEq(S.c.eqStrict).equals(e.nativeLanguage,this._initialNativeLanguage)||Object(d.pipe)(e.nativeLanguage,S.g.tap(e=>this._user.updateUserNativeLanguage(e)()))}_getPriceOfferId(){const e=this.viewState.get();return Object(E.g)(!e.isEmpty(),"Proofit view state should be initialized"),e.get().priceOfferId}}(l||(l={})).Mock=class{constructor(e,t=S.g.none){this._proofit=e,this._proofitLastJob=t,this.modal=u.a.create(p.e),this.isVisibleModal=u.a.create(!0),this.subscriptionState=O.a.mock().state,this.leftStep=u.a.create(r.Step1),this.rightStep=u.a.create(i.Step1),this.braintreeApi=O.a.mock().braintreeApi,this.requirePaymentCheck=u.a.create(!1),this.clearModals=w.l,this.showOrderModal=()=>{this.modal.set(Object(p.h)({type:n.Order}))},this.showSuccessModal=()=>{this.modal.set(p.e)},this.selectPlanTier=w.l,this.selectUserInput=w.l,this.changeLeftStep=w.l,this.changeRightStep=w.l,this.placeOrderAfterAntiFraudCheck=w.l,this.onBillingError=w.l,this.viewState=u.a.create(p.e),this.requestStatistics=()=>b.a.of(p.f.of({status:h.a.StatisticsStatus.Success,lastCompletedJobDate:this._proofitLastJob})),this.requestPlans=b.a.from(this._proofit.getPlans().then(e=>{this.viewState.set(Object(p.h)({words:e.words,plans:e.turnaroundOptions.map(e=>new T(e,this)).sort((e,t)=>t.details.turnaround-e.details.turnaround),selectedPlans:[],selectedPlan:p.e,selectedPlanTier:h.a.PlanTier.Base,proofitState:p.e,statistics:p.e,userInputs:{nativeLanguage:S.g.none,dialect:S.g.none,quotationType:S.g.none,spaceType:S.g.none},priceOfferId:e.priceOfferId}))}).catch(console.error)),this._updateActive=e=>this.viewState.modify(t=>t.map(t=>{var{plans:a}=t,n=Object(c.__rest)(t,["plans"]);const i=a.find(t=>t.details.turnaround===e);return Object.assign(Object.assign({},n),{plans:a.map(t=>t.toggleActive(t.details.turnaround===e)),selectedPlan:p.f.of(i)})})),this._placeOrder=()=>new Promise(e=>setTimeout(e,1e3)),this._selectPlan=w.l,this.dispose=w.l,this.viewStateAndSubscription=this.viewState.pipe(b.a.combineLatest(u.a.create(C.a.ok({plans:[]}))))}newOrderModalViewModel(){return new A(()=>null)}closeModal(){this.modal.set(p.e),this.isVisibleModal.set(!1)}}},wI8h:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("I7vG"),r=a("LNSM"),s=a("Z0Em"),o=a("hoSD"),l=a("lrqh"),c=a("D9EC"),d=a("6fbX"),p=a("4e/B");!function(e){let t,a,n,u,m,h;function g(e,{emogenie:{popup:{intensities:a}}}){switch(e){case t.VeryStrong:return a.veryStrong;case t.Strong:return a.strong;case t.Moderate:return a.moderate;case t.Slight:return a.slight;default:return Object(d.d)(e)}}!function(e){e[e.Low=1]="Low",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate",e[e.Strong=4]="Strong",e[e.VeryStrong=5]="VeryStrong"}(t||(t={})),e.intensitiesOrder=o.e.keys(t).map(e=>t[e]).filter(e=>"number"==typeof e).sort(),function(e){e.fromConfidence=function(e,a){const n=s.b.unwrap(e);return n<.25?t.Slight:n<.5?t.Moderate:n/a>.5?t.VeryStrong:t.Strong}}(a||(a={})),function(e){e.fromModel=function({name:e,confidence:t,feedback:n,emoji:r},s,o,c){const d=a.fromConfidence(t,o);return{emoji:r,name:e,intensity:d,intensityCaption:g(d,c),feedback:n,actions:{like:{name:`${e}-like`,tooltip:c.emogenie.popup.actions.like,active:Object(i.pipe)(n,l.g.exists(e=>e===p.a.FeedbackType.Like)),disabled:l.g.isSome(n),handler:()=>s(e,p.a.FeedbackType.Like)},dislike:{name:`${e}-dislike`,tooltip:c.emogenie.popup.actions.dislike,active:Object(i.pipe)(n,l.g.exists(e=>e===p.a.FeedbackType.Dislike)),disabled:l.g.isSome(n),handler:()=>s(e,p.a.FeedbackType.Dislike)}}}}}(n=e.Item||(e.Item={})),function(e){let t;!function(e){e.Report="Report",e.ZeroState="ZeroState"}(t=e.Type||(e.Type={})),e.isReport=t=>t.type===e.Type.Report}(u=e.View||(e.View={})),function(e){e.fromModel=function(e,t,a){const i=e.reduce((e,t)=>e+s.b.unwrap(t.confidence),0),[r,...o]=e.map(e=>n.fromModel(e,t,i,a));return{type:u.Type.Report,primaryItem:r,secondaryItems:o,onPopupClose:c.l,onPopupOpen:c.l}}}(m||(m={})),function(e){e.create=function(e,t,a){return{visualState:r.a.combine(e.emotions,t.documentLength.view("trimmed").view(e=>e<120),(t,n)=>n||0===t.length?{type:u.Type.ZeroState,tooltipText:n?l.g.some(a.emogenie.popup.textIsTooShortMessage):l.g.none}:m.fromModel(t,e.sendEmotionFeedback,a))}}}(h=e.ViewModel||(e.ViewModel={})),e.getIntensityTitle=g}(n||(n={}))},wbpH:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return N}));var n=a("6gXa"),i=a("0Hf4"),r=a("uO+M");const s=r.Color.CoreGreen10;var o;!function(e){e.markHeightStandard="alerts-markHeightStandard",e.markHeightTall="alerts-markHeightTall",e.markSelected="alerts-markSelected",e.markSelectedFocused="alerts-markSelectedFocused",e.markBase="alerts-markBase",e.markVisible="alerts-markVisible",e.correctness="alerts-correctness",e.premium="alerts-premium",e.clarity="alerts-clarity",e.engagement="alerts-engagement",e.delivery="alerts-delivery",e.critical="alerts-critical",e.advanced="alerts-advanced",e.plagiarism="alerts-plagiarism",e.originality="alerts-originality",e.vox="alerts-vox",e.synonym="alerts-synonym",e.markAnimated="alerts-markAnimated",e.markHidden="alerts-markHidden",e.markApplied="alerts-markApplied",e.markBulkApplied="alerts-markBulkApplied",e.markBulkAppliedAnimation="alerts-markBulkAppliedAnimation",e.markSuccess="alerts-markSuccess",e.noAnimation="alerts-noAnimation"}(o||(o={}));const l={backgroundPosition:"center calc(100% + 3px)",backgroundRepeat:"no-repeat",contain:"layout style",$nest:{"@media print":{borderBottomWidth:"0 !important"}}},c={$nest:{"@media print":{borderBottomWidth:"3 !important"}}},d=n.a.keyframes({from:{backgroundSize:"100% 0"},to:{backgroundSize:"100% 12%"}}),p={standard:`calc(${n.a.rem(.45)} - 4px)`,tall:n.a.rem(.425)},u=e=>({to:{backgroundColor:e}}),m=(e,t,a,n)=>Object.assign(Object.assign({$unique:!0},l),{paddingBottom:"1px",borderBottom:`3px solid ${t}`,transition:"border-bottom-color .5s linear",$nest:Object.assign(Object.assign({},l.$nest),{"&[data-vertical-underline-start]:before":{borderColor:a,color:a},"& > [data-vertical-underline-body]:after":{borderColor:a},"& > [data-vertical-underline-index]":{color:a},"&[data-superscript]":{padding:0,border:"none",color:a,transition:"none"},"&:not([data-superscript])":{$nest:{[`&.${o.markSelected}.${o.markHeightStandard}`]:{paddingTop:p.standard},[`&.${o.markSelected}.${o.markHeightTall}`]:{paddingTop:p.tall},[`&.${o.markSelected}`]:{$unique:!0,borderBottomColor:n,animation:`${e} 1s ease forwards`},[`&.${o.markSelectedFocused}`]:{$unique:!0,borderBottomColor:a},[`&.${o.markSelected} .${o.markBase}:not(.${o.markSelected})`]:{paddingBottom:"calc(3px + 1px)",borderBottomStyle:"hidden"},[`&.${o.markSelectedFocused} .${o.markBase}:not(.${o.markSelected})`]:{paddingBottom:"calc(3px + 1px)",borderBottomStyle:"hidden"}}}})}),h=n.a.keyframes(u(r.Color.CoreRed10)),g=n.a.keyframes(u(r.Color.CoreYellow10)),f=n.a.keyframes(u(r.Color.CoreCyan10)),b=n.a.keyframes(u(r.Color.CorePurple10)),y=n.a.keyframes(u(r.Color.CoreNeutral10)),C=n.a.keyframes(u(r.Color.CoreBlue10)),v=n.a.keyframes(u(r.Color.CoreRed10)),S=n.a.keyframes(u(r.Color.CoreYellow10)),E=n.a.keyframes(u(r.Color.CoreBlue10)),w=n.a.keyframes(u(r.Color.CoreGreen10)),k=n.a.keyframes(u(r.Color.CorePurple10)),_=n.a.keyframes(u(r.Color.CoreGreen10)),O=e=>{const t=n.a.color(s).fade(e).toRGBA().toString();return{borderBottomColor:t,backgroundColor:t,$nest:{[`&.${o.markHeightStandard}`]:{paddingTop:p.standard},[`&.${o.markHeightTall}`]:{paddingTop:p.tall}}}},A=e=>{return{borderBottomColor:"transparent",backgroundColor:n.a.color(s).fade(e).toRGBA().toString()}},T=n.a.keyframes({from:O("100%"),to:O("50%")}),x={borderBottomWidth:"2px",borderBottomColor:`${r.Color.CoreNeutral40}`,borderBottomStyle:"dotted",backgroundColor:"transparent"},I=n.a.keyframes({to:Object.assign(Object.assign({},O("0%")),x)}),M=n.a.keyframes({from:A("100%"),to:A("50%")}),j={$nest:{[`&:not(.${o.markSelected}):not(.${o.markSelectedFocused})`]:{$nest:{[`&.${o.clarity} &.${o.clarity}`]:{borderBottomStyle:"solid",borderBottomColor:r.Color.CoreBlue50}}},[`&.${o.correctness}, &.${o.markSelected}, &.${o.markSelectedFocused}`]:{$nest:{[`.${o.markVisible}:not(.${o.markSelected}):not(.${o.markSelectedFocused}).${o.clarity} .${o.markVisible}:not(.${o.markSelected}):not(.${o.markSelectedFocused}).${o.clarity}`]:{}}},[`&.${o.clarity}`]:{$nest:{[`& & &:not(.${o.markSelected}):not(.${o.markSelectedFocused})`]:{borderBottomStyle:"hidden !important"}}}}},L={borderBottom:"0 solid transparent",background:"none",animation:"none"},N={markBase:[o.markBase,n.a.style(l),i.a.style(l,{$nest:{"@media print":{borderBottomWidth:"3 !important"}}})].join(" "),correctness:[o.correctness,o.markBase,n.a.style(m(v,r.Color.CoreRed20,r.Color.CoreRed50,r.Color.CoreRed10)),i.a.style(m(v,r.Color.CoreRed20,r.Color.CoreRed50,r.Color.CoreRed10),c)].join(" "),premium:[o.premium,o.markBase,n.a.style(m(S,r.Color.CoreYellow30,r.Color.CoreYellow40,r.Color.CoreYellow10)),i.a.style(m(S,r.Color.CoreYellow30,r.Color.CoreYellow40,r.Color.CoreYellow10),c)].join(" "),clarity:[o.clarity,o.markBase,n.a.style(m(E,r.Color.CoreBlue20,r.Color.CoreBlue50,r.Color.CoreBlue10)),i.a.style(m(E,r.Color.CoreBlue20,r.Color.CoreBlue50,r.Color.CoreBlue10),c)].join(" "),markVisible:[o.markVisible,n.a.style(j),i.a.style(j)].join(" "),engagement:[o.engagement,o.markBase,n.a.style(m(w,r.Color.CoreGreen20,r.Color.CoreGreen50,r.Color.CoreGreen10)),i.a.style(m(w,r.Color.CoreGreen20,r.Color.CoreGreen50,r.Color.CoreGreen10),c)].join(" "),delivery:[o.delivery,o.markBase,n.a.style(m(k,r.Color.CorePurple20,r.Color.CorePurple50,r.Color.CorePurple10)),i.a.style(m(k,r.Color.CorePurple20,r.Color.CorePurple50,r.Color.CorePurple10),c)].join(" "),critical:[o.critical,o.markBase,n.a.style(m(h,r.Color.CoreRed20,r.Color.CoreRed50,r.Color.CoreRed10)),i.a.style(m(h,r.Color.CoreRed20,r.Color.CoreRed50,r.Color.CoreRed10),c)].join(" "),advanced:[o.advanced,o.markBase,n.a.style(m(g,r.Color.CoreYellow30,r.Color.CoreYellow40,r.Color.CoreYellow10)),i.a.style(m(g,r.Color.CoreYellow30,r.Color.CoreYellow40,r.Color.CoreYellow10),c)].join(" "),plagiarism:[o.plagiarism,o.markBase,n.a.style(m(f,r.Color.CoreCyan20,r.Color.CoreCyan50,r.Color.CoreCyan10)),i.a.style(m(g,r.Color.CoreCyan20,r.Color.CoreCyan50,r.Color.CoreCyan10),c)].join(" "),originality:[o.originality,o.markBase,n.a.style(m(b,r.Color.CorePurple20,r.Color.CorePurple50,r.Color.CorePurple10)),i.a.style(m(k,r.Color.CorePurple20,r.Color.CorePurple50,r.Color.CorePurple10),c)].join(" "),vox:[o.vox,o.markBase,n.a.style(m(y,r.Color.CoreNeutral30,r.Color.CoreNeutral50,r.Color.CoreNeutral10)),i.a.style(m(y,r.Color.CoreNeutral30,r.Color.CoreNeutral50,r.Color.CoreNeutral10),c)].join(" "),synonym:[o.synonym,o.markBase,n.a.style(m(C,r.Color.CoreBlue50,"transparent",r.Color.CoreBlue50)),i.a.style(m(C,r.Color.CoreBlue50,"transparent",r.Color.CoreBlue50),c)].join(" "),markAnimated:[o.markAnimated,n.a.style({animation:`${d} .075s ease`})].join(" "),markHidden:[o.markHidden,n.a.style(L),i.a.style(L)].join(" "),markBulkAppliedAnimation:[o.markBulkAppliedAnimation,o.markBase,n.a.style(O("100%"),x,{animation:`${T} 2s linear forwards,\n          ${I} .25s linear 2s forwards`})].join(" "),markBulkApplied:[o.markBulkApplied,o.markBase,n.a.style(m(_,r.Color.CoreNeutral40,r.Color.CoreGreen10,r.Color.CoreGreen10),x)].join(" "),markApplied:[o.markApplied,n.a.style(O("100%"),{animation:`${T} .25s linear forwards`})].join(" "),markSuccess:[o.markSuccess,n.a.style(A("100%"),{animation:`${M} .25s linear forwards`})].join(" "),noAnimation:[o.noAnimation,n.a.style({animationDuration:"0s !important"})].join(" "),markSelected:o.markSelected,markSelectedFocused:o.markSelectedFocused,markHeightStandard:o.markHeightStandard,markHeightTall:o.markHeightTall}},wt7H:function(e,t,a){"use strict";var n,i=a("D57K"),r=a("ERkP"),s=a("a5W6"),o=a("OA+g"),l=a("I7vG"),c=a("prnJ"),d=a("NaPV"),p=a("vOOZ"),u=a("1w6p"),m=a("D6Vf"),h=a("rTXf"),g=a("1gzW"),f=a("zR/0");!function(e){let t;e.Modal=u.b.Node.make(({state:e,notify:a})=>(g.a.useSubscriptionTo(e.pipe(f.a.first(),f.a.tap(e=>a({kind:t.open,source:e.source})()))),r.createElement(p.a.Fragment,null,e.pipe(f.a.map(e=>{const n=a({kind:t.close,source:e.source,context:e.context,showOnLoad:e.showOnLoad});return r.createElement(m.c,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:n},r.createElement(h.a,{blocks:e.blocks,features:e.features,close:n,upgrade:a({kind:t.upgrade}),reset:a({kind:t.reset}),showOnLoad:e.showOnLoad,showOnLoadChanged:e=>a({kind:t.showOnLoadChanged,value:e})()}))}))))),function(e){e.open="open",e.close="close",e.upgrade="upgrade",e.reset="reset",e.showOnLoadChanged="showOnLoadChanged"}(t=e.ActionsKind||(e.ActionsKind={}))}(n||(n={}));var b=a("4Gmt"),y=a("6fbX"),C=a("lrqh"),v=a("30Va"),S=a("kllO"),E=a("LNSM"),w=a("AMXJ");class k{constructor(e,t){this._modalOperations=e,this._telemetry=t,this.shouldCloseWindow=!0,this.isContinueWritingCtaDisabled=E.a.create(!1),this.onLearnPremiumClick=()=>{this._trackButtonClick("learnPremium"),this._modalOperations.onClose()},this.onContinueWritingClick=()=>Object(i.__awaiter)(this,void 0,void 0,(function*(){this.isContinueWritingCtaDisabled.set(!0),yield this._trackButtonClick("continueWriting"),window.close(),this._modalOperations.onClose()})),this.onCloseClick=()=>{this._trackButtonClick("closePopup"),this._modalOperations.onClose()},this.trackPopupShow=()=>{this._telemetry.gnarSpec.confirmUpgradePopupShow(this._telemetry.pageId)},this._trackButtonClick=e=>Object(i.__awaiter)(this,void 0,void 0,(function*(){return this._telemetry.gnarSpec.confirmUpgradePopupClick(e,this._telemetry.pageId)}))}get showCtas(){return!!window.opener}}class _{constructor(e,t,a,n,r){this._modalOperations=e,this._telemetry=t,this._environment=a,this._config=n,this._premiumDemoDocId=r,this.shouldCloseWindow=!1,this.isContinueWritingCtaDisabled=E.a.create(!1),this.onLearnPremiumClick=()=>{this._trackButtonClick("learnPremium"),this._environment.actions.openPopup(new w.a(`${this._config.onlineEditor.docId}${this._premiumDemoDocId}`)),this._modalOperations.onClose()},this.onContinueWritingClick=()=>Object(i.__awaiter)(this,void 0,void 0,(function*(){this._trackButtonClick("continueWriting"),this._modalOperations.onClose()})),this.onCloseClick=()=>{this._trackButtonClick("closePopup"),this._modalOperations.onClose()},this.trackPopupShow=()=>{this._telemetry.gnarSpec.confirmUpgradePopupShow(this._telemetry.pageId)},this._trackButtonClick=e=>Object(i.__awaiter)(this,void 0,void 0,(function*(){return this._telemetry.gnarSpec.confirmUpgradePopupClick(e,this._telemetry.pageId)}))}get showCtas(){return!!this._premiumDemoDocId}}var O=a("+ukg");class A{constructor(e,t,a,n){this._userAccount=e,this._config=t,this._environment=a,this._telemetry=n,this.dismiss=()=>{this._userAccount.settings.incrementDunningDismissCount()},this.updatePayment=()=>{this._telemetry.gnarSpec.inProductDunningNoticationUpdatePaymentInformationButtonClick(this._telemetry.pageId),this._environment.actions.openPopup(new w.a(this._config.account.subscription))}}get isBusinessAdmin(){return O.g.isBusinessAdmin(this._userAccount.features.denaliUserType)}}var T=a("xlCj"),x=a("94k3"),I=a("Uwwq"),M=a("aIes"),j=a("Fgeo");const L=I.a.Category.Id.create(x.a.MutedAlerts.SpecialCategory.InQuotes);class N{constructor(e,t,a,n){this._denaliSettings=e,this._categoriesModel=t,this._features=a,this._telemetry=n,this._preferencesModel=this._denaliSettings.editorPreferences,this._newPreferences=E.a.create(this._denaliSettings.editorPreferences.get()),this.trackOpened=()=>{this._telemetry.gnarSpec.preferencesPopupShow(this._telemetry.pageId)},this.trackSuggestionManagementClicked=()=>void this._telemetry.gnarSpec.deactivatedSuggestionsSuggestionManagementClick(this._telemetry.pageId,"editorSettings",this._telemetry.pageSessionId),this.update=()=>{const e=this._newPreferences.get(),t=this._categoriesModel.getMutedSpecialCategories().has(L),a=this.muteQuotedAlerts.get(),n=t!==a;(!j.e.equals(this._preferencesModel.get(),e)||n)&&(this._denaliSettings.updateEditorPreferences(e),this._telemetry.gnarSpec.preferencesFormSuccess(this.autoScrollToNextAlert.get(),e.fontSize,a,this._telemetry.pageId)),n&&(t?(this._categoriesModel.unmuteCategories([L]),this._telemetry.gnarSpec.muteQuotedAlertsFeatureToggled(this._telemetry.pageId,"unmuted",this._telemetry.pageSessionId)):(this._categoriesModel.muteCategories([L]),this._telemetry.gnarSpec.muteQuotedAlertsFeatureToggled(this._telemetry.pageId,"muted",this._telemetry.pageSessionId)))},this.autoScrollToNextAlert=this._newPreferences.lens("autoScrollToNextAlert").lens(M.b.O.unwrap(!this._features.autoJumpSettings.isDisabledByDefault)),this.fontSize=this._newPreferences.lens(T.a.create(e=>e.fontSize===j.g.Large,(e,t)=>Object.assign(Object.assign({},t),{fontSize:e?j.g.Large:j.g.Normal}))),this.muteQuotedAlerts=E.a.create(this._categoriesModel.getMutedSpecialCategories().has(L))}}var P=a("8z+V"),F=a("gy42"),D=a("BoSw"),R=a("PrA7");class B{constructor(e,t,a,n){this.reportViewModel=e,this._documentModel=t,this._notificationsManager=a,this._modalOperations=n,this.state=f.a.defer(()=>F.b.promiseToStream(()=>this._documentModel.calculateStats())).pipe(f.a.combineLatest(this._documentModel.checkingState,(e,t)=>Object(l.pipe)(e,C.g.filter(()=>"idle"===t))),f.a.switchMap(C.g.fold(()=>f.a.of({type:D.a.State.Type.LOADING}).pipe(f.a.delay(150)),C.b.fold(e=>(R.Monitoring.Logging.getLogger("editor.toolbar").error("Error on requesting document stats",e),this._notificationsManager.enqueue("statisticsError").pipe(f.a.mapTo({type:D.a.State.Type.ERROR}),f.a.finalize(()=>this.onModalClose()))),e=>E.a.combine(this._documentModel.score,this._documentModel.counters,this._documentModel.documentLength.view("trimmed"),(t,a,n)=>Object(l.pipe)(t,C.g.fold(()=>({type:D.a.State.Type.SHORT_CONTENT}),t=>({type:D.a.State.Type.READY,documentIsEmpty:0===n,score:t,counters:a,stats:e}))))))),f.a.startWith({type:D.a.State.Type.EMPTY}),f.a.publishReplay(1),f.a.refCount()),this.onModalClose=()=>{this._modalOperations.onClose()}}}var H=a("eZux"),W=a("USP3");var $=a("lqtc"),V=a("XBrO");const U=({changePlanViewModel:e})=>r.createElement(m.c,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:e.close},r.createElement(V.a,{changePlanViewModel:e}));var G=a("n+Au"),z=a("nnns"),q=a("FieF"),Y=a("BugA"),X=a("rmLU"),K=a("JMYL");const Z=({feedbackViewModel:e,modalOperations:t})=>{const a=r.useContext(X.a.Context),n=E.a.create(!0);return r.useEffect(()=>{e.modalShown.next();const a=n.pipe(f.a.first(e=>!1===e)).subscribe(t.onClose);return()=>a.unsubscribe()},[e.modalShown,n]),r.createElement(m.b,{positionType:"fixed",visible:n,preventClose:!0,animate:!0},r.createElement(m.a,{className:K.wrapper},r.createElement(m.a.Header,null,r.createElement(Y.H1,null,"Send Product Feedback")),r.createElement(m.a.Body,{className:K.feedbackPopupBody,name:"feedbackBody"},r.createElement(Y.P1,{className:K.description},"Tell us what you think. We promise to act on your feedback to make Grammarly even more awesome."),r.createElement(q.a,{autofocus:!0,value:e.currentText.lens("brief"),placeholder:"Brief description",className:K.briefDescriptionInput}),r.createElement(q.c,{placeholder:"Type your feedback",className:K.feedbackInput,value:e.currentText.lens("detailed")}),r.createElement(Y.Base,null,"If you have a support or billing-related request, please go to"," ",r.createElement("a",{href:a.support.mainPage,target:"_blank",className:K.helpdesk},"Grammarly Helpdesk"))),r.createElement(m.a.Footer,{className:K.feedbackPopupFooter},r.createElement(z.a.Ghost,{name:"cancel",onClick:()=>n.set(!1)},"Cancel"),r.createElement(z.a.Primary,{name:"send",disabled:e.currentText.view(e=>""===e.brief||""===e.detailed),onClick:()=>(n.set(!1),e.sendFeedback())},"Send"))))};var Q=a("rk+4"),J=a("tZ26"),ee=a("6gXa"),te=a("uO+M"),ae=a("cQVk");const ne=e=>r.createElement(m.c,{positionType:"fixed",animate:!0,onClose:e.modalOperations.onClose},r.createElement(ie,{preferencesViewModel:e.preferencesViewModel,close:e.modalOperations.onClose})),ie=({preferencesViewModel:e,close:t})=>{const a=r.useContext(Q.a.Context);return g.a.useEffectOnDidMount(e.trackOpened),g.a.useEffectOnWillUnmount(e.update),r.createElement(m.a,{className:me.popupWrapper},r.createElement(m.a.Header,{className:me.popupHeader},r.createElement(Y.H1,null,a.editorSettingsModalHeader)),r.createElement(m.a.Body,{name:"preferencesBody",className:me.popupBody},r.createElement(ce,{value:e.autoScrollToNextAlert,id:"autoScrollSwitcher",title:a.preferences.autoJumpToNextAlert,description:a.preferences.autoJumpToNextAlertDescription}),r.createElement(ce,{value:e.muteQuotedAlerts,id:"muteCitedAlerts",title:a.preferences.muteQuotedAlerts}),r.createElement(ce,{value:e.fontSize,id:"fontSizeIncreasedSwitcher",title:a.preferences.increaseFontSize}),r.createElement(le,{onClick:e.trackSuggestionManagementClicked})),r.createElement(m.a.Footer,null,r.createElement(z.a.Primary,{name:"pref-done-btn",className:me.doneButton,onClick:t},a.done)))},re=({children:e})=>r.createElement(Y.Small,{className:me.description},e),se=({children:e})=>r.createElement("div",{className:me.bodySection},e),oe=e=>{const t=r.useContext(X.a.Context),a=r.useContext(Q.a.Context).preferences;return r.createElement(z.a,{name:"manage-suggestions",href:t.account.suggestions,target:"_blank",onClick:e.onClick,className:me.manageSuggestions},a.suggestionManagementLink,r.createElement(J.d.OuterLink,{className:me.manageSuggestionsIcon}))},le=e=>{const t=r.useContext(Q.a.Context).preferences;return r.createElement(se,null,r.createElement(oe,{onClick:e.onClick}),r.createElement(re,null,t.suggestionManagementDescription))},ce=({value:e,id:t,title:a,description:n})=>r.createElement(se,null,r.createElement("label",{className:me.setting},r.createElement("div",null,r.createElement(Y.Base,null,a),n&&r.createElement(re,null,n)),r.createElement(ae.a,{checked:e,className:me.toggle,id:t}))),de=ee.a.rem(2),pe=ee.a.rem(1),ue=te.Color.CoreBlue50,me=ee.a.prefixedStylesheet("preferencePopup",{popupWrapper:[{display:"flex",flexDirection:"column",width:ee.a.rem(27),userSelect:"none"}],popupHeader:[{padding:`${ee.a.rem(3)} ${de} ${pe}`,backgroundColor:te.Color.CoreNeutral0}],popupBody:[{padding:`0 ${de}`}],doneButton:[{padding:ee.a.important(`0 ${pe}`)}],bodySection:[{padding:`${pe} 0`,borderTop:`1px solid ${te.Color.CoreNeutral20}`,alignItems:"center"}],description:[{color:te.Color.CoreNeutral50,marginTop:ee.a.rem(.5)}],setting:[{display:"flex",cursor:"pointer",justifyContent:"space-between"}],toggle:[{marginLeft:ee.a.rem(1.75)}],manageSuggestions:[{display:"flex",alignItems:"center",color:ue,fontSize:ee.a.rem(te.Text.BodySize),fontWeight:te.Text.BodyWeight,lineHeight:ee.a.rem(2),marginTop:ee.a.rem(-.3125)}],manageSuggestionsIcon:[{stroke:"currentColor"}]});var he,ge,fe;a.d(t,"a",(function(){return ge})),a.d(t,"b",(function(){return be})),function(e){e.Tour="Tour",e.WhatsNew="WhatsNew",e.AddinPromo="AddinPromo",e.Proofit="Proofit",e.Preferences="Preferences",e.Feedback="Feedback",e.ChangePlan="ChangePlan",e.Dunning="Dunning",e.ConfirmUpgrade="ConfirmUpgrade"}(he||(he={})),(fe=ge||(ge={})).tour={type:he.Tour},fe.news={type:he.WhatsNew},fe.addinPromo={type:he.AddinPromo},fe.feedback={type:he.Feedback},fe.dunning={type:he.Dunning},fe.preferences={type:he.Preferences},fe.confirmUpgrade={type:he.ConfirmUpgrade},fe.changePlan=e=>({type:he.ChangePlan,model:e}),fe.setGoals=d.c.setGoals,fe.performance=d.c.performance;class be{constructor(e,t,a,n,i,r,s,o,l,c,d,p,u){this._userAccount=e,this._textResources=t,this._documentContext=a,this._upgradeViewModel=n,this._config=i,this._environment=r,this._feedbackViewModel=s,this._notificationsManager=o,this._documentModel=l,this._reportViewModel=c,this._telemetry=d,this._categoriesModel=p,this._router=u}load(e){switch(e.type){case he.ChangePlan:return this._loadChangePlanModal(e.model);case he.AddinPromo:return this._loadAddinPromo();case he.Tour:return this._loadTour();case he.WhatsNew:return this._loadWhatsNew();case he.Preferences:return this._loadPreferences();case he.Feedback:return this._loadFeedback();case he.Dunning:return this._loadDunning();case he.ConfirmUpgrade:return this._loadConfirmUpgrade();case d.d.SetGoals:return this._loadSetGoals(e.source);case d.d.Performance:return this._loadPerformance();case he.Proofit:throw new Error(`Failed to load ${e} modal`);default:return Object(y.d)(e)}}_loadTour(){return(new Image).src=a("cppq"),Promise.all([a.e(0),a.e(25)]).then(a.bind(null,"w2B9")).then(({TourModal:e,getSteps:t})=>a=>{const n=new $.b(C.g.unsafeGet(this._userAccount.features.denali.tour),t(this._textResources),this._userAccount.settings,a);return{instance:{type:he.Tour},component:r.createElement(e,{tourViewModel:n})}})}_loadAddinPromo(){return Promise.all([a.e(0),a.e(34)]).then(a.bind(null,"Bx6M")).then(({AddinPromo:e})=>t=>{const a=new v.b(this._config,this._userAccount.settings,this._environment,t);return{instance:{type:he.AddinPromo},component:r.createElement(e,{addinPromoVM:a})}})}_loadWhatsNew(){return Promise.all([a.e(24).then(a.bind(null,"b9Qk")).then(({newsMedia:e,initStaticNewsData:t,ordNews:a})=>{const n=Object.values(t(this._textResources)).map(t=>({id:t.id,date:t.date,content:Object.assign({title:t.title,body:t.body},e[t.id])})),i=s.sort(a)(Object.values(n).filter(e=>this._userAccount.features.denali.newsConfig[e.id].visible()));return i.forEach(e=>{(new Image).src=P.a.Content.isVideo(e.content)?e.content.poster:e.content.image}),i}),Promise.all([a.e(0),a.e(37)]).then(a.bind(null,"CqKJ"))]).then(([e,{WhatsNewPopup:t}])=>a=>({instance:{type:he.WhatsNew},component:r.createElement(t,{newsVM:new P.b(this._userAccount.settings),content:e,modalOperations:a})}))}_loadSetGoals(e){return Promise.resolve(t=>{const a=function(e,t,a,i,r,s,d){const p={demoMode:e.features.demoMode,isFree:e.features.isFree.get()},m=Object(l.pipe)(t.defaultContext.get(),C.g.fold(()=>(R.Monitoring.Logging.getLogger("createSetGoalsFlow").warn("Default context not yet set, using fallback",d),d),o.identity)),h=H.a.create(t.context.get(),m,p,e.settings.enableSetGoalsLoader.get()),g=E.a.combine(h.showSetGoalsLoader,h.localContext,(e,t)=>({blocks:h.blocks,context:t,showOnLoad:e,features:p,source:s}));return u.a.fromSideEffect(o=>{switch(o.kind){case n.ActionsKind.open:i.gnarSpec.goalsPopupShow(i.pageId,o.source);break;case n.ActionsKind.upgrade:i.gnarSpec.getPremiumButtonClick(i.pageId,"setGoalsPopup"),a.openUpgradeUrl(W.a.Place.DenaliDocument.editorDenaliGoals);break;case n.ActionsKind.close:r.onClose(),t.updateContext(o.context)&&i.gnarSpec.goalsFormSuccess(Object(l.pipe)(o.context.domain,C.g.getOrElse(()=>m.domain)),Object(l.pipe)(o.context.emotions,C.g.getOrElse(()=>m.emotions),e=>Array.from(e)),Object(l.pipe)(o.context.goals,C.g.getOrElse(()=>m.goals),e=>Array.from(e)),i.pageId,s,C.g.toUndefined(o.context.audience),C.g.toUndefined(o.context.style)),e.settings.enableSetGoalsLoader.get()!==o.showOnLoad&&(e.settings.updateSetGoalsLoader(o.showOnLoad),i.gnarSpec.showGoalsNewDocumentFormSuccess(o.showOnLoad,i.pageId,s));break;case n.ActionsKind.reset:h.localContext.set(c.a.unset);break;case n.ActionsKind.showOnLoadChanged:h.showSetGoalsLoader.set(o.value);break;default:Object(y.d)(o)}},g)}(this._userAccount,this._documentContext,this._upgradeViewModel,this._telemetry,t,e,c.a.defaultContextFallback);return{instance:{type:d.d.SetGoals,source:e},component:u.b.mount(n.Modal,a)}})}_loadPreferences(){const e=new N(this._userAccount.settings,this._categoriesModel,this._userAccount.features.denali,this._telemetry);return Promise.resolve(t=>({instance:{type:he.Preferences},component:r.createElement(ne,{preferencesViewModel:e,modalOperations:t})}))}_loadFeedback(){return Promise.resolve(e=>({instance:{type:he.Feedback},component:r.createElement(Z,{feedbackViewModel:this._feedbackViewModel,modalOperations:e})}))}_loadDunning(){return Promise.all([a.e(0),a.e(36)]).then(a.bind(null,"Edy/")).then(({DunningPopup:e})=>t=>{const a=new A(this._userAccount,this._config,this._environment,this._telemetry);return{instance:{type:he.Dunning},component:r.createElement(e,{dunningViewModel:a,modalOperations:t})}})}_loadConfirmUpgrade(){return Object(i.__awaiter)(this,void 0,void 0,(function*(){const{ConfirmUpgradeModal:e}=yield a.e(35).then(a.bind(null,"mrj1"));return t=>{const a=Object(l.pipe)(this._router.query.get("premiumDemoDocId"),C.g.filter(e=>""!==e&&e!==this._documentModel.id),C.g.map(e=>new _(t,this._telemetry,this._environment,this._config,e)),C.g.getOrElse(Object(o.constant)(new k(t,this._telemetry))));return{instance:{type:he.ConfirmUpgrade},component:r.createElement(e,{model:a})}}}))}_loadPerformance(){return Promise.resolve(e=>{const t=new B(this._reportViewModel,this._documentModel,this._notificationsManager,e),a=u.b.Knot.make(b.a.ModalView,{downloadButton:u.b.Node.make(()=>r.createElement(G.b,{reportViewModel:t.reportViewModel,state:t.state}))}),n=u.a.fromSideEffect(t=>{switch(t.action.kind){case b.a.ActionsKind.close:e.onClose();break;default:Object(y.d)(t.action.kind)}},t.state.pipe(f.a.map(e=>({root:e}))));return{instance:{type:d.d.Performance},component:u.b.mount(a,n)}})}_loadChangePlanModal(e){return Promise.resolve(t=>{const a=new S.a(e,t,this._notificationsManager,this._telemetry);return{instance:{type:he.ChangePlan,model:e},component:r.createElement(U,{changePlanViewModel:a})}})}}},x02P:function(e){e.exports={v:"5.1.9",fr:50,ip:0,op:70,w:64,h:64,nm:"Hide animation",ddd:0,assets:[{id:"comp_2",layers:[{ddd:0,ind:1,ty:4,nm:"Line",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[17,41,0],ix:2},a:{a:0,k:[6,2,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,1],[6,1]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.650979995728,.678430974483,.788235008717,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:1,ix:5},lc:2,lj:2,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[200,200],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:70,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Line",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[22,35,0],ix:2},a:{a:0,k:[11,2,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,1],[11,1]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.650979995728,.678430974483,.788235008717,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:1,ix:5},lc:2,lj:2,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[200,200],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:70,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Line",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[22,29,0],ix:2},a:{a:0,k:[11,2,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,1],[11,1]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.650979995728,.678430974483,.788235008717,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:1,ix:5},lc:2,lj:2,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[200,200],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:70,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Line",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[22,23,0],ix:2},a:{a:0,k:[11,2,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,1],[11,1]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.650979995728,.678430974483,.788235008717,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:1,ix:5},lc:2,lj:2,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[200,200],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:70,st:0,bm:0},{ddd:0,ind:5,ty:4,nm:"Line",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[22,17,0],ix:2},a:{a:0,k:[11,2,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,1],[11,1]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.650979995728,.678430974483,.788235008717,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:1,ix:5},lc:2,lj:2,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[200,200],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:70,st:0,bm:0}]}],layers:[{ddd:0,ind:1,ty:4,nm:"Sidebar",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:21,s:[100],e:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:30,s:[0],e:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:39,s:[0],e:[100]},{t:49}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},n:"0p833_0p833_0p167_0p167",t:6,s:[53.021,40,0],e:[58.021,40,0],to:[.83333331346512,0,0],ti:[-.83333331346512,0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},n:"0p833_0p833_0p167_0p167",t:30,s:[58.021,40,0],e:[58.021,40,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},n:"0p833_0p833_0p167_0p167",t:39,s:[58.021,40,0],e:[53.021,40,0],to:[-.83333331346512,0,0],ti:[.83333331346512,0,0]},{t:65}],ix:2},a:{a:0,k:[21.021,-2,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:1,k:[{i:{x:[.833,.833],y:[.833,.833]},o:{x:[.167,.167],y:[.167,.167]},n:["0p833_0p833_0p167_0p167","0p833_0p833_0p167_0p167"],t:6,s:[12,24],e:[4,24]},{i:{x:[.833,.833],y:[.833,.833]},o:{x:[.167,.167],y:[.167,.167]},n:["0p833_0p833_0p167_0p167","0p833_0p833_0p167_0p167"],t:30,s:[4,24],e:[4,24]},{i:{x:[.833,.833],y:[.833,.833]},o:{x:[.167,.167],y:[.167,.167]},n:["0p833_0p833_0p167_0p167","0p833_0p833_0p167_0p167"],t:39,s:[4,24],e:[12,24]},{t:65}],ix:2},p:{a:0,k:[0,-11],ix:3},r:{a:0,k:1,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"st",c:{a:0,k:[.650980392157,.678431372549,.788235353956,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[21.079,-11.922],ix:2},a:{a:0,k:[7.057,-9.922],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:2,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:70,st:0,bm:0},{ddd:0,ind:2,ty:0,nm:"text",refId:"comp_2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},n:"0p833_0p833_0p167_0p167",t:6,s:[32,32,0],e:[42.25,32,0],to:[1.70833337306976,0,0],ti:[0,0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},n:"0p833_0p833_0p167_0p167",t:35,s:[42.25,32,0],e:[32,32,0],to:[0,0,0],ti:[1.70833337306976,0,0]},{t:65}],ix:2},a:{a:0,k:[32,32,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ef:[{ty:5,nm:"Position - Smoothness",np:3,mn:"ADBE Slider Control",ix:1,en:1,ef:[{ty:0,nm:"Slider",mn:"ADBE Slider Control-0001",ix:1,v:{a:0,k:4,ix:1,x:"var $bm_rt;\n$bm_rt = clamp(value, 0, 100);"}}]},{ty:5,nm:"Position - Blend Precision",np:3,mn:"ADBE Slider Control",ix:2,en:1,ef:[{ty:0,nm:"Slider",mn:"ADBE Slider Control-0001",ix:1,v:{a:0,k:25,ix:1,x:"var $bm_rt;\n$bm_rt = clamp(value, 0, 100);"}}]},{ty:5,nm:"Position - Blend On/Off",np:3,mn:"ADBE Checkbox Control",ix:3,en:1,ef:[{ty:7,nm:"Checkbox",mn:"ADBE Checkbox Control-0001",ix:1,v:{a:0,k:1,ix:1}}]},{ty:5,nm:"Position - Smoothness",np:3,mn:"ADBE Slider Control",ix:4,en:1,ef:[{ty:0,nm:"Slider",mn:"ADBE Slider Control-0001",ix:1,v:{a:0,k:4,ix:1,x:"var $bm_rt;\n$bm_rt = clamp(value, 0, 100);"}}]},{ty:5,nm:"Position - Blend Precision",np:3,mn:"ADBE Slider Control",ix:5,en:1,ef:[{ty:0,nm:"Slider",mn:"ADBE Slider Control-0001",ix:1,v:{a:0,k:25,ix:1,x:"var $bm_rt;\n$bm_rt = clamp(value, 0, 100);"}}]},{ty:5,nm:"Position - Blend On/Off",np:3,mn:"ADBE Checkbox Control",ix:6,en:1,ef:[{ty:7,nm:"Checkbox",mn:"ADBE Checkbox Control-0001",ix:1,v:{a:0,k:1,ix:1}}]}],w:64,h:64,ip:0,op:70,st:0,bm:0}],markers:[]}},x7eB:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("ERkP"),r=a("I7vG"),s=a("lrqh"),o=a("gy42"),l=a("zR/0"),c=a("1gzW");!function(e){e.Manager=({children:t,remSize:a})=>{const n=o.b.toObservable(a).pipe(l.a.shareReplay({refCount:!0,bufferSize:1}));return c.a.useSingleton("RemSize.Manager"),c.a.useSubscriptionTo(n),i.createElement(e.Context.Provider,{value:n},t)},e.DefaultManager=({children:t})=>(c.a.useSingleton("RemSize.DefaultManager"),i.createElement(e.Manager,{remSize:e.withRemSizeEffect(e.defaultSizeObserver)},t)),e.defaultSizeObserver=l.a.combineLatestStatic(o.a.matchMedia("(max-width: 1359px)"),o.a.matchMedia("(min-width: 1600px)"),(e,t)=>e?14:t?18:16),e.withRemSizeEffect=(t,a=e.defaultFontSizeSetter)=>t.pipe(l.a.tap(e=>a(s.g.some(e))),l.a.finalize(a.bind(null,s.g.none)),l.a.shareReplay({refCount:!0,bufferSize:1})),e.defaultFontSizeSetter=t=>{e.setRootCssVar(document.documentElement,t),e.setRootFontSize(t)},e.Context=i.createContext(e.defaultSizeObserver),e.setRootCssVar=(e,t)=>{e.style.setProperty("--rem",Object(r.pipe)(t,s.g.map(String),s.g.orNull))},e.setRootFontSize=e=>{document.documentElement.style.fontSize=Object(r.pipe)(e,s.g.map(e=>e+"px"),s.g.orNull)}}(n||(n={}))},x98X:function(e,t,a){e.exports=a.p+"files/db93eceba2b0e3ad6331500e393c0ec8/ring-48.png"},xdtP:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("ERkP"),i=a("dP+m");const r={MLA:"https://owl.purdue.edu/owl/research_and_citation/mla_style/mla_formatting_and_style_guide/mla_works_cited_electronic_sources.html",APA:"https://owl.purdue.edu/owl/research_and_citation/apa_style/apa_formatting_and_style_guide/reference_list_electronic_sources.html",Chicago:"https://owl.purdue.edu/owl/research_and_citation/chicago_manual_17th_edition/cmos_formatting_and_style_guide/web_sources.html"},s=e=>({type:t})=>n.createElement(i.a,{href:r[t],className:e},t)},yA7V:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("BbAu"),r=a("OA+g"),s=a("I7vG"),o=a("PK5a"),l=a("7b34"),c=a("lrqh"),d=a("tn8Q"),p=a("v0pb"),u=a("Xo/A"),m=a("lSTv");!function(e){let t;!function(e){e.show=l.a.getShow(i.e,p.a.show),e.eq=l.a.getEq(p.a.Id.ord,p.a.ord),e.empty=()=>l.a.empty(),e.toRegistered=function(e){return l.a.fromMutation(t=>{Object(s.pipe)(e,l.a.forEach((e,a)=>p.a.isRegistered(e)&&t.set(a,c.m.left(e)),(e,a,n)=>{p.a.isRegistered(e)?p.a.isRegistered(a)?t.set(n,c.m.both(e,a)):t.set(n,c.m.left(e)):p.a.isRegistered(a)&&t.set(n,c.m.right(a))},(e,a)=>p.a.isRegistered(e)&&t.set(a,c.m.right(e))))})},e.filter=function(e){return l.a.filter(e,(t,a)=>e(t)&&e(a),e)}}(t=e.Diff||(e.Diff={})),e.empty=u.a.iso.wrap(u.a.empty),e.eq=o.getEq(u.a.eqShow),e.get=function(e){return Object(r.flow)(u.a.iso.unwrap,u.a.get(e))},e.reduce=function(e,t){return Object(r.flow)(u.a.iso.unwrap,u.a.reduce(e,t))},e.diff=function(e,t){return u.a.diff(u.a.iso.unwrap(e),u.a.iso.unwrap(t))},e.isEmpty=function(e){return 0===u.a.iso.unwrap(e).entries.size},e.find=function(e){return Object(r.flow)(u.a.iso.unwrap,u.a.find(e))},e.size=function(){return Object(r.flow)(u.a.iso.unwrap,u.a.size)},e.from=function(e){return Object(s.pipe)(u.a.createDiff({added:e.reduce((e,t)=>e.set(t.id,p.a.create(t)),new Map)}),d.a.recover(r.constVoid),m.a.applyDiff,c.j.map(Object(r.flow)(d.a.recover(r.constVoid),u.a.iso.wrap)))(u.a.empty)}}(n||(n={}))},yNQd:function(e,t){window.MutationObserver=window.MutationObserver||function(e){function t(e){this.i=[],this.m=e}function a(t){var a,n={type:null,target:null,addedNodes:[],removedNodes:[],previousSibling:null,nextSibling:null,attributeName:null,attributeNamespace:null,oldValue:null};for(a in t)n[a]!==e&&t[a]!==e&&(n[a]=t[a]);return n}function n(t,n){var o=r(t,n);return function(c){var d,p=c.length;n.a&&3===t.nodeType&&t.nodeValue!==o.a&&c.push(new a({type:"characterData",target:t,oldValue:o.a})),n.b&&o.b&&i(c,t,o.b,n.f),(n.c||n.g)&&(d=function(t,n,r,o){function c(e,n,r,s,l){var c,p,u,m=e.length-1;for(l=-~((m-l)/2);u=e.pop();)c=r[u.j],p=s[u.l],o.c&&l&&Math.abs(u.j-u.l)>=m&&(t.push(a({type:"childList",target:n,addedNodes:[c],removedNodes:[c],nextSibling:c.nextSibling,previousSibling:c.previousSibling})),l--),o.b&&p.b&&i(t,c,p.b,o.f),o.a&&3===c.nodeType&&c.nodeValue!==p.a&&t.push(a({type:"characterData",target:c,oldValue:p.a})),o.g&&d(c,p)}function d(n,r){for(var u,m,h,g,f,b=n.childNodes,y=r.c,C=b.length,v=y?y.length:0,S=0,E=0,w=0;E<C||w<v;)(g=b[E])===(f=(h=y[w])&&h.node)?(o.b&&h.b&&i(t,g,h.b,o.f),o.a&&h.a!==e&&g.nodeValue!==h.a&&t.push(a({type:"characterData",target:g,oldValue:h.a})),m&&c(m,n,b,y,S),o.g&&(g.childNodes.length||h.c&&h.c.length)&&d(g,h),E++,w++):(p=!0,u||(u={},m=[]),g&&(u[h=s(g)]||(u[h]=!0,-1===(h=l(y,g,w,"node"))?o.c&&(t.push(a({type:"childList",target:n,addedNodes:[g],nextSibling:g.nextSibling,previousSibling:g.previousSibling})),S++):m.push({j:E,l:h})),E++),f&&f!==b[E]&&(u[h=s(f)]||(u[h]=!0,-1===(h=l(b,f,E))?o.c&&(t.push(a({type:"childList",target:r.node,removedNodes:[f],nextSibling:y[w+1],previousSibling:y[w-1]})),S--):m.push({j:h,l:w})),w++));m&&c(m,n,b,y,S)}var p;return d(n,r),p}(c,t,o,n)),(d||c.length!==p)&&(o=r(t,n))}}function i(t,n,i,r){for(var s,o,l={},c=n.attributes,p=c.length;p--;)o=(s=c[p]).name,r&&r[o]===e||(d(n,s)!==i[o]&&t.push(a({type:"attributes",target:n,attributeName:o,oldValue:i[o],attributeNamespace:s.namespaceURI})),l[o]=!0);for(o in i)l[o]||t.push(a({target:n,type:"attributes",attributeName:o,oldValue:i[o]}))}function r(e,t){var a=!0;return function e(n){var i={node:n};return!t.a||3!==n.nodeType&&8!==n.nodeType?(t.b&&a&&1===n.nodeType&&(i.b=o(n.attributes,(function(e,a){return t.f&&!t.f[a.name]||(e[a.name]=d(n,a)),e}))),a&&(t.c||t.a||t.b&&t.g)&&(i.c=function(e,t){for(var a=[],n=0;n<e.length;n++)a[n]=t(e[n],n,e);return a}(n.childNodes,e)),a=t.g):i.a=n.nodeValue,i}(e)}function s(e){try{return e.id||(e.mo_id=e.mo_id||p++)}catch(t){try{return e.nodeValue}catch(e){return p++}}}function o(e,t){for(var a={},n=0;n<e.length;n++)a=t(a,e[n],n,e);return a}function l(e,t,a,n){for(;a<e.length;a++)if((n?e[a][n]:e[a])===t)return a;return-1}t._period=30,t.prototype={observe:function(e,a){for(var i={b:!!(a.attributes||a.attributeFilter||a.attributeOldValue),c:!!a.childList,g:!!a.subtree,a:!(!a.characterData&&!a.characterDataOldValue)},r=this.i,s=0;s<r.length;s++)r[s].s===e&&r.splice(s,1);a.attributeFilter&&(i.f=o(a.attributeFilter,(function(e,t){return e[t]=!0,e}))),r.push({s:e,o:n(e,i)}),this.h||function(e){!function a(){var n=e.takeRecords();n.length&&e.m(n,e),e.h=setTimeout(a,t._period)}()}(this)},takeRecords:function(){for(var e=[],t=this.i,a=0;a<t.length;a++)t[a].o(e);return e},disconnect:function(){this.i=[],clearTimeout(this.h),this.h=null}};var c=document.createElement("i");c.style.top=0;var d=(c="null"!=c.attributes.style.value)?function(e,t){return t.value}:function(e,t){return"style"!==t.name?t.value:e.style.cssText},p=1;return t}(void 0)},yRCP:function(e,t,a){e.exports=a.p+"files/ebef654642ae42ba62e081cb7c9799d1/inter-bolditalic.woff"},yZqL:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("ERkP"),i=a("vOOZ"),r=a("9NHN"),s=a("6gXa"),o=a("rq0W"),l=a("3bJT");const c=e=>{const{shade:t}=Object(o.c)(e.visualState);n.useEffect(()=>{t||e.onFocus()},[]);const a=e.theme||{};return n.createElement(i.a.div,{className:a.container},e.header,n.createElement(i.a.div,{className:a.innerContainer},n.createElement(i.a.div,Object.assign({},Object(r.c)(b.wrapper,a.wrapper),{onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut}),n.createElement(i.a.div,Object.assign({},Object(r.c)(b.grid,a.content)),n.createElement(i.a.div,Object.assign({},Object(r.c)(b.mainContent,a.contentBody)),e.body),n.createElement("div",{className:b.footerContent},e.footer),n.createElement("div",{className:b.actions},e.subActions,n.createElement("div",{className:b.spacerOne}),e.navigation,n.createElement("div",{className:b.spacerFloat}),e.mainActions))),e.extra))},d={position:"relative"},p={padding:`${s.a.rem(1)} ${s.a.rem(.5)} ${s.a.rem(.75)} ${s.a.rem(1)}`},u={padding:`0 ${s.a.rem(.5)} 0 ${s.a.rem(1)}`,$nest:{"& > * + *":{marginTop:s.a.rem(.75)}}},m={padding:`0 ${s.a.rem(.5)} 0 ${s.a.rem(1)}`,$nest:{"& > * + *":{marginTop:s.a.rem(.75)}}},h={display:"flex",marginLeft:s.a.rem(.5),justifyContent:"space-between",$nest:{"& > *":{flexShrink:0}}},g={width:s.a.rem(1),flexShrink:1},f={$nest:{"& > * + *":{marginTop:s.a.rem(.75)}}},b=Object.assign(Object.assign({},s.a.stylesheet({mainContent:[u],footerContent:[m],actions:[h],spacerOne:[g],spacerFloat:[{flex:1}],grid:[f]})),{fullCard:s.a.joinClasses([l.b.fullCardSelector,s.a.style(d)]),wrapper:s.a.joinClasses([l.b.fullCardSelector,s.a.style(d,p)])})},yrKE:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return d}));var n=a("ERkP"),i=a("vOOZ"),r=a("9NHN"),s=a("Kt6o"),o=a("6gXa");const l=({theme:e={}})=>n.createElement(i.a.div,Object.assign({},Object(r.c)(d.container,e.container)),n.createElement(i.a.div,Object.assign({},Object(r.c)(d.swoosh,e.animation)))),c=o.a.keyframes({to:{backgroundPosition:"0 100%"}}),d=o.a.prefixedStylesheet("ai-animation-v2",{container:[{position:"relative",width:o.a.rem(2),height:o.a.rem(2),display:"inline-block"}],swoosh:[{position:"absolute",left:0,right:0,top:0,bottom:0,animationName:c,animationTimingFunction:"steps(119, start)",animationFillMode:"forwards",animationDuration:o.a.seconds(2),animationIterationCount:"infinite",background:`transparent url('${s.a}swoosh.png') 0 0 no-repeat`,backgroundSize:o.a.percent(100)}]})},ythQ:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return y}));var n=a("ERkP"),i=a("OA+g"),r=a("I7vG"),s=a("vOOZ"),o=a("9NHN"),l=a("bYZB"),c=a("nnns"),d=a("BnIB"),p=a("tZ26"),u=a("lrqh"),m=a("6fbX"),h=a("E/Yu"),g=a("zGI0"),f=a("MfJJ");const b=({viewModel:e})=>n.createElement(s.a.div,{className:f.wrapper},n.createElement(c.a.Ghost,{className:f.toolbarBtn,name:"head",animationMode:d.a.FromCenter,title:e.head.title,active:e.head.active,onClick:e.head.onClick},n.createElement(p.d.Formatting.Head,null)),e.visualState.view(t=>t===h.a.VisualState.Expanded&&n.createElement(C,{viewModel:e,theme:{panel:Object(o.c)(f.panel,f.panelAnimateIn).className,item:f.item,separator:f.separator}}))),y=({viewModel:e})=>n.createElement(C,{viewModel:e,theme:{panel:f.panelHorizontal,item:f.itemMini,itemIcon:f.iconMini,separator:f.verticalSeparator}}),C=({viewModel:e,theme:t})=>n.createElement("div",{key:"formatting-wrapper",className:t.panel},e.list.map((e,a)=>g.a.Item.isViewItem(e)?n.createElement(v,{theme:{itemClass:t.item,iconClass:t.itemIcon},key:a,item:e}):n.createElement("div",{key:a,className:t.separator}))),v=({item:e,theme:t})=>{const a=E(e.name,t.iconClass);return n.createElement(c.a,{name:`rtfToolbar-${e.name}`,title:n.createElement(S,{item:e,labelClass:a.labelClass}),titleAlign:"topCenter",active:e.active,className:t.itemClass,key:e.name,onClick:e.onClick},a.icon)},S=({item:e,labelClass:t})=>n.createElement("div",{className:f.tooltip},e.tooltip.map(e=>n.createElement("span",Object.assign({},Object(o.c)(f.label,t)),e)).orNull(),Object(r.pipe)(e.nestedItem,u.g.map(e=>e.fold(e=>n.createElement("span",{className:f.hotkeyLabel},e),i.constVoid)),u.g.toNullable)),E=(e,t)=>{switch(e){case l.e.Type.bold:return{icon:n.createElement(p.d.Formatting.Bold,{className:t}),labelClass:f.bold};case l.e.Type.italic:return{icon:n.createElement(p.d.Formatting.Italic,{className:t}),labelClass:f.italic};case l.e.Type.underline:return{icon:n.createElement(p.d.Formatting.Underline,{className:t}),labelClass:f.underline};case l.e.Type.header1:return{icon:n.createElement(p.d.Formatting.Header1,{className:t}),labelClass:f.h1};case l.e.Type.header2:return{icon:n.createElement(p.d.Formatting.Header2,{className:t}),labelClass:f.h2};case l.e.Type.link:return{icon:n.createElement(p.d.Formatting.Link,{className:t}),labelClass:f.link};case l.e.Type.bulletList:return{icon:n.createElement(p.d.Formatting.BulletList,{className:t})};case l.e.Type.orderedList:return{icon:n.createElement(p.d.Formatting.OrderedList,{className:t})};case"clear":return{icon:n.createElement(p.d.Formatting.Clear,{className:t})};default:return Object(m.d)(e)}}},z1Kw:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("ERkP"),i=a("rk+4"),r=a("nnns"),s=a("BugA"),o=a("hoSD"),l=a("XUeO");const c=({payload:e,close:t})=>{const a=n.useContext(i.a.Context);return n.createElement("div",null,n.createElement(s.H3,null,a.proofitSuccessModal.title),n.createElement("div",{className:l.timeWrapper},n.createElement(s.H2,{className:l.time,"data-name":"success-time"},o.d.Local.shortTime(e.dueDate)),n.createElement("div",{className:l.date,"data-name":"success-date"},o.d.Local.fullDate(e.dueDate))),n.createElement(s.Base,{className:l.description},a.proofitSuccessModal.description(e.email)),n.createElement(r.a.Primary,{name:"got-it",onClick:t},a.actions.gotIt))}},zGI0:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a("I7vG"),r=a("bYZB"),s=a("zR/0"),o=a("gy42"),l=a("lrqh");!function(e){let t,a;e.isItem=e=>"string"!=typeof e,function(e){e.isViewItem=e=>"string"!=typeof e}(t=e.Item||(e.Item={})),function(e){e.Hotkey="Hotkey",e.View="View"}(a=e.Source||(e.Source={})),e.bindHotkeys=(t,a,n,c)=>c.pipe(s.a.distinctUntilChanged(),s.a.switchMap(o.b.orEmpty(s.a.mergeStatic(...a.map(a=>Object(i.pipe)(a.hotkey,l.g.fold(()=>s.a.EMPTY,i=>s.a.from(i).pipe(s.a.mergeMap(i=>n.bindHotkey(i).pipe(s.a.map(()=>[a.name,r.g.toTextRange(t.getCursor()),e.Source.Hotkey]))))))))))),e.toMenuEvents=(e,{events:t})=>t.pipe(s.a.map(t=>[t,r.g.toTextRange(e.getCursor()),a.View])),e.linkEvents=function(e,t){return e.pipe(s.a.mergeMap(([e,a,n])=>o.b.toObservable(t[e].call(null,a,n))))}}(n||(n={}))},zN6a:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return g}));var n,i=a("I7vG"),r=a("LNSM"),s=a("GUi3"),o=a("dE97"),l=a("IyPE"),c=a("ksyn"),d=a("yA7V"),p=a("AMXJ"),u=a("lrqh"),m=a("D9EC"),h=a("PrA7");!function(e){e.Mock=class{constructor(){this.advancedAlerts=r.a.create(u.g.none),this.openUpgradeUrl=m.l,this.fromGbVoxUpHookLens=m.l,this.enableGBVoxHookLens=m.l}}}(n||(n={}));class g{constructor(e,t,a,n,r,l){this._checkingDomain=e,this._lensPreviewVM=t,this._docId=a,this._environment=n,this._upgradeHook=r,this._config=l,this._log=h.Monitoring.Logging.getLogger("UpgradeViewModel"),this.advancedAlerts=this._lensPreviewVM.getLens(s.a.SpecialId.Premium).view(({count:e})=>e>0?Object(i.pipe)(u.g.some({count:e,alerts:()=>this._formatLiteAlerts(this._getGroupedLiteAlerts(e=>o.a.isPremium(e)))}),u.g.filter(({alerts:e})=>Object(m.n)(e()))):u.g.none)}_formatLiteAlerts(e){const t=e.slice(0,5),a=e.slice(5).map(e=>e.count).reduce(m.s,0);return a>0?[...t,{group:"",category:"",categoryHuman:"more...",count:a}]:t}openUpgradeUrl(e){Object(i.pipe)(u.b.tryCatchError(()=>this._upgradeHook.fromDenaliDocument(e,this._docId,this._getGroupedLiteAlerts(Object(m.m)(o.a.isPlagiarism)),this._getGroupedLensAlerts(Object(m.m)(o.a.isPlagiarism)))),u.b.chain(this._environment.actions.openUrl),u.b.getOrElse(e=>this._log.fatal("unexpected error on open upgrade page",e)))}fromGbVoxUpHookLens(){Object(i.pipe)(u.b.tryCatchError(()=>this._upgradeHook.fromGbVoxUpHookLens()),u.b.chain(this._environment.actions.openPopup),u.b.getOrElse(e=>this._log.fatal("unexpected error on open upgrade page",e)))}enableGBVoxHookLens(){Object(i.pipe)(u.b.tryCatchError(()=>new p.a(this._config.account.styleGuide)),u.b.chain(this._environment.actions.openPopup),u.b.getOrElse(e=>this._log.fatal("unexpected error on open admin style guide page",e)))}_noRemovedFilter(e){return t=>!o.a.isRemoved(t)&&e(t)}_getGroupedLiteAlerts(e){return Object(i.pipe)(this._checkingDomain.state.get(),d.a.reduce([],(t,a)=>(this._noRemovedFilter(e)(a.alert)&&t.push(a.alert.toLiteAlert()),t)),l.a.group)}_getGroupedLensAlerts(e){return Object(i.pipe)(this._checkingDomain.state.get(),d.a.reduce([],(t,a)=>(this._noRemovedFilter(e)(a.alert)&&t.push(a.alert.toLensAlert()),t)),c.a.group)}}},zNQL:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("ERkP"),i=a("9NHN"),r=a("6gXa");const s=({double:e,triple:t,small:a})=>n.createElement("div",Object.assign({},Object(i.c)(o,e&&l,t&&c,a&&d))),o=r.a.joinClasses(["spacer",r.a.style({margin:0,minHeight:r.a.rem(.875),maxHeight:r.a.rem(1),width:r.a.percent(100),height:r.a.rem(1)})]),l=r.a.joinClasses(["spacerDouble",r.a.style({minHeight:r.a.rem(1.75),maxHeight:r.a.rem(2),height:r.a.rem(2)})]),c=r.a.joinClasses(["spacerTriple",r.a.style({minHeight:r.a.rem(2.625),maxHeight:r.a.rem(3),height:r.a.rem(3)})]),d=r.a.style({$nest:{"&.spacer":{minHeight:r.a.rem(.4375),maxHeight:r.a.rem(.5),height:r.a.rem(.5)},"&.spacerDouble":{minHeight:r.a.rem(.875),maxHeight:r.a.rem(1),height:r.a.rem(1)},"&.spacerTriple":{minHeight:r.a.rem(1.3125),maxHeight:r.a.rem(1.5),height:r.a.rem(1.5)}}})},zTZn:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a("ERkP"),i=a("vOOZ"),r=a("9NHN"),s=a("D9EC"),o=a("6fbX"),l=a("6gXa"),c=a("rk+4"),d=a("FuGm"),p=a("Sfi4"),u=a("zR/0");class m extends p.a{}const h=(e,t)=>{const a=e=>e+" "+O.transitionDelay;return e&&e.type===d.a.SuccessType.large&&t.type===d.a.SuccessType.small?{prev:{start:{main:O.fadeOutEnd,secondary:O.fadeOutEnd},end:{main:O.fadeOutEnd,secondary:O.fadeOutEnd}},next:{start:{main:O.visible,secondary:O.fadeInStart},end:{main:O.visible,secondary:O.fadeInEnd}}}:e&&e.type===d.a.SuccessType.small&&t.type===d.a.SuccessType.large?{prev:{start:{main:O.fadeOutEnd,secondary:O.fadeOutStart},end:{main:O.fadeOutEnd,secondary:O.fadeOutEnd}},next:{start:{main:O.visible,secondary:O.visible},end:{main:O.visible,secondary:O.visible}}}:{prev:{start:{main:O.fadeOutStart,secondary:O.fadeOutStart},end:{main:O.fadeOutEnd,secondary:O.fadeOutEnd}},next:{start:{main:a(O.fadeInStart),secondary:a(O.fadeInStart)},end:{main:a(O.fadeInEnd),secondary:a(O.fadeInEnd)}}}},g=(e,t,a,i=!1,r)=>{switch(t){case d.a.SuccessType.zero:return i?n.createElement(e.Birthday,{key:"nothing-to-check",animate:a,onComplete:r}):n.createElement(e.NothingToCheck,{key:"nothing-to-check",animate:a,onComplete:r});case d.a.SuccessType.small:case d.a.SuccessType.large:return n.createElement(e.NoIssuesFound,{key:"no-issues-found",animate:a,onComplete:r});case d.a.SuccessType.applied:case d.a.SuccessType.premiumOnboardingStart:case d.a.SuccessType.premiumOnboardingComplete:return n.createElement(e.EverythingIsClear,{key:"everything-is-clear",animate:a,onComplete:r});default:return Object(o.d)(t)}},f=({state:e,preventAnimation:t,illustrations:a,alertsListType:l,children:p})=>{const f=n.useContext(c.a.Context),b=e.get();return n.createElement(i.a.Fragment,null,a.view(a=>n.createElement(i.a.div,{className:O.successContainer},e.pipe(u.a.pairwise(),u.a.map(([e,i])=>((e,t,a,i=!0,r)=>{switch(t.type){case d.a.SuccessType.zero:return a.type===d.a.SuccessType.large||a.type===d.a.SuccessType.small?t.showBirthday?n.createElement(e.Birthday,{key:"no-issue-found-to-nothing-to-check",animate:i,onComplete:r}):n.createElement(e.NoIssueFoundToNothingToCheck,{key:"no-issue-found-to-nothing-to-check",animate:i}):g(e,t.type,i,t.showBirthday,r);case d.a.SuccessType.applied:return g(e,t.type,i,!1,r);case d.a.SuccessType.large:case d.a.SuccessType.small:return a.type===d.a.SuccessType.zero?n.createElement(e.NothingToNoIssueFound,{key:"nothing-to-no-issue-found",animate:i,onComplete:r}):g(e,t.type,i&&a.type!==d.a.SuccessType.large&&a.type!==d.a.SuccessType.small,!1,r);default:return Object(o.d)(t)}})(a,i,e,!t)),u.a.startWith(g(a,b.type,!t,b.type===d.a.SuccessType.zero&&b.showBirthday))),n.createElement(m,{className:O.animationWrapper,state:e.pipe(u.a.map(e=>((e,t,a)=>{const i=t.successLens;switch(e.type){case d.a.SuccessType.zero:return e.showBirthday?{type:d.a.SuccessType.zero,title:"It’s our birthday!",firstLine:n.createElement(n.Fragment,null,"Time to let ",n.createElement("s",null,"lose")," loose.")}:Object.assign(Object.assign({},i.emptyText),{type:d.a.SuccessType.zero});case d.a.SuccessType.small:return Object.assign(Object.assign({},"priority"===a?i.priorityFirstCheck:i.smallText),{type:d.a.SuccessType.small});case d.a.SuccessType.large:return Object.assign(Object.assign({},"priority"===a?i.priorityFirstCheck:i.largeText),{type:d.a.SuccessType.large});case d.a.SuccessType.applied:return{title:i.fixedText.titles[Object(s.q)(9)],type:d.a.SuccessType.applied,secondLine:e.nonPriorityAlertsLeft?e.isAllAlerts?t.priorityList.successState.allAlertsHint:t.priorityList.successState.outcomesHint:void 0};default:return Object(o.d)(e)}})(e,f,l))),stateToClassMapper:h},({state:e,view:t})=>n.createElement("div",{"data-name":"success-lens-text",key:e.type,className:O.textWrapper},n.createElement(i.a.div,Object.assign({},Object(r.c)(O.successTitle,t.pipe(u.a.map(e=>e.main)))),e.title),n.createElement("div",{className:O.successContent},n.createElement(i.a.div,{key:"firstLine",className:t.pipe(u.a.map(e=>e.main))},e.firstLine),n.createElement(i.a.div,{key:"secondLine",className:t.pipe(u.a.map(e=>e.secondary))},e.secondLine),p?n.createElement(i.a.span,Object.assign({},Object(r.c)(O.successText,t.pipe(u.a.map(e=>e.main)))),p):null))))))},b={display:"flex",flexDirection:"column",height:l.a.percent(100),justifyContent:"flex-start",alignItems:"center"},y={marginTop:l.a.rem(11.5)},C={marginTop:l.a.rem(2),textAlign:"center",wordSpacing:l.a.rem(.06),fontWeight:"bold",fontSize:l.a.rem(.9375)},v={marginTop:l.a.rem(.8),textAlign:"center",whiteSpace:"pre-line",wordSpacing:l.a.rem(.06),fontSize:l.a.rem(.875),lineHeight:l.a.rem(1.5)},S={position:"relative",display:"flex",width:l.a.percent(100),justifyContent:"center"},E={opacity:1,transition:`opacity ${l.a.seconds(.15)}`},w={opacity:0,transition:`opacity ${l.a.seconds(.15)}`},k={transitionDelay:l.a.seconds(.15)},_={right:l.a.rem(-.825)},O=l.a.stylesheet({successContainer:[b],successIcon:[y],successTitle:[C],successContent:[v],animationWrapper:[S],textWrapper:[{position:"absolute"}],fadeOutStart:[E],fadeOutEnd:[E,{opacity:0}],fadeInStart:[w],fadeInEnd:[w,{opacity:1}],visible:[{opacity:1}],transitionDelay:[k],backButton:[_],successText:[{display:"flex",flexDirection:"column",alignItems:"center"}]})}}]);